<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLists #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Conway.Imp.UtxosSpec</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spec"><span class="hs-identifier">spec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#Addr"><span class="hs-identifier">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html"><span class="hs-identifier">Cardano.Ledger.Allegra.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#RequireTimeStart"><span class="hs-identifier">RequireTimeStart</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Context.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.Plutus.Context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Context.html#EraPlutusContext"><span class="hs-identifier">EraPlutusContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.Plutus.Evaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#CollectError"><span class="hs-identifier">CollectError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#AlonzoUtxosPredFailure"><span class="hs-identifier">AlonzoUtxosPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxow.html#AlonzoUtxowPredFailure"><span class="hs-identifier">AlonzoUtxowPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.Rules.html"><span class="hs-identifier">Cardano.Ledger.Babbage.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.Rules.Utxo.html#BabbageUtxoPredFailure"><span class="hs-identifier">BabbageUtxoPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxInfo.html"><span class="hs-identifier">Cardano.Ledger.Babbage.TxInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxInfo.html#BabbageContextError"><span class="hs-identifier">BabbageContextError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Core.html"><span class="hs-identifier">Cardano.Ledger.Conway.Core</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html"><span class="hs-identifier">Cardano.Ledger.Conway.TxCert</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html"><span class="hs-identifier">Cardano.Ledger.Conway.TxInfo</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeReference"><span class="hs-identifier">StakeReference</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html"><span class="hs-identifier">Cardano.Ledger.DRep</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.html"><span class="hs-identifier">Cardano.Ledger.Plutus</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.html"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Utxow.html#ShelleyUtxowPredFailure"><span class="hs-identifier">ShelleyUtxowPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#TxId"><span class="hs-identifier">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier">mkTxInPartial</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.html"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.OSet.Strict.html"><span class="hs-identifier">Data.OSet.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OSet</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SSeq</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html"><span class="hs-identifier">Lens.Micro</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-ledger-api-1.54.0.0-cc90923e1d4848db7788cc174c20b16ae21e66915548bbaadb7b5dd5e94d4ab2/share/doc/html/src/PlutusLedgerApi.V1.html"><span class="hs-identifier">PlutusLedgerApi.V1</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P1</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html"><span class="hs-identifier">Test.Cardano.Ledger.Conway.ImpTest</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html"><span class="hs-identifier">Test.Cardano.Ledger.Imp.Common</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html"><span class="hs-identifier">Test.Cardano.Ledger.Plutus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier">testingCostModels</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html"><span class="hs-identifier">Test.Cardano.Ledger.Plutus.Examples</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsNoDatum"><span class="hs-identifier">alwaysFailsNoDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier">alwaysSucceedsNoDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#evenRedeemerNoDatum"><span class="hs-identifier">evenRedeemerNoDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier">redeemerSameAsDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spec"><span class="hs-identifier hs-type">spec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686863958"><span class="annot"><a href="#local-6989586621686863958"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686863958"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686863958"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span id="spec"><span class="annot"><span class="annottext">spec :: forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spec"><span class="hs-identifier hs-var hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="annottext">SpecWith (ImpInit (LedgerSpec era))
forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#govPolicySpec"><span class="hs-identifier hs-var">govPolicySpec</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="annottext">SpecWith (ImpInit (LedgerSpec era))
forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#costModelsSpec"><span class="hs-identifier hs-var">costModelsSpec</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="annottext">SpecWith (ImpInit (LedgerSpec era))
forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#datumAndReferenceInputsSpec"><span class="hs-identifier hs-var">datumAndReferenceInputsSpec</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="annottext">SpecWith (ImpInit (LedgerSpec era))
forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#conwayFeaturesPlutusV1V2FailureSpec"><span class="hs-identifier hs-var">conwayFeaturesPlutusV1V2FailureSpec</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Spending script without a Datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="annottext">[Language]
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html#eraMaxLanguage"><span class="hs-identifier hs-var">eraMaxLanguage</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686863958"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#Language"><span class="hs-identifier hs-type">Language</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621686864599"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621686864599"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-63"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Language -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621686864599"><span class="hs-identifier hs-var">lang</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-64"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686864602"><span class="annot"><span class="annottext">scriptHash :: ScriptHash
</span><a href="#local-6989586621686864602"><span class="hs-identifier hs-var hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Language
-&gt; (forall (l :: Language).
    PlutusLanguage l =&gt;
    SLanguage l -&gt; ScriptHash)
-&gt; ScriptHash
forall a.
Language
-&gt; (forall (l :: Language). PlutusLanguage l =&gt; SLanguage l -&gt; a)
-&gt; a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#withSLanguage"><span class="hs-identifier hs-var">withSLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621686864599"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash)
-&gt; (SLanguage l -&gt; Plutus l) -&gt; SLanguage l -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#evenRedeemerNoDatum"><span class="hs-identifier hs-var">evenRedeemerNoDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>            </span><span id="local-6989586621686864608"><span class="annot"><span class="annottext">addr :: Addr
</span><a href="#local-6989586621686864608"><span class="hs-identifier hs-var hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Network -&gt; PaymentCredential -&gt; StakeReference -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#Addr"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Testnet"><span class="hs-identifier hs-var">Testnet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; PaymentCredential
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686864602"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span>
</span><span id="line-66"></span><span>        </span><span id="local-6989586621686864613"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686864613"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Coin, Coin) -&gt; ImpM (LedgerSpec era) Coin
forall g (m :: * -&gt; *) a.
(HasStatefulGen g m, UniformRange a) =&gt;
(a, a) -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#uniformRM"><span class="hs-identifier hs-var">uniformRM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000_000</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100_000_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>        </span><span id="local-6989586621686864616"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686864616"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Addr -&gt; Coin -&gt; ImpTestM era TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr -&gt; Coin -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo"><span class="hs-identifier hs-var">sendCoinTo</span></a></span><span> </span><span class="annot"><span class="annottext">Addr
</span><a href="#local-6989586621686864608"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686864613"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686864618"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686864618"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621686864616"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621686864599"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="annot"><span class="annottext">Language -&gt; Language -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span>
</span><span id="line-70"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864618"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-71"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-72"></span><span>            </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-73"></span><span>              </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864618"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-74"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">AlonzoUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; AlonzoUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set TxIn -&gt; AlonzoUtxowPredFailure era
forall era. Set TxIn -&gt; AlonzoUtxowPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxow.html#UnspendableUTxONoDatumHash"><span class="hs-identifier hs-var">UnspendableUTxONoDatumHash</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621686864616"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-75"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#datumAndReferenceInputsSpec"><span class="hs-identifier hs-type">datumAndReferenceInputsSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686864628"><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span id="datumAndReferenceInputsSpec"><span class="annot"><span class="annottext">datumAndReferenceInputsSpec :: forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#datumAndReferenceInputsSpec"><span class="hs-identifier hs-var hs-var">datumAndReferenceInputsSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;can use reference scripts&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621686864980"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864980"><span class="hs-identifier hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; ImpTestM era TxId
forall era (l :: Language).
(BabbageEraTxOut era, AlonzoEraImp era, PlutusLanguage l) =&gt;
SLanguage l -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-var">setupRefTx</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621686864983"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864983"><span class="hs-identifier hs-var">referringTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Transaction that refers to the script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era (Tx era))
-&gt; Tx era -&gt; ImpTestM era (Tx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-87"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864980"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. BabbageEraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxBody.html#referenceInputsTxBodyL"><span class="hs-identifier hs-var">referenceInputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864980"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864983"><span class="hs-identifier hs-var">referringTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
-&gt; Getting
     (Map ScriptHash (Script era))
     (Tx era)
     (Map ScriptHash (Script era))
-&gt; Map ScriptHash (Script era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
-&gt; Tx era -&gt; Const (Map ScriptHash (Script era)) (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
Lens' (Tx era) (TxWits era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#witsTxL"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
 -&gt; Tx era -&gt; Const (Map ScriptHash (Script era)) (Tx era))
-&gt; ((Map ScriptHash (Script era)
     -&gt; Const
          (Map ScriptHash (Script era)) (Map ScriptHash (Script era)))
    -&gt; TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
-&gt; Getting
     (Map ScriptHash (Script era))
     (Tx era)
     (Map ScriptHash (Script era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map ScriptHash (Script era)
 -&gt; Const
      (Map ScriptHash (Script era)) (Map ScriptHash (Script era)))
-&gt; TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era)
forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Map ScriptHash (Script era))
Lens' (TxWits era) (Map ScriptHash (Script era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#scriptTxWitsL"><span class="hs-identifier hs-var">scriptTxWitsL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map ScriptHash (Script era)
-&gt; Map ScriptHash (Script era) -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Map ScriptHash (Script era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;can use regular inputs for reference&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621686864992"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864992"><span class="hs-identifier hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; ImpTestM era TxId
forall era (l :: Language).
(BabbageEraTxOut era, AlonzoEraImp era, PlutusLanguage l) =&gt;
SLanguage l -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-var">setupRefTx</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span id="local-6989586621686864993"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864993"><span class="hs-identifier hs-var">referringTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-93"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Consuming transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era (Tx era))
-&gt; Tx era -&gt; ImpTestM era (Tx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-95"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span>
</span><span id="line-96"></span><span>            </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; Set TxIn
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span>
</span><span id="line-97"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864992"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-98"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864992"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-99"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864993"><span class="hs-identifier hs-var">referringTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
-&gt; Getting
     (Map ScriptHash (Script era))
     (Tx era)
     (Map ScriptHash (Script era))
-&gt; Map ScriptHash (Script era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
-&gt; Tx era -&gt; Const (Map ScriptHash (Script era)) (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
Lens' (Tx era) (TxWits era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#witsTxL"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
 -&gt; Tx era -&gt; Const (Map ScriptHash (Script era)) (Tx era))
-&gt; ((Map ScriptHash (Script era)
     -&gt; Const
          (Map ScriptHash (Script era)) (Map ScriptHash (Script era)))
    -&gt; TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era))
-&gt; Getting
     (Map ScriptHash (Script era))
     (Tx era)
     (Map ScriptHash (Script era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map ScriptHash (Script era)
 -&gt; Const
      (Map ScriptHash (Script era)) (Map ScriptHash (Script era)))
-&gt; TxWits era -&gt; Const (Map ScriptHash (Script era)) (TxWits era)
forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Map ScriptHash (Script era))
Lens' (TxWits era) (Map ScriptHash (Script era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#scriptTxWitsL"><span class="hs-identifier hs-var">scriptTxWitsL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map ScriptHash (Script era)
-&gt; Map ScriptHash (Script era) -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Map ScriptHash (Script era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fails with same txIn in regular inputs and reference inputs (PlutusV1)&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-102"></span><span>    </span><span id="local-6989586621686864995"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864995"><span class="hs-identifier hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; ImpTestM era TxId
forall era (l :: Language).
(BabbageEraTxOut era, AlonzoEraImp era, PlutusLanguage l) =&gt;
SLanguage l -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-var">setupRefTx</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-104"></span><span>      </span><span id="local-6989586621686864996"><span class="annot"><span class="annottext">consumingTx :: Tx era
</span><a href="#local-6989586621686864996"><span class="hs-identifier hs-var hs-var">consumingTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-106"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span>
</span><span id="line-107"></span><span>            </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; Set TxIn
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span>
</span><span id="line-108"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864995"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-109"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864995"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-110"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-111"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. BabbageEraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxBody.html#referenceInputsTxBodyL"><span class="hs-identifier hs-var">referenceInputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864995"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686864997"><span class="annot"><span class="annottext">badTxIns :: NonEmpty TxIn
</span><a href="#local-6989586621686864997"><span class="hs-identifier hs-var hs-var">badTxIns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686864995"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; [TxIn] -&gt; NonEmpty TxIn
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, MinVersion &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersionAtMost"><span class="hs-identifier hs-var">whenMajorVersionAtMost</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864996"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-117"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (BabbageUtxoPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; BabbageUtxoPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BabbageUtxoPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
BabbageUtxoPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(BabbageUtxoPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; BabbageUtxoPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty TxIn -&gt; BabbageUtxoPredFailure era
forall era. NonEmpty TxIn -&gt; BabbageUtxoPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.Rules.Utxo.html#BabbageNonDisjointRefInputs"><span class="hs-identifier hs-var">BabbageNonDisjointRefInputs</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty TxIn
</span><a href="#local-6989586621686864997"><span class="hs-identifier hs-var">badTxIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- consumingTx uses PlutusV1 script, so it should be a success</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, MinVersion &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersionAtLeast"><span class="hs-identifier hs-var">whenMajorVersionAtLeast</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686864996"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fails when using inline datums for PlutusV1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865004"><span class="annot"><span class="annottext">shSpending :: ScriptHash
</span><a href="#local-6989586621686865004"><span class="hs-identifier hs-var hs-var">shSpending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621686865005"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621686865005"><span class="hs-identifier hs-var">refTxOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) (TxOut era)
forall era.
(BabbageEraTxOut era, AlonzoEraImp era) =&gt;
ScriptHash -&gt; ImpTestM era (TxOut era)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#mkRefTxOut"><span class="hs-identifier hs-var">mkRefTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686865004"><span class="hs-identifier hs-var">shSpending</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865007"><span class="annot"><span class="annottext">producingTx :: Tx era
</span><a href="#local-6989586621686865007"><span class="hs-identifier hs-var hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>          </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-127"></span><span>            </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-128"></span><span>              </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxOut era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut era] -&gt; StrictSeq (TxOut era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-129"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [TxOut era]
TxOut era
</span><a href="#local-6989586621686865005"><span class="hs-identifier hs-var">refTxOut</span></a></span><span>
</span><span id="line-130"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; TxOut era
forall era. AlonzoEraTxOut era =&gt; ScriptHash -&gt; TxOut era
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-var">scriptLockedTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686865004"><span class="hs-identifier hs-var">shSpending</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Data era) -&gt; Identity (StrictMaybe (Data era)))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
BabbageEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe (Data era))
Lens' (TxOut era) (StrictMaybe (Data era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxOut.html#dataTxOutL"><span class="hs-identifier hs-var">dataTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe (Data era) -&gt; Identity (StrictMaybe (Data era)))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe (Data era) -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Data era -&gt; StrictMaybe (Data era)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Data -&gt; Data era
forall era. Era era =&gt; Data -&gt; Data era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="annot"><span class="annottext">Data
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spendDatum"><span class="hs-identifier hs-var">spendDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall a t. (HasCallStack, ToExpr a) =&gt; a -&gt; ImpM t ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#logToExpr"><span class="hs-identifier hs-var">logToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865007"><span class="hs-identifier hs-var">producingTx</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span id="local-6989586621686865016"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865016"><span class="hs-identifier hs-var">producingTxId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; TxId) -&gt; ImpTestM era (Tx era) -&gt; ImpTestM era TxId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Producing transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865007"><span class="hs-identifier hs-var">producingTx</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-135"></span><span>      </span><span id="local-6989586621686865019"><span class="annot"><span class="annottext">lockedTxIn :: TxIn
</span><a href="#local-6989586621686865019"><span class="hs-identifier hs-var hs-var">lockedTxIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865016"><span class="hs-identifier hs-var">producingTxId</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-136"></span><span>      </span><span id="local-6989586621686865020"><span class="annot"><span class="annottext">consumingTx :: Tx era
</span><a href="#local-6989586621686865020"><span class="hs-identifier hs-var hs-var">consumingTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-138"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686865019"><span class="hs-identifier hs-var">lockedTxIn</span></a></span><span>
</span><span id="line-139"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. BabbageEraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxBody.html#referenceInputsTxBodyL"><span class="hs-identifier hs-var">referenceInputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865016"><span class="hs-identifier hs-var">producingTxId</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Consuming transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-141"></span><span>      </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865020"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (AlonzoUtxosPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-144"></span><span>            </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span>
</span><span id="line-145"></span><span>              </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ContextError era -&gt; Item [CollectError era]
ContextError era -&gt; CollectError era
forall era. ContextError era -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#BadTranslation"><span class="hs-identifier hs-var">BadTranslation</span></a></span><span> </span><span class="annot"><span class="annottext">(ContextError era -&gt; Item [CollectError era])
-&gt; (TxOutSource -&gt; ContextError era)
-&gt; TxOutSource
-&gt; Item [CollectError era]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BabbageContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">(BabbageContextError era -&gt; ContextError era)
-&gt; (TxOutSource -&gt; BabbageContextError era)
-&gt; TxOutSource
-&gt; ContextError era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall era. TxOutSource -&gt; BabbageContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxInfo.html#InlineDatumsNotSupported"><span class="hs-identifier hs-var">InlineDatumsNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutSource -&gt; Item [CollectError era])
-&gt; TxOutSource -&gt; Item [CollectError era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxOutSource
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.TxInfo.html#TxOutFromInput"><span class="hs-identifier hs-var">TxOutFromInput</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686865019"><span class="hs-identifier hs-var">lockedTxIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-146"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fails with same txIn in regular inputs and reference inputs (PlutusV3)&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>    </span><span id="local-6989586621686865027"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865027"><span class="hs-identifier hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; ImpTestM era TxId
forall era (l :: Language).
(BabbageEraTxOut era, AlonzoEraImp era, PlutusLanguage l) =&gt;
SLanguage l -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-var">setupRefTx</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-150"></span><span>      </span><span id="local-6989586621686865029"><span class="annot"><span class="annottext">consumingTx :: Tx era
</span><a href="#local-6989586621686865029"><span class="hs-identifier hs-var hs-var">consumingTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-151"></span><span>        </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-152"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span>
</span><span id="line-153"></span><span>            </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; Set TxIn
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span>
</span><span id="line-154"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865027"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-155"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865027"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-156"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-157"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. BabbageEraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxBody.html#referenceInputsTxBodyL"><span class="hs-identifier hs-var">referenceInputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865027"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865030"><span class="annot"><span class="annottext">badTxIns :: NonEmpty TxIn
</span><a href="#local-6989586621686865030"><span class="hs-identifier hs-var hs-var">badTxIns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865027"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; [TxIn] -&gt; NonEmpty TxIn
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, MinVersion &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersionAtMost"><span class="hs-identifier hs-var">whenMajorVersionAtMost</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-160"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865029"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-162"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (BabbageUtxoPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; BabbageUtxoPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BabbageUtxoPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
BabbageUtxoPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(BabbageUtxoPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; BabbageUtxoPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty TxIn -&gt; BabbageUtxoPredFailure era
forall era. NonEmpty TxIn -&gt; BabbageUtxoPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.Rules.Utxo.html#BabbageNonDisjointRefInputs"><span class="hs-identifier hs-var">BabbageNonDisjointRefInputs</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty TxIn
</span><a href="#local-6989586621686865030"><span class="hs-identifier hs-var">badTxIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, MinVersion &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersionAtLeast"><span class="hs-identifier hs-var">whenMajorVersionAtLeast</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-164"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-165"></span><span>        </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865029"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-166"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-167"></span><span>            </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ContextError era -&gt; Item [CollectError era]
ContextError era -&gt; CollectError era
forall era. ContextError era -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#BadTranslation"><span class="hs-identifier hs-var">BadTranslation</span></a></span><span> </span><span class="annot"><span class="annottext">(ContextError era -&gt; Item [CollectError era])
-&gt; (ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era
-&gt; Item [CollectError era]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; Item [CollectError era])
-&gt; ConwayContextError era -&gt; Item [CollectError era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall era. NonEmpty TxIn -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#ReferenceInputsNotDisjointFromInputs"><span class="hs-identifier hs-var">ReferenceInputsNotDisjointFromInputs</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty TxIn
</span><a href="#local-6989586621686865030"><span class="hs-identifier hs-var">badTxIns</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fails when using inline datums for PlutusV1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865033"><span class="annot"><span class="annottext">shSpending :: ScriptHash
</span><a href="#local-6989586621686865033"><span class="hs-identifier hs-var hs-var">shSpending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621686865034"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621686865034"><span class="hs-identifier hs-var">refTxOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) (TxOut era)
forall era.
(BabbageEraTxOut era, AlonzoEraImp era) =&gt;
ScriptHash -&gt; ImpTestM era (TxOut era)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#mkRefTxOut"><span class="hs-identifier hs-var">mkRefTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686865033"><span class="hs-identifier hs-var">shSpending</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621686865035"><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865035"><span class="hs-identifier hs-var">producingTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-173"></span><span>      </span><span class="annot"><span class="annottext">(Tx era -&gt; TxId) -&gt; ImpTestM era (Tx era) -&gt; ImpTestM era TxId
forall a b.
(a -&gt; b) -&gt; ImpM (LedgerSpec era) a -&gt; ImpM (LedgerSpec era) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era (Tx era) -&gt; ImpTestM era TxId)
-&gt; (Tx era -&gt; ImpTestM era (Tx era)) -&gt; Tx era -&gt; ImpTestM era TxId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Producing transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era TxId) -&gt; Tx era -&gt; ImpTestM era TxId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-174"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-175"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-176"></span><span>            </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxOut era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut era] -&gt; StrictSeq (TxOut era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-177"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [TxOut era]
TxOut era
</span><a href="#local-6989586621686865034"><span class="hs-identifier hs-var">refTxOut</span></a></span><span>
</span><span id="line-178"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; TxOut era
forall era. AlonzoEraTxOut era =&gt; ScriptHash -&gt; TxOut era
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-var">scriptLockedTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686865033"><span class="hs-identifier hs-var">shSpending</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Data era) -&gt; Identity (StrictMaybe (Data era)))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
BabbageEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe (Data era))
Lens' (TxOut era) (StrictMaybe (Data era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxOut.html#dataTxOutL"><span class="hs-identifier hs-var">dataTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe (Data era) -&gt; Identity (StrictMaybe (Data era)))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe (Data era) -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Data era -&gt; StrictMaybe (Data era)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Data -&gt; Data era
forall era. Era era =&gt; Data -&gt; Data era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="annot"><span class="annottext">Data
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spendDatum"><span class="hs-identifier hs-var">spendDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-181"></span><span>      </span><span id="local-6989586621686865036"><span class="annot"><span class="annottext">lockedTxIn :: TxIn
</span><a href="#local-6989586621686865036"><span class="hs-identifier hs-var hs-var">lockedTxIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865035"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-182"></span><span>      </span><span id="local-6989586621686865037"><span class="annot"><span class="annottext">consumingTx :: Tx era
</span><a href="#local-6989586621686865037"><span class="hs-identifier hs-var hs-var">consumingTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-183"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-184"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686865036"><span class="hs-identifier hs-var">lockedTxIn</span></a></span><span>
</span><span id="line-185"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. BabbageEraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxBody.html#referenceInputsTxBodyL"><span class="hs-identifier hs-var">referenceInputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; TxId -&gt; Integer -&gt; TxIn
TxId -&gt; Integer -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#mkTxInPartial"><span class="hs-identifier hs-var">mkTxInPartial</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686865035"><span class="hs-identifier hs-var">producingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Consuming transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686865037"><span class="hs-identifier hs-var">consumingTx</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (AlonzoUtxosPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-190"></span><span>            </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span>
</span><span id="line-191"></span><span>              </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ContextError era -&gt; Item [CollectError era]
ContextError era -&gt; CollectError era
forall era. ContextError era -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#BadTranslation"><span class="hs-identifier hs-var">BadTranslation</span></a></span><span> </span><span class="annot"><span class="annottext">(ContextError era -&gt; Item [CollectError era])
-&gt; (TxOutSource -&gt; ContextError era)
-&gt; TxOutSource
-&gt; Item [CollectError era]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BabbageContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">(BabbageContextError era -&gt; ContextError era)
-&gt; (TxOutSource -&gt; BabbageContextError era)
-&gt; TxOutSource
-&gt; ContextError era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall era. TxOutSource -&gt; BabbageContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxInfo.html#InlineDatumsNotSupported"><span class="hs-identifier hs-var">InlineDatumsNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864628"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutSource -&gt; Item [CollectError era])
-&gt; TxOutSource -&gt; Item [CollectError era]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxOutSource
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.TxInfo.html#TxOutFromInput"><span class="hs-identifier hs-var">TxOutFromInput</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686865036"><span class="hs-identifier hs-var">lockedTxIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#conwayFeaturesPlutusV1V2FailureSpec"><span class="hs-identifier hs-type">conwayFeaturesPlutusV1V2FailureSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686865038"><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span id="conwayFeaturesPlutusV1V2FailureSpec"><span class="annot"><span class="annottext">conwayFeaturesPlutusV1V2FailureSpec :: forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#conwayFeaturesPlutusV1V2FailureSpec"><span class="hs-identifier hs-var hs-var">conwayFeaturesPlutusV1V2FailureSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Conway features fail in Plutusdescribe v1 and v2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsupported Fields&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CurrentTreasuryValue&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-203"></span><span>          </span><span id="local-6989586621686865590"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865590"><span class="hs-identifier hs-var">donation</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Coin
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-204"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era)
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Coin -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865590"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>          </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) ()
forall era. (ShelleyEraImp era, HasCallStack) =&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-var">passEpoch</span></a></span><span>
</span><span id="line-206"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; StrictMaybe Coin
-&gt; Lens' (TxBody era) (StrictMaybe Coin)
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-207"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; StrictMaybe Coin
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865590"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>            </span><span class="annot"><span class="annottext">(StrictMaybe Coin -&gt; f (StrictMaybe Coin))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (StrictMaybe Coin)
Lens' (TxBody era) (StrictMaybe Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#currentTreasuryValueTxBodyL"><span class="hs-identifier hs-var">currentTreasuryValueTxBodyL</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Coin -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#CurrentTreasuryFieldNotSupported"><span class="hs-identifier hs-var">CurrentTreasuryFieldNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865590"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-212"></span><span>          </span><span id="local-6989586621686865600"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865600"><span class="hs-identifier hs-var">donation</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Coin
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-213"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era)
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Coin -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865600"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>          </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) ()
forall era. (ShelleyEraImp era, HasCallStack) =&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-var">passEpoch</span></a></span><span>
</span><span id="line-215"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; StrictMaybe Coin
-&gt; Lens' (TxBody era) (StrictMaybe Coin)
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-216"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; StrictMaybe Coin
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865600"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>            </span><span class="annot"><span class="annottext">(StrictMaybe Coin -&gt; f (StrictMaybe Coin))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (StrictMaybe Coin)
Lens' (TxBody era) (StrictMaybe Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#currentTreasuryValueTxBodyL"><span class="hs-identifier hs-var">currentTreasuryValueTxBodyL</span></a></span><span>
</span><span id="line-219"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Coin -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#CurrentTreasuryFieldNotSupported"><span class="hs-identifier hs-var">CurrentTreasuryFieldNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865600"><span class="hs-identifier hs-var">donation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;VotingProcedures&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>          </span><span id="local-6989586621686865605"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686865605"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era (GovAction era)
forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkMinFeeUpdateGovAction"><span class="hs-identifier hs-var">mkMinFeeUpdateGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-223"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621686865608"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686865608"><span class="hs-identifier hs-var">ccCred</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Credential 'HotCommitteeRole]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-224"></span><span>          </span><span id="local-6989586621686865610"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686865610"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686865605"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-225"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865612"><span class="annot"><span class="annottext">badField :: VotingProcedures era
</span><a href="#local-6989586621686865612"><span class="hs-identifier hs-var hs-var">badField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>                </span><span class="annot"><span class="annottext">Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
forall era.
Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedures"><span class="hs-identifier hs-var">VotingProcedures</span></a></span><span>
</span><span id="line-227"></span><span>                  </span><span class="annot"><span class="annottext">(Map Voter (Map GovActionId (VotingProcedure era))
 -&gt; VotingProcedures era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Voter
-&gt; Map GovActionId (VotingProcedure era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span>
</span><span id="line-228"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteeVoter"><span class="hs-identifier hs-var">CommitteeVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686865608"><span class="hs-identifier hs-var">ccCred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>                  </span><span class="annot"><span class="annottext">(Map GovActionId (VotingProcedure era)
 -&gt; Map Voter (Map GovActionId (VotingProcedure era)))
-&gt; Map GovActionId (VotingProcedure era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
-&gt; VotingProcedure era -&gt; Map GovActionId (VotingProcedure era)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686865610"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-230"></span><span>                  </span><span class="annot"><span class="annottext">(VotingProcedure era -&gt; Map GovActionId (VotingProcedure era))
-&gt; VotingProcedure era -&gt; Map GovActionId (VotingProcedure era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; StrictMaybe Anchor -&gt; VotingProcedure era
forall era. Vote -&gt; StrictMaybe Anchor -&gt; VotingProcedure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedure"><span class="hs-identifier hs-var">VotingProcedure</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VoteYes"><span class="hs-identifier hs-var">VoteYes</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-231"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; VotingProcedures era
-&gt; Lens' (TxBody era) (VotingProcedures era)
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-232"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><span class="annottext">VotingProcedures era
</span><a href="#local-6989586621686865612"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-234"></span><span>            </span><span class="annot"><span class="annottext">(VotingProcedures era -&gt; f (VotingProcedures era))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (VotingProcedures era)
Lens' (TxBody era) (VotingProcedures era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#votingProceduresTxBodyL"><span class="hs-identifier hs-var">votingProceduresTxBodyL</span></a></span><span>
</span><span id="line-235"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-236"></span><span>            </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VotingProcedures era -&gt; ConwayContextError era
forall era. VotingProcedures era -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#VotingProceduresFieldNotSupported"><span class="hs-identifier hs-var">VotingProceduresFieldNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">VotingProcedures era
</span><a href="#local-6989586621686865612"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-237"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-238"></span><span>          </span><span id="local-6989586621686865623"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686865623"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era (GovAction era)
forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkMinFeeUpdateGovAction"><span class="hs-identifier hs-var">mkMinFeeUpdateGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-239"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621686865624"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686865624"><span class="hs-identifier hs-var">ccCred</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Credential 'HotCommitteeRole]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-240"></span><span>          </span><span id="local-6989586621686865625"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686865625"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686865623"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-241"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865626"><span class="annot"><span class="annottext">badField :: VotingProcedures era
</span><a href="#local-6989586621686865626"><span class="hs-identifier hs-var hs-var">badField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-242"></span><span>                </span><span class="annot"><span class="annottext">Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
forall era.
Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedures"><span class="hs-identifier hs-var">VotingProcedures</span></a></span><span>
</span><span id="line-243"></span><span>                  </span><span class="annot"><span class="annottext">(Map Voter (Map GovActionId (VotingProcedure era))
 -&gt; VotingProcedures era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Voter
-&gt; Map GovActionId (VotingProcedure era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span>
</span><span id="line-244"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteeVoter"><span class="hs-identifier hs-var">CommitteeVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686865624"><span class="hs-identifier hs-var">ccCred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>                  </span><span class="annot"><span class="annottext">(Map GovActionId (VotingProcedure era)
 -&gt; Map Voter (Map GovActionId (VotingProcedure era)))
-&gt; Map GovActionId (VotingProcedure era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
-&gt; VotingProcedure era -&gt; Map GovActionId (VotingProcedure era)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686865625"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-246"></span><span>                  </span><span class="annot"><span class="annottext">(VotingProcedure era -&gt; Map GovActionId (VotingProcedure era))
-&gt; VotingProcedure era -&gt; Map GovActionId (VotingProcedure era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; StrictMaybe Anchor -&gt; VotingProcedure era
forall era. Vote -&gt; StrictMaybe Anchor -&gt; VotingProcedure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedure"><span class="hs-identifier hs-var">VotingProcedure</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VoteYes"><span class="hs-identifier hs-var">VoteYes</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-247"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; VotingProcedures era
-&gt; Lens' (TxBody era) (VotingProcedures era)
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-248"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>            </span><span class="annot"><span class="annottext">VotingProcedures era
</span><a href="#local-6989586621686865626"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-250"></span><span>            </span><span class="annot"><span class="annottext">(VotingProcedures era -&gt; f (VotingProcedures era))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (VotingProcedures era)
Lens' (TxBody era) (VotingProcedures era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#votingProceduresTxBodyL"><span class="hs-identifier hs-var">votingProceduresTxBodyL</span></a></span><span>
</span><span id="line-251"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-252"></span><span>            </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VotingProcedures era -&gt; ConwayContextError era
forall era. VotingProcedures era -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#VotingProceduresFieldNotSupported"><span class="hs-identifier hs-var">VotingProceduresFieldNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">VotingProcedures era
</span><a href="#local-6989586621686865626"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ProposalProcedures&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-255"></span><span>          </span><span id="local-6989586621686865630"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865630"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionDepositL"><span class="hs-identifier hs-var">ppGovActionDepositL</span></a></span><span>
</span><span id="line-256"></span><span>          </span><span id="local-6989586621686865640"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686865640"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-257"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865642"><span class="annot"><span class="annottext">badField :: OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865642"><span class="hs-identifier hs-var hs-var">badField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; OSet (ProposalProcedure era)
forall a. a -&gt; OSet a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.OSet.Strict.html#singleton"><span class="hs-identifier hs-var">OSet.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposalProcedure era -&gt; OSet (ProposalProcedure era))
-&gt; ProposalProcedure era -&gt; OSet (ProposalProcedure era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Coin
-&gt; RewardAccount
-&gt; GovAction era
-&gt; Anchor
-&gt; ProposalProcedure era
forall era.
Coin
-&gt; RewardAccount
-&gt; GovAction era
-&gt; Anchor
-&gt; ProposalProcedure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-var">ProposalProcedure</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865630"><span class="hs-identifier hs-var">deposit</span></a></span><span> </span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686865640"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
forall era. GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#InfoAction"><span class="hs-identifier hs-var">InfoAction</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-258"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; OSet (ProposalProcedure era)
-&gt; Lens' (TxBody era) (OSet (ProposalProcedure era))
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-259"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>            </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865642"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-261"></span><span>            </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era) -&gt; f (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span>
</span><span id="line-262"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-263"></span><span>            </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era) -&gt; ConwayContextError era
forall era. OSet (ProposalProcedure era) -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#ProposalProceduresFieldNotSupported"><span class="hs-identifier hs-var">ProposalProceduresFieldNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865642"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-264"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>          </span><span id="local-6989586621686865651"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865651"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionDepositL"><span class="hs-identifier hs-var">ppGovActionDepositL</span></a></span><span>
</span><span id="line-266"></span><span>          </span><span id="local-6989586621686865657"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686865657"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-267"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686865658"><span class="annot"><span class="annottext">badField :: OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865658"><span class="hs-identifier hs-var hs-var">badField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; OSet (ProposalProcedure era)
forall a. a -&gt; OSet a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.OSet.Strict.html#singleton"><span class="hs-identifier hs-var">OSet.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposalProcedure era -&gt; OSet (ProposalProcedure era))
-&gt; ProposalProcedure era -&gt; OSet (ProposalProcedure era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Coin
-&gt; RewardAccount
-&gt; GovAction era
-&gt; Anchor
-&gt; ProposalProcedure era
forall era.
Coin
-&gt; RewardAccount
-&gt; GovAction era
-&gt; Anchor
-&gt; ProposalProcedure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-var">ProposalProcedure</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686865651"><span class="hs-identifier hs-var">deposit</span></a></span><span> </span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686865657"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
forall era. GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#InfoAction"><span class="hs-identifier hs-var">InfoAction</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-268"></span><span>          </span><span class="annot"><span class="annottext">ScriptHash
-&gt; OSet (ProposalProcedure era)
-&gt; Lens' (TxBody era) (OSet (ProposalProcedure era))
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-269"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>            </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865658"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-271"></span><span>            </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era) -&gt; f (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; f (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span>
</span><span id="line-272"></span><span>            </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-273"></span><span>            </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era) -&gt; ConwayContextError era
forall era. OSet (ProposalProcedure era) -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#ProposalProceduresFieldNotSupported"><span class="hs-identifier hs-var">ProposalProceduresFieldNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">OSet (ProposalProcedure era)
</span><a href="#local-6989586621686865658"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-274"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TreasuryDonation&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span>
</span><span id="line-276"></span><span>          </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
-&gt; Coin
-&gt; Lens' (TxBody era) Coin
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-277"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>            </span><span class="annot"><span class="annottext">(Coin -&gt; f Coin) -&gt; TxBody era -&gt; f (TxBody era)
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span>
</span><span id="line-280"></span><span>          </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-281"></span><span>          </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall era. Coin -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#TreasuryDonationFieldNotSupported"><span class="hs-identifier hs-var">TreasuryDonationFieldNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-282"></span><span>          </span><span class="annot"><span class="annottext">(Coin -&gt; ConwayContextError era) -&gt; Coin -&gt; ConwayContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000</span></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span>
</span><span id="line-284"></span><span>          </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
-&gt; Coin
-&gt; Lens' (TxBody era) Coin
-&gt; ContextError era
-&gt; ImpM (LedgerSpec era) ()
forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var">testPlutusV1V2Failure</span></a></span><span>
</span><span id="line-285"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>            </span><span class="annot"><span class="annottext">(Coin -&gt; f Coin) -&gt; TxBody era -&gt; f (TxBody era)
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span>
</span><span id="line-288"></span><span>          </span><span class="annot"><span class="annottext">(ContextError era -&gt; ImpM (LedgerSpec era) ())
-&gt; ContextError era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall era. Coin -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#TreasuryDonationFieldNotSupported"><span class="hs-identifier hs-var">TreasuryDonationFieldNotSupported</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-290"></span><span>          </span><span class="annot"><span class="annottext">(Coin -&gt; ConwayContextError era) -&gt; Coin -&gt; ConwayContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000</span></span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Certificates&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Translated&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868771"><span class="annot"><span class="annottext">testCertificateTranslated :: TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868771"><span class="hs-identifier hs-var hs-var">testCertificateTranslated</span></a></span></span><span> </span><span id="local-6989586621686868772"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868772"><span class="hs-identifier hs-var">okCert</span></a></span></span><span> </span><span id="local-6989586621686868773"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686868773"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-294"></span><span>              </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span>
</span><span id="line-295"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-296"></span><span>                    </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span>
</span><span id="line-297"></span><span>                      </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686868773"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-298"></span><span>                    </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-299"></span><span>                      </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868772"><span class="hs-identifier hs-var">okCert</span></a></span><span>
</span><span id="line-300"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RegDepositTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-302"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-303"></span><span>            </span><span id="local-6989586621686868776"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868776"><span class="hs-identifier hs-var">stakingC</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking -&gt; Credential 'Staking)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Staking)
-&gt; ImpM (LedgerSpec era) (Credential 'Staking)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-304"></span><span>            </span><span id="local-6989586621686868779"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868779"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-305"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868786"><span class="annot"><span class="annottext">regDepositTxCert :: TxCert era
</span><a href="#local-6989586621686868786"><span class="hs-identifier hs-var hs-var">regDepositTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositTxCert"><span class="hs-identifier hs-var">RegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868776"><span class="hs-identifier hs-var">stakingC</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868779"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-306"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era, Eq (Event (EraRule &quot;TICK&quot; era)),
 Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868771"><span class="hs-identifier hs-var">testCertificateTranslated</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868786"><span class="hs-identifier hs-var">regDepositTxCert</span></a></span><span>
</span><span id="line-307"></span><span>              </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-309"></span><span>            </span><span id="local-6989586621686868790"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868790"><span class="hs-identifier hs-var">stakingC</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking -&gt; Credential 'Staking)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Staking)
-&gt; ImpM (LedgerSpec era) (Credential 'Staking)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span id="local-6989586621686868791"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868791"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-311"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868797"><span class="annot"><span class="annottext">regDepositTxCert :: TxCert era
</span><a href="#local-6989586621686868797"><span class="hs-identifier hs-var hs-var">regDepositTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositTxCert"><span class="hs-identifier hs-var">RegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868790"><span class="hs-identifier hs-var">stakingC</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868791"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-312"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era, Eq (Event (EraRule &quot;TICK&quot; era)),
 Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868771"><span class="hs-identifier hs-var">testCertificateTranslated</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868797"><span class="hs-identifier hs-var">regDepositTxCert</span></a></span><span>
</span><span id="line-313"></span><span>              </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UnRegDepositTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-315"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-316"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686868798"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686868798"><span class="hs-identifier hs-var">_poolKH</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686868799"><span class="annot"><span class="annottext">PaymentCredential
</span><a href="#local-6989586621686868799"><span class="hs-identifier hs-var">_spendingC</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686868800"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868800"><span class="hs-identifier hs-var">stakingC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
forall era.
ConwayEraImp era =&gt;
Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier hs-var">setupPoolWithStake</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin
 -&gt; ImpTestM
      era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking))
-&gt; Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-317"></span><span>            </span><span id="local-6989586621686868802"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868802"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-318"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868808"><span class="annot"><span class="annottext">unRegDepositTxCert :: TxCert era
</span><a href="#local-6989586621686868808"><span class="hs-identifier hs-var hs-var">unRegDepositTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDepositTxCert"><span class="hs-identifier hs-var">UnRegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868800"><span class="hs-identifier hs-var">stakingC</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868802"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-319"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era, Eq (Event (EraRule &quot;TICK&quot; era)),
 Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868771"><span class="hs-identifier hs-var">testCertificateTranslated</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868808"><span class="hs-identifier hs-var">unRegDepositTxCert</span></a></span><span>
</span><span id="line-320"></span><span>              </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-322"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686868810"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686868810"><span class="hs-identifier hs-var">_poolKH</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686868811"><span class="annot"><span class="annottext">PaymentCredential
</span><a href="#local-6989586621686868811"><span class="hs-identifier hs-var">_spendingC</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686868812"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868812"><span class="hs-identifier hs-var">stakingC</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
forall era.
ConwayEraImp era =&gt;
Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier hs-var">setupPoolWithStake</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin
 -&gt; ImpTestM
      era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking))
-&gt; Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, PaymentCredential, Credential 'Staking)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-323"></span><span>            </span><span id="local-6989586621686868813"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868813"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin
 -&gt; ImpM (LedgerSpec era) Coin)
-&gt; SimpleGetter (NewEpochState era) Coin
-&gt; ImpM (LedgerSpec era) Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-324"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868819"><span class="annot"><span class="annottext">unRegDepositTxCert :: TxCert era
</span><a href="#local-6989586621686868819"><span class="hs-identifier hs-var hs-var">unRegDepositTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDepositTxCert"><span class="hs-identifier hs-var">UnRegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686868812"><span class="hs-identifier hs-var">stakingC</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686868813"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-325"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era, Eq (Event (EraRule &quot;TICK&quot; era)),
 Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868771"><span class="hs-identifier hs-var">testCertificateTranslated</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868819"><span class="hs-identifier hs-var">unRegDepositTxCert</span></a></span><span>
</span><span id="line-326"></span><span>              </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsupported&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-328"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686868820"><span class="annot"><span class="annottext">testCertificateNotSupportedV1 :: TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var hs-var">testCertificateNotSupportedV1</span></a></span></span><span> </span><span id="local-6989586621686868821"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868821"><span class="hs-identifier hs-var">badCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-329"></span><span>              </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era,
 Inject (ConwayContextError era) (ContextError era),
 Eq (Event (EraRule &quot;TICK&quot; era)), Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era)),
 InjectRuleFailure &quot;LEDGER&quot; AlonzoUtxosPredFailure era) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868822"><span class="hs-identifier hs-var">testCertificateNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868821"><span class="hs-identifier hs-var">badCert</span></a></span><span>
</span><span id="line-330"></span><span>                </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV1 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV1 -&gt; ScriptHash) -&gt; Plutus 'PlutusV1 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Plutus 'PlutusV1
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>            </span><span id="local-6989586621686868823"><span class="annot"><span class="annottext">testCertificateNotSupportedV2 :: TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var hs-var">testCertificateNotSupportedV2</span></a></span></span><span> </span><span id="local-6989586621686868824"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868824"><span class="hs-identifier hs-var">badCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-332"></span><span>              </span><span class="annot"><span class="annottext">TxCert era -&gt; TxIn -&gt; ImpM (LedgerSpec era) ()
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraImp era,
 Inject (ConwayContextError era) (ContextError era),
 Eq (Event (EraRule &quot;TICK&quot; era)), Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era)),
 InjectRuleFailure &quot;LEDGER&quot; AlonzoUtxosPredFailure era) =&gt;
TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868822"><span class="hs-identifier hs-var">testCertificateNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686868824"><span class="hs-identifier hs-var">badCert</span></a></span><span>
</span><span id="line-333"></span><span>                </span><span class="annot"><span class="annottext">(TxIn -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxIn -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Plutus 'PlutusV2 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus 'PlutusV2 -&gt; ScriptHash) -&gt; Plutus 'PlutusV2 -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Plutus 'PlutusV2
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>            </span><span id="local-6989586621686868822"><span class="annot"><span class="annottext">testCertificateNotSupported :: TxCert era -&gt; TxIn -&gt; ImpTestM era ()
</span><a href="#local-6989586621686868822"><span class="hs-identifier hs-var hs-var">testCertificateNotSupported</span></a></span></span><span> </span><span id="local-6989586621686871654"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871654"><span class="hs-identifier hs-var">badCert</span></a></span></span><span> </span><span id="local-6989586621686871655"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686871655"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-335"></span><span>              </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-336"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-337"></span><span>                    </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span>
</span><span id="line-338"></span><span>                      </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686871655"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-339"></span><span>                    </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-340"></span><span>                      </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871654"><span class="hs-identifier hs-var">badCert</span></a></span><span>
</span><span id="line-341"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (AlonzoUtxosPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-343"></span><span>                    </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span>
</span><span id="line-344"></span><span>                      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ContextError era -&gt; CollectError era
forall era. ContextError era -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#BadTranslation"><span class="hs-identifier hs-var">BadTranslation</span></a></span><span> </span><span class="annot"><span class="annottext">(ContextError era -&gt; CollectError era)
-&gt; ContextError era -&gt; CollectError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-345"></span><span>                          </span><span class="annot"><span class="annottext">ConwayContextError era -&gt; ContextError era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">(ConwayContextError era -&gt; ContextError era)
-&gt; ConwayContextError era -&gt; ContextError era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-346"></span><span>                            </span><span class="annot"><span class="annottext">TxCert era -&gt; ConwayContextError era
forall era. TxCert era -&gt; ConwayContextError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxInfo.html#CertificateNotSupported"><span class="hs-identifier hs-var">CertificateNotSupported</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871654"><span class="hs-identifier hs-var">badCert</span></a></span><span>
</span><span id="line-347"></span><span>                      </span><span class="hs-special">]</span><span>
</span><span id="line-348"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DelegTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871657"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871657"><span class="hs-identifier hs-var">drep</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686871658"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686871658"><span class="hs-identifier hs-var">delegator</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-352"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871660"><span class="annot"><span class="annottext">delegTxCert :: TxCert era
</span><a href="#local-6989586621686871660"><span class="hs-identifier hs-var hs-var">delegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-353"></span><span>                  </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegTxCert"><span class="hs-identifier hs-var">DelegTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-354"></span><span>                    </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686871658"><span class="hs-identifier hs-var">delegator</span></a></span><span>
</span><span id="line-355"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871657"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871660"><span class="hs-identifier hs-var">delegTxCert</span></a></span><span>
</span><span id="line-357"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-358"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871664"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871664"><span class="hs-identifier hs-var">drep</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686871665"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686871665"><span class="hs-identifier hs-var">delegator</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-359"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871666"><span class="annot"><span class="annottext">delegTxCert :: TxCert era
</span><a href="#local-6989586621686871666"><span class="hs-identifier hs-var hs-var">delegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-360"></span><span>                  </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegTxCert"><span class="hs-identifier hs-var">DelegTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-361"></span><span>                    </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686871665"><span class="hs-identifier hs-var">delegator</span></a></span><span>
</span><span id="line-362"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871664"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871666"><span class="hs-identifier hs-var">delegTxCert</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RegDepositDelegTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-365"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-366"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871667"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871667"><span class="hs-identifier hs-var">drep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-367"></span><span>            </span><span id="local-6989586621686871668"><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686871668"><span class="hs-identifier hs-var">unregisteredDelegatorKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-368"></span><span>            </span><span id="local-6989586621686871669"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871669"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-369"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871673"><span class="annot"><span class="annottext">regDepositDelegTxCert :: TxCert era
</span><a href="#local-6989586621686871673"><span class="hs-identifier hs-var hs-var">regDepositDelegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-370"></span><span>                  </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositDelegTxCert"><span class="hs-identifier hs-var">RegDepositDelegTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-371"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686871668"><span class="hs-identifier hs-var">unregisteredDelegatorKH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871667"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871669"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871673"><span class="hs-identifier hs-var">regDepositDelegTxCert</span></a></span><span>
</span><span id="line-375"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-376"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871675"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871675"><span class="hs-identifier hs-var">drep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-377"></span><span>            </span><span id="local-6989586621686871676"><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686871676"><span class="hs-identifier hs-var">unregisteredDelegatorKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-378"></span><span>            </span><span id="local-6989586621686871677"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871677"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-379"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871681"><span class="annot"><span class="annottext">regDepositDelegTxCert :: TxCert era
</span><a href="#local-6989586621686871681"><span class="hs-identifier hs-var hs-var">regDepositDelegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-380"></span><span>                  </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositDelegTxCert"><span class="hs-identifier hs-var">RegDepositDelegTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-381"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686871676"><span class="hs-identifier hs-var">unregisteredDelegatorKH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871675"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871677"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871681"><span class="hs-identifier hs-var">regDepositDelegTxCert</span></a></span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;AuthCommitteeHotKeyTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-387"></span><span>            </span><span id="local-6989586621686871682"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871682"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#elements"><span class="hs-identifier hs-var">elements</span></a></span><span> </span><span class="annot"><span class="annottext">([Credential 'ColdCommitteeRole]
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; (Set (Credential 'ColdCommitteeRole)
    -&gt; [Credential 'ColdCommitteeRole])
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; [Credential 'ColdCommitteeRole]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-388"></span><span>            </span><span id="local-6989586621686871686"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686871686"><span class="hs-identifier hs-var">hotKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-389"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871687"><span class="annot"><span class="annottext">authCommitteeHotKeyTxCert :: TxCert era
</span><a href="#local-6989586621686871687"><span class="hs-identifier hs-var hs-var">authCommitteeHotKeyTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole
-&gt; Credential 'HotCommitteeRole -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#AuthCommitteeHotKeyTxCert"><span class="hs-identifier hs-var">AuthCommitteeHotKeyTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871682"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686871686"><span class="hs-identifier hs-var">hotKey</span></a></span><span>
</span><span id="line-390"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871687"><span class="hs-identifier hs-var">authCommitteeHotKeyTxCert</span></a></span><span>
</span><span id="line-391"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-392"></span><span>            </span><span id="local-6989586621686871689"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871689"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#elements"><span class="hs-identifier hs-var">elements</span></a></span><span> </span><span class="annot"><span class="annottext">([Credential 'ColdCommitteeRole]
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; (Set (Credential 'ColdCommitteeRole)
    -&gt; [Credential 'ColdCommitteeRole])
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; [Credential 'ColdCommitteeRole]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-393"></span><span>            </span><span id="local-6989586621686871690"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686871690"><span class="hs-identifier hs-var">hotKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-394"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871691"><span class="annot"><span class="annottext">authCommitteeHotKeyTxCert :: TxCert era
</span><a href="#local-6989586621686871691"><span class="hs-identifier hs-var hs-var">authCommitteeHotKeyTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole
-&gt; Credential 'HotCommitteeRole -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#AuthCommitteeHotKeyTxCert"><span class="hs-identifier hs-var">AuthCommitteeHotKeyTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871689"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686871690"><span class="hs-identifier hs-var">hotKey</span></a></span><span>
</span><span id="line-395"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871691"><span class="hs-identifier hs-var">authCommitteeHotKeyTxCert</span></a></span><span>
</span><span id="line-396"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ResignCommitteeColdTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-397"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-398"></span><span>            </span><span id="local-6989586621686871692"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871692"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#elements"><span class="hs-identifier hs-var">elements</span></a></span><span> </span><span class="annot"><span class="annottext">([Credential 'ColdCommitteeRole]
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; (Set (Credential 'ColdCommitteeRole)
    -&gt; [Credential 'ColdCommitteeRole])
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; [Credential 'ColdCommitteeRole]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-399"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871693"><span class="annot"><span class="annottext">resignCommitteeColdTxCert :: TxCert era
</span><a href="#local-6989586621686871693"><span class="hs-identifier hs-var hs-var">resignCommitteeColdTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ResignCommitteeColdTxCert"><span class="hs-identifier hs-var">ResignCommitteeColdTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871692"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-400"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871693"><span class="hs-identifier hs-var">resignCommitteeColdTxCert</span></a></span><span>
</span><span id="line-401"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>            </span><span id="local-6989586621686871695"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871695"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#elements"><span class="hs-identifier hs-var">elements</span></a></span><span> </span><span class="annot"><span class="annottext">([Credential 'ColdCommitteeRole]
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; (Set (Credential 'ColdCommitteeRole)
    -&gt; [Credential 'ColdCommitteeRole])
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; [Credential 'ColdCommitteeRole]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-403"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871696"><span class="annot"><span class="annottext">resignCommitteeColdTxCert :: TxCert era
</span><a href="#local-6989586621686871696"><span class="hs-identifier hs-var hs-var">resignCommitteeColdTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ResignCommitteeColdTxCert"><span class="hs-identifier hs-var">ResignCommitteeColdTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686871695"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-404"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871696"><span class="hs-identifier hs-var">resignCommitteeColdTxCert</span></a></span><span>
</span><span id="line-405"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RegDRepTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-406"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-407"></span><span>            </span><span id="local-6989586621686871697"><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686871697"><span class="hs-identifier hs-var">unregisteredDRepKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'DRepRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-408"></span><span>            </span><span id="local-6989586621686871698"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871698"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-409"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCert era -&gt; ImpM (LedgerSpec era) ())
-&gt; TxCert era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-410"></span><span>              </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDRepTxCert"><span class="hs-identifier hs-var">RegDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686871697"><span class="hs-identifier hs-var">unregisteredDRepKH</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871698"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppDRepDepositL"><span class="hs-identifier hs-var">ppDRepDepositL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-411"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-412"></span><span>            </span><span id="local-6989586621686871704"><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686871704"><span class="hs-identifier hs-var">unregisteredDRepKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'DRepRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-413"></span><span>            </span><span id="local-6989586621686871705"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871705"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-414"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">(TxCert era -&gt; ImpM (LedgerSpec era) ())
-&gt; TxCert era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-415"></span><span>              </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDRepTxCert"><span class="hs-identifier hs-var">RegDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686871704"><span class="hs-identifier hs-var">unregisteredDRepKH</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871705"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppDRepDepositL"><span class="hs-identifier hs-var">ppDRepDepositL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UnRegDRepTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-417"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-418"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871709"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871709"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-419"></span><span>            </span><span id="local-6989586621686871710"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871710"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-420"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871714"><span class="annot"><span class="annottext">unRegDRepTxCert :: TxCert era
</span><a href="#local-6989586621686871714"><span class="hs-identifier hs-var hs-var">unRegDRepTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDRepTxCert"><span class="hs-identifier hs-var">UnRegDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871709"><span class="hs-identifier hs-var">drepKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871710"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppDRepDepositL"><span class="hs-identifier hs-var">ppDRepDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871714"><span class="hs-identifier hs-var">unRegDRepTxCert</span></a></span><span>
</span><span id="line-422"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-423"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871716"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871716"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-424"></span><span>            </span><span id="local-6989586621686871717"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871717"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-425"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871721"><span class="annot"><span class="annottext">unRegDRepTxCert :: TxCert era
</span><a href="#local-6989586621686871721"><span class="hs-identifier hs-var hs-var">unRegDRepTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDRepTxCert"><span class="hs-identifier hs-var">UnRegDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871716"><span class="hs-identifier hs-var">drepKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686871717"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppDRepDepositL"><span class="hs-identifier hs-var">ppDRepDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871721"><span class="hs-identifier hs-var">unRegDRepTxCert</span></a></span><span>
</span><span id="line-427"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UpdateDRepTxCert&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-428"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V1&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-429"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871722"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871722"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-430"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871723"><span class="annot"><span class="annottext">updateDRepTxCert :: TxCert era
</span><a href="#local-6989586621686871723"><span class="hs-identifier hs-var hs-var">updateDRepTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UpdateDRepTxCert"><span class="hs-identifier hs-var">UpdateDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871722"><span class="hs-identifier hs-var">drepKH</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-431"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868820"><span class="hs-identifier hs-var">testCertificateNotSupportedV1</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871723"><span class="hs-identifier hs-var">updateDRepTxCert</span></a></span><span>
</span><span id="line-432"></span><span>          </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V2&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-433"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621686871725"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871725"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-434"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686871726"><span class="annot"><span class="annottext">updateDRepTxCert :: TxCert era
</span><a href="#local-6989586621686871726"><span class="hs-identifier hs-var hs-var">updateDRepTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UpdateDRepTxCert"><span class="hs-identifier hs-var">UpdateDRepTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686865038"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871725"><span class="hs-identifier hs-var">drepKH</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-435"></span><span>            </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) ()
</span><a href="#local-6989586621686868823"><span class="hs-identifier hs-var">testCertificateNotSupportedV2</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621686871726"><span class="hs-identifier hs-var">updateDRepTxCert</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#govPolicySpec"><span class="hs-identifier hs-type">govPolicySpec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686871727"><span class="annot"><a href="#local-6989586621686871727"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686871727"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686871727"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span id="govPolicySpec"><span class="annot"><span class="annottext">govPolicySpec :: forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#govPolicySpec"><span class="hs-identifier hs-var hs-var">govPolicySpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Gov policy scripts&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">-- These tests rely on the script in the constitution, but we can only change the constitution after bootstrap.</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">-- So we cannot run these tests during bootstrap</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;failing native script govPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>      </span><span id="local-6989586621686871968"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686871968"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-447"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621686871969"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871969"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-448"></span><span>      </span><span id="local-6989586621686871970"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NativeScript era -&gt; ImpTestM era ScriptHash
forall era.
EraScript era =&gt;
NativeScript era -&gt; ImpTestM era ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impAddNativeScript"><span class="hs-identifier hs-var">impAddNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">(NativeScript era -&gt; ImpTestM era ScriptHash)
-&gt; NativeScript era -&gt; ImpTestM era ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; NativeScript era
forall era. AllegraEraScript era =&gt; SlotNo -&gt; NativeScript era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#RequireTimeStart"><span class="hs-identifier hs-var">RequireTimeStart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; SlotNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#SlotNo"><span class="hs-identifier hs-var">SlotNo</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>      </span><span id="local-6989586621686871973"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686871973"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-450"></span><span>      </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ())
-&gt; ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-451"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686871973"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686871969"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686871968"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-452"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ParameterChange&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-453"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872037"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872037"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
ConwayEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe Natural)
Lens' (PParamsUpdate era) (StrictMaybe Natural)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppuCommitteeMinSizeL"><span class="hs-identifier hs-var">ppuCommitteeMinSizeL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe Natural -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; StrictMaybe Natural
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span>
</span><span id="line-454"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872039"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872039"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872037"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>        </span><span id="local-6989586621686872041"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686872041"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872039"><span class="hs-identifier hs-var">govAction</span></a></span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872043"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686872043"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-457"></span><span>              </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-458"></span><span>                </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (OSet (ProposalProcedure era))
ProposalProcedure era
</span><a href="#local-6989586621686872041"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-459"></span><span>                </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((ValidityInterval -&gt; Identity ValidityInterval)
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (ValidityInterval -&gt; Identity ValidityInterval)
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ValidityInterval -&gt; Identity ValidityInterval)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
AllegraEraTxBody era =&gt;
Lens' (TxBody era) ValidityInterval
Lens' (TxBody era) ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.TxBody.html#vldtTxBodyL"><span class="hs-identifier hs-var">vldtTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((ValidityInterval -&gt; Identity ValidityInterval)
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ValidityInterval -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo -&gt; StrictMaybe SlotNo -&gt; ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#ValidityInterval"><span class="hs-identifier hs-var">ValidityInterval</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-460"></span><span>        </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872043"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set ScriptHash -&gt; ShelleyUtxowPredFailure era
forall era. Set ScriptHash -&gt; ShelleyUtxowPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Utxow.html#ScriptWitnessNotValidatingUTXOW"><span class="hs-identifier hs-var">ScriptWitnessNotValidatingUTXOW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set ScriptHash)
ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TreasuryWithdrawals&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-463"></span><span>        </span><span id="local-6989586621686872047"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872047"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-464"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872048"><span class="annot"><span class="annottext">withdrawals :: Map RewardAccount Coin
</span><a href="#local-6989586621686872048"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; Map RewardAccount Coin
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872047"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-465"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872050"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872050"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#TreasuryWithdrawals"><span class="hs-identifier hs-var">TreasuryWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin
</span><a href="#local-6989586621686872048"><span class="hs-identifier hs-var">withdrawals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>        </span><span id="local-6989586621686872052"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686872052"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872050"><span class="hs-identifier hs-var">govAction</span></a></span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872053"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686872053"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-468"></span><span>              </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-469"></span><span>                </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (OSet (ProposalProcedure era))
ProposalProcedure era
</span><a href="#local-6989586621686872052"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-470"></span><span>                </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((ValidityInterval -&gt; Identity ValidityInterval)
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (ValidityInterval -&gt; Identity ValidityInterval)
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ValidityInterval -&gt; Identity ValidityInterval)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
AllegraEraTxBody era =&gt;
Lens' (TxBody era) ValidityInterval
Lens' (TxBody era) ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.TxBody.html#vldtTxBodyL"><span class="hs-identifier hs-var">vldtTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((ValidityInterval -&gt; Identity ValidityInterval)
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ValidityInterval -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo -&gt; StrictMaybe SlotNo -&gt; ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#ValidityInterval"><span class="hs-identifier hs-var">ValidityInterval</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-471"></span><span>        </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872053"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; ShelleyUtxowPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set ScriptHash -&gt; ShelleyUtxowPredFailure era
forall era. Set ScriptHash -&gt; ShelleyUtxowPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Utxow.html#ScriptWitnessNotValidatingUTXOW"><span class="hs-identifier hs-var">ScriptWitnessNotValidatingUTXOW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set ScriptHash)
ScriptHash
</span><a href="#local-6989586621686871970"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alwaysSucceeds Plutus govPolicy validates&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-474"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872056"><span class="annot"><span class="annottext">alwaysSucceedsSh :: ScriptHash
</span><a href="#local-6989586621686872056"><span class="hs-identifier hs-var hs-var">alwaysSucceedsSh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier hs-var">alwaysSucceedsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>      </span><span id="local-6989586621686872057"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872057"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-476"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621686872058"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872058"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-477"></span><span>      </span><span id="local-6989586621686872059"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872059"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ())
-&gt; ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span>
</span><span id="line-480"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-481"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872059"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872056"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>          </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872058"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-483"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872057"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-484"></span><span>      </span><span id="local-6989586621686872060"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872060"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ParameterChange&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-487"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872119"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872119"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
ConwayEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe Natural)
Lens' (PParamsUpdate era) (StrictMaybe Natural)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppuCommitteeMinSizeL"><span class="hs-identifier hs-var">ppuCommitteeMinSizeL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe Natural -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; StrictMaybe Natural
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872120"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872120"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872119"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872056"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>        </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872120"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (ProposalProcedure era)
-&gt; (ProposalProcedure era -&gt; ImpTestM era ()) -&gt; ImpTestM era ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal_"><span class="hs-identifier hs-var">submitProposal_</span></a></span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TreasuryWithdrawals&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-491"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872122"><span class="annot"><span class="annottext">withdrawals :: Map RewardAccount Coin
</span><a href="#local-6989586621686872122"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; Map RewardAccount Coin
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872060"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872123"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872123"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#TreasuryWithdrawals"><span class="hs-identifier hs-var">TreasuryWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin
</span><a href="#local-6989586621686872122"><span class="hs-identifier hs-var">withdrawals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872056"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>        </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872123"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (ProposalProcedure era)
-&gt; (ProposalProcedure era -&gt; ImpTestM era ()) -&gt; ImpTestM era ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal_"><span class="hs-identifier hs-var">submitProposal_</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alwaysFails Plutus govPolicy does not validate&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-496"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872125"><span class="annot"><span class="annottext">alwaysFailsSh :: ScriptHash
</span><a href="#local-6989586621686872125"><span class="hs-identifier hs-var hs-var">alwaysFailsSh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsNoDatum"><span class="hs-identifier hs-var">alwaysFailsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>      </span><span id="local-6989586621686872126"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872126"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-498"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621686872127"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872127"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-499"></span><span>      </span><span id="local-6989586621686872128"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872128"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-500"></span><span>      </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ())
-&gt; ImpM (LedgerSpec era) GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-501"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872128"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872125"><span class="hs-identifier hs-var">alwaysFailsSh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872127"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872126"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ParameterChange&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-504"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872187"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872187"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
ConwayEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe Natural)
Lens' (PParamsUpdate era) (StrictMaybe Natural)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppuCommitteeMinSizeL"><span class="hs-identifier hs-var">ppuCommitteeMinSizeL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe Natural -&gt; Identity (StrictMaybe Natural))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe Natural -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; StrictMaybe Natural
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span>
</span><span id="line-505"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872188"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872188"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872187"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872125"><span class="hs-identifier hs-var">alwaysFailsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span>        </span><span id="local-6989586621686872189"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686872189"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872188"><span class="hs-identifier hs-var">govAction</span></a></span><span>
</span><span id="line-507"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872190"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686872190"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (OSet (ProposalProcedure era))
ProposalProcedure era
</span><a href="#local-6989586621686872189"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-508"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872190"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TreasuryWithdrawals&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>        </span><span id="local-6989586621686872192"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872192"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872193"><span class="annot"><span class="annottext">withdrawals :: Map RewardAccount Coin
</span><a href="#local-6989586621686872193"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; Map RewardAccount Coin
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686872192"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-513"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872194"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872194"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#TreasuryWithdrawals"><span class="hs-identifier hs-var">TreasuryWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin
</span><a href="#local-6989586621686872193"><span class="hs-identifier hs-var">withdrawals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872125"><span class="hs-identifier hs-var">alwaysFailsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>        </span><span id="local-6989586621686872195"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686872195"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872194"><span class="hs-identifier hs-var">govAction</span></a></span><span>
</span><span id="line-515"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872196"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686872196"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (OSet (ProposalProcedure era))
ProposalProcedure era
</span><a href="#local-6989586621686872195"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-516"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872196"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#costModelsSpec"><span class="hs-identifier hs-type">costModelsSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686872197"><span class="annot"><a href="#local-6989586621686872197"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686872197"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686872197"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span id="costModelsSpec"><span class="annot"><span class="annottext">costModelsSpec :: forall era. ConwayEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#costModelsSpec"><span class="hs-identifier hs-var hs-var">costModelsSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-comment">-- These tests rely on the script in the constitution, but we can only change the constitution after bootstrap.</span><span>
</span><span id="line-521"></span><span>  </span><span class="hs-comment">-- So we cannot run these tests during bootstrap</span><span>
</span><span id="line-522"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PlutusV3 Initialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-523"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Updating CostModels with alwaysFails govPolicy does not validate&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-comment">-- no initial PlutusV3 CostModels</span><span>
</span><span id="line-525"></span><span>      </span><span class="annot"><span class="annottext">(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall era.
ShelleyEraImp era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPParams"><span class="hs-identifier hs-var">modifyPParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; PParams era) -&gt; ImpTestM era ())
-&gt; (PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CostModels -&gt; Identity CostModels)
-&gt; PParams era -&gt; Identity (PParams era)
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) CostModels
Lens' (PParams era) CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppCostModelsL"><span class="hs-identifier hs-var">ppCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((CostModels -&gt; Identity CostModels)
 -&gt; PParams era -&gt; Identity (PParams era))
-&gt; CostModels -&gt; PParams era -&gt; PParams era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV1"><span class="hs-identifier hs-var">PlutusV1</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV2"><span class="hs-identifier hs-var">PlutusV2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span>      </span><span id="local-6989586621686872400"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872400"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-528"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621686872401"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872401"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-529"></span><span>      </span><span id="local-6989586621686872402"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872402"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-530"></span><span>      </span><span id="local-6989586621686872403"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872403"><span class="hs-identifier hs-var">govIdConstitution1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-531"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872402"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe ScriptHash
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872401"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872400"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-532"></span><span>      </span><span class="hs-comment">-- propose and enact PlutusV3 Costmodels</span><span>
</span><span id="line-533"></span><span>      </span><span id="local-6989586621686872404"><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
</span><a href="#local-6989586621686872404"><span class="hs-identifier hs-var">govIdPPUpdate1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-534"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#enactCostModels"><span class="hs-identifier hs-var">enactCostModels</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872401"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872400"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872407"><span class="annot"><span class="annottext">alwaysFailsSh :: ScriptHash
</span><a href="#local-6989586621686872407"><span class="hs-identifier hs-var hs-var">alwaysFailsSh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsNoDatum"><span class="hs-identifier hs-var">alwaysFailsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era GovActionId -&gt; ImpTestM era ())
-&gt; ImpTestM era GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-538"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span>
</span><span id="line-539"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovPurposeId 'ConstitutionPurpose
-&gt; StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'ConstitutionPurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872403"><span class="hs-identifier hs-var">govIdConstitution1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872402"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872407"><span class="hs-identifier hs-var">alwaysFailsSh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>          </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872401"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-542"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872400"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-543"></span><span>
</span><span id="line-544"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Fail to update V3 Costmodels&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872467"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872467"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
AlonzoEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppuCostModelsL"><span class="hs-identifier hs-var">ppuCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe CostModels -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels -&gt; StrictMaybe CostModels
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872469"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872469"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
</span><a href="#local-6989586621686872404"><span class="hs-identifier hs-var">govIdPPUpdate1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872467"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872407"><span class="hs-identifier hs-var">alwaysFailsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>        </span><span id="local-6989586621686872470"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686872470"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872469"><span class="hs-identifier hs-var">govAction</span></a></span><span>
</span><span id="line-548"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872471"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686872471"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (OSet (ProposalProcedure era))
ProposalProcedure era
</span><a href="#local-6989586621686872470"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-549"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872471"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Updating CostModels with alwaysSucceeds govPolicy but no PlutusV3 CostModels fails&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-552"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-553"></span><span>        </span><span class="annot"><span class="annottext">(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall era.
ShelleyEraImp era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPParams"><span class="hs-identifier hs-var">modifyPParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; PParams era) -&gt; ImpTestM era ())
-&gt; (PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CostModels -&gt; Identity CostModels)
-&gt; PParams era -&gt; Identity (PParams era)
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) CostModels
Lens' (PParams era) CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppCostModelsL"><span class="hs-identifier hs-var">ppCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((CostModels -&gt; Identity CostModels)
 -&gt; PParams era -&gt; Identity (PParams era))
-&gt; CostModels -&gt; PParams era -&gt; PParams era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV1"><span class="hs-identifier hs-var">PlutusV1</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV2"><span class="hs-identifier hs-var">PlutusV2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span>        </span><span id="local-6989586621686872472"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872472"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-556"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621686872473"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872473"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-557"></span><span>        </span><span id="local-6989586621686872474"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872474"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-558"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872476"><span class="annot"><span class="annottext">alwaysSucceedsSh :: ScriptHash
</span><a href="#local-6989586621686872476"><span class="hs-identifier hs-var hs-var">alwaysSucceedsSh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier hs-var">alwaysSucceedsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>        </span><span class="annot"><span class="annottext">ImpTestM era GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era GovActionId -&gt; ImpTestM era ())
-&gt; ImpTestM era GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-560"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span>
</span><span id="line-561"></span><span>            </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-562"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872474"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872476"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>            </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872473"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-564"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872472"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872535"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872535"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
AlonzoEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppuCostModelsL"><span class="hs-identifier hs-var">ppuCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe CostModels -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels -&gt; StrictMaybe CostModels
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872536"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686872536"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872535"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872476"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span>        </span><span class="annot"><span class="annottext">GovAction era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingGovAction"><span class="hs-identifier hs-var">submitFailingGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686872536"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Language -&gt; CollectError era
forall era. Language -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#NoCostModel"><span class="hs-identifier hs-var">NoCostModel</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Updating CostModels and setting the govPolicy afterwards succeeds&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ())))
-&gt; ImpTestM era () -&gt; SpecWith (Arg (ImpTestM era ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era () -&gt; ImpTestM era ()
forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var">whenPostBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-572"></span><span>      </span><span class="annot"><span class="annottext">(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall era.
ShelleyEraImp era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPParams"><span class="hs-identifier hs-var">modifyPParams</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; PParams era) -&gt; ImpTestM era ())
-&gt; (PParams era -&gt; PParams era) -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(CostModels -&gt; Identity CostModels)
-&gt; PParams era -&gt; Identity (PParams era)
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) CostModels
Lens' (PParams era) CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppCostModelsL"><span class="hs-identifier hs-var">ppCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((CostModels -&gt; Identity CostModels)
 -&gt; PParams era -&gt; Identity (PParams era))
-&gt; CostModels -&gt; PParams era -&gt; PParams era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV1"><span class="hs-identifier hs-var">PlutusV1</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV2"><span class="hs-identifier hs-var">PlutusV2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span>      </span><span id="local-6989586621686872539"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872539"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var">registerInitialCommittee</span></a></span><span>
</span><span id="line-575"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621686872540"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872540"><span class="hs-identifier hs-var">dRep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-576"></span><span>      </span><span id="local-6989586621686872541"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872541"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-577"></span><span>      </span><span id="local-6989586621686872542"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872542"><span class="hs-identifier hs-var">govIdConstitution1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872541"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe ScriptHash
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872540"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872539"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span>      </span><span id="local-6989586621686872543"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872543"><span class="hs-identifier hs-var">mintingTokenTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpTestM era (Tx era)
forall era. MaryEraImp era =&gt; ScriptHash -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/l/testlib/doc/html/cardano-ledger-mary/src/Test.Cardano.Ledger.Mary.ImpTest.html#mkTokenMintingTx"><span class="hs-identifier hs-var">mkTokenMintingTx</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; ImpTestM era (Tx era))
-&gt; ScriptHash -&gt; ImpTestM era (Tx era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#evenRedeemerNoDatum"><span class="hs-identifier hs-var">evenRedeemerNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Minting token fails&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-583"></span><span>        </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872543"><span class="hs-identifier hs-var">mintingTokenTx</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Language -&gt; CollectError era
forall era. Language -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#NoCostModel"><span class="hs-identifier hs-var">NoCostModel</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span>      </span><span id="local-6989586621686872545"><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
</span><a href="#local-6989586621686872545"><span class="hs-identifier hs-var">govIdPPUpdate1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-586"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#enactCostModels"><span class="hs-identifier hs-var">enactCostModels</span></a></span><span>
</span><span id="line-587"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-588"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>          </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872540"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-590"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872539"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872547"><span class="annot"><span class="annottext">alwaysSucceedsSh :: ScriptHash
</span><a href="#local-6989586621686872547"><span class="hs-identifier hs-var hs-var">alwaysSucceedsSh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Plutus 'PlutusV3
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier hs-var">alwaysSucceedsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era GovActionId -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era GovActionId -&gt; ImpTestM era ())
-&gt; ImpTestM era GovActionId -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-594"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var">enactConstitution</span></a></span><span>
</span><span id="line-595"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovPurposeId 'ConstitutionPurpose
-&gt; StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'ConstitutionPurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872542"><span class="hs-identifier hs-var">govIdConstitution1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686872541"><span class="hs-identifier hs-var">anchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872547"><span class="hs-identifier hs-var">alwaysSucceedsSh</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>          </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872540"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-598"></span><span>          </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872539"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Minting token succeeds&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-601"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686872543"><span class="hs-identifier hs-var">mintingTokenTx</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Updating CostModels succeeds&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-604"></span><span>        </span><span class="annot"><span class="annottext">ImpTestM era (GovPurposeId 'PParamUpdatePurpose) -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
 -&gt; ImpTestM era ())
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
-&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-605"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#enactCostModels"><span class="hs-identifier hs-var">enactCostModels</span></a></span><span>
</span><span id="line-606"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
</span><a href="#local-6989586621686872545"><span class="hs-identifier hs-var">govIdPPUpdate1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; [Language] -&gt; CostModels
[Language] -&gt; CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModels"><span class="hs-identifier hs-var">testingCostModels</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Language]
Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>            </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872540"><span class="hs-identifier hs-var">dRep</span></a></span><span>
</span><span id="line-609"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872539"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-type">scriptLockedTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686864154"><span class="annot"><a href="#local-6989586621686864154"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-613"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxOut.html#AlonzoEraTxOut"><span class="hs-identifier hs-type">AlonzoEraTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864154"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-614"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-615"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864154"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-616"></span><span id="scriptLockedTxOut"><span class="annot"><span class="annottext">scriptLockedTxOut :: forall era. AlonzoEraTxOut era =&gt; ScriptHash -&gt; TxOut era
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-var hs-var">scriptLockedTxOut</span></a></span></span><span> </span><span id="local-6989586621686872571"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872571"><span class="hs-identifier hs-var">shSpending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-617"></span><span>  </span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span>
</span><span id="line-618"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StakeReference -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872571"><span class="hs-identifier hs-var">shSpending</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>    </span><span class="annot"><span class="annottext">Value era
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-620"></span><span>    </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
AlonzoEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe DataHash)
Lens' (TxOut era) (StrictMaybe DataHash)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxOut.html#dataHashTxOutL"><span class="hs-identifier hs-var">dataHashTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe DataHash -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash -&gt; StrictMaybe DataHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Data era -&gt; DataHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#hashData"><span class="hs-identifier hs-var">hashData</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864154"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">(Data era -&gt; DataHash) -&gt; Data era -&gt; DataHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Data -&gt; Data era
forall era. Era era =&gt; Data -&gt; Data era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="annot"><span class="annottext">Data
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spendDatum"><span class="hs-identifier hs-var">spendDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span id="local-6989586621686864151"><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#mkRefTxOut"><span class="hs-identifier hs-type">mkRefTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-623"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxOut.html#BabbageEraTxOut"><span class="hs-identifier hs-type">BabbageEraTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864151"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-624"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#AlonzoEraImp"><span class="hs-identifier hs-type">AlonzoEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864151"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-625"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-626"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-627"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864151"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864151"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-628"></span><span id="mkRefTxOut"><span class="annot"><span class="annottext">mkRefTxOut :: forall era.
(BabbageEraTxOut era, AlonzoEraImp era) =&gt;
ScriptHash -&gt; ImpTestM era (TxOut era)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#mkRefTxOut"><span class="hs-identifier hs-var hs-var">mkRefTxOut</span></a></span></span><span> </span><span id="local-6989586621686872617"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872617"><span class="hs-identifier hs-var">sh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-629"></span><span>  </span><span id="local-6989586621686872618"><span class="annot"><span class="annottext">Addr
</span><a href="#local-6989586621686872618"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Addr
forall s (m :: * -&gt; *) g.
(HasKeyPairs s, MonadState s m, HasStatefulGen g m, MonadGen m) =&gt;
m Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyAddr_"><span class="hs-identifier hs-var">freshKeyAddr_</span></a></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872620"><span class="annot"><span class="annottext">mbyPlutusScript :: Maybe (PlutusScript era)
</span><a href="#local-6989586621686872620"><span class="hs-identifier hs-var hs-var">mbyPlutusScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Maybe (PlutusScript era)
forall era.
AlonzoEraImp era =&gt;
ScriptHash -&gt; Maybe (PlutusScript era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#impLookupPlutusScript"><span class="hs-identifier hs-var">impLookupPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872617"><span class="hs-identifier hs-var">sh</span></a></span><span>
</span><span id="line-631"></span><span>  </span><span class="annot"><span class="annottext">TxOut era -&gt; ImpTestM era (TxOut era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TxOut era -&gt; ImpTestM era (TxOut era))
-&gt; TxOut era -&gt; ImpTestM era (TxOut era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-632"></span><span>    </span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Addr
</span><a href="#local-6989586621686872618"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-633"></span><span>      </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Script era) -&gt; Identity (StrictMaybe (Script era)))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
BabbageEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe (Script era))
Lens' (TxOut era) (StrictMaybe (Script era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxOut.html#referenceScriptTxOutL"><span class="hs-identifier hs-var">referenceScriptTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe (Script era) -&gt; Identity (StrictMaybe (Script era)))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe (Script era) -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Script era) -&gt; StrictMaybe (Script era)
forall a. Maybe a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#maybeToStrictMaybe"><span class="hs-identifier hs-var">maybeToStrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlutusScript era -&gt; Script era
forall era. AlonzoEraScript era =&gt; PlutusScript era -&gt; Script era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html#fromPlutusScript"><span class="hs-identifier hs-var">fromPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(PlutusScript era -&gt; Script era)
-&gt; Maybe (PlutusScript era) -&gt; Maybe (Script era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (PlutusScript era)
</span><a href="#local-6989586621686872620"><span class="hs-identifier hs-var">mbyPlutusScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>
</span><span id="line-635"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-type">setupRefTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-636"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686864132"><span class="annot"><a href="#local-6989586621686864132"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621686864133"><span class="annot"><a href="#local-6989586621686864133"><span class="hs-identifier hs-type">l</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/doc/html/cardano-ledger-babbage/src/Cardano.Ledger.Babbage.TxOut.html#BabbageEraTxOut"><span class="hs-identifier hs-type">BabbageEraTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864132"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-638"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#AlonzoEraImp"><span class="hs-identifier hs-type">AlonzoEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864132"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-639"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusLanguage"><span class="hs-identifier hs-type">PlutusLanguage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864133"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-641"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SLanguage"><span class="hs-identifier hs-type">SLanguage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864133"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-642"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864132"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#TxId"><span class="hs-identifier hs-type">TxId</span></a></span><span>
</span><span id="line-643"></span><span id="setupRefTx"><span class="annot"><span class="annottext">setupRefTx :: forall era (l :: Language).
(BabbageEraTxOut era, AlonzoEraImp era, PlutusLanguage l) =&gt;
SLanguage l -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#setupRefTx"><span class="hs-identifier hs-var hs-var">setupRefTx</span></a></span></span><span> </span><span id="local-6989586621686872653"><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621686872653"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872654"><span class="annot"><span class="annottext">shSpending :: ScriptHash
</span><a href="#local-6989586621686872654"><span class="hs-identifier hs-var hs-var">shSpending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#redeemerSameAsDatum"><span class="hs-identifier hs-var">redeemerSameAsDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621686872653"><span class="hs-identifier hs-var">lang</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>  </span><span id="local-6989586621686872655"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621686872655"><span class="hs-identifier hs-var">refTxOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) (TxOut era)
forall era.
(BabbageEraTxOut era, AlonzoEraImp era) =&gt;
ScriptHash -&gt; ImpTestM era (TxOut era)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#mkRefTxOut"><span class="hs-identifier hs-var">mkRefTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872654"><span class="hs-identifier hs-var">shSpending</span></a></span><span>
</span><span id="line-646"></span><span>  </span><span class="annot"><span class="annottext">(Tx era -&gt; TxId)
-&gt; ImpM (LedgerSpec era) (Tx era) -&gt; ImpTestM era TxId
forall a b.
(a -&gt; b) -&gt; ImpM (LedgerSpec era) a -&gt; ImpM (LedgerSpec era) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (Tx era) -&gt; ImpTestM era TxId)
-&gt; (Tx era -&gt; ImpM (LedgerSpec era) (Tx era))
-&gt; Tx era
-&gt; ImpTestM era TxId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpM (LedgerSpec era) (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Producing transaction&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era TxId) -&gt; Tx era -&gt; ImpTestM era TxId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-647"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-648"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxOut era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOut era] -&gt; StrictSeq (TxOut era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-650"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [TxOut era]
TxOut era
</span><a href="#local-6989586621686872655"><span class="hs-identifier hs-var">refTxOut</span></a></span><span>
</span><span id="line-651"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; TxOut era
forall era. AlonzoEraTxOut era =&gt; ScriptHash -&gt; TxOut era
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-var">scriptLockedTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872654"><span class="hs-identifier hs-var">shSpending</span></a></span><span>
</span><span id="line-652"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; TxOut era
forall era. AlonzoEraTxOut era =&gt; ScriptHash -&gt; TxOut era
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#scriptLockedTxOut"><span class="hs-identifier hs-var">scriptLockedTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872654"><span class="hs-identifier hs-var">shSpending</span></a></span><span>
</span><span id="line-653"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-type">testPlutusV1V2Failure</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-656"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686864207"><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621686864208"><span class="annot"><a href="#local-6989586621686864208"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-658"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-659"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-660"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><a href="#local-6989586621686864208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-662"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621686864208"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-663"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Context.html#ContextError"><span class="hs-identifier hs-type">ContextError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span id="testPlutusV1V2Failure"><span class="annot"><span class="annottext">testPlutusV1V2Failure :: forall era a.
(HasCallStack, ConwayEraImp era) =&gt;
ScriptHash
-&gt; a -&gt; Lens' (TxBody era) a -&gt; ContextError era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#testPlutusV1V2Failure"><span class="hs-identifier hs-var hs-var">testPlutusV1V2Failure</span></a></span></span><span> </span><span id="local-6989586621686872688"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872688"><span class="hs-identifier hs-var">sh</span></a></span></span><span> </span><span id="local-6989586621686872689"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621686872689"><span class="hs-identifier hs-var">badField</span></a></span></span><span> </span><span id="local-6989586621686872690"><span class="annot"><span class="annottext">Lens' (TxBody era) a
</span><a href="#local-6989586621686872690"><span class="hs-identifier hs-var">lenz</span></a></span></span><span> </span><span id="local-6989586621686872691"><span class="annot"><span class="annottext">ContextError era
</span><a href="#local-6989586621686872691"><span class="hs-identifier hs-var">errorField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-666"></span><span>  </span><span id="local-6989586621686872692"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686872692"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686864207"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686872688"><span class="hs-identifier hs-var">sh</span></a></span><span>
</span><span id="line-667"></span><span>  </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-668"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-669"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; Set TxIn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621686872692"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((a -&gt; Identity a) -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (a -&gt; Identity a)
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Identity a) -&gt; TxBody era -&gt; Identity (TxBody era)
Lens' (TxBody era) a
</span><a href="#local-6989586621686872690"><span class="hs-identifier hs-var">lenz</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity a) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; a -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621686872689"><span class="hs-identifier hs-var">badField</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;LEDGER&quot; era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PredicateFailure (EraRule &quot;LEDGER&quot; era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (AlonzoUtxosPredFailure era
    -&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AlonzoUtxosPredFailure era
-&gt; PredicateFailure (EraRule &quot;LEDGER&quot; era)
AlonzoUtxosPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(AlonzoUtxosPredFailure era
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; AlonzoUtxosPredFailure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-673"></span><span>        </span><span class="annot"><span class="annottext">[CollectError era] -&gt; AlonzoUtxosPredFailure era
forall era. [CollectError era] -&gt; AlonzoUtxosPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Rules.Utxos.html#CollectErrors"><span class="hs-identifier hs-var">CollectErrors</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ContextError era -&gt; CollectError era
forall era. ContextError era -&gt; CollectError era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Plutus.Evaluate.html#BadTranslation"><span class="hs-identifier hs-var">BadTranslation</span></a></span><span> </span><span class="annot"><span class="annottext">ContextError era
</span><a href="#local-6989586621686872691"><span class="hs-identifier hs-var">errorField</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-674"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span id="local-6989586621686864449"><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#enactCostModels"><span class="hs-identifier hs-type">enactCostModels</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-677"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864449"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-678"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#PParamUpdatePurpose"><span class="hs-identifier hs-type">PParamUpdatePurpose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-679"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.CostModels.html#CostModels"><span class="hs-identifier hs-type">CostModels</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-680"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-681"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-682"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686864449"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#PParamUpdatePurpose"><span class="hs-identifier hs-type">PParamUpdatePurpose</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-683"></span><span id="enactCostModels"><span class="annot"><span class="annottext">enactCostModels :: forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; CostModels
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#enactCostModels"><span class="hs-identifier hs-var hs-var">enactCostModels</span></a></span></span><span> </span><span id="local-6989586621686872738"><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
</span><a href="#local-6989586621686872738"><span class="hs-identifier hs-var">prevGovId</span></a></span></span><span> </span><span id="local-6989586621686872739"><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872739"><span class="hs-identifier hs-var">cms</span></a></span></span><span> </span><span id="local-6989586621686872740"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872740"><span class="hs-identifier hs-var">dRep</span></a></span></span><span> </span><span id="local-6989586621686872741"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872741"><span class="hs-identifier hs-var">committeeMembers'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-684"></span><span>  </span><span id="local-6989586621686872742"><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872742"><span class="hs-identifier hs-var">initialCms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) CostModels
-&gt; ImpTestM era CostModels
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) CostModels
 -&gt; ImpTestM era CostModels)
-&gt; SimpleGetter (NewEpochState era) CostModels
-&gt; ImpTestM era CostModels
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((CostModels -&gt; Const r CostModels)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (CostModels -&gt; Const r CostModels)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((CostModels -&gt; Const r CostModels)
    -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (CostModels -&gt; Const r CostModels)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CostModels -&gt; Const r CostModels)
-&gt; PParams era -&gt; Const r (PParams era)
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) CostModels
Lens' (PParams era) CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppCostModelsL"><span class="hs-identifier hs-var">ppCostModelsL</span></a></span><span>
</span><span id="line-685"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686872748"><span class="annot"><span class="annottext">pparamsUpdate :: PParamsUpdate era
</span><a href="#local-6989586621686872748"><span class="hs-identifier hs-var hs-var">pparamsUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
AlonzoEraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
Lens' (PParamsUpdate era) (StrictMaybe CostModels)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppuCostModelsL"><span class="hs-identifier hs-var">ppuCostModelsL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe CostModels -&gt; Identity (StrictMaybe CostModels))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe CostModels -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels -&gt; StrictMaybe CostModels
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872739"><span class="hs-identifier hs-var">cms</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621686872749"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872749"><span class="hs-identifier hs-var">govId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era GovActionId
forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitParameterChange"><span class="hs-identifier hs-var">submitParameterChange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose -&gt; GovActionId
forall (p :: GovActionPurpose). GovPurposeId p -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#unGovPurposeId"><span class="hs-identifier hs-var">unGovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">(GovPurposeId 'PParamUpdatePurpose -&gt; GovActionId)
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; StrictMaybe GovActionId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
</span><a href="#local-6989586621686872738"><span class="hs-identifier hs-var">prevGovId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686872748"><span class="hs-identifier hs-var">pparamsUpdate</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#DRepVoter"><span class="hs-identifier hs-var">DRepVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686872740"><span class="hs-identifier hs-var">dRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872749"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-688"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
-&gt; GovActionId -&gt; ImpTestM era ()
forall era (f :: * -&gt; *).
(ConwayEraImp era, Foldable f) =&gt;
f (Credential 'HotCommitteeRole) -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier hs-var">submitYesVoteCCs_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686872741"><span class="hs-identifier hs-var">committeeMembers'</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872749"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="annot"><span class="annottext">Natural -&gt; ImpTestM era ()
forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-690"></span><span>  </span><span id="local-6989586621686872756"><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872756"><span class="hs-identifier hs-var">enactedCms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) CostModels
-&gt; ImpTestM era CostModels
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) CostModels
 -&gt; ImpTestM era CostModels)
-&gt; SimpleGetter (NewEpochState era) CostModels
-&gt; ImpTestM era CostModels
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((CostModels -&gt; Const r CostModels)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (CostModels -&gt; Const r CostModels)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((CostModels -&gt; Const r CostModels)
    -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (CostModels -&gt; Const r CostModels)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CostModels -&gt; Const r CostModels)
-&gt; PParams era -&gt; Const r (PParams era)
forall era. AlonzoEraPParams era =&gt; Lens' (PParams era) CostModels
Lens' (PParams era) CostModels
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.PParams.html#ppCostModelsL"><span class="hs-identifier hs-var">ppCostModelsL</span></a></span><span>
</span><span id="line-691"></span><span>  </span><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872756"><span class="hs-identifier hs-var">enactedCms</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels -&gt; CostModels -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872742"><span class="hs-identifier hs-var">initialCms</span></a></span><span> </span><span class="annot"><span class="annottext">CostModels -&gt; CostModels -&gt; CostModels
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CostModels
</span><a href="#local-6989586621686872739"><span class="hs-identifier hs-var">cms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>  </span><span class="annot"><span class="annottext">GovPurposeId 'PParamUpdatePurpose
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(GovPurposeId 'PParamUpdatePurpose
 -&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose))
-&gt; GovPurposeId 'PParamUpdatePurpose
-&gt; ImpTestM era (GovPurposeId 'PParamUpdatePurpose)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'PParamUpdatePurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686872749"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spendDatum"><span class="hs-identifier hs-type">spendDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-core-1.54.0.0-bf04dafee476ebec1e2a6ecdd6a97e38d49d10272f2132c9a6c1ec03c719ef10/share/doc/html/src/PlutusCore.Data.html#Data"><span class="hs-identifier hs-type">P1.Data</span></a></span><span>
</span><span id="line-695"></span><span id="spendDatum"><span class="annot"><span class="annottext">spendDatum :: Data
</span><a href="Test.Cardano.Ledger.Conway.Imp.UtxosSpec.html#spendDatum"><span class="hs-identifier hs-var hs-var">spendDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Data
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-core-1.54.0.0-bf04dafee476ebec1e2a6ecdd6a97e38d49d10272f2132c9a6c1ec03c719ef10/share/doc/html/src/PlutusCore.Data.html#I"><span class="hs-identifier hs-var">P1.I</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">3</span></span><span>
</span><span id="line-696"></span></pre></body></html>