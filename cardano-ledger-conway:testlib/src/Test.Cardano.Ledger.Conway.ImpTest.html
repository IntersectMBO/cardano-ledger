<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLists #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Conway.ImpTest</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html"><span class="hs-identifier">Test.Cardano.Ledger.Babbage.ImpTest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier">ConwayEraImp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyImpInitProtVer"><span class="hs-identifier">conwayModifyImpInitProtVer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier">enactConstitution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactTreasuryWithdrawals"><span class="hs-identifier">enactTreasuryWithdrawals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier">submitGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction_"><span class="hs-identifier">submitGovAction_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActions"><span class="hs-identifier">submitGovActions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier">submitProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitAndExpireProposalToMakeReward"><span class="hs-identifier">submitAndExpireProposalToMakeReward</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal_"><span class="hs-identifier">submitProposal_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposals"><span class="hs-identifier">submitProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingProposal"><span class="hs-identifier">submitFailingProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovAction"><span class="hs-identifier">trySubmitGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovActions"><span class="hs-identifier">trySubmitGovActions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposal"><span class="hs-identifier">trySubmitProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier">trySubmitProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkConstitutionProposal"><span class="hs-identifier">mkConstitutionProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier">mkProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposalWithRewardAccount"><span class="hs-identifier">mkProposalWithRewardAccount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkTreasuryWithdrawalsGovAction"><span class="hs-identifier">mkTreasuryWithdrawalsGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitTreasuryWithdrawals"><span class="hs-identifier">submitTreasuryWithdrawals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote"><span class="hs-identifier">submitVote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote_"><span class="hs-identifier">submitVote_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier">submitYesVote_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingVote"><span class="hs-identifier">submitFailingVote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitVote"><span class="hs-identifier">trySubmitVote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerDRep"><span class="hs-identifier">registerDRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#unRegisterDRep"><span class="hs-identifier">unRegisterDRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#updateDRep"><span class="hs-identifier">updateDRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateToDRep"><span class="hs-identifier">delegateToDRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier">setupSingleDRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupDRepWithoutStake"><span class="hs-identifier">setupDRepWithoutStake</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier">setupPoolWithStake</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithoutStake"><span class="hs-identifier">setupPoolWithoutStake</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyPParams"><span class="hs-identifier">conwayModifyPParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier">getProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getEnactState"><span class="hs-identifier">getEnactState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier">getGovActionState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier">lookupGovActionState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPresentGovActionId"><span class="hs-identifier">expectPresentGovActionId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMissingGovActionId"><span class="hs-identifier">expectMissingGovActionId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier">getRatifyEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateDRepAcceptedRatio"><span class="hs-identifier">calculateDRepAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculatePoolAcceptedRatio"><span class="hs-identifier">calculatePoolAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateCommitteeAcceptedRatio"><span class="hs-identifier">calculateCommitteeAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logAcceptedRatio"><span class="hs-identifier">logAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepAccepted"><span class="hs-identifier">isDRepAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isSpoAccepted"><span class="hs-identifier">isSpoAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isCommitteeAccepted"><span class="hs-identifier">isCommitteeAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier">getCommitteeMembers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitution"><span class="hs-identifier">getConstitution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier">registerInitialCommittee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logRatificationChecks"><span class="hs-identifier">logRatificationChecks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#resignCommitteeColdKey"><span class="hs-identifier">resignCommitteeColdKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKey"><span class="hs-identifier">registerCommitteeHotKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKeys"><span class="hs-identifier">registerCommitteeHotKeys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logCurPParams"><span class="hs-identifier">logCurPParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitCommitteeElection"><span class="hs-identifier">submitCommitteeElection</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#electBasicCommittee"><span class="hs-identifier">electBasicCommittee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#proposalsShowDebug"><span class="hs-identifier">proposalsShowDebug</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovPolicy"><span class="hs-identifier">getGovPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingGovAction"><span class="hs-identifier">submitFailingGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionForest"><span class="hs-identifier">submitGovActionForest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionTree"><span class="hs-identifier">submitGovActionTree</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposalsForest"><span class="hs-identifier">getProposalsForest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForest"><span class="hs-identifier">logProposalsForest</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForestDiff"><span class="hs-identifier">logProposalsForestDiff</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCCExpiry"><span class="hs-identifier">getCCExpiry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeExpired"><span class="hs-identifier">ccShouldBeExpired</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeExpired"><span class="hs-identifier">ccShouldNotBeExpired</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeResigned"><span class="hs-identifier">ccShouldBeResigned</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeResigned"><span class="hs-identifier">ccShouldNotBeResigned</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedCommittee"><span class="hs-identifier">getLastEnactedCommittee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedConstitution"><span class="hs-identifier">getLastEnactedConstitution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitParameterChange"><span class="hs-identifier">submitParameterChange</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkMinFeeUpdateGovAction"><span class="hs-identifier">mkMinFeeUpdateGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkParameterChangeGovAction"><span class="hs-identifier">mkParameterChangeGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkUpdateCommitteeProposal"><span class="hs-identifier">mkUpdateCommitteeProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitUpdateCommittee"><span class="hs-identifier">submitUpdateCommittee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberPresence"><span class="hs-identifier">expectCommitteeMemberPresence</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberAbsence"><span class="hs-identifier">expectCommitteeMemberAbsence</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedParameterChange"><span class="hs-identifier">getLastEnactedParameterChange</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedHardForkInitiation"><span class="hs-identifier">getLastEnactedHardForkInitiation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitutionProposals"><span class="hs-identifier">getConstitutionProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getParameterChangeProposals"><span class="hs-identifier">getParameterChangeProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNumDormantEpochs"><span class="hs-identifier">expectNumDormantEpochs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitConstitution"><span class="hs-identifier">submitConstitution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepExpired"><span class="hs-identifier">isDRepExpired</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepExpiry"><span class="hs-identifier">expectDRepExpiry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectActualDRepExpiry"><span class="hs-identifier">expectActualDRepExpiry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepNotRegistered"><span class="hs-identifier">expectDRepNotRegistered</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCurrentProposals"><span class="hs-identifier">expectCurrentProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoCurrentProposals"><span class="hs-identifier">expectNoCurrentProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPulserProposals"><span class="hs-identifier">expectPulserProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoPulserProposals"><span class="hs-identifier">expectNoPulserProposals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalsShouldContain"><span class="hs-identifier">currentProposalsShouldContain</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier">ifBootstrap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenBootstrap"><span class="hs-identifier">whenBootstrap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier">whenPostBootstrap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier">submitYesVoteCCs_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#donateToTreasury"><span class="hs-identifier">donateToTreasury</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMembers"><span class="hs-identifier">expectMembers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#showConwayTxBalance"><span class="hs-identifier">showConwayTxBalance</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logConwayTxBalance"><span class="hs-identifier">logConwayTxBalance</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAware"><span class="hs-identifier">submitBootstrapAware</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingVote"><span class="hs-identifier">submitBootstrapAwareFailingVote</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal"><span class="hs-identifier">submitBootstrapAwareFailingProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal_"><span class="hs-identifier">submitBootstrapAwareFailingProposal_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier">SubmitFailureExpectation</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBoth"><span class="hs-identifier">FailBoth</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateSPORewardAddressToDRep_"><span class="hs-identifier">delegateSPORewardAddressToDRep_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommittee"><span class="hs-identifier">getCommittee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier">EpochInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier">EpochNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ProtVer"><span class="hs-identifier">ProtVer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ShelleyBase"><span class="hs-identifier">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#UnitInterval"><span class="hs-identifier">UnitInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Version.html#Version"><span class="hs-identifier">Version</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#addEpochInterval"><span class="hs-identifier">addEpochInterval</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#binOpEpochNo"><span class="hs-identifier">binOpEpochNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier">inject</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#textToUrl"><span class="hs-identifier">textToUrl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html"><span class="hs-identifier">Cardano.Ledger.Compactible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier">fromCompact</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.html"><span class="hs-identifier">Cardano.Ledger.Conway</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier">ConwayEra</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Era.html#hardforkConwayBootstrapPhase"><span class="hs-identifier">hardforkConwayBootstrapPhase</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Core.html"><span class="hs-identifier">Cardano.Ledger.Conway.Core</span></a></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Genesis.html"><span class="hs-identifier">Cardano.Ledger.Conway.Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Genesis.html#ConwayGenesis"><span class="hs-identifier">ConwayGenesis</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance</span></a></span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html"><span class="hs-identifier">Cardano.Ledger.Conway.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#UpgradeConwayPParams"><span class="hs-identifier">UpgradeConwayPParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.html"><span class="hs-identifier">Cardano.Ledger.Conway.Rules</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Bbody.html#ConwayBbodyPredFailure"><span class="hs-identifier">ConwayBbodyPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Cert.html#ConwayCertPredFailure"><span class="hs-identifier">ConwayCertPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Certs.html#ConwayCertsPredFailure"><span class="hs-identifier">ConwayCertsPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Deleg.html#ConwayDelegPredFailure"><span class="hs-identifier">ConwayDelegPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Epoch.html#ConwayEpochEvent"><span class="hs-identifier">ConwayEpochEvent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.GovCert.html#ConwayGovCertPredFailure"><span class="hs-identifier">ConwayGovCertPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Gov.html#ConwayGovPredFailure"><span class="hs-identifier">ConwayGovPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.HardFork.html#ConwayHardForkEvent"><span class="hs-identifier">ConwayHardForkEvent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ledger.html#ConwayLedgerPredFailure"><span class="hs-identifier">ConwayLedgerPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxo.html#ConwayUtxoPredFailure"><span class="hs-identifier">ConwayUtxoPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxos.html#ConwayUtxosPredFailure"><span class="hs-identifier">ConwayUtxosPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxow.html#ConwayUtxowPredFailure"><span class="hs-identifier">ConwayUtxowPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Enact.html#EnactSignal"><span class="hs-identifier">EnactSignal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAccepted"><span class="hs-identifier">committeeAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAcceptedRatio"><span class="hs-identifier">committeeAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAccepted"><span class="hs-identifier">dRepAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAcceptedRatio"><span class="hs-identifier">dRepAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#prevActionAsExpected"><span class="hs-identifier">prevActionAsExpected</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAccepted"><span class="hs-identifier">spoAccepted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAcceptedRatio"><span class="hs-identifier">spoAcceptedRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#validCommitteeTerm"><span class="hs-identifier">validCommitteeTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#withdrawalCanWithdraw"><span class="hs-identifier">withdrawalCanWithdraw</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.html"><span class="hs-identifier">Cardano.Ledger.Conway.State</span></a></span><span>
</span><span id="line-184"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html"><span class="hs-identifier">Cardano.Ledger.Conway.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#Delegatee"><span class="hs-identifier">Delegatee</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html"><span class="hs-identifier">Cardano.Ledger.DRep</span></a></span><span>
</span><span id="line-187"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html"><span class="hs-identifier">Cardano.Ledger.Plutus.Language</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#Language"><span class="hs-identifier">Language</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SLanguage"><span class="hs-identifier">SLanguage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier">hashPlutusScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.html"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier">curPParamsEpochStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier">epochStateGovStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateStakePoolsL"><span class="hs-identifier">epochStateStakePoolsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier">esLStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier">lsCertStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier">lsUTxOStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier">nesELL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEpochStateL"><span class="hs-identifier">nesEpochStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier">nesEsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesPdL"><span class="hs-identifier">nesPdL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier">newEpochStateGovStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.UTxO.html#produced"><span class="hs-identifier">produced</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier">utxosGovStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-202"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier">ShelleyDelegPredFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-205"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-207"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#TxId"><span class="hs-identifier">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html"><span class="hs-identifier">Cardano.Ledger.Val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#Val"><span class="hs-identifier">Val</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#%3C-%3E"><span class="hs-operator">(&lt;-&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">forM</span></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/FailT-0.1.2.0-a6bfc8b1703d475e2ae00d40307128c8b38b30577dae60bdff0e62519ebdc06b/share/doc/html/src/Control.Monad.Trans.Fail.String.html"><span class="hs-identifier">Control.Monad.Trans.Fail.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/FailT-0.1.2.0-a6bfc8b1703d475e2ae00d40307128c8b38b30577dae60bdff0e62519ebdc06b/share/doc/html/src/Control.Monad.Trans.Fail.String.html#errorFail"><span class="hs-identifier">errorFail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html"><span class="hs-identifier">Control.State.Transition.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#STS"><span class="hs-identifier">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bimap</span></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.html"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#Default"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Foldable</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromJust</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isJust</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SSeq</span></span><span>
</span><span id="line-222"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Tree</span></span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html"><span class="hs-identifier">Lens.Micro</span></a></span><span>
</span><span id="line-228"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.html"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#align"><span class="hs-identifier">align</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#hsep"><span class="hs-identifier">hsep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier">viaShow</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#vsep"><span class="hs-identifier">vsep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html"><span class="hs-identifier">Test.Cardano.Ledger.Babbage.ImpTest</span></a></span><span>
</span><span id="line-230"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Arbitrary.html"><span class="hs-identifier">Test.Cardano.Ledger.Conway.Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Era.html"><span class="hs-identifier">Test.Cardano.Ledger.Conway.Era</span></a></span><span>
</span><span id="line-232"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.TreeDiff.html"><span class="hs-identifier">Test.Cardano.Ledger.Conway.TreeDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#tableDoc"><span class="hs-identifier">tableDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html"><span class="hs-identifier">Test.Cardano.Ledger.Core.Rational</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#IsRatio"><span class="hs-identifier">IsRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html"><span class="hs-identifier">Test.Cardano.Ledger.Imp.Common</span></a></span><span>
</span><span id="line-235"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html"><span class="hs-identifier">Test.Cardano.Ledger.Plutus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModel"><span class="hs-identifier">testingCostModel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Guardrail.html"><span class="hs-identifier">Test.Cardano.Ledger.Plutus.Guardrail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Guardrail.html#guardrailScript"><span class="hs-identifier">guardrailScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.html"><span class="hs-identifier">Test.ImpSpec</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><span class="hs-comment">-- | Modify the PParams in the current state with the given function</span></span><span>
</span><span id="line-240"></span><span id="local-6989586621686853303"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyPParams"><span class="hs-identifier hs-type">conwayModifyPParams</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853303"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853303"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853303"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853303"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-244"></span><span id="conwayModifyPParams"><span class="annot"><span class="annottext">conwayModifyPParams :: forall era.
ConwayEraGov era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyPParams"><span class="hs-identifier hs-var hs-var">conwayModifyPParams</span></a></span></span><span> </span><span id="local-6989586621686854876"><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621686854876"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
forall era.
(NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier hs-var">modifyNES</span></a></span><span> </span><span class="annot"><span class="annottext">((NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ())
-&gt; (NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621686854878"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621686854878"><span class="hs-identifier hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621686854878"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">NewEpochState era
-&gt; (NewEpochState era -&gt; NewEpochState era) -&gt; NewEpochState era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Identity (EpochState era))
-&gt; NewEpochState era -&gt; Identity (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Identity (EpochState era))
 -&gt; NewEpochState era -&gt; Identity (NewEpochState era))
-&gt; ((PParams era -&gt; Identity (PParams era))
    -&gt; EpochState era -&gt; Identity (EpochState era))
-&gt; (PParams era -&gt; Identity (PParams era))
-&gt; NewEpochState era
-&gt; Identity (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Identity (PParams era))
-&gt; EpochState era -&gt; Identity (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Identity (PParams era))
 -&gt; NewEpochState era -&gt; Identity (NewEpochState era))
-&gt; (PParams era -&gt; PParams era)
-&gt; NewEpochState era
-&gt; NewEpochState era
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621686854876"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">NewEpochState era
-&gt; (NewEpochState era -&gt; NewEpochState era) -&gt; NewEpochState era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Identity (GovState era))
-&gt; NewEpochState era -&gt; Identity (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Identity (GovState era))
 -&gt; NewEpochState era -&gt; Identity (NewEpochState era))
-&gt; ((DRepPulsingState era -&gt; Identity (DRepPulsingState era))
    -&gt; GovState era -&gt; Identity (GovState era))
-&gt; (DRepPulsingState era -&gt; Identity (DRepPulsingState era))
-&gt; NewEpochState era
-&gt; Identity (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DRepPulsingState era -&gt; Identity (DRepPulsingState era))
-&gt; GovState era -&gt; Identity (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (DRepPulsingState era)
Lens' (GovState era) (DRepPulsingState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#drepPulsingStateGovStateL"><span class="hs-identifier hs-var">drepPulsingStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((DRepPulsingState era -&gt; Identity (DRepPulsingState era))
 -&gt; NewEpochState era -&gt; Identity (NewEpochState era))
-&gt; (DRepPulsingState era -&gt; DRepPulsingState era)
-&gt; NewEpochState era
-&gt; NewEpochState era
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="#local-6989586621686854883"><span class="hs-identifier hs-var">modifyDRepPulser</span></a></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-249"></span><span>    </span><span id="local-6989586621686854883"><span class="annot"><span class="annottext">modifyDRepPulser :: DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="#local-6989586621686854883"><span class="hs-identifier hs-var hs-var">modifyDRepPulser</span></a></span></span><span> </span><span id="local-6989586621686854884"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686854884"><span class="hs-identifier hs-var">pulser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686854884"><span class="hs-identifier hs-var">pulser</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-251"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621686854886"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686854886"><span class="hs-identifier hs-var">snapshot</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686854887"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686854887"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>          </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686854886"><span class="hs-identifier hs-var">snapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686854887"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
-&gt; (RatifyState era -&gt; RatifyState era) -&gt; RatifyState era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(EnactState era -&gt; Identity (EnactState era))
-&gt; RatifyState era -&gt; Identity (RatifyState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EnactState era -&gt; f (EnactState era))
-&gt; RatifyState era -&gt; f (RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsEnactStateL"><span class="hs-identifier hs-var">rsEnactStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((EnactState era -&gt; Identity (EnactState era))
 -&gt; RatifyState era -&gt; Identity (RatifyState era))
-&gt; ((PParams era -&gt; Identity (PParams era))
    -&gt; EnactState era -&gt; Identity (EnactState era))
-&gt; (PParams era -&gt; Identity (PParams era))
-&gt; RatifyState era
-&gt; Identity (RatifyState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Identity (PParams era))
-&gt; EnactState era -&gt; Identity (EnactState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(PParams era -&gt; f (PParams era))
-&gt; EnactState era -&gt; f (EnactState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#ensCurPParamsL"><span class="hs-identifier hs-var">ensCurPParamsL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Identity (PParams era))
 -&gt; RatifyState era -&gt; Identity (RatifyState era))
-&gt; (PParams era -&gt; PParams era)
-&gt; RatifyState era
-&gt; RatifyState era
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621686854876"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621686855028"><span id="local-6989586621686855048"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>  </span><span id="local-6989586621686856657"><span class="annot"><span class="annottext">initGenesis :: forall s (m :: * -&gt; *) g.
(HasKeyPairs s, MonadState s m, HasStatefulGen g m, MonadFail m) =&gt;
m (Genesis ConwayEra)
</span><a href="#local-6989586621686856657"><span class="hs-identifier hs-var hs-var hs-var hs-var">initGenesis</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621686856659"><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole
</span><a href="#local-6989586621686856659"><span class="hs-identifier hs-var">kh1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (KeyHash 'ColdCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621686856661"><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole
</span><a href="#local-6989586621686856661"><span class="hs-identifier hs-var">kh2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (KeyHash 'ColdCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-259"></span><span>      </span><span id="local-6989586621686856664"><span class="annot"><span class="annottext">ccExpiryEpochNo :: EpochNo
</span><a href="#local-6989586621686856664"><span class="hs-identifier hs-var hs-var">ccExpiryEpochNo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochInterval -&gt; EpochNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#addEpochInterval"><span class="hs-identifier hs-var">addEpochInterval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impEraStartEpochNo"><span class="hs-identifier hs-var">impEraStartEpochNo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; EpochInterval
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-var">EpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">15</span></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>      </span><span id="local-6989586621686856667"><span class="annot"><span class="annottext">committee :: Committee ConwayEra
</span><a href="#local-6989586621686856667"><span class="hs-identifier hs-var hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval -&gt; Committee ConwayEra
forall era.
Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval -&gt; Committee era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Committee"><span class="hs-identifier hs-var">Committee</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole -&gt; Credential 'ColdCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole
</span><a href="#local-6989586621686856659"><span class="hs-identifier hs-var">kh1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686856664"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole -&gt; Credential 'ColdCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole
</span><a href="#local-6989586621686856661"><span class="hs-identifier hs-var">kh2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686856664"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>      </span><span id="local-6989586621686856686"><span class="annot"><span class="annottext">constitutionAnchor :: Anchor
</span><a href="#local-6989586621686856686"><span class="hs-identifier hs-var hs-var">constitutionAnchor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>        </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Anchor"><span class="hs-identifier hs-type">Anchor</span></a></span><span>
</span><span id="line-263"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">anchorUrl :: Url
</span><a href="#local-6989586621686856688"><span class="hs-identifier hs-var">anchorUrl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fail Url -&gt; Url
forall a. HasCallStack =&gt; Fail a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/FailT-0.1.2.0-a6bfc8b1703d475e2ae00d40307128c8b38b30577dae60bdff0e62519ebdc06b/share/doc/html/src/Control.Monad.Trans.Fail.String.html#errorFail"><span class="hs-identifier hs-var">errorFail</span></a></span><span> </span><span class="annot"><span class="annottext">(Fail Url -&gt; Url) -&gt; Fail Url -&gt; Url
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Fail Url
forall (m :: * -&gt; *). MonadFail m =&gt; Int -&gt; Text -&gt; m Url
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#textToUrl"><span class="hs-identifier hs-var">textToUrl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">128</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;https://cardano-constitution.crypto&quot;</span></span><span>
</span><span id="line-264"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">anchorDataHash :: SafeHash AnchorData
</span><a href="#local-6989586621686856689"><span class="hs-identifier hs-var">anchorDataHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnchorData -&gt; SafeHash AnchorData
forall x i. HashAnnotated x i =&gt; x -&gt; SafeHash i
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#hashAnnotated"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; AnchorData
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#AnchorData"><span class="hs-identifier hs-var">AnchorData</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;Cardano Constitution Content&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-266"></span><span>      </span><span id="local-6989586621686856694"><span class="annot"><span class="annottext">guardrailScriptHash :: ScriptHash
</span><a href="#local-6989586621686856694"><span class="hs-identifier hs-var hs-var">guardrailScriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3 -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">Plutus 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Guardrail.html#guardrailScript"><span class="hs-identifier hs-var">guardrailScript</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">ConwayGenesis -&gt; m ConwayGenesis
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-268"></span><span>      </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Genesis.html#ConwayGenesis"><span class="hs-identifier hs-type">ConwayGenesis</span></a></span><span>
</span><span id="line-269"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cgUpgradePParams :: UpgradeConwayPParams Identity
</span><a href="#local-6989586621686856696"><span class="hs-identifier hs-var">cgUpgradePParams</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>            </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#UpgradeConwayPParams"><span class="hs-identifier hs-type">UpgradeConwayPParams</span></a></span><span>
</span><span id="line-271"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ucppPoolVotingThresholds :: HKD Identity PoolVotingThresholds
</span><a href="#local-6989586621686856698"><span class="hs-identifier hs-var">ucppPoolVotingThresholds</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-272"></span><span>                  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#PoolVotingThresholds"><span class="hs-identifier hs-type">PoolVotingThresholds</span></a></span><span>
</span><span id="line-273"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pvtMotionNoConfidence :: UnitInterval
</span><a href="#local-6989586621686856700"><span class="hs-identifier hs-var">pvtMotionNoConfidence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-274"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pvtCommitteeNormal :: UnitInterval
</span><a href="#local-6989586621686856701"><span class="hs-identifier hs-var">pvtCommitteeNormal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">65</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-275"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pvtCommitteeNoConfidence :: UnitInterval
</span><a href="#local-6989586621686856702"><span class="hs-identifier hs-var">pvtCommitteeNoConfidence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">65</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-276"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pvtHardForkInitiation :: UnitInterval
</span><a href="#local-6989586621686856703"><span class="hs-identifier hs-var">pvtHardForkInitiation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-277"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pvtPPSecurityGroup :: UnitInterval
</span><a href="#local-6989586621686856704"><span class="hs-identifier hs-var">pvtPPSecurityGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-278"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-279"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppDRepVotingThresholds :: HKD Identity DRepVotingThresholds
</span><a href="#local-6989586621686856705"><span class="hs-identifier hs-var">ucppDRepVotingThresholds</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>                  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#DRepVotingThresholds"><span class="hs-identifier hs-type">DRepVotingThresholds</span></a></span><span>
</span><span id="line-281"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dvtMotionNoConfidence :: UnitInterval
</span><a href="#local-6989586621686856707"><span class="hs-identifier hs-var">dvtMotionNoConfidence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-282"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtCommitteeNormal :: UnitInterval
</span><a href="#local-6989586621686856708"><span class="hs-identifier hs-var">dvtCommitteeNormal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">65</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-283"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtCommitteeNoConfidence :: UnitInterval
</span><a href="#local-6989586621686856709"><span class="hs-identifier hs-var">dvtCommitteeNoConfidence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">65</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-284"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtUpdateToConstitution :: UnitInterval
</span><a href="#local-6989586621686856710"><span class="hs-identifier hs-var">dvtUpdateToConstitution</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">65</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-285"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtHardForkInitiation :: UnitInterval
</span><a href="#local-6989586621686856711"><span class="hs-identifier hs-var">dvtHardForkInitiation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-286"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtPPNetworkGroup :: UnitInterval
</span><a href="#local-6989586621686856712"><span class="hs-identifier hs-var">dvtPPNetworkGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-287"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtPPEconomicGroup :: UnitInterval
</span><a href="#local-6989586621686856713"><span class="hs-identifier hs-var">dvtPPEconomicGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-288"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtPPTechnicalGroup :: UnitInterval
</span><a href="#local-6989586621686856714"><span class="hs-identifier hs-var">dvtPPTechnicalGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-289"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtPPGovGroup :: UnitInterval
</span><a href="#local-6989586621686856715"><span class="hs-identifier hs-var">dvtPPGovGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">75</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-290"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dvtTreasuryWithdrawal :: UnitInterval
</span><a href="#local-6989586621686856716"><span class="hs-identifier hs-var">dvtTreasuryWithdrawal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">51</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span>
</span><span id="line-291"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppCommitteeMinSize :: HKD Identity Word16
</span><a href="#local-6989586621686856717"><span class="hs-identifier hs-var">ucppCommitteeMinSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16
HKD Identity Word16
</span><span class="hs-number">1</span></span><span>
</span><span id="line-293"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppCommitteeMaxTermLength :: HKD Identity EpochInterval
</span><a href="#local-6989586621686856718"><span class="hs-identifier hs-var">ucppCommitteeMaxTermLength</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; EpochInterval
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-var">EpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">20</span></span><span>
</span><span id="line-294"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppGovActionLifetime :: HKD Identity EpochInterval
</span><a href="#local-6989586621686856719"><span class="hs-identifier hs-var">ucppGovActionLifetime</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; EpochInterval
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-var">EpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">30</span></span><span>
</span><span id="line-295"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppGovActionDeposit :: HKD Identity Coin
</span><a href="#local-6989586621686856720"><span class="hs-identifier hs-var">ucppGovActionDeposit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">123</span></span><span>
</span><span id="line-296"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppDRepDeposit :: HKD Identity Coin
</span><a href="#local-6989586621686856722"><span class="hs-identifier hs-var">ucppDRepDeposit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">70_000_000</span></span><span>
</span><span id="line-297"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppDRepActivity :: HKD Identity EpochInterval
</span><a href="#local-6989586621686856723"><span class="hs-identifier hs-var">ucppDRepActivity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; EpochInterval
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-var">EpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">100</span></span><span>
</span><span id="line-298"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppMinFeeRefScriptCostPerByte :: HKD Identity NonNegativeInterval
</span><a href="#local-6989586621686856724"><span class="hs-identifier hs-var">ucppMinFeeRefScriptCostPerByte</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">15</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; NonNegativeInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-299"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ucppPlutusV3CostModel :: HKD Identity CostModel
</span><a href="#local-6989586621686856725"><span class="hs-identifier hs-var">ucppPlutusV3CostModel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Language -&gt; CostModel
Language -&gt; CostModel
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.html#testingCostModel"><span class="hs-identifier hs-var">testingCostModel</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#PlutusV3"><span class="hs-identifier hs-var">PlutusV3</span></a></span><span>
</span><span id="line-300"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgConstitution :: Constitution ConwayEra
</span><a href="#local-6989586621686856726"><span class="hs-identifier hs-var">cgConstitution</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution ConwayEra
forall era. Anchor -&gt; StrictMaybe ScriptHash -&gt; Constitution era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-var">Constitution</span></a></span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686856686"><span class="hs-identifier hs-var">constitutionAnchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StrictMaybe ScriptHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621686856694"><span class="hs-identifier hs-var">guardrailScriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgCommittee :: Committee ConwayEra
</span><a href="#local-6989586621686856729"><span class="hs-identifier hs-var">cgCommittee</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Committee ConwayEra
</span><a href="#local-6989586621686856667"><span class="hs-identifier hs-var">committee</span></a></span><span>
</span><span id="line-303"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgDelegs :: ListMap (Credential 'Staking) Delegatee
</span><a href="#local-6989586621686856730"><span class="hs-identifier hs-var">cgDelegs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListMap (Credential 'Staking) Delegatee
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cgInitialDReps :: ListMap (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686856731"><span class="hs-identifier hs-var">cgInitialDReps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListMap (Credential 'DRepRole) DRepState
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621686856739"><span class="annot"><span class="annottext">impSatisfyNativeScript :: Set (KeyHash 'Witness)
-&gt; TxBody ConwayEra
-&gt; NativeScript ConwayEra
-&gt; ImpTestM
     ConwayEra (Maybe (Map (KeyHash 'Witness) (KeyPair 'Witness)))
</span><a href="#local-6989586621686856739"><span class="hs-identifier hs-var hs-var hs-var hs-var">impSatisfyNativeScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness)
-&gt; TxBody ConwayEra
-&gt; NativeScript ConwayEra
-&gt; ImpTestM
     ConwayEra (Maybe (Map (KeyHash 'Witness) (KeyPair 'Witness)))
forall era.
(ShelleyEraImp era, AllegraEraScript era, AllegraEraTxBody era,
 NativeScript era ~ Timelock era) =&gt;
Set (KeyHash 'Witness)
-&gt; TxBody era
-&gt; NativeScript era
-&gt; ImpTestM era (Maybe (Map (KeyHash 'Witness) (KeyPair 'Witness)))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/l/testlib/doc/html/cardano-ledger-allegra/src/Test.Cardano.Ledger.Allegra.ImpTest.html#impAllegraSatisfyNativeScript"><span class="hs-identifier hs-var">impAllegraSatisfyNativeScript</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>  </span><span id="local-6989586621686856743"><span class="annot"><span class="annottext">modifyPParams :: (PParams ConwayEra -&gt; PParams ConwayEra) -&gt; ImpTestM ConwayEra ()
</span><a href="#local-6989586621686856743"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifyPParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PParams ConwayEra -&gt; PParams ConwayEra) -&gt; ImpTestM ConwayEra ()
forall era.
ConwayEraGov era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyPParams"><span class="hs-identifier hs-var">conwayModifyPParams</span></a></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>  </span><span id="local-6989586621686856751"><span class="annot"><span class="annottext">fixupTx :: HasCallStack =&gt; Tx ConwayEra -&gt; ImpTestM ConwayEra (Tx ConwayEra)
</span><a href="#local-6989586621686856751"><span class="hs-identifier hs-var hs-var hs-var hs-var">fixupTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; ImpTestM ConwayEra (Tx ConwayEra)
forall era.
(HasCallStack, AlonzoEraImp era, BabbageEraTxBody era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html#babbageFixupTx"><span class="hs-identifier hs-var">babbageFixupTx</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span id="local-6989586621686856759"><span class="annot"><span class="annottext">expectTxSuccess :: HasCallStack =&gt; Tx ConwayEra -&gt; ImpTestM ConwayEra ()
</span><a href="#local-6989586621686856759"><span class="hs-identifier hs-var hs-var hs-var hs-var">expectTxSuccess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; ImpTestM ConwayEra ()
forall era.
(HasCallStack, AlonzoEraImp era, BabbageEraTxBody era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html#impBabbageExpectTxSuccess"><span class="hs-identifier hs-var">impBabbageExpectTxSuccess</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621686856765"><span class="annot"><span class="annottext">modifyImpInitProtVer :: ShelleyEraImp ConwayEra =&gt;
Version
-&gt; SpecWith (ImpInit (LedgerSpec ConwayEra))
-&gt; SpecWith (ImpInit (LedgerSpec ConwayEra))
</span><a href="#local-6989586621686856765"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifyImpInitProtVer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; SpecWith (ImpInit (LedgerSpec ConwayEra))
-&gt; SpecWith (ImpInit (LedgerSpec ConwayEra))
forall era.
ConwayEraImp era =&gt;
Version
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyImpInitProtVer"><span class="hs-identifier hs-var">conwayModifyImpInitProtVer</span></a></span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621686856770"><span class="annot"><span class="annottext">genRegTxCert :: Credential 'Staking -&gt; ImpTestM ConwayEra (TxCert ConwayEra)
</span><a href="#local-6989586621686856770"><span class="hs-identifier hs-var hs-var hs-var hs-var">genRegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpTestM ConwayEra (TxCert ConwayEra)
forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ShelleyEraTxCert era) =&gt;
Credential 'Staking -&gt; ImpTestM era (TxCert era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenRegTxCert"><span class="hs-identifier hs-var">conwayGenRegTxCert</span></a></span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621686856776"><span class="annot"><span class="annottext">genUnRegTxCert :: Credential 'Staking -&gt; ImpTestM ConwayEra (TxCert ConwayEra)
</span><a href="#local-6989586621686856776"><span class="hs-identifier hs-var hs-var hs-var hs-var">genUnRegTxCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpTestM ConwayEra (TxCert ConwayEra)
forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ShelleyEraTxCert era) =&gt;
Credential 'Staking -&gt; ImpTestM era (TxCert era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenUnRegTxCert"><span class="hs-identifier hs-var">conwayGenUnRegTxCert</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyImpInitProtVer"><span class="hs-identifier hs-type">conwayModifyImpInitProtVer</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686853852"><span class="annot"><a href="#local-6989586621686853852"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853852"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Version.html#Version"><span class="hs-identifier hs-type">Version</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853852"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853852"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span id="conwayModifyImpInitProtVer"><span class="annot"><span class="annottext">conwayModifyImpInitProtVer :: forall era.
ConwayEraImp era =&gt;
Version
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayModifyImpInitProtVer"><span class="hs-identifier hs-var hs-var">conwayModifyImpInitProtVer</span></a></span></span><span> </span><span id="local-6989586621686856819"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621686856819"><span class="hs-identifier hs-var">ver</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">(ImpInit (LedgerSpec era) -&gt; ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall t.
(ImpInit t -&gt; ImpInit t)
-&gt; SpecWith (ImpInit t) -&gt; SpecWith (ImpInit t)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#modifyImpInit"><span class="hs-identifier hs-var">modifyImpInit</span></a></span><span> </span><span class="annot"><span class="annottext">((ImpInit (LedgerSpec era) -&gt; ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (ImpInit (LedgerSpec era) -&gt; ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621686856821"><span class="annot"><span class="annottext">ImpInit (LedgerSpec era)
</span><a href="#local-6989586621686856821"><span class="hs-identifier hs-var">impInit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><span class="annottext">ImpInit (LedgerSpec era)
</span><a href="#local-6989586621686856821"><span class="hs-identifier hs-var">impInit</span></a></span><span>
</span><span id="line-326"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impInitState"><span class="hs-identifier hs-var">impInitState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-327"></span><span>          </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impInitState"><span class="hs-identifier hs-var">impInitState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686856821"><span class="hs-identifier hs-type">impInit</span></a></span><span>
</span><span id="line-328"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">&amp;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-type">impNESL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-type">nesEsL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-type">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppProtocolVersionL"><span class="hs-identifier hs-type">ppProtocolVersionL</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-type">.~</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ProtVer"><span class="hs-identifier hs-type">ProtVer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686856819"><span class="hs-identifier hs-type">ver</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-329"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">&amp;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-type">impNESL</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-type">nesEsL</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-type">%~</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621686856827"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621686856827"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
-&gt; RatifyState era -&gt; EpochState era -&gt; EpochState era
forall era.
ConwayEraGov era =&gt;
PulsingSnapshot era
-&gt; RatifyState era -&gt; EpochState era -&gt; EpochState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#setCompleteDRepPulsingState"><span class="hs-identifier hs-var">setCompleteDRepPulsingState</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochState era -&gt; RatifyState era
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ConwayEraGov era) =&gt;
EpochState era -&gt; RatifyState era
</span><a href="#local-6989586621686856830"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621686856827"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621686856827"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-332"></span><span>    </span><span id="local-6989586621686856830"><span class="annot"><span class="annottext">ratifyState :: EpochState era -&gt; RatifyState era
</span><a href="#local-6989586621686856830"><span class="hs-identifier hs-var hs-var">ratifyState</span></a></span></span><span> </span><span id="local-6989586621686857128"><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621686857128"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RatifyState era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
-&gt; (RatifyState era -&gt; RatifyState era) -&gt; RatifyState era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(EnactState era -&gt; Identity (EnactState era))
-&gt; RatifyState era -&gt; Identity (RatifyState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EnactState era -&gt; f (EnactState era))
-&gt; RatifyState era -&gt; f (RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsEnactStateL"><span class="hs-identifier hs-var">rsEnactStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((EnactState era -&gt; Identity (EnactState era))
 -&gt; RatifyState era -&gt; Identity (RatifyState era))
-&gt; EnactState era -&gt; RatifyState era -&gt; RatifyState era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">GovState era -&gt; EnactState era
forall era. ConwayEraGov era =&gt; GovState era -&gt; EnactState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#mkEnactState"><span class="hs-identifier hs-var">mkEnactState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621686857128"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">EpochState era
-&gt; Getting (GovState era) (EpochState era) (GovState era)
-&gt; GovState era
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (GovState era) (EpochState era) (GovState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/l/testlib/doc/html/cardano-ledger-mary/src/Test.Cardano.Ledger.Mary.ImpTest.html#MaryEraImp"><span class="hs-identifier hs-type">MaryEraImp</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#AlonzoEraImp"><span class="hs-identifier hs-type">AlonzoEraImp</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-337"></span><span>  </span><span id="local-6989586621686857195"><span class="annot"><span class="annottext">scriptTestContexts :: Map ScriptHash ScriptTestContext
</span><a href="#local-6989586621686857195"><span class="hs-identifier hs-var hs-var hs-var hs-var">scriptTestContexts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1 -&gt; Map ScriptHash ScriptTestContext
forall (l :: Language).
PlutusLanguage l =&gt;
SLanguage l -&gt; Map ScriptHash ScriptTestContext
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#plutusTestScripts"><span class="hs-identifier hs-var">plutusTestScripts</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV1
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV1"><span class="hs-identifier hs-var">SPlutusV1</span></a></span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">Map ScriptHash ScriptTestContext
-&gt; Map ScriptHash ScriptTestContext
-&gt; Map ScriptHash ScriptTestContext
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2 -&gt; Map ScriptHash ScriptTestContext
forall (l :: Language).
PlutusLanguage l =&gt;
SLanguage l -&gt; Map ScriptHash ScriptTestContext
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#plutusTestScripts"><span class="hs-identifier hs-var">plutusTestScripts</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV2
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV2"><span class="hs-identifier hs-var">SPlutusV2</span></a></span><span>
</span><span id="line-340"></span><span>      </span><span class="annot"><span class="annottext">Map ScriptHash ScriptTestContext
-&gt; Map ScriptHash ScriptTestContext
-&gt; Map ScriptHash ScriptTestContext
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3 -&gt; Map ScriptHash ScriptTestContext
forall (l :: Language).
PlutusLanguage l =&gt;
SLanguage l -&gt; Map ScriptHash ScriptTestContext
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/l/testlib/doc/html/cardano-ledger-alonzo/src/Test.Cardano.Ledger.Alonzo.ImpTest.html#plutusTestScripts"><span class="hs-identifier hs-var">plutusTestScripts</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage 'PlutusV3
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#SPlutusV3"><span class="hs-identifier hs-var">SPlutusV3</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html#BabbageEraImp"><span class="hs-identifier hs-type">BabbageEraImp</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-keyword">class</span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-babbage-1.12.1.0/l/testlib/doc/html/cardano-ledger-babbage/src/Test.Cardano.Ledger.Babbage.ImpTest.html#BabbageEraImp"><span class="hs-identifier hs-type">BabbageEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.Era.html#ConwayEraTest"><span class="hs-identifier hs-type">ConwayEraTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#STS"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#BaseM"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ShelleyBase"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#EnactState"><span class="hs-identifier hs-type">EnactState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Signal"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Enact.html#EnactSignal"><span class="hs-identifier hs-type">EnactSignal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-351"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Environment"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Event"><span class="hs-identifier hs-type">Event</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;ENACT&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#GovState"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayGovState"><span class="hs-identifier hs-type">ConwayGovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxow.html#ConwayUtxowPredFailure"><span class="hs-identifier hs-type">ConwayUtxowPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxos.html#ConwayUtxosPredFailure"><span class="hs-identifier hs-type">ConwayUtxosPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ledger.html#ConwayLedgerPredFailure"><span class="hs-identifier hs-type">ConwayLedgerPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Certs.html#ConwayCertsPredFailure"><span class="hs-identifier hs-type">ConwayCertsPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Deleg.html#ConwayDelegPredFailure"><span class="hs-identifier hs-type">ConwayDelegPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Gov.html#ConwayGovPredFailure"><span class="hs-identifier hs-type">ConwayGovPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Utxo.html#ConwayUtxoPredFailure"><span class="hs-identifier hs-type">ConwayUtxoPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.GovCert.html#ConwayGovCertPredFailure"><span class="hs-identifier hs-type">ConwayGovCertPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;BBODY&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Bbody.html#ConwayBbodyPredFailure"><span class="hs-identifier hs-type">ConwayBbodyPredFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleEvent"><span class="hs-identifier hs-type">InjectRuleEvent</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.HardFork.html#ConwayHardForkEvent"><span class="hs-identifier hs-type">ConwayHardForkEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleEvent"><span class="hs-identifier hs-type">InjectRuleEvent</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Epoch.html#ConwayEpochEvent"><span class="hs-identifier hs-type">ConwayEpochEvent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-369"></span><span>  </span><span id="ConwayEraImp"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-var">ConwayEraImp</span></a></span></span><span> </span><span id="local-6989586621686853868"><span class="annot"><a href="#local-6989586621686853868"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span id="local-6989586621686853941"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-type">registerInitialCommittee</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853941"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-375"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853941"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-376"></span><span id="registerInitialCommittee"><span class="annot"><span class="annottext">registerInitialCommittee :: forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerInitialCommittee"><span class="hs-identifier hs-var hs-var">registerInitialCommittee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-377"></span><span>  </span><span id="local-6989586621686857346"><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
</span><a href="#local-6989586621686857346"><span class="hs-identifier hs-var">committeeMembers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; [Credential 'ColdCommitteeRole]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; [Credential 'ColdCommitteeRole])
-&gt; ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
-&gt; ImpM (LedgerSpec era) [Credential 'ColdCommitteeRole]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
</span><a href="#local-6989586621686857346"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621686857349"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686857349"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621686857350"><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
</span><a href="#local-6989586621686857350"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
ImpTestM era (Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKeys"><span class="hs-identifier hs-var">registerCommitteeHotKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
-&gt; ImpTestM era (Credential 'HotCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Credential 'ColdCommitteeRole)
 -&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole)))
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686857349"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; [Credential 'ColdCommitteeRole]
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="annot"><span class="annottext">[Credential 'ColdCommitteeRole]
</span><a href="#local-6989586621686857350"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected an initial committee&quot;</span></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-comment">-- | Submit a transaction that registers a new DRep and return the keyhash</span><span>
</span><span id="line-383"></span><span class="hs-comment">-- belonging to that DRep</span><span>
</span><span id="line-384"></span><span id="local-6989586621686853963"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerDRep"><span class="hs-identifier hs-type">registerDRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853963"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853963"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-385"></span><span id="registerDRep"><span class="annot"><span class="annottext">registerDRep :: forall era. ConwayEraImp era =&gt; ImpTestM era (KeyHash 'DRepRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerDRep"><span class="hs-identifier hs-var hs-var">registerDRep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-comment">-- Register a DRep</span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621686857413"><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857413"><span class="hs-identifier hs-var">khDRep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (KeyHash 'DRepRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621686857414"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686857414"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-389"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Register DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span>
</span><span id="line-393"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Coin -&gt; StrictMaybe Anchor -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDRepTxCert"><span class="hs-identifier hs-var">RegDRepTxCert</span></a></span><span>
</span><span id="line-394"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857413"><span class="hs-identifier hs-var">khDRep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686857414"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppDRepDepositL"><span class="hs-identifier hs-var">ppDRepDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>              </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-397"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>  </span><span id="local-6989586621686857428"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686857428"><span class="hs-identifier hs-var">dreps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
 -&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState))
-&gt; SimpleGetter
     (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState
 -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span>
</span><span id="line-399"></span><span>  </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686857428"><span class="hs-identifier hs-var">dreps</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
-&gt; (Map (Credential 'DRepRole) DRepState -&gt; Bool)
-&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a) =&gt;
a -&gt; (a -&gt; Bool) -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldSatisfy"><span class="hs-operator hs-var">`shouldSatisfy`</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857413"><span class="hs-identifier hs-var">khDRep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; ImpTestM era (KeyHash 'DRepRole)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857413"><span class="hs-identifier hs-var">khDRep</span></a></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="annot"><span class="hs-comment">-- | Submit a transaction that unregisters a given DRep</span></span><span>
</span><span id="line-403"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#unRegisterDRep"><span class="hs-identifier hs-type">unRegisterDRep</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686853998"><span class="annot"><a href="#local-6989586621686853998"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853998"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853998"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853998"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853998"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span id="unRegisterDRep"><span class="annot"><span class="annottext">unRegisterDRep :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#unRegisterDRep"><span class="hs-identifier hs-var hs-var">unRegisterDRep</span></a></span></span><span> </span><span id="local-6989586621686857466"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857466"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-412"></span><span>  </span><span id="local-6989586621686857467"><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686857467"><span class="hs-identifier hs-var">drepState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; ImpTestM era DRepState
forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era DRepState
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getDRepState"><span class="hs-identifier hs-var">getDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857466"><span class="hs-identifier hs-var">drep</span></a></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686857469"><span class="annot"><span class="annottext">refund :: Coin
</span><a href="#local-6989586621686857469"><span class="hs-identifier hs-var hs-var">refund</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; Coin
forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; Coin) -&gt; CompactForm Coin -&gt; Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DRepState -&gt; CompactForm Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#drepDeposit"><span class="hs-identifier hs-var">drepDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686857467"><span class="hs-identifier hs-var">drepState</span></a></span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UnRegister DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-415"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-416"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-417"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDRepTxCert"><span class="hs-identifier hs-var">UnRegDRepTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857466"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857469"><span class="hs-identifier hs-var">refund</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenUnRegTxCert"><span class="hs-identifier hs-type">conwayGenUnRegTxCert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686857472"><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyEraTxCert"><span class="hs-identifier hs-type">ShelleyEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-425"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-426"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">TxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686857472"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span id="conwayGenUnRegTxCert"><span class="annot"><span class="annottext">conwayGenUnRegTxCert :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ShelleyEraTxCert era) =&gt;
Credential 'Staking -&gt; ImpTestM era (TxCert era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenUnRegTxCert"><span class="hs-identifier hs-var hs-var">conwayGenUnRegTxCert</span></a></span></span><span> </span><span id="local-6989586621686857494"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857494"><span class="hs-identifier hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-428"></span><span>  </span><span id="local-6989586621686857495"><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621686857495"><span class="hs-identifier hs-var">accounts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Accounts era)
-&gt; ImpTestM era (Accounts era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; Const r (DState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era. EraCertState era =&gt; Lens' (CertState era) (DState era)
Lens' (CertState era) (DState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#certDStateL"><span class="hs-identifier hs-var">certDStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((DState era -&gt; Const r (DState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; DState era -&gt; Const r (DState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Accounts era -&gt; Const r (Accounts era))
-&gt; DState era -&gt; Const r (DState era)
forall era. Lens' (DState era) (Accounts era)
forall (t :: * -&gt; *) era.
CanSetAccounts t =&gt;
Lens' (t era) (Accounts era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#accountsL"><span class="hs-identifier hs-var">accountsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Accounts era -&gt; Maybe (AccountState era)
forall era.
EraAccounts era =&gt;
Credential 'Staking -&gt; Accounts era -&gt; Maybe (AccountState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#lookupAccountState"><span class="hs-identifier hs-var">lookupAccountState</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857494"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span> </span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621686857495"><span class="hs-identifier hs-var">accounts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-430"></span><span>    </span><span class="annot"><span class="annottext">Maybe (AccountState era)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpTestM era (TxCert era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TxCert era -&gt; ImpTestM era (TxCert era))
-&gt; TxCert era -&gt; ImpTestM era (TxCert era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#UnRegTxCert"><span class="hs-identifier hs-var">UnRegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857494"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686857508"><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621686857508"><span class="hs-identifier hs-var">accountState</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="annottext">[TxCert era] -&gt; ImpTestM era (TxCert era)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#elements"><span class="hs-identifier hs-var">elements</span></a></span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#UnRegTxCert"><span class="hs-identifier hs-var">UnRegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857494"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UnRegDepositTxCert"><span class="hs-identifier hs-var">UnRegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857494"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompactForm Coin -&gt; Coin
forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#fromCompact"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621686857508"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; Getting (CompactForm Coin) (AccountState era) (CompactForm Coin)
-&gt; CompactForm Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (CompactForm Coin) (AccountState era) (CompactForm Coin)
forall era.
EraAccounts era =&gt;
Lens' (AccountState era) (CompactForm Coin)
Lens' (AccountState era) (CompactForm Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#depositAccountStateL"><span class="hs-identifier hs-var">depositAccountStateL</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenRegTxCert"><span class="hs-identifier hs-type">conwayGenRegTxCert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686853853"><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyEraTxCert"><span class="hs-identifier hs-type">ShelleyEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-443"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">TxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853853"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span id="conwayGenRegTxCert"><span class="annot"><span class="annottext">conwayGenRegTxCert :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ShelleyEraTxCert era) =&gt;
Credential 'Staking -&gt; ImpTestM era (TxCert era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#conwayGenRegTxCert"><span class="hs-identifier hs-var hs-var">conwayGenRegTxCert</span></a></span></span><span> </span><span id="local-6989586621686857527"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857527"><span class="hs-identifier hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="annottext">[ImpM (LedgerSpec era) (TxCert era)]
-&gt; ImpM (LedgerSpec era) (TxCert era)
forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#oneof"><span class="hs-identifier hs-var">oneof</span></a></span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; ImpM (LedgerSpec era) (TxCert era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TxCert era -&gt; ImpM (LedgerSpec era) (TxCert era))
-&gt; TxCert era -&gt; ImpM (LedgerSpec era) (TxCert era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#RegTxCert"><span class="hs-identifier hs-var">RegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857527"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositTxCert"><span class="hs-identifier hs-var">RegDepositTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857527"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-449"></span><span>        </span><span class="annot"><span class="annottext">(Coin -&gt; TxCert era)
-&gt; ImpM (LedgerSpec era) Coin -&gt; ImpM (LedgerSpec era) (TxCert era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpM (LedgerSpec era) Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="annot"><span class="hs-comment">-- | Submit a transaction that updates a given DRep</span></span><span>
</span><span id="line-453"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#updateDRep"><span class="hs-identifier hs-type">updateDRep</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854026"><span class="annot"><a href="#local-6989586621686854026"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854026"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854026"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854026"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span id="updateDRep"><span class="annot"><span class="annottext">updateDRep :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#updateDRep"><span class="hs-identifier hs-var hs-var">updateDRep</span></a></span></span><span> </span><span id="local-6989586621686857559"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857559"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621686857560"><span class="annot"><span class="annottext">StrictMaybe Anchor
</span><a href="#local-6989586621686857560"><span class="hs-identifier hs-var">mAnchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (StrictMaybe Anchor)
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-462"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Update DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-463"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-464"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-465"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; StrictMaybe Anchor -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'DRepRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#UpdateDRepTxCert"><span class="hs-identifier hs-var">UpdateDRepTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857559"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
</span><a href="#local-6989586621686857560"><span class="hs-identifier hs-var">mAnchor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- | In contrast to `setupSingleDRep`, this function does not make a UTxO entry</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- that could count as delegated stake to the DRep</span><span>
</span><span id="line-469"></span><span id="local-6989586621686854033"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupDRepWithoutStake"><span class="hs-identifier hs-type">setupDRepWithoutStake</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-470"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854033"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-471"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854033"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-472"></span><span id="setupDRepWithoutStake"><span class="annot"><span class="annottext">setupDRepWithoutStake :: forall era.
ConwayEraImp era =&gt;
ImpTestM era (KeyHash 'DRepRole, KeyHash 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupDRepWithoutStake"><span class="hs-identifier hs-var hs-var">setupDRepWithoutStake</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-473"></span><span>  </span><span id="local-6989586621686857603"><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857603"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (KeyHash 'DRepRole)
forall era. ConwayEraImp era =&gt; ImpTestM era (KeyHash 'DRepRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerDRep"><span class="hs-identifier hs-var">registerDRep</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span id="local-6989586621686857604"><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857604"><span class="hs-identifier hs-var">delegatorKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-475"></span><span>  </span><span id="local-6989586621686857605"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857605"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin)
-&gt; SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Delegate to DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-480"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositDelegTxCert"><span class="hs-identifier hs-var">RegDepositDelegTxCert</span></a></span><span>
</span><span id="line-481"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857604"><span class="hs-identifier hs-var">delegatorKH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'DRepRole -&gt; DRep) -&gt; Credential 'DRepRole -&gt; DRep
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857603"><span class="hs-identifier hs-var">drepKH</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>              </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857605"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-484"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-485"></span><span>  </span><span class="annot"><span class="annottext">(KeyHash 'DRepRole, KeyHash 'Staking)
-&gt; ImpTestM era (KeyHash 'DRepRole, KeyHash 'Staking)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857603"><span class="hs-identifier hs-var">drepKH</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857604"><span class="hs-identifier hs-var">delegatorKH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="annot"><span class="hs-comment">-- | Registers a new DRep, registers its stake credentials and delegates the specified amount of ADA to it.</span></span><span>
</span><span id="line-488"></span><span id="local-6989586621686854039"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-type">setupSingleDRep</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-489"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854039"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-490"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-491"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854039"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#KeyPair"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-492"></span><span id="setupSingleDRep"><span class="annot"><span class="annottext">setupSingleDRep :: forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var hs-var">setupSingleDRep</span></a></span></span><span> </span><span id="local-6989586621686857664"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621686857664"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Set up a single DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM
   (LedgerSpec era)
   (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
 -&gt; ImpM
      (LedgerSpec era)
      (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment))
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-493"></span><span>  </span><span id="local-6989586621686857666"><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857666"><span class="hs-identifier hs-var">drepKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (KeyHash 'DRepRole)
forall era. ConwayEraImp era =&gt; ImpTestM era (KeyHash 'DRepRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerDRep"><span class="hs-identifier hs-var">registerDRep</span></a></span><span>
</span><span id="line-494"></span><span>  </span><span id="local-6989586621686857667"><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857667"><span class="hs-identifier hs-var">delegatorKH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-495"></span><span>  </span><span id="local-6989586621686857668"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857668"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin)
-&gt; SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686857674"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621686857674"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-497"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-498"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-499"></span><span>            </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositTxCert"><span class="hs-identifier hs-var">RegDepositTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857667"><span class="hs-identifier hs-var">delegatorKH</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857668"><span class="hs-identifier hs-var">deposit</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><span class="annottext">Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686857674"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-501"></span><span>  </span><span id="local-6989586621686857676"><span class="annot"><span class="annottext">KeyPair 'Payment
</span><a href="#local-6989586621686857676"><span class="hs-identifier hs-var">spendingKP</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><span class="annottext">Credential 'Staking
-&gt; Coin -&gt; DRep -&gt; ImpTestM era (KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Credential 'Staking
-&gt; Coin -&gt; DRep -&gt; ImpTestM era (KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateToDRep"><span class="hs-identifier hs-var">delegateToDRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857667"><span class="hs-identifier hs-var">delegatorKH</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621686857664"><span class="hs-identifier hs-var">stake</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-var">DRepCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857666"><span class="hs-identifier hs-var">drepKH</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span>  </span><span class="annot"><span class="annottext">(Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'DRepRole -&gt; Credential 'DRepRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'DRepRole
</span><a href="#local-6989586621686857666"><span class="hs-identifier hs-var">drepKH</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking
</span><a href="#local-6989586621686857667"><span class="hs-identifier hs-var">delegatorKH</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><a href="#local-6989586621686857676"><span class="hs-identifier hs-var">spendingKP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span id="local-6989586621686854051"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateToDRep"><span class="hs-identifier hs-type">delegateToDRep</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-506"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854051"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-509"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-510"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854051"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#KeyPair"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-511"></span><span id="delegateToDRep"><span class="annot"><span class="annottext">delegateToDRep :: forall era.
ConwayEraImp era =&gt;
Credential 'Staking
-&gt; Coin -&gt; DRep -&gt; ImpTestM era (KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateToDRep"><span class="hs-identifier hs-var hs-var">delegateToDRep</span></a></span></span><span> </span><span id="local-6989586621686857741"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857741"><span class="hs-identifier hs-var">cred</span></a></span></span><span> </span><span id="local-6989586621686857742"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857742"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span id="local-6989586621686857743"><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621686857743"><span class="hs-identifier hs-var">dRep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686857744"><span class="annot"><span class="annottext">KeyPair 'Payment
</span><a href="#local-6989586621686857744"><span class="hs-identifier hs-var">spendingKP</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Payment, KeyPair 'Payment)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r, KeyPair r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyPair"><span class="hs-identifier hs-var">freshKeyPair</span></a></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Delegate to DRep&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-515"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-516"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-517"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxOut era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; StrictSeq (TxOut era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyPair 'Payment -&gt; Credential 'Staking -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><a href="#local-6989586621686857744"><span class="hs-identifier hs-var">spendingKP</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857741"><span class="hs-identifier hs-var">cred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; MaryValue
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857742"><span class="hs-identifier hs-var">stake</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-518"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-519"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Delegatee -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegTxCert"><span class="hs-identifier hs-var">DelegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857741"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRep -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegVote"><span class="hs-identifier hs-var">DelegVote</span></a></span><span> </span><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621686857743"><span class="hs-identifier hs-var">dRep</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-520"></span><span>  </span><span class="annot"><span class="annottext">KeyPair 'Payment -&gt; ImpTestM era (KeyPair 'Payment)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><a href="#local-6989586621686857744"><span class="hs-identifier hs-var">spendingKP</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span id="local-6989586621686854004"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getDRepState"><span class="hs-identifier hs-type">getDRepState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854004"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-524"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854004"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span></span><span>
</span><span id="line-526"></span><span id="getDRepState"><span class="annot"><span class="annottext">getDRepState :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era DRepState
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getDRepState"><span class="hs-identifier hs-var hs-var">getDRepState</span></a></span></span><span> </span><span id="local-6989586621686857761"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857761"><span class="hs-identifier hs-var">dRepCred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-527"></span><span>  </span><span id="local-6989586621686857762"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686857762"><span class="hs-identifier hs-var">drepsState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
 -&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState))
-&gt; SimpleGetter
     (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState
 -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857761"><span class="hs-identifier hs-var">dRepCred</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686857762"><span class="hs-identifier hs-var">drepsState</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-529"></span><span>    </span><span class="annot"><span class="annottext">Maybe DRepState
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era DRepState
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpTestM era DRepState)
-&gt; String -&gt; ImpTestM era DRepState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected for DRep &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686857761"><span class="hs-identifier hs-var">dRepCred</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; to be present in the CertState&quot;</span></span><span>
</span><span id="line-530"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686857771"><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686857771"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DRepState -&gt; ImpTestM era DRepState
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686857771"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="hs-comment">-- | Sets up a stake pool with coin delegated to it.</span><span>
</span><span id="line-533"></span><span class="hs-comment">--</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- NOTE: This uses the `RegDepositDelegTxCert` for delegating, so it has to be</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- in Conway. The Shelley version of this function would have to separately</span><span>
</span><span id="line-536"></span><span class="hs-comment">-- register the staking credential and then delegate it.</span><span>
</span><span id="line-537"></span><span id="local-6989586621686854080"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier hs-type">setupPoolWithStake</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-538"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854080"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-539"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854080"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-541"></span><span id="setupPoolWithStake"><span class="annot"><span class="annottext">setupPoolWithStake :: forall era.
ConwayEraImp era =&gt;
Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier hs-var hs-var">setupPoolWithStake</span></a></span></span><span> </span><span id="local-6989586621686857840"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857840"><span class="hs-identifier hs-var">delegCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ImpM
     (LedgerSpec era)
     (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
-&gt; ImpM
     (LedgerSpec era)
     (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Set up pool with stake&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM
   (LedgerSpec era)
   (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
 -&gt; ImpM
      (LedgerSpec era)
      (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking))
-&gt; ImpM
     (LedgerSpec era)
     (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
-&gt; ImpM
     (LedgerSpec era)
     (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-542"></span><span>  </span><span id="local-6989586621686857841"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857841"><span class="hs-identifier hs-var">khPool</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'StakePool)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-543"></span><span>  </span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; ImpTestM era ()
forall era.
ShelleyEraImp era =&gt;
KeyHash 'StakePool -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerPool"><span class="hs-identifier hs-var">registerPool</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857841"><span class="hs-identifier hs-var">khPool</span></a></span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621686857843"><span class="annot"><span class="annottext">Credential 'Payment
</span><a href="#local-6989586621686857843"><span class="hs-identifier hs-var">credDelegatorPayment</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment -&gt; Credential 'Payment
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Payment -&gt; Credential 'Payment)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Payment)
-&gt; ImpM (LedgerSpec era) (Credential 'Payment)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Payment)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-545"></span><span>  </span><span id="local-6989586621686857844"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857844"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking -&gt; Credential 'Staking)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Staking)
-&gt; ImpM (LedgerSpec era) (Credential 'Staking)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-546"></span><span>  </span><span class="annot"><span class="annottext">Addr -&gt; Coin -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr -&gt; Coin -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo_"><span class="hs-identifier hs-var">sendCoinTo_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'Payment -&gt; Credential 'Staking -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Payment
</span><a href="#local-6989586621686857843"><span class="hs-identifier hs-var">credDelegatorPayment</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857844"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857840"><span class="hs-identifier hs-var">delegCoin</span></a></span><span>
</span><span id="line-547"></span><span>  </span><span id="local-6989586621686857846"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686857846"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-548"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Delegate to stake pool&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-550"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-551"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-552"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositDelegTxCert"><span class="hs-identifier hs-var">RegDepositDelegTxCert</span></a></span><span>
</span><span id="line-553"></span><span>              </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857844"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span><span>
</span><span id="line-554"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegStake"><span class="hs-identifier hs-var">DelegStake</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857841"><span class="hs-identifier hs-var">khPool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686857846"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-557"></span><span>  </span><span class="annot"><span class="annottext">(KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
-&gt; ImpM
     (LedgerSpec era)
     (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857841"><span class="hs-identifier hs-var">khPool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Payment
</span><a href="#local-6989586621686857843"><span class="hs-identifier hs-var">credDelegatorPayment</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857844"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span id="local-6989586621686854087"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithoutStake"><span class="hs-identifier hs-type">setupPoolWithoutStake</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-560"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854087"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-561"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854087"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-562"></span><span id="setupPoolWithoutStake"><span class="annot"><span class="annottext">setupPoolWithoutStake :: forall era.
ConwayEraImp era =&gt;
ImpTestM era (KeyHash 'StakePool, Credential 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithoutStake"><span class="hs-identifier hs-var hs-var">setupPoolWithoutStake</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-563"></span><span>  </span><span id="local-6989586621686857898"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857898"><span class="hs-identifier hs-var">khPool</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'StakePool)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; ImpTestM era ()
forall era.
ShelleyEraImp era =&gt;
KeyHash 'StakePool -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerPool"><span class="hs-identifier hs-var">registerPool</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857898"><span class="hs-identifier hs-var">khPool</span></a></span><span>
</span><span id="line-565"></span><span>  </span><span id="local-6989586621686857899"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857899"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking -&gt; Credential 'Staking
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Staking -&gt; Credential 'Staking)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Staking)
-&gt; ImpM (LedgerSpec era) (Credential 'Staking)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Staking)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-566"></span><span>  </span><span id="local-6989586621686857900"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857900"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin)
-&gt; SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. EraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppKeyDepositL"><span class="hs-identifier hs-var">ppKeyDepositL</span></a></span><span>
</span><span id="line-567"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Delegate to stake pool&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-569"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-570"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-571"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'Staking -&gt; Delegatee -&gt; Coin -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#RegDepositDelegTxCert"><span class="hs-identifier hs-var">RegDepositDelegTxCert</span></a></span><span>
</span><span id="line-572"></span><span>              </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857899"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span><span>
</span><span id="line-573"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; Delegatee
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#DelegStake"><span class="hs-identifier hs-var">DelegStake</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857898"><span class="hs-identifier hs-var">khPool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>              </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686857900"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-575"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-576"></span><span>  </span><span class="annot"><span class="annottext">(KeyHash 'StakePool, Credential 'Staking)
-&gt; ImpTestM era (KeyHash 'StakePool, Credential 'Staking)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686857898"><span class="hs-identifier hs-var">khPool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686857899"><span class="hs-identifier hs-var">credDelegatorStaking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="hs-comment">-- | Submits a transaction with a Vote for the given governance action as</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- some voter</span><span>
</span><span id="line-580"></span><span id="local-6989586621686854090"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote"><span class="hs-identifier hs-type">submitVote</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854090"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854090"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-585"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-586"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-587"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-588"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854090"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#TxId"><span class="hs-identifier hs-type">TxId</span></a></span></span><span>
</span><span id="line-589"></span><span id="submitVote"><span class="annot"><span class="annottext">submitVote :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote"><span class="hs-identifier hs-var hs-var">submitVote</span></a></span></span><span> </span><span id="local-6989586621686857921"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686857921"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span id="local-6989586621686857922"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857922"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686857923"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857923"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vote
-&gt; Voter
-&gt; GovActionId
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
Vote
-&gt; Voter
-&gt; GovActionId
-&gt; ImpTestM
     era
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitVote"><span class="hs-identifier hs-var">trySubmitVote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686857921"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857922"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857923"><span class="hs-identifier hs-var">gaId</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId
    -&gt; ImpM (LedgerSpec era) TxId)
-&gt; ImpM (LedgerSpec era) TxId
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId
-&gt; ImpM (LedgerSpec era) TxId
forall a b (m :: * -&gt; *).
(HasCallStack, Show a, NFData b, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#expectRightDeep"><span class="hs-identifier hs-var">expectRightDeep</span></a></span><span>
</span><span id="line-590"></span><span>
</span><span id="line-591"></span><span class="hs-comment">-- | Submits a transaction that votes &quot;Yes&quot; for the given governance action as</span><span>
</span><span id="line-592"></span><span class="hs-comment">-- some voter</span><span>
</span><span id="line-593"></span><span id="local-6989586621686854103"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-type">submitYesVote_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854103"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-595"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854103"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-596"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-597"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-598"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-599"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-600"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854103"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-601"></span><span id="submitYesVote_"><span class="annot"><span class="annottext">submitYesVote_ :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var hs-var">submitYesVote_</span></a></span></span><span> </span><span id="local-6989586621686857933"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857933"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686857934"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857934"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Voter -&gt; GovActionId -&gt; ImpM (LedgerSpec era) TxId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote"><span class="hs-identifier hs-var">submitVote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VoteYes"><span class="hs-identifier hs-var">VoteYes</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857933"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857934"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span id="local-6989586621686854107"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote_"><span class="hs-identifier hs-type">submitVote_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-604"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854107"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-605"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854107"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-606"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-607"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-608"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-609"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-610"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-611"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854107"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-612"></span><span id="submitVote_"><span class="annot"><span class="annottext">submitVote_ :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote_"><span class="hs-identifier hs-var hs-var">submitVote_</span></a></span></span><span> </span><span id="local-6989586621686857945"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686857945"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span id="local-6989586621686857946"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857946"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686857947"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857947"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) TxId -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; Voter -&gt; GovActionId -&gt; ImpM (LedgerSpec era) TxId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era TxId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote"><span class="hs-identifier hs-var">submitVote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686857945"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857946"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857947"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span id="local-6989586621686854109"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingVote"><span class="hs-identifier hs-type">submitFailingVote</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-615"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854109"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854109"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-617"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-619"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-620"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-621"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854109"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-622"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854109"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-623"></span><span id="submitFailingVote"><span class="annot"><span class="annottext">submitFailingVote :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter
-&gt; GovActionId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingVote"><span class="hs-identifier hs-var hs-var">submitFailingVote</span></a></span></span><span> </span><span id="local-6989586621686857967"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857967"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686857968"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857968"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span id="local-6989586621686857969"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686857969"><span class="hs-identifier hs-var">expectedFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-624"></span><span>  </span><span class="annot"><span class="annottext">Vote
-&gt; Voter
-&gt; GovActionId
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
Vote
-&gt; Voter
-&gt; GovActionId
-&gt; ImpTestM
     era
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitVote"><span class="hs-identifier hs-var">trySubmitVote</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VoteYes"><span class="hs-identifier hs-var">VoteYes</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686857967"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686857968"><span class="hs-identifier hs-var">gaId</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId
    -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, ToExpr b, Eq a, MonadIO m) =&gt;
Either a b -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#shouldBeLeftExpr"><span class="hs-operator hs-var">`shouldBeLeftExpr`</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686857969"><span class="hs-identifier hs-var">expectedFailure</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="hs-comment">-- | Submits a transaction that votes &quot;Yes&quot; for the given governance action as</span><span>
</span><span id="line-627"></span><span class="hs-comment">-- some voter, and expects an `Either` result.</span><span>
</span><span id="line-628"></span><span id="local-6989586621686854097"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitVote"><span class="hs-identifier hs-type">trySubmitVote</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854097"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854097"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-632"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-633"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-634"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-635"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854097"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854097"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.TxIn.html#TxId"><span class="hs-identifier hs-type">TxId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-636"></span><span id="trySubmitVote"><span class="annot"><span class="annottext">trySubmitVote :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
Vote
-&gt; Voter
-&gt; GovActionId
-&gt; ImpTestM
     era
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitVote"><span class="hs-identifier hs-var hs-var">trySubmitVote</span></a></span></span><span> </span><span id="local-6989586621686858005"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686858005"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span id="local-6989586621686858006"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686858006"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686858007"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858007"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-637"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Submitting vote (&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Vote -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686858005"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ImpM
   (LedgerSpec era)
   (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
 -&gt; ImpM
      (LedgerSpec era)
      (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId))
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-638"></span><span>    </span><span class="annot"><span class="annottext">(Either
   (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
   (Tx era)
 -&gt; Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall a b.
(a -&gt; b) -&gt; ImpM (LedgerSpec era) a -&gt; ImpM (LedgerSpec era) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (Tx era -&gt; TxId)
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
     (Tx era)
-&gt; Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; Either a c -&gt; Either b d
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ImpM
   (LedgerSpec era)
   (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
      (Tx era))
 -&gt; ImpM
      (LedgerSpec era)
      (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId))
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
-&gt; ImpM
     (LedgerSpec era)
     (Either (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) TxId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-639"></span><span>      </span><span class="annot"><span class="annottext">Tx era
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var">trySubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era
 -&gt; ImpM
      (LedgerSpec era)
      (Either
         (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
         (Tx era)))
-&gt; Tx era
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-640"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-641"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((VotingProcedures era -&gt; Identity (VotingProcedures era))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (VotingProcedures era -&gt; Identity (VotingProcedures era))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VotingProcedures era -&gt; Identity (VotingProcedures era))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (VotingProcedures era)
Lens' (TxBody era) (VotingProcedures era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#votingProceduresTxBodyL"><span class="hs-identifier hs-var">votingProceduresTxBodyL</span></a></span><span>
</span><span id="line-642"></span><span>            </span><span class="annot"><span class="annottext">((VotingProcedures era -&gt; Identity (VotingProcedures era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; VotingProcedures era -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
forall era.
Map Voter (Map GovActionId (VotingProcedure era))
-&gt; VotingProcedures era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedures"><span class="hs-identifier hs-var">VotingProcedures</span></a></span><span>
</span><span id="line-643"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Voter
-&gt; Map GovActionId (VotingProcedure era)
-&gt; Map Voter (Map GovActionId (VotingProcedure era))
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span>
</span><span id="line-644"></span><span>                  </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686858006"><span class="hs-identifier hs-var">voter</span></a></span><span>
</span><span id="line-645"></span><span>                  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">GovActionId
-&gt; VotingProcedure era -&gt; Map GovActionId (VotingProcedure era)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span>
</span><span id="line-646"></span><span>                      </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858007"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-647"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#VotingProcedure"><span class="hs-identifier hs-type">VotingProcedure</span></a></span><span>
</span><span id="line-648"></span><span>                          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">vProcVote :: Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#vProcVote"><span class="hs-identifier hs-var">vProcVote</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686858005"><span class="hs-identifier hs-var">vote</span></a></span><span>
</span><span id="line-649"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vProcAnchor :: StrictMaybe Anchor
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#vProcAnchor"><span class="hs-identifier hs-var">vProcAnchor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-650"></span><span>                          </span><span class="hs-special">}</span><span>
</span><span id="line-651"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-653"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span id="local-6989586621686854139"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal_"><span class="hs-identifier hs-type">submitProposal_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-656"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854139"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854139"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-657"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854139"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-658"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854139"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-659"></span><span id="submitProposal_"><span class="annot"><span class="annottext">submitProposal_ :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal_"><span class="hs-identifier hs-var hs-var">submitProposal_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) GovActionId -&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId -&gt; ImpM (LedgerSpec era) ())
-&gt; (ProposalProcedure era -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ProposalProcedure era
-&gt; ImpM (LedgerSpec era) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var">submitProposal</span></a></span><span>
</span><span id="line-660"></span><span>
</span><span id="line-661"></span><span id="local-6989586621686854142"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-type">submitProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-662"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854142"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854142"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-663"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854142"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854142"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span><span>
</span><span id="line-665"></span><span id="submitProposal"><span class="annot"><span class="annottext">submitProposal :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var hs-var">submitProposal</span></a></span></span><span> </span><span id="local-6989586621686858036"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858036"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
ProposalProcedure era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposal"><span class="hs-identifier hs-var">trySubmitProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858036"><span class="hs-identifier hs-var">proposal</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
    -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
-&gt; ImpM (LedgerSpec era) GovActionId
forall a (m :: * -&gt; *) b.
(HasCallStack, ToExpr a, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#expectRightExpr"><span class="hs-identifier hs-var">expectRightExpr</span></a></span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span id="local-6989586621686854148"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposals"><span class="hs-identifier hs-type">submitProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854148"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854148"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854148"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-669"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854148"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-670"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854148"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-671"></span><span id="submitProposals"><span class="annot"><span class="annottext">submitProposals :: forall era.
(ShelleyEraImp era, ConwayEraGov era, ConwayEraTxBody era,
 HasCallStack) =&gt;
NonEmpty (ProposalProcedure era)
-&gt; ImpTestM era (NonEmpty GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposals"><span class="hs-identifier hs-var hs-var">submitProposals</span></a></span></span><span> </span><span id="local-6989586621686858098"><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858098"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-672"></span><span>  </span><span id="local-6989586621686858099"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686858099"><span class="hs-identifier hs-var">curEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-673"></span><span>  </span><span id="local-6989586621686858101"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686858101"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-674"></span><span>  </span><span id="local-6989586621686858105"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858105"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
NonEmpty (ProposalProcedure era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier hs-var">trySubmitProposals</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858098"><span class="hs-identifier hs-var">proposals</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
     (Tx era))
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
      (Tx era)
    -&gt; ImpM (LedgerSpec era) (Tx era))
-&gt; ImpM (LedgerSpec era) (Tx era)
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
  (Tx era)
-&gt; ImpM (LedgerSpec era) (Tx era)
forall a (m :: * -&gt; *) b.
(HasCallStack, ToExpr a, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#expectRightExpr"><span class="hs-identifier hs-var">expectRightExpr</span></a></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686858106"><span class="annot"><span class="annottext">txId :: TxId
</span><a href="#local-6989586621686858106"><span class="hs-identifier hs-var hs-var">txId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858105"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-676"></span><span>      </span><span id="local-6989586621686858107"><span class="annot"><span class="annottext">proposalsWithGovActionId :: NonEmpty (GovActionId, ProposalProcedure era)
</span><a href="#local-6989586621686858107"><span class="hs-identifier hs-var hs-var">proposalsWithGovActionId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-677"></span><span>        </span><span class="annot"><span class="annottext">(Word16
 -&gt; ProposalProcedure era -&gt; (GovActionId, ProposalProcedure era))
-&gt; NonEmpty Word16
-&gt; NonEmpty (ProposalProcedure era)
-&gt; NonEmpty (GovActionId, ProposalProcedure era)
forall a b c.
(a -&gt; b -&gt; c) -&gt; NonEmpty a -&gt; NonEmpty b -&gt; NonEmpty c
</span><span class="hs-identifier hs-var">NE.zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621686858109"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621686858109"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621686858110"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858110"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxId -&gt; GovActionIx -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-var">GovActionId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686858106"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; GovActionIx
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionIx"><span class="hs-identifier hs-var">GovActionIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621686858109"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858110"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; [Word16] -&gt; NonEmpty Word16
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word16
Item [Word16]
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858098"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-678"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (GovActionId, ProposalProcedure era)
-&gt; ((GovActionId, ProposalProcedure era)
    -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpTestM era (NonEmpty GovActionId)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovActionId, ProposalProcedure era)
</span><a href="#local-6989586621686858107"><span class="hs-identifier hs-var">proposalsWithGovActionId</span></a></span><span> </span><span class="annot"><span class="annottext">(((GovActionId, ProposalProcedure era)
  -&gt; ImpM (LedgerSpec era) GovActionId)
 -&gt; ImpTestM era (NonEmpty GovActionId))
-&gt; ((GovActionId, ProposalProcedure era)
    -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpTestM era (NonEmpty GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621686858113"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858113"><span class="hs-identifier hs-var">govActionId</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686858114"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858114"><span class="hs-identifier hs-var">proposal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-679"></span><span>    </span><span id="local-6989586621686858115"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686858115"><span class="hs-identifier hs-var">govActionState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858113"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-680"></span><span>    </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686858115"><span class="hs-identifier hs-var">govActionState</span></a></span><span>
</span><span id="line-681"></span><span>      </span><span class="annot"><span class="annottext">GovActionState era
-&gt; GovActionState era -&gt; ImpM (LedgerSpec era) ()
forall a (m :: * -&gt; *).
(HasCallStack, ToExpr a, Eq a, MonadIO m) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#shouldBeExpr"><span class="hs-operator hs-var">`shouldBeExpr`</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span>
</span><span id="line-682"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gasId :: GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasId"><span class="hs-identifier hs-var">gasId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858113"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-683"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasCommitteeVotes :: Map (Credential 'HotCommitteeRole) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasCommitteeVotes"><span class="hs-identifier hs-var">gasCommitteeVotes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'HotCommitteeRole) Vote
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-684"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasDRepVotes :: Map (Credential 'DRepRole) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasDRepVotes"><span class="hs-identifier hs-var">gasDRepVotes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) Vote
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-685"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasStakePoolVotes :: Map (KeyHash 'StakePool) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasStakePoolVotes"><span class="hs-identifier hs-var">gasStakePoolVotes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) Vote
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-686"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasProposalProcedure :: ProposalProcedure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasProposalProcedure"><span class="hs-identifier hs-var">gasProposalProcedure</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858114"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-687"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasProposedIn :: EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasProposedIn"><span class="hs-identifier hs-var">gasProposedIn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686858099"><span class="hs-identifier hs-var">curEpochNo</span></a></span><span>
</span><span id="line-688"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gasExpiresAfter :: EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasExpiresAfter"><span class="hs-identifier hs-var">gasExpiresAfter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochInterval -&gt; EpochNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#addEpochInterval"><span class="hs-identifier hs-var">addEpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686858099"><span class="hs-identifier hs-var">curEpochNo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686858101"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
-&gt; Getting EpochInterval (PParams era) EpochInterval
-&gt; EpochInterval
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EpochInterval (PParams era) EpochInterval
forall era.
ConwayEraPParams era =&gt;
Lens' (PParams era) EpochInterval
Lens' (PParams era) EpochInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionLifetimeL"><span class="hs-identifier hs-var">ppGovActionLifetimeL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-690"></span><span>    </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpM (LedgerSpec era) GovActionId
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858113"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span class="annot"><span class="hs-comment">-- | Submits a transaction that proposes the given proposal</span></span><span>
</span><span id="line-693"></span><span id="local-6989586621686854144"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposal"><span class="hs-identifier hs-type">trySubmitProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854144"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-695"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854144"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-696"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-697"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854144"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854144"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854144"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-699"></span><span id="trySubmitProposal"><span class="annot"><span class="annottext">trySubmitProposal :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
ProposalProcedure era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposal"><span class="hs-identifier hs-var hs-var">trySubmitProposal</span></a></span></span><span> </span><span id="local-6989586621686858139"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858139"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-700"></span><span>  </span><span id="local-6989586621686858140"><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
  (Tx era)
</span><a href="#local-6989586621686858140"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
NonEmpty (ProposalProcedure era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier hs-var">trySubmitProposals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; NonEmpty (ProposalProcedure era)
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858139"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>  </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Either
   (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
 -&gt; ImpTestM
      era
      (Either
         (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId))
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
  (Tx era)
</span><a href="#local-6989586621686858140"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-702"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621686858141"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858141"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-703"></span><span>      </span><span class="annot"><span class="annottext">GovActionId
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-704"></span><span>        </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span>
</span><span id="line-705"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gaidTxId :: TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gaidTxId"><span class="hs-identifier hs-var">gaidTxId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858141"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-706"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gaidGovActionIx :: GovActionIx
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gaidGovActionIx"><span class="hs-identifier hs-var">gaidGovActionIx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; GovActionIx
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionIx"><span class="hs-identifier hs-var">GovActionIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">0</span></span><span>
</span><span id="line-707"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-708"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621686858144"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858144"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858144"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span id="local-6989586621686854162"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier hs-type">trySubmitProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-712"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-713"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-714"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-715"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-716"></span><span id="trySubmitProposals"><span class="annot"><span class="annottext">trySubmitProposals :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
NonEmpty (ProposalProcedure era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier hs-var hs-var">trySubmitProposals</span></a></span></span><span> </span><span id="local-6989586621686858167"><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858167"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-717"></span><span>  </span><span class="annot"><span class="annottext">Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var">trySubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era
 -&gt; ImpTestM
      era
      (Either
         (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
         (Tx era)))
-&gt; Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-718"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-719"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((OSet (ProposalProcedure era)
     -&gt; Identity (OSet (ProposalProcedure era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (OSet (ProposalProcedure era)
    -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(OSet (ProposalProcedure era)
 -&gt; Identity (OSet (ProposalProcedure era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
ConwayEraTxBody era =&gt;
Lens' (TxBody era) (OSet (ProposalProcedure era))
Lens' (TxBody era) (OSet (ProposalProcedure era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#proposalProceduresTxBodyL"><span class="hs-identifier hs-var">proposalProceduresTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((OSet (ProposalProcedure era)
  -&gt; Identity (OSet (ProposalProcedure era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; OSet (ProposalProcedure era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (OSet (ProposalProcedure era))]
-&gt; OSet (ProposalProcedure era)
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">GHC.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era) -&gt; [ProposalProcedure era]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858167"><span class="hs-identifier hs-var">proposals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span id="local-6989586621686854185"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingProposal"><span class="hs-identifier hs-type">submitFailingProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854185"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-723"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854185"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-724"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-725"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854185"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-727"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854185"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-728"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854185"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-729"></span><span id="submitFailingProposal"><span class="annot"><span class="annottext">submitFailingProposal :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingProposal"><span class="hs-identifier hs-var hs-var">submitFailingProposal</span></a></span></span><span> </span><span id="local-6989586621686858185"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858185"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span id="local-6989586621686858186"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858186"><span class="hs-identifier hs-var">expectedFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-730"></span><span>  </span><span class="annot"><span class="annottext">ProposalProcedure era
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
ProposalProcedure era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposal"><span class="hs-identifier hs-var">trySubmitProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686858185"><span class="hs-identifier hs-var">proposal</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
    -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, ToExpr b, Eq a, MonadIO m) =&gt;
Either a b -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#shouldBeLeftExpr"><span class="hs-operator hs-var">`shouldBeLeftExpr`</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858186"><span class="hs-identifier hs-var">expectedFailure</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="hs-comment">-- | Submits a transaction that proposes the given governance action. For proposing</span><span>
</span><span id="line-733"></span><span class="hs-comment">-- multiple actions in the same transaciton use `trySubmitGovActions` instead.</span><span>
</span><span id="line-734"></span><span id="local-6989586621686854187"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovAction"><span class="hs-identifier hs-type">trySubmitGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-735"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854187"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-736"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854187"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-737"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854187"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854187"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-738"></span><span id="trySubmitGovAction"><span class="annot"><span class="annottext">trySubmitGovAction :: forall era.
ConwayEraImp era =&gt;
GovAction era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovAction"><span class="hs-identifier hs-var hs-var">trySubmitGovAction</span></a></span></span><span> </span><span id="local-6989586621686858211"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858211"><span class="hs-identifier hs-var">ga</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-739"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686858703"><span class="annot"><span class="annottext">mkGovActionId :: Tx era -&gt; GovActionId
</span><a href="#local-6989586621686858703"><span class="hs-identifier hs-var hs-var">mkGovActionId</span></a></span></span><span> </span><span id="local-6989586621686858704"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858704"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; GovActionIx -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-var">GovActionId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858704"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; GovActionIx
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionIx"><span class="hs-identifier hs-var">GovActionIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>  </span><span class="annot"><span class="annottext">((NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
 -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
-&gt; (Tx era -&gt; GovActionId)
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
     (Tx era)
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; Either a c -&gt; Either b d
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><span class="hs-identifier hs-var">bimap</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; GovActionId
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 EraTx era) =&gt;
Tx era -&gt; GovActionId
</span><a href="#local-6989586621686858703"><span class="hs-identifier hs-var">mkGovActionId</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
   (Tx era)
 -&gt; Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
ConwayEraImp era =&gt;
NonEmpty (GovAction era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovActions"><span class="hs-identifier hs-var">trySubmitGovActions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovAction era -&gt; NonEmpty (GovAction era)
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858211"><span class="hs-identifier hs-var">ga</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span id="local-6989586621686854209"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitAndExpireProposalToMakeReward"><span class="hs-identifier hs-type">submitAndExpireProposalToMakeReward</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-743"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854209"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-744"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-745"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854209"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-746"></span><span id="submitAndExpireProposalToMakeReward"><span class="annot"><span class="annottext">submitAndExpireProposalToMakeReward :: forall era.
ConwayEraImp era =&gt;
Credential 'Staking -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitAndExpireProposalToMakeReward"><span class="hs-identifier hs-var hs-var">submitAndExpireProposalToMakeReward</span></a></span></span><span> </span><span id="local-6989586621686858738"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686858738"><span class="hs-identifier hs-var">stakingC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-747"></span><span>  </span><span id="local-6989586621686858739"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858739"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpTestM era RewardAccount
forall era. Credential 'Staking -&gt; ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getRewardAccountFor"><span class="hs-identifier hs-var">getRewardAccountFor</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686858738"><span class="hs-identifier hs-var">stakingC</span></a></span><span>
</span><span id="line-748"></span><span>  </span><span id="local-6989586621686858741"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686858741"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-749"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-750"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-type">EpochInterval</span></a></span><span> </span><span id="local-6989586621686858745"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621686858745"><span class="hs-identifier hs-var">lifetime</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686858741"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
-&gt; Getting EpochInterval (PParams era) EpochInterval
-&gt; EpochInterval
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EpochInterval (PParams era) EpochInterval
forall era.
ConwayEraPParams era =&gt;
Lens' (PParams era) EpochInterval
Lens' (PParams era) EpochInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionLifetimeL"><span class="hs-identifier hs-var">ppGovActionLifetimeL</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span id="local-6989586621686858746"><span class="annot"><span class="annottext">deposit :: Coin
</span><a href="#local-6989586621686858746"><span class="hs-identifier hs-var hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686858741"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Getting Coin (PParams era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (PParams era) Coin
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionDepositL"><span class="hs-identifier hs-var">ppGovActionDepositL</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span id="local-6989586621686858748"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858748"><span class="hs-identifier hs-var">gai</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-753"></span><span>    </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpTestM era GovActionId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var">submitProposal</span></a></span><span> </span><span class="annot"><span class="annottext">(ProposalProcedure era -&gt; ImpTestM era GovActionId)
-&gt; ProposalProcedure era -&gt; ImpTestM era GovActionId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-754"></span><span>      </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span>
</span><span id="line-755"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pProcDeposit :: Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcDeposit"><span class="hs-identifier hs-var">pProcDeposit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686858746"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-756"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcReturnAddr :: RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcReturnAddr"><span class="hs-identifier hs-var">pProcReturnAddr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858739"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span>
</span><span id="line-757"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcGovAction :: GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcGovAction"><span class="hs-identifier hs-var">pProcGovAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovAction era
forall era. GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#InfoAction"><span class="hs-identifier hs-var">InfoAction</span></a></span><span>
</span><span id="line-758"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcAnchor :: Anchor
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcAnchor"><span class="hs-identifier hs-var">pProcAnchor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Anchor
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-759"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-760"></span><span>  </span><span class="annot"><span class="annottext">Natural -&gt; ImpTestM era ()
forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; ImpTestM era ()) -&gt; Natural -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; Natural
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Natural
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621686858745"><span class="hs-identifier hs-var">lifetime</span></a></span><span>
</span><span id="line-761"></span><span>  </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era ()
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMissingGovActionId"><span class="hs-identifier hs-var">expectMissingGovActionId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858748"><span class="hs-identifier hs-var">gai</span></a></span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="annot"><span class="hs-comment">-- | Submits a transaction that proposes the given governance action</span></span><span>
</span><span id="line-764"></span><span id="local-6989586621686854208"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovActions"><span class="hs-identifier hs-type">trySubmitGovActions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-765"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-766"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-767"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854208"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-768"></span><span id="trySubmitGovActions"><span class="annot"><span class="annottext">trySubmitGovActions :: forall era.
ConwayEraImp era =&gt;
NonEmpty (GovAction era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovActions"><span class="hs-identifier hs-var hs-var">trySubmitGovActions</span></a></span></span><span> </span><span id="local-6989586621686858770"><span class="annot"><span class="annottext">NonEmpty (GovAction era)
</span><a href="#local-6989586621686858770"><span class="hs-identifier hs-var">gas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-769"></span><span>  </span><span id="local-6989586621686858771"><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858771"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GovAction era -&gt; ImpM (LedgerSpec era) (ProposalProcedure era))
-&gt; NonEmpty (GovAction era)
-&gt; ImpM (LedgerSpec era) (NonEmpty (ProposalProcedure era))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
</span><a href="#local-6989586621686858770"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
NonEmpty (ProposalProcedure era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitProposals"><span class="hs-identifier hs-var">trySubmitProposals</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ProposalProcedure era)
</span><a href="#local-6989586621686858771"><span class="hs-identifier hs-var">proposals</span></a></span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span id="local-6989586621686854226"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposalWithRewardAccount"><span class="hs-identifier hs-type">mkProposalWithRewardAccount</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-774"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-775"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-776"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854226"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854226"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-777"></span><span id="mkProposalWithRewardAccount"><span class="annot"><span class="annottext">mkProposalWithRewardAccount :: forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
GovAction era
-&gt; RewardAccount -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposalWithRewardAccount"><span class="hs-identifier hs-var hs-var">mkProposalWithRewardAccount</span></a></span></span><span> </span><span id="local-6989586621686858784"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858784"><span class="hs-identifier hs-var">ga</span></a></span></span><span> </span><span id="local-6989586621686858785"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858785"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-778"></span><span>  </span><span id="local-6989586621686858786"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686858786"><span class="hs-identifier hs-var">deposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin)
-&gt; SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Coin -&gt; Const r Coin)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PParams era -&gt; Const r (PParams era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era))
-&gt; (Coin -&gt; Const r Coin)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin) -&gt; PParams era -&gt; Const r (PParams era)
forall era. ConwayEraPParams era =&gt; Lens' (PParams era) Coin
Lens' (PParams era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ppGovActionDepositL"><span class="hs-identifier hs-var">ppGovActionDepositL</span></a></span><span>
</span><span id="line-779"></span><span>  </span><span id="local-6989586621686858792"><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686858792"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) Anchor
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-780"></span><span>  </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpTestM era (ProposalProcedure era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-781"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span>
</span><span id="line-782"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pProcDeposit :: Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcDeposit"><span class="hs-identifier hs-var">pProcDeposit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686858786"><span class="hs-identifier hs-var">deposit</span></a></span><span>
</span><span id="line-783"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcReturnAddr :: RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcReturnAddr"><span class="hs-identifier hs-var">pProcReturnAddr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858785"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span>
</span><span id="line-784"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcGovAction :: GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcGovAction"><span class="hs-identifier hs-var">pProcGovAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858784"><span class="hs-identifier hs-var">ga</span></a></span><span>
</span><span id="line-785"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pProcAnchor :: Anchor
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#pProcAnchor"><span class="hs-identifier hs-var">pProcAnchor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Anchor
</span><a href="#local-6989586621686858792"><span class="hs-identifier hs-var">anchor</span></a></span><span>
</span><span id="line-786"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span id="local-6989586621686854225"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-type">mkProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-789"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854225"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-790"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854225"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-791"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854225"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854225"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-792"></span><span id="mkProposal"><span class="annot"><span class="annottext">mkProposal :: forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var hs-var">mkProposal</span></a></span></span><span> </span><span id="local-6989586621686858806"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858806"><span class="hs-identifier hs-var">ga</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-793"></span><span>  </span><span id="local-6989586621686858807"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858807"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-794"></span><span>  </span><span class="annot"><span class="annottext">GovAction era
-&gt; RewardAccount -&gt; ImpTestM era (ProposalProcedure era)
forall era.
(ShelleyEraImp era, ConwayEraTxBody era) =&gt;
GovAction era
-&gt; RewardAccount -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposalWithRewardAccount"><span class="hs-identifier hs-var">mkProposalWithRewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858806"><span class="hs-identifier hs-var">ga</span></a></span><span> </span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621686858807"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span>
</span><span id="line-795"></span><span>
</span><span id="line-796"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-type">submitGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854231"><span class="annot"><a href="#local-6989586621686854231"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-798"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854231"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-799"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-800"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-801"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854231"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-802"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854231"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span>
</span><span id="line-803"></span><span id="submitGovAction"><span class="annot"><span class="annottext">submitGovAction :: forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var hs-var">submitGovAction</span></a></span></span><span> </span><span id="local-6989586621686858817"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858817"><span class="hs-identifier hs-var">ga</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-804"></span><span>  </span><span id="local-6989586621686858818"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858818"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span class="annot"><span class="annottext">[GovActionId]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era) -&gt; ImpTestM era (NonEmpty GovActionId)
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
NonEmpty (GovAction era) -&gt; ImpTestM era (NonEmpty GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActions"><span class="hs-identifier hs-var">submitGovActions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovAction era -&gt; NonEmpty (GovAction era)
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858817"><span class="hs-identifier hs-var">ga</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>  </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era GovActionId
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858818"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction_"><span class="hs-identifier hs-type">submitGovAction_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-808"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854234"><span class="annot"><a href="#local-6989586621686854234"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854234"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-810"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-812"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854234"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-813"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854234"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span id="submitGovAction_"><span class="annot"><span class="annottext">submitGovAction_ :: forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction_"><span class="hs-identifier hs-var hs-var">submitGovAction_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) GovActionId -&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId -&gt; ImpM (LedgerSpec era) ())
-&gt; (GovAction era -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; GovAction era
-&gt; ImpM (LedgerSpec era) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActions"><span class="hs-identifier hs-type">submitGovActions</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-817"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854233"><span class="annot"><a href="#local-6989586621686854233"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-818"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854233"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-821"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854233"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-822"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854233"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span id="submitGovActions"><span class="annot"><span class="annottext">submitGovActions :: forall era.
(ConwayEraImp era, HasCallStack) =&gt;
NonEmpty (GovAction era) -&gt; ImpTestM era (NonEmpty GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActions"><span class="hs-identifier hs-var hs-var">submitGovActions</span></a></span></span><span> </span><span id="local-6989586621686858853"><span class="annot"><span class="annottext">NonEmpty (GovAction era)
</span><a href="#local-6989586621686858853"><span class="hs-identifier hs-var">gas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-824"></span><span>  </span><span id="local-6989586621686858854"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858854"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
forall era.
ConwayEraImp era =&gt;
NonEmpty (GovAction era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
        (Tx era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovActions"><span class="hs-identifier hs-var">trySubmitGovActions</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
</span><a href="#local-6989586621686858853"><span class="hs-identifier hs-var">gas</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
     (Tx era))
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
      (Tx era)
    -&gt; ImpM (LedgerSpec era) (Tx era))
-&gt; ImpM (LedgerSpec era) (Tx era)
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)), Tx era)
  (Tx era)
-&gt; ImpM (LedgerSpec era) (Tx era)
forall a (m :: * -&gt; *) b.
(HasCallStack, ToExpr a, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#expectRightExpr"><span class="hs-identifier hs-var">expectRightExpr</span></a></span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686858855"><span class="annot"><span class="annottext">txId :: TxId
</span><a href="#local-6989586621686858855"><span class="hs-identifier hs-var hs-var">txId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; TxId
forall era. EraTx era =&gt; Tx era -&gt; TxId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#txIdTx"><span class="hs-identifier hs-var">txIdTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686858854"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-826"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty GovActionId -&gt; ImpTestM era (NonEmpty GovActionId)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty GovActionId -&gt; ImpTestM era (NonEmpty GovActionId))
-&gt; NonEmpty GovActionId -&gt; ImpTestM era (NonEmpty GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Word16 -&gt; GovAction era -&gt; GovActionId)
-&gt; NonEmpty Word16
-&gt; NonEmpty (GovAction era)
-&gt; NonEmpty GovActionId
forall a b c.
(a -&gt; b -&gt; c) -&gt; NonEmpty a -&gt; NonEmpty b -&gt; NonEmpty c
</span><span class="hs-identifier hs-var">NE.zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621686858856"><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621686858856"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxId -&gt; GovActionIx -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-var">GovActionId</span></a></span><span> </span><span class="annot"><span class="annottext">TxId
</span><a href="#local-6989586621686858855"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; GovActionIx
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionIx"><span class="hs-identifier hs-var">GovActionIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word16
</span><a href="#local-6989586621686858856"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; [Word16] -&gt; NonEmpty Word16
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">NE.:|</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word16
Item [Word16]
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
</span><a href="#local-6989586621686858853"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span id="local-6989586621686854237"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkTreasuryWithdrawalsGovAction"><span class="hs-identifier hs-type">mkTreasuryWithdrawalsGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-829"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854237"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-830"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-831"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854237"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854237"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-832"></span><span id="mkTreasuryWithdrawalsGovAction"><span class="annot"><span class="annottext">mkTreasuryWithdrawalsGovAction :: forall era.
ConwayEraGov era =&gt;
[(RewardAccount, Coin)] -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkTreasuryWithdrawalsGovAction"><span class="hs-identifier hs-var hs-var">mkTreasuryWithdrawalsGovAction</span></a></span></span><span> </span><span id="local-6989586621686858862"><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858862"><span class="hs-identifier hs-var">wdrls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-833"></span><span>  </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
Map RewardAccount Coin -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#TreasuryWithdrawals"><span class="hs-identifier hs-var">TreasuryWithdrawals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; Map RewardAccount Coin
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858862"><span class="hs-identifier hs-var">wdrls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StrictMaybe ScriptHash -&gt; GovAction era)
-&gt; ImpM (LedgerSpec era) (StrictMaybe ScriptHash)
-&gt; ImpM (LedgerSpec era) (GovAction era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (StrictMaybe ScriptHash)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe ScriptHash)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovPolicy"><span class="hs-identifier hs-var">getGovPolicy</span></a></span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span id="local-6989586621686854242"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitTreasuryWithdrawals"><span class="hs-identifier hs-type">submitTreasuryWithdrawals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-836"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854242"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-837"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-838"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854242"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span><span>
</span><span id="line-839"></span><span id="submitTreasuryWithdrawals"><span class="annot"><span class="annottext">submitTreasuryWithdrawals :: forall era.
ConwayEraImp era =&gt;
[(RewardAccount, Coin)] -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitTreasuryWithdrawals"><span class="hs-identifier hs-var hs-var">submitTreasuryWithdrawals</span></a></span></span><span> </span><span id="local-6989586621686858873"><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858873"><span class="hs-identifier hs-var">wdrls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-840"></span><span>  </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; ImpTestM era (GovAction era)
forall era.
ConwayEraGov era =&gt;
[(RewardAccount, Coin)] -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkTreasuryWithdrawalsGovAction"><span class="hs-identifier hs-var">mkTreasuryWithdrawalsGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858873"><span class="hs-identifier hs-var">wdrls</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (GovAction era)
-&gt; (GovAction era -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span id="local-6989586621686854244"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactTreasuryWithdrawals"><span class="hs-identifier hs-type">enactTreasuryWithdrawals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-843"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854244"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-844"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-845"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-846"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-847"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854244"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span><span>
</span><span id="line-848"></span><span id="enactTreasuryWithdrawals"><span class="annot"><span class="annottext">enactTreasuryWithdrawals :: forall era.
ConwayEraImp era =&gt;
[(RewardAccount, Coin)]
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactTreasuryWithdrawals"><span class="hs-identifier hs-var hs-var">enactTreasuryWithdrawals</span></a></span></span><span> </span><span id="local-6989586621686858895"><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858895"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span> </span><span id="local-6989586621686858896"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686858896"><span class="hs-identifier hs-var">dRep</span></a></span></span><span> </span><span id="local-6989586621686858897"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686858897"><span class="hs-identifier hs-var">cms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-849"></span><span>  </span><span id="local-6989586621686858898"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858898"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)] -&gt; ImpTestM era GovActionId
forall era.
ConwayEraImp era =&gt;
[(RewardAccount, Coin)] -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitTreasuryWithdrawals"><span class="hs-identifier hs-var">submitTreasuryWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">[(RewardAccount, Coin)]
</span><a href="#local-6989586621686858895"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-850"></span><span>  </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#DRepVoter"><span class="hs-identifier hs-var">DRepVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686858896"><span class="hs-identifier hs-var">dRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858898"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-851"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
-&gt; GovActionId -&gt; ImpTestM era ()
forall era (f :: * -&gt; *).
(ConwayEraImp era, Foldable f) =&gt;
f (Credential 'HotCommitteeRole) -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier hs-var">submitYesVoteCCs_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686858897"><span class="hs-identifier hs-var">cms</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858898"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-852"></span><span>  </span><span class="annot"><span class="annottext">Natural -&gt; ImpTestM era ()
forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-853"></span><span>  </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era GovActionId
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686858898"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-854"></span><span>
</span><span id="line-855"></span><span id="local-6989586621686854248"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitParameterChange"><span class="hs-identifier hs-type">submitParameterChange</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-856"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-857"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-858"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParamsUpdate"><span class="hs-identifier hs-type">PParamsUpdate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-859"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span><span>
</span><span id="line-860"></span><span id="submitParameterChange"><span class="annot"><span class="annottext">submitParameterChange :: forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitParameterChange"><span class="hs-identifier hs-var hs-var">submitParameterChange</span></a></span></span><span> </span><span id="local-6989586621686858906"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858906"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621686858907"><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686858907"><span class="hs-identifier hs-var">ppu</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-861"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era (GovAction era)
forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkParameterChangeGovAction"><span class="hs-identifier hs-var">mkParameterChangeGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858906"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686858907"><span class="hs-identifier hs-var">ppu</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (GovAction era)
-&gt; (GovAction era -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span>
</span><span id="line-862"></span><span>
</span><span id="line-863"></span><span id="local-6989586621686854251"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkParameterChangeGovAction"><span class="hs-identifier hs-type">mkParameterChangeGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-864"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854251"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-865"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-866"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParamsUpdate"><span class="hs-identifier hs-type">PParamsUpdate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854251"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-867"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854251"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854251"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-868"></span><span id="mkParameterChangeGovAction"><span class="annot"><span class="annottext">mkParameterChangeGovAction :: forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkParameterChangeGovAction"><span class="hs-identifier hs-var hs-var">mkParameterChangeGovAction</span></a></span></span><span> </span><span id="local-6989586621686858915"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858915"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621686858916"><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686858916"><span class="hs-identifier hs-var">ppu</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-869"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; PParamsUpdate era -&gt; StrictMaybe ScriptHash -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ParameterChange"><span class="hs-identifier hs-var">ParameterChange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'PParamUpdatePurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">(GovActionId -&gt; GovPurposeId 'PParamUpdatePurpose)
-&gt; StrictMaybe GovActionId
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858915"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
</span><a href="#local-6989586621686858916"><span class="hs-identifier hs-var">ppu</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe ScriptHash -&gt; GovAction era)
-&gt; ImpM (LedgerSpec era) (StrictMaybe ScriptHash)
-&gt; ImpM (LedgerSpec era) (GovAction era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (StrictMaybe ScriptHash)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe ScriptHash)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovPolicy"><span class="hs-identifier hs-var">getGovPolicy</span></a></span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span id="local-6989586621686854257"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkMinFeeUpdateGovAction"><span class="hs-identifier hs-type">mkMinFeeUpdateGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-872"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854257"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-873"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-874"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854257"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854257"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-875"></span><span id="mkMinFeeUpdateGovAction"><span class="annot"><span class="annottext">mkMinFeeUpdateGovAction :: forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkMinFeeUpdateGovAction"><span class="hs-identifier hs-var hs-var">mkMinFeeUpdateGovAction</span></a></span></span><span> </span><span id="local-6989586621686858936"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858936"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-876"></span><span>  </span><span id="local-6989586621686858937"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621686858937"><span class="hs-identifier hs-var">minFeeValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Integer, Integer) -&gt; ImpM (LedgerSpec era) Integer
forall g (m :: * -&gt; *) a.
(HasStatefulGen g m, UniformRange a) =&gt;
(a, a) -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#uniformRM"><span class="hs-identifier hs-var">uniformRM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">30</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era (GovAction era)
forall era.
ConwayEraImp era =&gt;
StrictMaybe GovActionId
-&gt; PParamsUpdate era -&gt; ImpTestM era (GovAction era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkParameterChangeGovAction"><span class="hs-identifier hs-var">mkParameterChangeGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686858936"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParamsUpdate era
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">PParamsUpdate era
-&gt; (PParamsUpdate era -&gt; PParamsUpdate era) -&gt; PParamsUpdate era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe Coin -&gt; Identity (StrictMaybe Coin))
-&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era)
forall era.
EraPParams era =&gt;
Lens' (PParamsUpdate era) (StrictMaybe Coin)
Lens' (PParamsUpdate era) (StrictMaybe Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#ppuMinFeeAL"><span class="hs-identifier hs-var">ppuMinFeeAL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe Coin -&gt; Identity (StrictMaybe Coin))
 -&gt; PParamsUpdate era -&gt; Identity (PParamsUpdate era))
-&gt; StrictMaybe Coin -&gt; PParamsUpdate era -&gt; PParamsUpdate era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; StrictMaybe Coin
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621686858937"><span class="hs-identifier hs-var">minFeeValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>
</span><span id="line-879"></span><span id="local-6989586621686854241"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovPolicy"><span class="hs-identifier hs-type">getGovPolicy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854241"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854241"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-880"></span><span id="getGovPolicy"><span class="annot"><span class="annottext">getGovPolicy :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe ScriptHash)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovPolicy"><span class="hs-identifier hs-var hs-var">getGovPolicy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-881"></span><span>  </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe ScriptHash)
-&gt; ImpTestM era (StrictMaybe ScriptHash)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe ScriptHash)
 -&gt; ImpTestM era (StrictMaybe ScriptHash))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe ScriptHash)
-&gt; ImpTestM era (StrictMaybe ScriptHash)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-882"></span><span>    </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEpochStateL"><span class="hs-identifier hs-var">nesEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Constitution era -&gt; Const r (Constitution era))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Constitution era)
Lens' (GovState era) (Constitution era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#constitutionGovStateL"><span class="hs-identifier hs-var">constitutionGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((Constitution era -&gt; Const r (Constitution era))
 -&gt; GovState era -&gt; Const r (GovState era))
-&gt; ((StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
    -&gt; Constitution era -&gt; Const r (Constitution era))
-&gt; (StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
-&gt; GovState era
-&gt; Const r (GovState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe ScriptHash -&gt; Const r (StrictMaybe ScriptHash))
-&gt; Constitution era -&gt; Const r (Constitution era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe ScriptHash -&gt; f (StrictMaybe ScriptHash))
-&gt; Constitution era -&gt; f (Constitution era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#constitutionScriptL"><span class="hs-identifier hs-var">constitutionScriptL</span></a></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingGovAction"><span class="hs-identifier hs-type">submitFailingGovAction</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854269"><span class="annot"><a href="#local-6989586621686854269"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-886"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854269"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-887"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-889"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovAction"><span class="hs-identifier hs-type">GovAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854269"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-890"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854269"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-891"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854269"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span id="submitFailingGovAction"><span class="annot"><span class="annottext">submitFailingGovAction :: forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingGovAction"><span class="hs-identifier hs-var hs-var">submitFailingGovAction</span></a></span></span><span> </span><span id="local-6989586621686858964"><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858964"><span class="hs-identifier hs-var">ga</span></a></span></span><span> </span><span id="local-6989586621686858965"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858965"><span class="hs-identifier hs-var">expectedFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovAction era
-&gt; ImpM
     (LedgerSpec era)
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
forall era.
ConwayEraImp era =&gt;
GovAction era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#trySubmitGovAction"><span class="hs-identifier hs-var">trySubmitGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686858964"><span class="hs-identifier hs-var">ga</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM
  (LedgerSpec era)
  (Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId)
-&gt; (Either
      (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
    -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) GovActionId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, ToExpr b, Eq a, MonadIO m) =&gt;
Either a b -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#shouldBeLeftExpr"><span class="hs-operator hs-var">`shouldBeLeftExpr`</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686858965"><span class="hs-identifier hs-var">expectedFailure</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span>
</span><span id="line-894"></span><span id="local-6989586621686854271"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getEnactState"><span class="hs-identifier hs-type">getEnactState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854271"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854271"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#EnactState"><span class="hs-identifier hs-type">EnactState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854271"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-895"></span><span id="getEnactState"><span class="annot"><span class="annottext">getEnactState :: forall era. ConwayEraGov era =&gt; ImpTestM era (EnactState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getEnactState"><span class="hs-identifier hs-var hs-var">getEnactState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovState era -&gt; EnactState era
forall era. ConwayEraGov era =&gt; GovState era -&gt; EnactState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#mkEnactState"><span class="hs-identifier hs-var">mkEnactState</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; EnactState era)
-&gt; ImpM (LedgerSpec era) (GovState era)
-&gt; ImpM (LedgerSpec era) (EnactState era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (GovState era)
-&gt; ImpM (LedgerSpec era) (GovState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((GovState era -&gt; Const r (GovState era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span id="local-6989586621686854274"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-type">getProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854274"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854274"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854274"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-898"></span><span id="getProposals"><span class="annot"><span class="annottext">getProposals :: forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var hs-var">getProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Proposals era)
-&gt; ImpTestM era (Proposals era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (Proposals era)
 -&gt; ImpTestM era (Proposals era))
-&gt; SimpleGetter (NewEpochState era) (Proposals era)
-&gt; ImpTestM era (Proposals era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Proposals era -&gt; Const r (Proposals era))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (Proposals era -&gt; Const r (Proposals era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Proposals era -&gt; Const r (Proposals era))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Proposals era)
Lens' (GovState era) (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#proposalsGovStateL"><span class="hs-identifier hs-var">proposalsGovStateL</span></a></span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span id="local-6989586621686854277"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForest"><span class="hs-identifier hs-type">logProposalsForest</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854277"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854277"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-901"></span><span id="logProposalsForest"><span class="annot"><span class="annottext">logProposalsForest :: forall era. (ConwayEraGov era, HasCallStack) =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForest"><span class="hs-identifier hs-var hs-var">logProposalsForest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-902"></span><span>  </span><span id="local-6989586621686858982"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686858982"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-903"></span><span>  </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; Doc AnsiStyle -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logDoc"><span class="hs-identifier hs-var">logDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ImpTestM era ())
-&gt; Doc AnsiStyle -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; Bool -&gt; Doc AnsiStyle
forall era. Proposals era -&gt; Bool -&gt; Doc AnsiStyle
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#proposalsShowDebug"><span class="hs-identifier hs-var">proposalsShowDebug</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686858982"><span class="hs-identifier hs-var">proposals</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span id="local-6989586621686853958"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-type">getCommitteeMembers</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-906"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853958"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-907"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853958"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-908"></span><span id="getCommitteeMembers"><span class="annot"><span class="annottext">getCommitteeMembers :: forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var hs-var">getCommitteeMembers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-909"></span><span>  </span><span id="local-6989586621686858995"><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686858995"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
(ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayGovState era -&gt; Const r (ConwayGovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; ConwayGovState era -&gt; Const r (ConwayGovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-910"></span><span>  </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (Set (Credential 'ColdCommitteeRole))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Set (Credential 'ColdCommitteeRole)
 -&gt; ImpTestM era (Set (Credential 'ColdCommitteeRole)))
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (Set (Credential 'ColdCommitteeRole))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Set (Credential 'ColdCommitteeRole)
forall k a. Map k a -&gt; Set k
</span><span class="hs-identifier hs-var">Map.keysSet</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'ColdCommitteeRole) EpochNo
 -&gt; Set (Credential 'ColdCommitteeRole))
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Set (Credential 'ColdCommitteeRole)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; StrictMaybe (Committee era)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; StrictMaybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap'</span></span><span> </span><span class="annot"><span class="annottext">Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall era.
Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembers"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686858995"><span class="hs-identifier hs-var">committee</span></a></span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span id="local-6989586621686854290"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedCommittee"><span class="hs-identifier hs-type">getLastEnactedCommittee</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-913"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854290"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854290"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-914"></span><span id="getLastEnactedCommittee"><span class="annot"><span class="annottext">getLastEnactedCommittee :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe (GovPurposeId 'CommitteePurpose))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedCommittee"><span class="hs-identifier hs-var hs-var">getLastEnactedCommittee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-915"></span><span>  </span><span id="local-6989586621686859010"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859010"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-916"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'CommitteePurpose))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'CommitteePurpose)
 -&gt; ImpTestM era (StrictMaybe (GovPurposeId 'CommitteePurpose)))
-&gt; StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'CommitteePurpose))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859010"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (StrictMaybe (GovPurposeId 'CommitteePurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; StrictMaybe (GovPurposeId 'CommitteePurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (StrictMaybe (GovPurposeId 'CommitteePurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (StrictMaybe (GovPurposeId 'CommitteePurpose)) (Proposals era))
-&gt; ((StrictMaybe (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'CommitteePurpose))
          (StrictMaybe (GovPurposeId 'CommitteePurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; Getting
     (StrictMaybe (GovPurposeId 'CommitteePurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'CommitteePurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'CommitteePurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'CommitteePurpose))
      (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId 'CommitteePurpose)
  -&gt; Const
       (StrictMaybe (GovPurposeId 'CommitteePurpose))
       (PRoot (GovPurposeId 'CommitteePurpose)))
 -&gt; GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; ((StrictMaybe (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'CommitteePurpose))
          (StrictMaybe (GovPurposeId 'CommitteePurpose)))
    -&gt; PRoot (GovPurposeId 'CommitteePurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'CommitteePurpose))
         (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; (StrictMaybe (GovPurposeId 'CommitteePurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'CommitteePurpose))
         (StrictMaybe (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'CommitteePurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'CommitteePurpose))
      (StrictMaybe (GovPurposeId 'CommitteePurpose)))
-&gt; PRoot (GovPurposeId 'CommitteePurpose)
-&gt; Const
     (StrictMaybe (GovPurposeId 'CommitteePurpose))
     (PRoot (GovPurposeId 'CommitteePurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe a -&gt; f (StrictMaybe a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRootL"><span class="hs-identifier hs-var">prRootL</span></a></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span id="local-6989586621686854301"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitution"><span class="hs-identifier hs-type">getConstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-919"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854301"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-920"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854301"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-type">Constitution</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854301"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-921"></span><span id="getConstitution"><span class="annot"><span class="annottext">getConstitution :: forall era. ConwayEraImp era =&gt; ImpTestM era (Constitution era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitution"><span class="hs-identifier hs-var hs-var">getConstitution</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Constitution era)
-&gt; ImpTestM era (Constitution era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (Constitution era)
 -&gt; ImpTestM era (Constitution era))
-&gt; SimpleGetter (NewEpochState era) (Constitution era)
-&gt; ImpTestM era (Constitution era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
(ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayGovState era -&gt; Const r (ConwayGovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Constitution era -&gt; Const r (Constitution era))
    -&gt; ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; (Constitution era -&gt; Const r (Constitution era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Constitution era -&gt; Const r (Constitution era))
-&gt; GovState era -&gt; Const r (GovState era)
(Constitution era -&gt; Const r (Constitution era))
-&gt; ConwayGovState era -&gt; Const r (ConwayGovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Constitution era)
Lens' (GovState era) (Constitution era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#constitutionGovStateL"><span class="hs-identifier hs-var">constitutionGovStateL</span></a></span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span id="local-6989586621686854304"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedConstitution"><span class="hs-identifier hs-type">getLastEnactedConstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-924"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854304"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854304"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-925"></span><span id="getLastEnactedConstitution"><span class="annot"><span class="annottext">getLastEnactedConstitution :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedConstitution"><span class="hs-identifier hs-var hs-var">getLastEnactedConstitution</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-926"></span><span>  </span><span id="local-6989586621686859029"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859029"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-927"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'ConstitutionPurpose)
 -&gt; ImpTestM era (StrictMaybe (GovPurposeId 'ConstitutionPurpose)))
-&gt; StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859029"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
-&gt; StrictMaybe (GovPurposeId 'ConstitutionPurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
      (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
       (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose)) (Proposals era))
-&gt; ((StrictMaybe (GovPurposeId 'ConstitutionPurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
          (StrictMaybe (GovPurposeId 'ConstitutionPurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
         (GovRelation PRoot))
-&gt; Getting
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'ConstitutionPurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
      (PRoot (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
     (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId 'ConstitutionPurpose)
  -&gt; Const
       (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
       (PRoot (GovPurposeId 'ConstitutionPurpose)))
 -&gt; GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
      (GovRelation PRoot))
-&gt; ((StrictMaybe (GovPurposeId 'ConstitutionPurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
          (StrictMaybe (GovPurposeId 'ConstitutionPurpose)))
    -&gt; PRoot (GovPurposeId 'ConstitutionPurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
         (PRoot (GovPurposeId 'ConstitutionPurpose)))
-&gt; (StrictMaybe (GovPurposeId 'ConstitutionPurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
         (StrictMaybe (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
     (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'ConstitutionPurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
      (StrictMaybe (GovPurposeId 'ConstitutionPurpose)))
-&gt; PRoot (GovPurposeId 'ConstitutionPurpose)
-&gt; Const
     (StrictMaybe (GovPurposeId 'ConstitutionPurpose))
     (PRoot (GovPurposeId 'ConstitutionPurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe a -&gt; f (StrictMaybe a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRootL"><span class="hs-identifier hs-var">prRootL</span></a></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span id="local-6989586621686854309"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedParameterChange"><span class="hs-identifier hs-type">getLastEnactedParameterChange</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-930"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854309"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854309"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#PParamUpdatePurpose"><span class="hs-identifier hs-type">PParamUpdatePurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-931"></span><span id="getLastEnactedParameterChange"><span class="annot"><span class="annottext">getLastEnactedParameterChange :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedParameterChange"><span class="hs-identifier hs-var hs-var">getLastEnactedParameterChange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-932"></span><span>  </span><span id="local-6989586621686859038"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859038"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-933"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
 -&gt; ImpTestM era (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)))
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859038"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
-&gt; StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
      (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
       (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)) (Proposals era))
-&gt; ((StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
          (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
         (GovRelation PRoot))
-&gt; Getting
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'PParamUpdatePurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
      (PRoot (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
     (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId 'PParamUpdatePurpose)
  -&gt; Const
       (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
       (PRoot (GovPurposeId 'PParamUpdatePurpose)))
 -&gt; GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
      (GovRelation PRoot))
-&gt; ((StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
          (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)))
    -&gt; PRoot (GovPurposeId 'PParamUpdatePurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
         (PRoot (GovPurposeId 'PParamUpdatePurpose)))
-&gt; (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
         (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
     (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'PParamUpdatePurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
      (StrictMaybe (GovPurposeId 'PParamUpdatePurpose)))
-&gt; PRoot (GovPurposeId 'PParamUpdatePurpose)
-&gt; Const
     (StrictMaybe (GovPurposeId 'PParamUpdatePurpose))
     (PRoot (GovPurposeId 'PParamUpdatePurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe a -&gt; f (StrictMaybe a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRootL"><span class="hs-identifier hs-var">prRootL</span></a></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span id="local-6989586621686854313"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedHardForkInitiation"><span class="hs-identifier hs-type">getLastEnactedHardForkInitiation</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-936"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854313"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854313"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#HardForkPurpose"><span class="hs-identifier hs-type">HardForkPurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-937"></span><span id="getLastEnactedHardForkInitiation"><span class="annot"><span class="annottext">getLastEnactedHardForkInitiation :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe (GovPurposeId 'HardForkPurpose))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getLastEnactedHardForkInitiation"><span class="hs-identifier hs-var hs-var">getLastEnactedHardForkInitiation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-938"></span><span>  </span><span id="local-6989586621686859047"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859047"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-939"></span><span>  </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'HardForkPurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'HardForkPurpose))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'HardForkPurpose)
 -&gt; ImpTestM era (StrictMaybe (GovPurposeId 'HardForkPurpose)))
-&gt; StrictMaybe (GovPurposeId 'HardForkPurpose)
-&gt; ImpTestM era (StrictMaybe (GovPurposeId 'HardForkPurpose))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859047"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (StrictMaybe (GovPurposeId 'HardForkPurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'HardForkPurpose))
-&gt; StrictMaybe (GovPurposeId 'HardForkPurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (StrictMaybe (GovPurposeId 'HardForkPurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (StrictMaybe (GovPurposeId 'HardForkPurpose)) (Proposals era))
-&gt; ((StrictMaybe (GovPurposeId 'HardForkPurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'HardForkPurpose))
          (StrictMaybe (GovPurposeId 'HardForkPurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
-&gt; Getting
     (StrictMaybe (GovPurposeId 'HardForkPurpose))
     (Proposals era)
     (StrictMaybe (GovPurposeId 'HardForkPurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'HardForkPurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'HardForkPurpose))
      (PRoot (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'HardForkPurpose)
 -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grHardForkL"><span class="hs-identifier hs-var">grHardForkL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId 'HardForkPurpose)
  -&gt; Const
       (StrictMaybe (GovPurposeId 'HardForkPurpose))
       (PRoot (GovPurposeId 'HardForkPurpose)))
 -&gt; GovRelation PRoot
 -&gt; Const
      (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
-&gt; ((StrictMaybe (GovPurposeId 'HardForkPurpose)
     -&gt; Const
          (StrictMaybe (GovPurposeId 'HardForkPurpose))
          (StrictMaybe (GovPurposeId 'HardForkPurpose)))
    -&gt; PRoot (GovPurposeId 'HardForkPurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'HardForkPurpose))
         (PRoot (GovPurposeId 'HardForkPurpose)))
-&gt; (StrictMaybe (GovPurposeId 'HardForkPurpose)
    -&gt; Const
         (StrictMaybe (GovPurposeId 'HardForkPurpose))
         (StrictMaybe (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (StrictMaybe (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId 'HardForkPurpose)
 -&gt; Const
      (StrictMaybe (GovPurposeId 'HardForkPurpose))
      (StrictMaybe (GovPurposeId 'HardForkPurpose)))
-&gt; PRoot (GovPurposeId 'HardForkPurpose)
-&gt; Const
     (StrictMaybe (GovPurposeId 'HardForkPurpose))
     (PRoot (GovPurposeId 'HardForkPurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe a -&gt; f (StrictMaybe a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRootL"><span class="hs-identifier hs-var">prRootL</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span id="local-6989586621686854318"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitutionProposals"><span class="hs-identifier hs-type">getConstitutionProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-942"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854318"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-943"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><a href="#local-6989586621686854318"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-945"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span>
</span><span id="line-946"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#PEdges"><span class="hs-identifier hs-type">PEdges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-special">)</span></span><span>
</span><span id="line-949"></span><span id="getConstitutionProposals"><span class="annot"><span class="annottext">getConstitutionProposals :: forall era.
ConwayEraGov era =&gt;
ImpTestM
  era
  (Map
     (GovPurposeId 'ConstitutionPurpose)
     (PEdges (GovPurposeId 'ConstitutionPurpose)))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getConstitutionProposals"><span class="hs-identifier hs-var hs-var">getConstitutionProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-950"></span><span>  </span><span id="local-6989586621686859056"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859056"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-951"></span><span>  </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'ConstitutionPurpose)
  (PEdges (GovPurposeId 'ConstitutionPurpose))
-&gt; ImpTestM
     era
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'ConstitutionPurpose)
   (PEdges (GovPurposeId 'ConstitutionPurpose))
 -&gt; ImpTestM
      era
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose))))
-&gt; Map
     (GovPurposeId 'ConstitutionPurpose)
     (PEdges (GovPurposeId 'ConstitutionPurpose))
-&gt; ImpTestM
     era
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859056"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
-&gt; Map
     (GovPurposeId 'ConstitutionPurpose)
     (PEdges (GovPurposeId 'ConstitutionPurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'ConstitutionPurpose)
          (PEdges (GovPurposeId 'ConstitutionPurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'ConstitutionPurpose)
       (PEdges (GovPurposeId 'ConstitutionPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose)))
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'ConstitutionPurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (PGraph (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'ConstitutionPurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'ConstitutionPurpose)
          (PEdges (GovPurposeId 'ConstitutionPurpose)))
       (PGraph (GovPurposeId 'ConstitutionPurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'ConstitutionPurpose)
       (PEdges (GovPurposeId 'ConstitutionPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose)))
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose))))
    -&gt; PGraph (GovPurposeId 'ConstitutionPurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (PGraph (GovPurposeId 'ConstitutionPurpose)))
-&gt; (Map
      (GovPurposeId 'ConstitutionPurpose)
      (PEdges (GovPurposeId 'ConstitutionPurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'ConstitutionPurpose)
   (PEdges (GovPurposeId 'ConstitutionPurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose))))
-&gt; PGraph (GovPurposeId 'ConstitutionPurpose)
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (PGraph (GovPurposeId 'ConstitutionPurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-952"></span><span>
</span><span id="line-953"></span><span id="local-6989586621686854326"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getParameterChangeProposals"><span class="hs-identifier hs-type">getParameterChangeProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-954"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854326"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-955"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span>
</span><span id="line-956"></span><span>    </span><span class="annot"><a href="#local-6989586621686854326"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-957"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span>
</span><span id="line-958"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#PParamUpdatePurpose"><span class="hs-identifier hs-type">PParamUpdatePurpose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-959"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#PEdges"><span class="hs-identifier hs-type">PEdges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#PParamUpdatePurpose"><span class="hs-identifier hs-type">PParamUpdatePurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>    </span><span class="hs-special">)</span></span><span>
</span><span id="line-961"></span><span id="getParameterChangeProposals"><span class="annot"><span class="annottext">getParameterChangeProposals :: forall era.
ConwayEraGov era =&gt;
ImpTestM
  era
  (Map
     (GovPurposeId 'PParamUpdatePurpose)
     (PEdges (GovPurposeId 'PParamUpdatePurpose)))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getParameterChangeProposals"><span class="hs-identifier hs-var hs-var">getParameterChangeProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-962"></span><span>  </span><span id="local-6989586621686859066"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859066"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-963"></span><span>  </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'PParamUpdatePurpose)
  (PEdges (GovPurposeId 'PParamUpdatePurpose))
-&gt; ImpTestM
     era
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'PParamUpdatePurpose)
   (PEdges (GovPurposeId 'PParamUpdatePurpose))
 -&gt; ImpTestM
      era
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose))))
-&gt; Map
     (GovPurposeId 'PParamUpdatePurpose)
     (PEdges (GovPurposeId 'PParamUpdatePurpose))
-&gt; ImpTestM
     era
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859066"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
-&gt; Map
     (GovPurposeId 'PParamUpdatePurpose)
     (PEdges (GovPurposeId 'PParamUpdatePurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'PParamUpdatePurpose)
          (PEdges (GovPurposeId 'PParamUpdatePurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'PParamUpdatePurpose)
       (PEdges (GovPurposeId 'PParamUpdatePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose)))
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'PParamUpdatePurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (PGraph (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'PParamUpdatePurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'PParamUpdatePurpose)
          (PEdges (GovPurposeId 'PParamUpdatePurpose)))
       (PGraph (GovPurposeId 'PParamUpdatePurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'PParamUpdatePurpose)
       (PEdges (GovPurposeId 'PParamUpdatePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose)))
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose))))
    -&gt; PGraph (GovPurposeId 'PParamUpdatePurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (PGraph (GovPurposeId 'PParamUpdatePurpose)))
-&gt; (Map
      (GovPurposeId 'PParamUpdatePurpose)
      (PEdges (GovPurposeId 'PParamUpdatePurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'PParamUpdatePurpose)
   (PEdges (GovPurposeId 'PParamUpdatePurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose))))
-&gt; PGraph (GovPurposeId 'PParamUpdatePurpose)
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (PGraph (GovPurposeId 'PParamUpdatePurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-964"></span><span>
</span><span id="line-965"></span><span id="local-6989586621686854328"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForestDiff"><span class="hs-identifier hs-type">logProposalsForestDiff</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#Era"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854328"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParamsHKD"><span class="hs-identifier hs-type">PParamsHKD</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854328"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-970"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854328"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-971"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854328"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-972"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854328"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-973"></span><span id="logProposalsForestDiff"><span class="annot"><span class="annottext">logProposalsForestDiff :: forall era.
(Era era, ToExpr (PParamsHKD StrictMaybe era), HasCallStack) =&gt;
Proposals era -&gt; Proposals era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logProposalsForestDiff"><span class="hs-identifier hs-var hs-var">logProposalsForestDiff</span></a></span></span><span> </span><span id="local-6989586621686859077"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859077"><span class="hs-identifier hs-var">pf1</span></a></span></span><span> </span><span id="local-6989586621686859078"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859078"><span class="hs-identifier hs-var">pf2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; ImpM (LedgerSpec era) ()
forall t. HasCallStack =&gt; Doc AnsiStyle -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logDoc"><span class="hs-identifier hs-var">logDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ImpM (LedgerSpec era) ())
-&gt; Doc AnsiStyle -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">vsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;Proposals Forest Diff:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; Proposals era -&gt; Doc AnsiStyle
forall a. ToExpr a =&gt; a -&gt; a -&gt; Doc AnsiStyle
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#diffExpr"><span class="hs-identifier hs-var">diffExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859077"><span class="hs-identifier hs-var">pf1</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859078"><span class="hs-identifier hs-var">pf2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="annot"><span class="hs-comment">-- | Looks up the governance action state corresponding to the governance action id</span></span><span>
</span><span id="line-976"></span><span id="local-6989586621686854334"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier hs-type">lookupGovActionState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-977"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854334"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-978"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-979"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854334"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854334"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-980"></span><span id="lookupGovActionState"><span class="annot"><span class="annottext">lookupGovActionState :: forall era.
ConwayEraGov era =&gt;
GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier hs-var hs-var">lookupGovActionState</span></a></span></span><span> </span><span id="local-6989586621686859083"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859083"><span class="hs-identifier hs-var">aId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; Proposals era -&gt; Maybe (GovActionState era)
forall era.
GovActionId -&gt; Proposals era -&gt; Maybe (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsLookupId"><span class="hs-identifier hs-var">proposalsLookupId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859083"><span class="hs-identifier hs-var">aId</span></a></span><span> </span><span class="annot"><span class="annottext">(Proposals era -&gt; Maybe (GovActionState era))
-&gt; ImpM (LedgerSpec era) (Proposals era)
-&gt; ImpM (LedgerSpec era) (Maybe (GovActionState era))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-981"></span><span>
</span><span id="line-982"></span><span class="annot"><span class="hs-comment">-- | Looks up the governance action state corresponding to the governance action id</span></span><span>
</span><span id="line-983"></span><span id="local-6989586621686854171"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-type">getGovActionState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854171"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-985"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-986"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854171"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854171"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-987"></span><span id="getGovActionState"><span class="annot"><span class="annottext">getGovActionState :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var hs-var">getGovActionState</span></a></span></span><span> </span><span id="local-6989586621686859102"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859102"><span class="hs-identifier hs-var">govActionId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-988"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) (GovActionState era)
-&gt; ImpM (LedgerSpec era) (GovActionState era)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting an action state&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (GovActionState era)
 -&gt; ImpM (LedgerSpec era) (GovActionState era))
-&gt; ImpM (LedgerSpec era) (GovActionState era)
-&gt; ImpM (LedgerSpec era) (GovActionState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-989"></span><span>    </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
forall era.
ConwayEraGov era =&gt;
GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier hs-var">lookupGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859102"><span class="hs-identifier hs-var">govActionId</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Maybe (GovActionState era))
-&gt; (Maybe (GovActionState era)
    -&gt; ImpM (LedgerSpec era) (GovActionState era))
-&gt; ImpM (LedgerSpec era) (GovActionState era)
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-990"></span><span>      </span><span class="annot"><span class="annottext">Maybe (GovActionState era)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-991"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) (GovActionState era)
forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertFailure"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpM (LedgerSpec era) (GovActionState era))
-&gt; String -&gt; ImpM (LedgerSpec era) (GovActionState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not find action state for govActionId: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859102"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-992"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686859104"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859104"><span class="hs-identifier hs-var">govActionState</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GovActionState era -&gt; ImpM (LedgerSpec era) (GovActionState era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859104"><span class="hs-identifier hs-var">govActionState</span></a></span><span>
</span><span id="line-993"></span><span>
</span><span id="line-994"></span><span id="local-6989586621686859105"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPresentGovActionId"><span class="hs-identifier hs-type">expectPresentGovActionId</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-995"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859105"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-996"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-997"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859105"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-998"></span><span id="expectPresentGovActionId"><span class="annot"><span class="annottext">expectPresentGovActionId :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPresentGovActionId"><span class="hs-identifier hs-var hs-var">expectPresentGovActionId</span></a></span></span><span> </span><span id="local-6989586621686859112"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859112"><span class="hs-identifier hs-var">govActionId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (GovActionState era)
-&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (GovActionState era)
 -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) (GovActionState era)
-&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpM (LedgerSpec era) (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859112"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span id="local-6989586621686854219"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMissingGovActionId"><span class="hs-identifier hs-type">expectMissingGovActionId</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854219"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1002"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1003"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854219"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1004"></span><span id="expectMissingGovActionId"><span class="annot"><span class="annottext">expectMissingGovActionId :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMissingGovActionId"><span class="hs-identifier hs-var hs-var">expectMissingGovActionId</span></a></span></span><span> </span><span id="local-6989586621686859127"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859127"><span class="hs-identifier hs-var">govActionId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1005"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting for gov action state to be missing&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1006"></span><span>    </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
forall era.
ConwayEraGov era =&gt;
GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier hs-var">lookupGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859127"><span class="hs-identifier hs-var">govActionId</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Maybe (GovActionState era))
-&gt; (Maybe (GovActionState era) -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1007"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1008"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *). (HasCallStack, MonadIO m) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpM (LedgerSpec era) ())
-&gt; String -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Found gov action state for govActionId: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; String
forall a. ToExpr a =&gt; a -&gt; String
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#ansiExprString"><span class="hs-identifier hs-var">ansiExprString</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859127"><span class="hs-identifier hs-var">govActionId</span></a></span><span>
</span><span id="line-1009"></span><span>      </span><span class="annot"><span class="annottext">Maybe (GovActionState era)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ImpM (LedgerSpec era) ()
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span class="annot"><span class="hs-comment">-- | Builds a RatifyEnv from the current state</span></span><span>
</span><span id="line-1012"></span><span id="local-6989586621686854345"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-type">getRatifyEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854345"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854345"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854345"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854345"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1013"></span><span id="getRatifyEnv"><span class="annot"><span class="annottext">getRatifyEnv :: forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var hs-var">getRatifyEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1014"></span><span>  </span><span id="local-6989586621686859148"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859148"><span class="hs-identifier hs-var">eNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1015"></span><span>  </span><span id="local-6989586621686859150"><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621686859150"><span class="hs-identifier hs-var">instantStake</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (InstantStake era)
-&gt; ImpTestM era (InstantStake era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">Getting r (NewEpochState era) (InstantStake era)
SimpleGetter (NewEpochState era) (InstantStake era)
forall era. SimpleGetter (NewEpochState era) (InstantStake era)
forall (t :: * -&gt; *) era.
CanGetInstantStake t =&gt;
SimpleGetter (t era) (InstantStake era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#instantStakeG"><span class="hs-identifier hs-var">instantStakeG</span></a></span><span>
</span><span id="line-1016"></span><span>  </span><span id="local-6989586621686859154"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621686859154"><span class="hs-identifier hs-var">poolDistr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) PoolDistr
-&gt; ImpTestM era PoolDistr
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(PoolDistr -&gt; Const r PoolDistr)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) PoolDistr
forall era (f :: * -&gt; *).
Functor f =&gt;
(PoolDistr -&gt; f PoolDistr)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesPdL"><span class="hs-identifier hs-var">nesPdL</span></a></span><span>
</span><span id="line-1017"></span><span>  </span><span id="local-6989586621686859156"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621686859156"><span class="hs-identifier hs-var">drepDistr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Map DRep (CompactForm Coin))
-&gt; ImpTestM era (Map DRep (CompactForm Coin))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (Map DRep (CompactForm Coin))
 -&gt; ImpTestM era (Map DRep (CompactForm Coin)))
-&gt; SimpleGetter (NewEpochState era) (Map DRep (CompactForm Coin))
-&gt; ImpTestM era (Map DRep (CompactForm Coin))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map DRep (CompactForm Coin)
     -&gt; Const r (Map DRep (CompactForm Coin)))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map DRep (CompactForm Coin)
    -&gt; Const r (Map DRep (CompactForm Coin)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DRepPulsingState era -&gt; Const r (DRepPulsingState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era.
ConwayEraGov era =&gt;
Lens' (EpochState era) (DRepPulsingState era)
Lens' (EpochState era) (DRepPulsingState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#epochStateDRepPulsingStateL"><span class="hs-identifier hs-var">epochStateDRepPulsingStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((DRepPulsingState era -&gt; Const r (DRepPulsingState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map DRep (CompactForm Coin)
     -&gt; Const r (Map DRep (CompactForm Coin)))
    -&gt; DRepPulsingState era -&gt; Const r (DRepPulsingState era))
-&gt; (Map DRep (CompactForm Coin)
    -&gt; Const r (Map DRep (CompactForm Coin)))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map DRep (CompactForm Coin)
 -&gt; Const r (Map DRep (CompactForm Coin)))
-&gt; DRepPulsingState era -&gt; Const r (DRepPulsingState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
SimpleGetter (DRepPulsingState era) (Map DRep (CompactForm Coin))
SimpleGetter (DRepPulsingState era) (Map DRep (CompactForm Coin))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier hs-var">psDRepDistrG</span></a></span><span>
</span><span id="line-1018"></span><span>  </span><span id="local-6989586621686859164"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686859164"><span class="hs-identifier hs-var">drepState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
 -&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState))
-&gt; SimpleGetter
     (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState
 -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span>
</span><span id="line-1019"></span><span>  </span><span id="local-6989586621686859171"><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621686859171"><span class="hs-identifier hs-var">committeeState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (CommitteeState era)
-&gt; ImpTestM era (CommitteeState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (CommitteeState era)
 -&gt; ImpTestM era (CommitteeState era))
-&gt; SimpleGetter (NewEpochState era) (CommitteeState era)
-&gt; ImpTestM era (CommitteeState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((CommitteeState era -&gt; Const r (CommitteeState era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((CommitteeState era -&gt; Const r (CommitteeState era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((CommitteeState era -&gt; Const r (CommitteeState era))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((CommitteeState era -&gt; Const r (CommitteeState era))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CommitteeState era -&gt; f (CommitteeState era))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsCommitteeStateL"><span class="hs-identifier hs-var">vsCommitteeStateL</span></a></span><span>
</span><span id="line-1020"></span><span>  </span><span id="local-6989586621686859179"><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621686859179"><span class="hs-identifier hs-var">accounts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Accounts era)
-&gt; ImpTestM era (Accounts era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; Const r (DState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era. EraCertState era =&gt; Lens' (CertState era) (DState era)
Lens' (CertState era) (DState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#certDStateL"><span class="hs-identifier hs-var">certDStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((DState era -&gt; Const r (DState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Accounts era -&gt; Const r (Accounts era))
    -&gt; DState era -&gt; Const r (DState era))
-&gt; (Accounts era -&gt; Const r (Accounts era))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Accounts era -&gt; Const r (Accounts era))
-&gt; DState era -&gt; Const r (DState era)
forall era. Lens' (DState era) (Accounts era)
forall (t :: * -&gt; *) era.
CanSetAccounts t =&gt;
Lens' (t era) (Accounts era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#accountsL"><span class="hs-identifier hs-var">accountsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1021"></span><span>  </span><span id="local-6989586621686859187"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><a href="#local-6989586621686859187"><span class="hs-identifier hs-var">poolPs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (KeyHash 'StakePool) StakePoolState)
-&gt; ImpTestM era (Map (KeyHash 'StakePool) StakePoolState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era) (Map (KeyHash 'StakePool) StakePoolState)
 -&gt; ImpTestM era (Map (KeyHash 'StakePool) StakePoolState))
-&gt; SimpleGetter
     (NewEpochState era) (Map (KeyHash 'StakePool) StakePoolState)
-&gt; ImpTestM era (Map (KeyHash 'StakePool) StakePoolState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (KeyHash 'StakePool) StakePoolState
     -&gt; Const r (Map (KeyHash 'StakePool) StakePoolState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (KeyHash 'StakePool) StakePoolState
    -&gt; Const r (Map (KeyHash 'StakePool) StakePoolState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) StakePoolState
 -&gt; Const r (Map (KeyHash 'StakePool) StakePoolState))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era.
EraCertState era =&gt;
Lens' (EpochState era) (Map (KeyHash 'StakePool) StakePoolState)
Lens' (EpochState era) (Map (KeyHash 'StakePool) StakePoolState)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateStakePoolsL"><span class="hs-identifier hs-var">epochStateStakePoolsL</span></a></span><span>
</span><span id="line-1022"></span><span>  </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; ImpTestM era (RatifyEnv era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-1023"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span>
</span><span id="line-1024"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">reStakePoolDistr :: PoolDistr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reStakePoolDistr"><span class="hs-identifier hs-var">reStakePoolDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621686859154"><span class="hs-identifier hs-var">poolDistr</span></a></span><span>
</span><span id="line-1025"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reInstantStake :: InstantStake era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reInstantStake"><span class="hs-identifier hs-var">reInstantStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621686859150"><span class="hs-identifier hs-var">instantStake</span></a></span><span>
</span><span id="line-1026"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepState :: Map (Credential 'DRepRole) DRepState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reDRepState"><span class="hs-identifier hs-var">reDRepState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686859164"><span class="hs-identifier hs-var">drepState</span></a></span><span>
</span><span id="line-1027"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepDistr :: Map DRep (CompactForm Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reDRepDistr"><span class="hs-identifier hs-var">reDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621686859156"><span class="hs-identifier hs-var">drepDistr</span></a></span><span>
</span><span id="line-1028"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCurrentEpoch :: EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reCurrentEpoch"><span class="hs-identifier hs-var">reCurrentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859148"><span class="hs-identifier hs-var">eNo</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; EpochNo
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1029"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCommitteeState :: CommitteeState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reCommitteeState"><span class="hs-identifier hs-var">reCommitteeState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621686859171"><span class="hs-identifier hs-var">committeeState</span></a></span><span>
</span><span id="line-1030"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reAccounts :: Accounts era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reAccounts"><span class="hs-identifier hs-var">reAccounts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621686859179"><span class="hs-identifier hs-var">accounts</span></a></span><span>
</span><span id="line-1031"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reStakePools :: Map (KeyHash 'StakePool) StakePoolState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reStakePools"><span class="hs-identifier hs-var">reStakePools</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><a href="#local-6989586621686859187"><span class="hs-identifier hs-var">poolPs</span></a></span><span>
</span><span id="line-1032"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1033"></span><span>
</span><span id="line-1034"></span><span id="local-6989586621686854368"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeExpired"><span class="hs-identifier hs-type">ccShouldNotBeExpired</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854368"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1036"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1037"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854368"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1038"></span><span id="ccShouldNotBeExpired"><span class="annot"><span class="annottext">ccShouldNotBeExpired :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeExpired"><span class="hs-identifier hs-var hs-var">ccShouldNotBeExpired</span></a></span></span><span> </span><span id="local-6989586621686859214"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859214"><span class="hs-identifier hs-var">coldC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1039"></span><span>  </span><span id="local-6989586621686859215"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859215"><span class="hs-identifier hs-var">curEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1040"></span><span>  </span><span id="local-6989586621686859217"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859217"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; ImpTestM era EpochNo
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era EpochNo
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCCExpiry"><span class="hs-identifier hs-var">getCCExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859214"><span class="hs-identifier hs-var">coldC</span></a></span><span>
</span><span id="line-1041"></span><span>  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859215"><span class="hs-identifier hs-var">curEpochNo</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; (EpochNo -&gt; Bool) -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a) =&gt;
a -&gt; (a -&gt; Bool) -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldSatisfy"><span class="hs-operator hs-var">`shouldSatisfy`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859217"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>
</span><span id="line-1043"></span><span id="local-6989586621686859219"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeExpired"><span class="hs-identifier hs-type">ccShouldBeExpired</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1044"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859219"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1045"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1046"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859219"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1047"></span><span id="ccShouldBeExpired"><span class="annot"><span class="annottext">ccShouldBeExpired :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeExpired"><span class="hs-identifier hs-var hs-var">ccShouldBeExpired</span></a></span></span><span> </span><span id="local-6989586621686859232"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859232"><span class="hs-identifier hs-var">coldC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1048"></span><span>  </span><span id="local-6989586621686859233"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859233"><span class="hs-identifier hs-var">curEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1049"></span><span>  </span><span id="local-6989586621686859235"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859235"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; ImpTestM era EpochNo
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era EpochNo
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCCExpiry"><span class="hs-identifier hs-var">getCCExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859232"><span class="hs-identifier hs-var">coldC</span></a></span><span>
</span><span id="line-1050"></span><span>  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859233"><span class="hs-identifier hs-var">curEpochNo</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; (EpochNo -&gt; Bool) -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a) =&gt;
a -&gt; (a -&gt; Bool) -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldSatisfy"><span class="hs-operator hs-var">`shouldSatisfy`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859235"><span class="hs-identifier hs-var">ccExpiryEpochNo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span id="local-6989586621686854371"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCCExpiry"><span class="hs-identifier hs-type">getCCExpiry</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1053"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854371"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1054"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1055"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854371"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span></span><span>
</span><span id="line-1056"></span><span id="getCCExpiry"><span class="annot"><span class="annottext">getCCExpiry :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era EpochNo
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCCExpiry"><span class="hs-identifier hs-var hs-var">getCCExpiry</span></a></span></span><span> </span><span id="local-6989586621686859252"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859252"><span class="hs-identifier hs-var">coldC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1057"></span><span>  </span><span id="local-6989586621686859253"><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859253"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1058"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859253"><span class="hs-identifier hs-var">committee</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1059"></span><span>    </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era EpochNo
forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertFailure"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;There is no committee&quot;</span></span><span>
</span><span id="line-1060"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Committee"><span class="hs-identifier hs-type">Committee</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859258"><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
committeeMembers :: forall era.
Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
committeeMembers :: Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembers"><span class="hs-identifier hs-var hs-var">committeeMembers</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo -&gt; Maybe EpochNo
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859252"><span class="hs-identifier hs-var">coldC</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859258"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1062"></span><span>        </span><span class="annot"><span class="annottext">Maybe EpochNo
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era EpochNo
forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertFailure"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpTestM era EpochNo) -&gt; String -&gt; ImpTestM era EpochNo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Committee not found for cold credential: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859252"><span class="hs-identifier hs-var">coldC</span></a></span><span>
</span><span id="line-1063"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686859259"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859259"><span class="hs-identifier hs-var">epochNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; ImpTestM era EpochNo
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859259"><span class="hs-identifier hs-var">epochNo</span></a></span><span>
</span><span id="line-1064"></span><span>
</span><span id="line-1065"></span><span class="annot"><span class="hs-comment">-- | Test the resignation status for a CC cold key to be resigned</span></span><span>
</span><span id="line-1066"></span><span id="local-6989586621686854377"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeResigned"><span class="hs-identifier hs-type">ccShouldBeResigned</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1067"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854377"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854377"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1068"></span><span id="ccShouldBeResigned"><span class="annot"><span class="annottext">ccShouldBeResigned :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldBeResigned"><span class="hs-identifier hs-var hs-var">ccShouldBeResigned</span></a></span></span><span> </span><span id="local-6989586621686859278"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859278"><span class="hs-identifier hs-var">coldK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1069"></span><span>  </span><span id="local-6989586621686859279"><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859279"><span class="hs-identifier hs-var">committeeCreds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1070"></span><span>    </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era)
  (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era)
   (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
 -&gt; ImpTestM
      era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; SimpleGetter
     (NewEpochState era)
     (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CommitteeState era -&gt; f (CommitteeState era))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsCommitteeStateL"><span class="hs-identifier hs-var">vsCommitteeStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CommitteeState era -&gt; Const r (CommitteeState era))
 -&gt; VState era -&gt; Const r (VState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; VState era
-&gt; Const r (VState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; Const
      r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; Const r (CommitteeState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; f (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; f (CommitteeState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#csCommitteeCredsL"><span class="hs-identifier hs-var">csCommitteeCredsL</span></a></span><span>
</span><span id="line-1071"></span><span>  </span><span class="annot"><span class="annottext">CommitteeAuthorization -&gt; Maybe (Credential 'HotCommitteeRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#authHk"><span class="hs-identifier hs-var">authHk</span></a></span><span> </span><span class="annot"><span class="annottext">(CommitteeAuthorization -&gt; Maybe (Credential 'HotCommitteeRole))
-&gt; Maybe CommitteeAuthorization
-&gt; Maybe (Maybe (Credential 'HotCommitteeRole))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
-&gt; Maybe CommitteeAuthorization
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859278"><span class="hs-identifier hs-var">coldK</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859279"><span class="hs-identifier hs-var">committeeCreds</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe (Credential 'HotCommitteeRole))
-&gt; Maybe (Maybe (Credential 'HotCommitteeRole)) -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole)
-&gt; Maybe (Maybe (Credential 'HotCommitteeRole))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1072"></span><span>
</span><span id="line-1073"></span><span class="annot"><span class="hs-comment">-- | Test the resignation status for a CC cold key to not be resigned</span></span><span>
</span><span id="line-1074"></span><span id="local-6989586621686859290"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeResigned"><span class="hs-identifier hs-type">ccShouldNotBeResigned</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1075"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859290"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859290"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1076"></span><span id="ccShouldNotBeResigned"><span class="annot"><span class="annottext">ccShouldNotBeResigned :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ccShouldNotBeResigned"><span class="hs-identifier hs-var hs-var">ccShouldNotBeResigned</span></a></span></span><span> </span><span id="local-6989586621686859302"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859302"><span class="hs-identifier hs-var">coldK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1077"></span><span>  </span><span id="local-6989586621686859303"><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859303"><span class="hs-identifier hs-var">committeeCreds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1078"></span><span>    </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era)
  (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era)
   (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
 -&gt; ImpTestM
      era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; SimpleGetter
     (NewEpochState era)
     (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CommitteeState era -&gt; f (CommitteeState era))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsCommitteeStateL"><span class="hs-identifier hs-var">vsCommitteeStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CommitteeState era -&gt; Const r (CommitteeState era))
 -&gt; VState era -&gt; Const r (VState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; VState era
-&gt; Const r (VState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; Const
      r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; Const r (CommitteeState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; f (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; f (CommitteeState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#csCommitteeCredsL"><span class="hs-identifier hs-var">csCommitteeCredsL</span></a></span><span>
</span><span id="line-1079"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
-&gt; Maybe CommitteeAuthorization
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859302"><span class="hs-identifier hs-var">coldK</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859303"><span class="hs-identifier hs-var">committeeCreds</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CommitteeAuthorization
-&gt; (CommitteeAuthorization -&gt; Maybe (Credential 'HotCommitteeRole))
-&gt; Maybe (Credential 'HotCommitteeRole)
forall a b. Maybe a -&gt; (a -&gt; Maybe b) -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">CommitteeAuthorization -&gt; Maybe (Credential 'HotCommitteeRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#authHk"><span class="hs-identifier hs-var">authHk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole)
-&gt; (Maybe (Credential 'HotCommitteeRole) -&gt; Bool)
-&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a) =&gt;
a -&gt; (a -&gt; Bool) -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldSatisfy"><span class="hs-operator hs-var">`shouldSatisfy`</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span>
</span><span id="line-1080"></span><span>
</span><span id="line-1081"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#authHk"><span class="hs-identifier hs-type">authHk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#CommitteeAuthorization"><span class="hs-identifier hs-type">CommitteeAuthorization</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span id="authHk"><span class="annot"><span class="annottext">authHk :: CommitteeAuthorization -&gt; Maybe (Credential 'HotCommitteeRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#authHk"><span class="hs-identifier hs-var hs-var">authHk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#CommitteeHotCredential"><span class="hs-identifier hs-type">CommitteeHotCredential</span></a></span><span> </span><span id="local-6989586621686859312"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859312"><span class="hs-identifier hs-var">hk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
-&gt; Maybe (Credential 'HotCommitteeRole)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859312"><span class="hs-identifier hs-var">hk</span></a></span><span>
</span><span id="line-1083"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#authHk"><span class="hs-identifier hs-var">authHk</span></a></span><span> </span><span class="annot"><span class="annottext">CommitteeAuthorization
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1084"></span><span>
</span><span id="line-1085"></span><span class="annot"><span class="hs-comment">-- | Calculates the ratio of DReps that have voted for the governance action</span></span><span>
</span><span id="line-1086"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateDRepAcceptedRatio"><span class="hs-identifier hs-type">calculateDRepAcceptedRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1087"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854391"><span class="annot"><a href="#local-6989586621686854391"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1088"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854391"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854391"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1089"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1090"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854391"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-1091"></span><span id="calculateDRepAcceptedRatio"><span class="annot"><span class="annottext">calculateDRepAcceptedRatio :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateDRepAcceptedRatio"><span class="hs-identifier hs-var hs-var">calculateDRepAcceptedRatio</span></a></span></span><span> </span><span id="local-6989586621686859325"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859325"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1092"></span><span>  </span><span id="local-6989586621686859326"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859326"><span class="hs-identifier hs-var">ratEnv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span>
</span><span id="line-1093"></span><span>  </span><span id="local-6989586621686859327"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859327"><span class="hs-identifier hs-var">gas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859325"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1094"></span><span>  </span><span class="annot"><span class="annottext">Rational -&gt; ImpTestM era Rational
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; ImpTestM era Rational)
-&gt; Rational -&gt; ImpTestM era Rational
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1095"></span><span>    </span><span class="annot"><span class="annottext">forall era.
RatifyEnv era
-&gt; Map (Credential 'DRepRole) Vote -&gt; GovAction era -&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAcceptedRatio"><span class="hs-identifier hs-var">dRepAcceptedRatio</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686854391"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1096"></span><span>      </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859326"><span class="hs-identifier hs-var">ratEnv</span></a></span><span>
</span><span id="line-1097"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859327"><span class="hs-identifier hs-var">gas</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
-&gt; Getting
     (Map (Credential 'DRepRole) Vote)
     (GovActionState era)
     (Map (Credential 'DRepRole) Vote)
-&gt; Map (Credential 'DRepRole) Vote
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'DRepRole) Vote)
  (GovActionState era)
  (Map (Credential 'DRepRole) Vote)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) Vote
 -&gt; f (Map (Credential 'DRepRole) Vote))
-&gt; GovActionState era -&gt; f (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasDRepVotesL"><span class="hs-identifier hs-var">gasDRepVotesL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1098"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859327"><span class="hs-identifier hs-var">gas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1099"></span><span>
</span><span id="line-1100"></span><span class="hs-comment">-- | Calculates the ratio of Committee members that have voted for the governance</span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- action</span><span>
</span><span id="line-1102"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateCommitteeAcceptedRatio"><span class="hs-identifier hs-type">calculateCommitteeAcceptedRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1103"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686859330"><span class="annot"><a href="#local-6989586621686859330"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1104"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859330"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859330"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1105"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1106"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859330"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-1107"></span><span id="calculateCommitteeAcceptedRatio"><span class="annot"><span class="annottext">calculateCommitteeAcceptedRatio :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateCommitteeAcceptedRatio"><span class="hs-identifier hs-var hs-var">calculateCommitteeAcceptedRatio</span></a></span></span><span> </span><span id="local-6989586621686859347"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859347"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1108"></span><span>  </span><span id="local-6989586621686859348"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859348"><span class="hs-identifier hs-var">eNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1109"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859350"><span class="annot"><span class="annottext">CommitteeState era
reCommitteeState :: forall era. RatifyEnv era -&gt; CommitteeState era
reCommitteeState :: CommitteeState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reCommitteeState"><span class="hs-identifier hs-var hs-var">reCommitteeState</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span>
</span><span id="line-1110"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859351"><span class="annot"><span class="annottext">Map (Credential 'HotCommitteeRole) Vote
gasCommitteeVotes :: forall era.
GovActionState era -&gt; Map (Credential 'HotCommitteeRole) Vote
gasCommitteeVotes :: Map (Credential 'HotCommitteeRole) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasCommitteeVotes"><span class="hs-identifier hs-var hs-var">gasCommitteeVotes</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859347"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1111"></span><span>  </span><span id="local-6989586621686859352"><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859352"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1112"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1113"></span><span>    </span><span id="local-6989586621686859357"><span class="annot"><span class="annottext">members :: Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859357"><span class="hs-identifier hs-var hs-var">members</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; StrictMaybe (Committee era)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; StrictMaybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembers"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686859330"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859352"><span class="hs-identifier hs-var">committee</span></a></span><span>
</span><span id="line-1114"></span><span>  </span><span class="annot"><span class="annottext">Rational -&gt; ImpTestM era Rational
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; ImpTestM era Rational)
-&gt; Rational -&gt; ImpTestM era Rational
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1115"></span><span>    </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Map (Credential 'HotCommitteeRole) Vote
-&gt; CommitteeState era
-&gt; EpochNo
-&gt; Rational
forall era.
Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Map (Credential 'HotCommitteeRole) Vote
-&gt; CommitteeState era
-&gt; EpochNo
-&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAcceptedRatio"><span class="hs-identifier hs-var">committeeAcceptedRatio</span></a></span><span>
</span><span id="line-1116"></span><span>      </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859357"><span class="hs-identifier hs-var">members</span></a></span><span>
</span><span id="line-1117"></span><span>      </span><span class="annot"><span class="annottext">Map (Credential 'HotCommitteeRole) Vote
</span><a href="#local-6989586621686859351"><span class="hs-identifier hs-var">gasCommitteeVotes</span></a></span><span>
</span><span id="line-1118"></span><span>      </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621686859350"><span class="hs-identifier hs-var">reCommitteeState</span></a></span><span>
</span><span id="line-1119"></span><span>      </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859348"><span class="hs-identifier hs-var">eNo</span></a></span><span>
</span><span id="line-1120"></span><span>
</span><span id="line-1121"></span><span id="local-6989586621686854403"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculatePoolAcceptedRatio"><span class="hs-identifier hs-type">calculatePoolAcceptedRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1122"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854403"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854403"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854403"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span></span><span>
</span><span id="line-1123"></span><span id="calculatePoolAcceptedRatio"><span class="annot"><span class="annottext">calculatePoolAcceptedRatio :: forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculatePoolAcceptedRatio"><span class="hs-identifier hs-var hs-var">calculatePoolAcceptedRatio</span></a></span></span><span> </span><span id="local-6989586621686859373"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859373"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1124"></span><span>  </span><span id="local-6989586621686859374"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859374"><span class="hs-identifier hs-var">ratEnv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span>
</span><span id="line-1125"></span><span>  </span><span id="local-6989586621686859375"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859375"><span class="hs-identifier hs-var">gas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859373"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1126"></span><span>  </span><span id="local-6989586621686859376"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686859376"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era ProtVer
forall era. EraGov era =&gt; ImpTestM era ProtVer
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getProtVer"><span class="hs-identifier hs-var">getProtVer</span></a></span><span>
</span><span id="line-1127"></span><span>  </span><span class="annot"><span class="annottext">Rational -&gt; ImpTestM era Rational
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; ImpTestM era Rational)
-&gt; Rational -&gt; ImpTestM era Rational
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; GovActionState era -&gt; ProtVer -&gt; Rational
forall era.
ConwayEraAccounts era =&gt;
RatifyEnv era -&gt; GovActionState era -&gt; ProtVer -&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAcceptedRatio"><span class="hs-identifier hs-var">spoAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859374"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859375"><span class="hs-identifier hs-var">gas</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686859376"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="annot"><span class="hs-comment">-- | Logs the ratios of accepted votes per category</span></span><span>
</span><span id="line-1130"></span><span id="local-6989586621686854407"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logAcceptedRatio"><span class="hs-identifier hs-type">logAcceptedRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1131"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854407"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854407"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854407"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1132"></span><span id="logAcceptedRatio"><span class="annot"><span class="annottext">logAcceptedRatio :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logAcceptedRatio"><span class="hs-identifier hs-var hs-var">logAcceptedRatio</span></a></span></span><span> </span><span id="local-6989586621686859408"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859408"><span class="hs-identifier hs-var">aId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1133"></span><span>  </span><span id="local-6989586621686859409"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859409"><span class="hs-identifier hs-var">dRepRatio</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era Rational
forall era.
(HasCallStack, ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateDRepAcceptedRatio"><span class="hs-identifier hs-var">calculateDRepAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859408"><span class="hs-identifier hs-var">aId</span></a></span><span>
</span><span id="line-1134"></span><span>  </span><span id="local-6989586621686859410"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859410"><span class="hs-identifier hs-var">committeeRatio</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era Rational
forall era.
(HasCallStack, ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculateCommitteeAcceptedRatio"><span class="hs-identifier hs-var">calculateCommitteeAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859408"><span class="hs-identifier hs-var">aId</span></a></span><span>
</span><span id="line-1135"></span><span>  </span><span id="local-6989586621686859411"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859411"><span class="hs-identifier hs-var">spoRatio</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era Rational
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Rational
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#calculatePoolAcceptedRatio"><span class="hs-identifier hs-var">calculatePoolAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859408"><span class="hs-identifier hs-var">aId</span></a></span><span>
</span><span id="line-1136"></span><span>  </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; Doc AnsiStyle -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logDoc"><span class="hs-identifier hs-var">logDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ImpTestM era ())
-&gt; Doc AnsiStyle -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1137"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Doc AnsiStyle) -&gt; [(String, Doc AnsiStyle)] -&gt; Doc AnsiStyle
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#tableDoc"><span class="hs-identifier hs-var">tableDoc</span></a></span><span>
</span><span id="line-1138"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Maybe (Doc AnsiStyle)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;ACCEPTED RATIOS&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1139"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DRep accepted ratio:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859409"><span class="hs-identifier hs-var">dRepRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1140"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Committee accepted ratio:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859410"><span class="hs-identifier hs-var">committeeRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1141"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SPO accepted ratio:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621686859411"><span class="hs-identifier hs-var">spoRatio</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1143"></span><span>
</span><span id="line-1144"></span><span id="local-6989586621686854412"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnvAndState"><span class="hs-identifier hs-type">getRatifyEnvAndState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1145"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854412"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854412"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854412"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854412"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854412"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1146"></span><span id="getRatifyEnvAndState"><span class="annot"><span class="annottext">getRatifyEnvAndState :: forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era, RatifyState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnvAndState"><span class="hs-identifier hs-var hs-var">getRatifyEnvAndState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1147"></span><span>  </span><span id="local-6989586621686859427"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859427"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span>
</span><span id="line-1148"></span><span>  </span><span id="local-6989586621686859428"><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621686859428"><span class="hs-identifier hs-var">enactState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (EnactState era)
forall era. ConwayEraGov era =&gt; ImpTestM era (EnactState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getEnactState"><span class="hs-identifier hs-var">getEnactState</span></a></span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686859429"><span class="annot"><span class="annottext">ratifyState :: RatifyState era
</span><a href="#local-6989586621686859429"><span class="hs-identifier hs-var hs-var">ratifyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1150"></span><span>        </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span>
</span><span id="line-1151"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rsEnactState :: EnactState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsEnactState"><span class="hs-identifier hs-var">rsEnactState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621686859428"><span class="hs-identifier hs-var">enactState</span></a></span><span>
</span><span id="line-1152"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsEnacted :: Seq (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsEnacted"><span class="hs-identifier hs-var">rsEnacted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (GovActionState era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1153"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsExpired :: Set GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsExpired"><span class="hs-identifier hs-var">rsExpired</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set GovActionId
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1154"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsDelayed :: Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#rsDelayed"><span class="hs-identifier hs-var">rsDelayed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1155"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-1156"></span><span>  </span><span class="annot"><span class="annottext">(RatifyEnv era, RatifyState era)
-&gt; ImpTestM era (RatifyEnv era, RatifyState era)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859427"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859429"><span class="hs-identifier hs-var">ratifyState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>
</span><span id="line-1158"></span><span class="hs-comment">-- | Checks whether the governance action has enough DRep votes to be accepted in the next</span><span>
</span><span id="line-1159"></span><span class="hs-comment">-- epoch. (Note that no other checks except DRep votes are used)</span><span>
</span><span id="line-1160"></span><span id="local-6989586621686854416"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepAccepted"><span class="hs-identifier hs-type">isDRepAccepted</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854416"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ConwayEraPParams"><span class="hs-identifier hs-type">ConwayEraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854416"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854416"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1162"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1163"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854416"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1164"></span><span id="isDRepAccepted"><span class="annot"><span class="annottext">isDRepAccepted :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraPParams era,
 ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Bool
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepAccepted"><span class="hs-identifier hs-var hs-var">isDRepAccepted</span></a></span></span><span> </span><span id="local-6989586621686859448"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859448"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1165"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686859449"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859449"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686859450"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859450"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era, RatifyState era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era, RatifyState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnvAndState"><span class="hs-identifier hs-var">getRatifyEnvAndState</span></a></span><span>
</span><span id="line-1166"></span><span>  </span><span id="local-6989586621686859451"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859451"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859448"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1167"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; ImpTestM era Bool
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era Bool) -&gt; Bool -&gt; ImpTestM era Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
ConwayEraPParams era =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAccepted"><span class="hs-identifier hs-var">dRepAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859449"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859450"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859451"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span id="local-6989586621686859452"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isSpoAccepted"><span class="hs-identifier hs-type">isSpoAccepted</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859452"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ConwayEraPParams"><span class="hs-identifier hs-type">ConwayEraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859452"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859452"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1171"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1172"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859452"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1173"></span><span id="isSpoAccepted"><span class="annot"><span class="annottext">isSpoAccepted :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraPParams era,
 ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Bool
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isSpoAccepted"><span class="hs-identifier hs-var hs-var">isSpoAccepted</span></a></span></span><span> </span><span id="local-6989586621686859468"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859468"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1174"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686859469"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859469"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686859470"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859470"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era, RatifyState era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era, RatifyState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnvAndState"><span class="hs-identifier hs-var">getRatifyEnvAndState</span></a></span><span>
</span><span id="line-1175"></span><span>  </span><span id="local-6989586621686859471"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859471"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859468"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1176"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; ImpTestM era Bool
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era Bool) -&gt; Bool -&gt; ImpTestM era Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
(ConwayEraPParams era, ConwayEraAccounts era) =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAccepted"><span class="hs-identifier hs-var">spoAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859469"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859470"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859471"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span id="local-6989586621686859472"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isCommitteeAccepted"><span class="hs-identifier hs-type">isCommitteeAccepted</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1179"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859472"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ConwayEraPParams"><span class="hs-identifier hs-type">ConwayEraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859472"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859472"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1180"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1181"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686859472"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1182"></span><span id="isCommitteeAccepted"><span class="annot"><span class="annottext">isCommitteeAccepted :: forall era.
(HasCallStack, ConwayEraGov era, ConwayEraPParams era,
 ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era Bool
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isCommitteeAccepted"><span class="hs-identifier hs-var hs-var">isCommitteeAccepted</span></a></span></span><span> </span><span id="local-6989586621686859486"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859486"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1183"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686859487"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859487"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686859488"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859488"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era, RatifyState era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era, RatifyState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnvAndState"><span class="hs-identifier hs-var">getRatifyEnvAndState</span></a></span><span>
</span><span id="line-1184"></span><span>  </span><span id="local-6989586621686859489"><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859489"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (GovActionState era)
forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era (GovActionState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getGovActionState"><span class="hs-identifier hs-var">getGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859486"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1185"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; ImpTestM era Bool
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era Bool) -&gt; Bool -&gt; ImpTestM era Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
ConwayEraPParams era =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAccepted"><span class="hs-identifier hs-var">committeeAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859487"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859488"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859489"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span class="annot"><span class="hs-comment">-- | Logs the results of each check required to make the governance action pass</span></span><span>
</span><span id="line-1188"></span><span id="local-6989586621686854422"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logRatificationChecks"><span class="hs-identifier hs-type">logRatificationChecks</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1189"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854422"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.PParams.html#ConwayEraPParams"><span class="hs-identifier hs-type">ConwayEraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854422"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854422"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1190"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1191"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854422"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1192"></span><span id="logRatificationChecks"><span class="annot"><span class="annottext">logRatificationChecks :: forall era.
(ConwayEraGov era, ConwayEraPParams era, HasCallStack,
 ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logRatificationChecks"><span class="hs-identifier hs-var hs-var">logRatificationChecks</span></a></span></span><span> </span><span id="local-6989586621686859575"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859575"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1193"></span><span>  </span><span id="local-6989586621686859576"><span class="annot"><span class="annottext">Maybe (GovActionState era)
</span><a href="#local-6989586621686859576"><span class="hs-identifier hs-var">mbyGas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
forall era.
ConwayEraGov era =&gt;
GovActionId -&gt; ImpTestM era (Maybe (GovActionState era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lookupGovActionState"><span class="hs-identifier hs-var">lookupGovActionState</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859575"><span class="hs-identifier hs-var">gaId</span></a></span><span>
</span><span id="line-1194"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (GovActionState era)
</span><a href="#local-6989586621686859576"><span class="hs-identifier hs-var">mbyGas</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1195"></span><span>    </span><span class="annot"><span class="annottext">Maybe (GovActionState era)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; Text -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logText"><span class="hs-identifier hs-var">logText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ImpTestM era ()) -&gt; Text -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Goveranance action not found: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859575"><span class="hs-identifier hs-var">gaId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686859579"><span class="annot"><span class="annottext">gas :: GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859580"><span class="annot"><span class="annottext">Map (Credential 'HotCommitteeRole) Vote
gasCommitteeVotes :: forall era.
GovActionState era -&gt; Map (Credential 'HotCommitteeRole) Vote
gasCommitteeVotes :: Map (Credential 'HotCommitteeRole) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasCommitteeVotes"><span class="hs-identifier hs-var hs-var">gasCommitteeVotes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686859581"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) Vote
gasDRepVotes :: forall era. GovActionState era -&gt; Map (Credential 'DRepRole) Vote
gasDRepVotes :: Map (Credential 'DRepRole) Vote
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasDRepVotes"><span class="hs-identifier hs-var hs-var">gasDRepVotes</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1197"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686859582"><span class="annot"><span class="annottext">govAction :: GovAction era
</span><a href="#local-6989586621686859582"><span class="hs-identifier hs-var hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-1198"></span><span>      </span><span id="local-6989586621686859583"><span class="annot"><span class="annottext">ens :: EnactState era
</span><a href="#local-6989586621686859583"><span class="hs-identifier hs-var">ens</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#EnactState"><span class="hs-identifier hs-type">EnactState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859585"><span id="local-6989586621686859586"><span id="local-6989586621686859587"><span id="local-6989586621686859588"><span id="local-6989586621686859589"><span id="local-6989586621686859590"><span id="local-6989586621686859591"><span class="annot"><span class="annottext">Map (Credential 'Staking) Coin
StrictMaybe (Committee era)
PParams era
Constitution era
GovRelation StrictMaybe
Coin
ensCommittee :: StrictMaybe (Committee era)
ensConstitution :: Constitution era
ensCurPParams :: PParams era
ensPrevPParams :: PParams era
ensTreasury :: Coin
ensWithdrawals :: Map (Credential 'Staking) Coin
ensPrevGovActionIds :: GovRelation StrictMaybe
ensCommittee :: forall era. EnactState era -&gt; StrictMaybe (Committee era)
ensConstitution :: forall era. EnactState era -&gt; Constitution era
ensCurPParams :: forall era. EnactState era -&gt; PParams era
ensPrevPParams :: forall era. EnactState era -&gt; PParams era
ensTreasury :: forall era. EnactState era -&gt; Coin
ensWithdrawals :: forall era. EnactState era -&gt; Map (Credential 'Staking) Coin
ensPrevGovActionIds :: forall era. EnactState era -&gt; GovRelation StrictMaybe
</span><a href="#local-6989586621686859585"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (EnactState era)
forall era. ConwayEraGov era =&gt; ImpTestM era (EnactState era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getEnactState"><span class="hs-identifier hs-var">getEnactState</span></a></span><span>
</span><span id="line-1199"></span><span>      </span><span id="local-6989586621686859599"><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859599"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1200"></span><span>      </span><span id="local-6989586621686859604"><span class="annot"><span class="annottext">ratEnv :: RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621686859605"><span class="annot"><span class="annottext">EpochNo
reCurrentEpoch :: forall era. RatifyEnv era -&gt; EpochNo
reCurrentEpoch :: EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reCurrentEpoch"><span class="hs-identifier hs-var hs-var">reCurrentEpoch</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span>
</span><span id="line-1201"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686859606"><span class="annot"><span class="annottext">ratSt :: RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var hs-var">ratSt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnactState era
-&gt; Seq (GovActionState era)
-&gt; Set GovActionId
-&gt; Bool
-&gt; RatifyState era
forall era.
EnactState era
-&gt; Seq (GovActionState era)
-&gt; Set GovActionId
-&gt; Bool
-&gt; RatifyState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-var">RatifyState</span></a></span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621686859583"><span class="hs-identifier hs-var">ens</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (GovActionState era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Set GovActionId
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1202"></span><span>      </span><span id="local-6989586621686859607"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686859607"><span class="hs-identifier hs-var">curTreasury</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) Coin
Lens' (NewEpochState era) Coin
forall (t :: * -&gt; *) era.
CanSetChainAccountState t =&gt;
Lens' (t era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.ChainAccount.html#treasuryL"><span class="hs-identifier hs-var">treasuryL</span></a></span><span>
</span><span id="line-1203"></span><span>      </span><span id="local-6989586621686859612"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859612"><span class="hs-identifier hs-var">currentEpoch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1204"></span><span>      </span><span id="local-6989586621686859614"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686859614"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era ProtVer
forall era. EraGov era =&gt; ImpTestM era ProtVer
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getProtVer"><span class="hs-identifier hs-var">getProtVer</span></a></span><span>
</span><span id="line-1205"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-1206"></span><span>        </span><span id="local-6989586621686859615"><span class="annot"><span class="annottext">members :: Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859615"><span class="hs-identifier hs-var hs-var">members</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; StrictMaybe (Committee era)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; StrictMaybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap'</span></span><span> </span><span class="annot"><span class="annottext">Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall era.
Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembers"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686859599"><span class="hs-identifier hs-var">committee</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span id="local-6989586621686859616"><span class="annot"><span class="annottext">committeeState :: CommitteeState era
</span><a href="#local-6989586621686859616"><span class="hs-identifier hs-var hs-var">committeeState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; CommitteeState era
forall era. RatifyEnv era -&gt; CommitteeState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reCommitteeState"><span class="hs-identifier hs-var">reCommitteeState</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span>
</span><span id="line-1208"></span><span>      </span><span id="local-6989586621686859617"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686859617"><span class="hs-identifier hs-var">curPParams</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; GovState era -&gt; Const r (GovState era)
forall era. EraGov era =&gt; Lens' (GovState era) (PParams era)
Lens' (GovState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#curPParamsGovStateL"><span class="hs-identifier hs-var">curPParamsGovStateL</span></a></span><span>
</span><span id="line-1209"></span><span>      </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; Doc AnsiStyle -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logDoc"><span class="hs-identifier hs-var">logDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ImpTestM era ())
-&gt; Doc AnsiStyle -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1210"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Doc AnsiStyle) -&gt; [(String, Doc AnsiStyle)] -&gt; Doc AnsiStyle
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#tableDoc"><span class="hs-identifier hs-var">tableDoc</span></a></span><span>
</span><span id="line-1211"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Maybe (Doc AnsiStyle)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;RATIFICATION CHECKS&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prevActionAsExpected:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovActionState era -&gt; GovRelation StrictMaybe -&gt; Bool
forall era. GovActionState era -&gt; GovRelation StrictMaybe -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#prevActionAsExpected"><span class="hs-identifier hs-var">prevActionAsExpected</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span> </span><span class="annot"><span class="annottext">GovRelation StrictMaybe
</span><a href="#local-6989586621686859591"><span class="hs-identifier hs-var">ensPrevGovActionIds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1213"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;validCommitteeTerm:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; PParams era -&gt; EpochNo -&gt; Bool
forall era.
ConwayEraPParams era =&gt;
GovAction era -&gt; PParams era -&gt; EpochNo -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#validCommitteeTerm"><span class="hs-identifier hs-var">validCommitteeTerm</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686859582"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686859617"><span class="hs-identifier hs-var">curPParams</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859612"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1214"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;notDelayed:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;??&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;withdrawalCanWithdraw:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; Coin -&gt; Bool
forall era. GovAction era -&gt; Coin -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#withdrawalCanWithdraw"><span class="hs-identifier hs-var">withdrawalCanWithdraw</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686859582"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686859607"><span class="hs-identifier hs-var">curTreasury</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1216"></span><span>          </span><span class="hs-special">,</span><span>
</span><span id="line-1217"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;committeeAccepted:&quot;</span></span><span>
</span><span id="line-1218"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-1219"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
ConwayEraPParams era =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAccepted"><span class="hs-identifier hs-var">committeeAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-1220"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;[&quot;</span></span><span>
</span><span id="line-1221"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;To Pass:&quot;</span></span><span>
</span><span id="line-1222"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; Doc AnsiStyle) -&gt; Rational -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Map (Credential 'HotCommitteeRole) Vote
-&gt; CommitteeState era
-&gt; EpochNo
-&gt; Rational
forall era.
Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Map (Credential 'HotCommitteeRole) Vote
-&gt; CommitteeState era
-&gt; EpochNo
-&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#committeeAcceptedRatio"><span class="hs-identifier hs-var">committeeAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859615"><span class="hs-identifier hs-var">members</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'HotCommitteeRole) Vote
</span><a href="#local-6989586621686859580"><span class="hs-identifier hs-var">gasCommitteeVotes</span></a></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621686859616"><span class="hs-identifier hs-var">committeeState</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859612"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span>
</span><span id="line-1223"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;=&quot;</span></span><span>
</span><span id="line-1224"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe UnitInterval -&gt; Doc AnsiStyle)
-&gt; StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
-&gt; RatifyState era
-&gt; CommitteeState era
-&gt; GovAction era
-&gt; StrictMaybe UnitInterval
forall era.
ConwayEraPParams era =&gt;
EpochNo
-&gt; RatifyState era
-&gt; CommitteeState era
-&gt; GovAction era
-&gt; StrictMaybe UnitInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#votingCommitteeThreshold"><span class="hs-identifier hs-var">votingCommitteeThreshold</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859605"><span class="hs-identifier hs-var">reCurrentEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621686859616"><span class="hs-identifier hs-var">committeeState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1225"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-1226"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1227"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1228"></span><span>          </span><span class="hs-special">,</span><span>
</span><span id="line-1229"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;spoAccepted:&quot;</span></span><span>
</span><span id="line-1230"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-1231"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
(ConwayEraPParams era, ConwayEraAccounts era) =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAccepted"><span class="hs-identifier hs-var">spoAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-1232"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;[&quot;</span></span><span>
</span><span id="line-1233"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;To Pass:&quot;</span></span><span>
</span><span id="line-1234"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; Doc AnsiStyle) -&gt; Rational -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; GovActionState era -&gt; ProtVer -&gt; Rational
forall era.
ConwayEraAccounts era =&gt;
RatifyEnv era -&gt; GovActionState era -&gt; ProtVer -&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#spoAcceptedRatio"><span class="hs-identifier hs-var">spoAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686859614"><span class="hs-identifier hs-var">pv</span></a></span><span>
</span><span id="line-1235"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;=&quot;</span></span><span>
</span><span id="line-1236"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe UnitInterval -&gt; Doc AnsiStyle)
-&gt; StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era -&gt; GovAction era -&gt; StrictMaybe UnitInterval
forall era.
ConwayEraPParams era =&gt;
RatifyState era -&gt; GovAction era -&gt; StrictMaybe UnitInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#votingStakePoolThreshold"><span class="hs-identifier hs-var">votingStakePoolThreshold</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-1238"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1239"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span>          </span><span class="hs-special">,</span><span>
</span><span id="line-1241"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dRepAccepted:&quot;</span></span><span>
</span><span id="line-1242"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span>
</span><span id="line-1243"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Doc AnsiStyle) -&gt; Bool -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
forall era.
ConwayEraPParams era =&gt;
RatifyEnv era -&gt; RatifyState era -&gt; GovActionState era -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAccepted"><span class="hs-identifier hs-var">dRepAccepted</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-1244"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;[&quot;</span></span><span>
</span><span id="line-1245"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;To Pass:&quot;</span></span><span>
</span><span id="line-1246"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; Doc AnsiStyle) -&gt; Rational -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
-&gt; Map (Credential 'DRepRole) Vote -&gt; GovAction era -&gt; Rational
forall era.
RatifyEnv era
-&gt; Map (Credential 'DRepRole) Vote -&gt; GovAction era -&gt; Rational
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ratify.html#dRepAcceptedRatio"><span class="hs-identifier hs-var">dRepAcceptedRatio</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621686859604"><span class="hs-identifier hs-var">ratEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) Vote
</span><a href="#local-6989586621686859581"><span class="hs-identifier hs-var">gasDRepVotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;=&quot;</span></span><span>
</span><span id="line-1248"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe UnitInterval -&gt; Doc AnsiStyle)
-&gt; StrictMaybe UnitInterval -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era -&gt; GovAction era -&gt; StrictMaybe UnitInterval
forall era.
ConwayEraPParams era =&gt;
RatifyState era -&gt; GovAction era -&gt; StrictMaybe UnitInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#votingDRepThreshold"><span class="hs-identifier hs-var">votingDRepThreshold</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686859606"><span class="hs-identifier hs-var">ratSt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionState era -&gt; GovAction era
forall era. GovActionState era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasAction"><span class="hs-identifier hs-var">gasAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionState era
</span><a href="#local-6989586621686859579"><span class="hs-identifier hs-var">gas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1249"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-1250"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1251"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1252"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span class="hs-comment">-- | Submits a transaction that registers a hot key for the given cold key.</span><span>
</span><span id="line-1255"></span><span class="hs-comment">-- Returns the hot key hash.</span><span>
</span><span id="line-1256"></span><span id="local-6989586621686854447"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKey"><span class="hs-identifier hs-type">registerCommitteeHotKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1257"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854447"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854447"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1258"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1259"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854447"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1260"></span><span id="registerCommitteeHotKey"><span class="annot"><span class="annottext">registerCommitteeHotKey :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
Credential 'ColdCommitteeRole
-&gt; ImpTestM era (Credential 'HotCommitteeRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKey"><span class="hs-identifier hs-var hs-var">registerCommitteeHotKey</span></a></span></span><span> </span><span id="local-6989586621686859647"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859647"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Register committee hot key&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
 -&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole))
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1261"></span><span>  </span><span id="local-6989586621686859648"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859648"><span class="hs-identifier hs-var">hotKey</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
ImpTestM era (Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKeys"><span class="hs-identifier hs-var">registerCommitteeHotKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'HotCommitteeRole -&gt; Credential 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'HotCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Credential 'ColdCommitteeRole)
 -&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole)))
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859647"><span class="hs-identifier hs-var">coldKey</span></a></span><span>
</span><span id="line-1262"></span><span>  </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
-&gt; ImpM (LedgerSpec era) (Credential 'HotCommitteeRole)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859648"><span class="hs-identifier hs-var">hotKey</span></a></span><span>
</span><span id="line-1263"></span><span>
</span><span id="line-1264"></span><span id="local-6989586621686853959"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKeys"><span class="hs-identifier hs-type">registerCommitteeHotKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1265"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853959"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853959"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1266"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Hot Credential generator</span></span><span>
</span><span id="line-1267"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853959"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1268"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1269"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686853959"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1270"></span><span id="registerCommitteeHotKeys"><span class="annot"><span class="annottext">registerCommitteeHotKeys :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
ImpTestM era (Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'ColdCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKeys"><span class="hs-identifier hs-var hs-var">registerCommitteeHotKeys</span></a></span></span><span> </span><span id="local-6989586621686859674"><span class="annot"><span class="annottext">ImpTestM era (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686859674"><span class="hs-identifier hs-var">genHotCred</span></a></span></span><span> </span><span id="local-6989586621686859675"><span class="annot"><span class="annottext">NonEmpty (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859675"><span class="hs-identifier hs-var">coldKeys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1271"></span><span>  </span><span id="local-6989586621686859676"><span class="annot"><span class="annottext">NonEmpty
  (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686859676"><span class="hs-identifier hs-var">keys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'ColdCommitteeRole)
-&gt; (Credential 'ColdCommitteeRole
    -&gt; ImpM
         (LedgerSpec era)
         (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole))
-&gt; ImpM
     (LedgerSpec era)
     (NonEmpty
        (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859675"><span class="hs-identifier hs-var">coldKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621686859677"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859677"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859677"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'HotCommitteeRole
 -&gt; (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole))
-&gt; ImpTestM era (Credential 'HotCommitteeRole)
-&gt; ImpM
     (LedgerSpec era)
     (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686859674"><span class="hs-identifier hs-var">genHotCred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1272"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Registering Committee Hot keys&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1273"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-1274"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-1275"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
 -&gt; TxCert era)
-&gt; [(Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)]
-&gt; [TxCert era]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Credential 'ColdCommitteeRole
 -&gt; Credential 'HotCommitteeRole -&gt; TxCert era)
-&gt; (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
-&gt; TxCert era
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Credential 'HotCommitteeRole -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole
-&gt; Credential 'HotCommitteeRole -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#AuthCommitteeHotKeyTxCert"><span class="hs-identifier hs-var">AuthCommitteeHotKeyTxCert</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty
  (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
-&gt; [(Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty
  (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686859676"><span class="hs-identifier hs-var">keys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1276"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Credential 'HotCommitteeRole)
 -&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole)))
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (NonEmpty (Credential 'HotCommitteeRole))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
 -&gt; Credential 'HotCommitteeRole)
-&gt; NonEmpty
     (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
-&gt; NonEmpty (Credential 'HotCommitteeRole)
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
-&gt; Credential 'HotCommitteeRole
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty
  (Credential 'ColdCommitteeRole, Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686859676"><span class="hs-identifier hs-var">keys</span></a></span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span class="hs-comment">-- | Submits a transaction that resigns the cold key. Prior to resignation if there was</span><span>
</span><span id="line-1279"></span><span class="hs-comment">-- hot credential authorization for this committee member it will be returned.</span><span>
</span><span id="line-1280"></span><span id="local-6989586621686854460"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#resignCommitteeColdKey"><span class="hs-identifier hs-type">resignCommitteeColdKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1281"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854460"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ConwayEraTxCert"><span class="hs-identifier hs-type">ConwayEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854460"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854460"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1282"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1283"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Anchor"><span class="hs-identifier hs-type">Anchor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1284"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854460"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1285"></span><span id="resignCommitteeColdKey"><span class="annot"><span class="annottext">resignCommitteeColdKey :: forall era.
(ShelleyEraImp era, ConwayEraTxCert era, ConwayEraCertState era) =&gt;
Credential 'ColdCommitteeRole
-&gt; StrictMaybe Anchor
-&gt; ImpTestM era (Maybe (Credential 'HotCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#resignCommitteeColdKey"><span class="hs-identifier hs-var hs-var">resignCommitteeColdKey</span></a></span></span><span> </span><span id="local-6989586621686859707"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859707"><span class="hs-identifier hs-var">coldKey</span></a></span></span><span> </span><span id="local-6989586621686859708"><span class="annot"><span class="annottext">StrictMaybe Anchor
</span><a href="#local-6989586621686859708"><span class="hs-identifier hs-var">anchor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1286"></span><span>  </span><span id="local-6989586621686859709"><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859709"><span class="hs-identifier hs-var">committeAuthorizations</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1287"></span><span>    </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era)
  (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era)
   (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
 -&gt; ImpTestM
      era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; SimpleGetter
     (NewEpochState era)
     (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
-&gt; ImpTestM
     era (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1288"></span><span>      </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span>
</span><span id="line-1289"></span><span>        </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span>
</span><span id="line-1290"></span><span>        </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span>
</span><span id="line-1291"></span><span>        </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span>
</span><span id="line-1292"></span><span>        </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CommitteeState era -&gt; f (CommitteeState era))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsCommitteeStateL"><span class="hs-identifier hs-var">vsCommitteeStateL</span></a></span><span>
</span><span id="line-1293"></span><span>        </span><span class="annot"><span class="annottext">((CommitteeState era -&gt; Const r (CommitteeState era))
 -&gt; VState era -&gt; Const r (VState era))
-&gt; ((Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
     -&gt; Const
          r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
    -&gt; CommitteeState era -&gt; Const r (CommitteeState era))
-&gt; (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
    -&gt; Const
         r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; VState era
-&gt; Const r (VState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; Const
      r (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; Const r (CommitteeState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
 -&gt; f (Map (Credential 'ColdCommitteeRole) CommitteeAuthorization))
-&gt; CommitteeState era -&gt; f (CommitteeState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#csCommitteeCredsL"><span class="hs-identifier hs-var">csCommitteeCredsL</span></a></span><span>
</span><span id="line-1294"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Resigning Committee Cold key&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1295"></span><span>    </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-1296"></span><span>      </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-1297"></span><span>        </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; StrictSeq (TxCert era)
forall a. a -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#singleton"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; StrictMaybe Anchor -&gt; TxCert era
forall era.
ConwayEraTxCert era =&gt;
Credential 'ColdCommitteeRole -&gt; StrictMaybe Anchor -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxCert.html#ResignCommitteeColdTxCert"><span class="hs-identifier hs-var">ResignCommitteeColdTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859707"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe Anchor
</span><a href="#local-6989586621686859708"><span class="hs-identifier hs-var">anchor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1298"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (Maybe (Credential 'HotCommitteeRole))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Credential 'HotCommitteeRole)
 -&gt; ImpTestM era (Maybe (Credential 'HotCommitteeRole)))
-&gt; Maybe (Credential 'HotCommitteeRole)
-&gt; ImpTestM era (Maybe (Credential 'HotCommitteeRole))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1299"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#CommitteeHotCredential"><span class="hs-identifier hs-type">CommitteeHotCredential</span></a></span><span> </span><span id="local-6989586621686859718"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859718"><span class="hs-identifier hs-var">hotCred</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
-&gt; Maybe CommitteeAuthorization
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859707"><span class="hs-identifier hs-var">coldKey</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) CommitteeAuthorization
</span><a href="#local-6989586621686859709"><span class="hs-identifier hs-var">committeAuthorizations</span></a></span><span>
</span><span id="line-1300"></span><span>    </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
-&gt; Maybe (Credential 'HotCommitteeRole)
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859718"><span class="hs-identifier hs-var">hotCred</span></a></span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitCommitteeElection"><span class="hs-identifier hs-type">submitCommitteeElection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1303"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854464"><span class="annot"><a href="#local-6989586621686854464"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1304"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-1305"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854464"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1306"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1307"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1308"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1309"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1310"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1311"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854464"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1312"></span><span id="submitCommitteeElection"><span class="annot"><span class="annottext">submitCommitteeElection :: forall era.
(HasCallStack, ConwayEraImp era) =&gt;
StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Credential 'DRepRole
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; ImpTestM era (GovPurposeId 'CommitteePurpose)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitCommitteeElection"><span class="hs-identifier hs-var hs-var">submitCommitteeElection</span></a></span></span><span> </span><span id="local-6989586621686859742"><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686859742"><span class="hs-identifier hs-var">prevGovId</span></a></span></span><span> </span><span id="local-6989586621686859743"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859743"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span id="local-6989586621686859744"><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859744"><span class="hs-identifier hs-var">toRemove</span></a></span></span><span> </span><span id="local-6989586621686859745"><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859745"><span class="hs-identifier hs-var">toAdd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
-&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Electing committee&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
 -&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose))
-&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
-&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1313"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1314"></span><span>    </span><span id="local-6989586621686859746"><span class="annot"><span class="annottext">committeeAction :: GovAction era
</span><a href="#local-6989586621686859746"><span class="hs-identifier hs-var hs-var">committeeAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1315"></span><span>      </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#UpdateCommittee"><span class="hs-identifier hs-var">UpdateCommittee</span></a></span><span>
</span><span id="line-1316"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686859742"><span class="hs-identifier hs-var">prevGovId</span></a></span><span>
</span><span id="line-1317"></span><span>        </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859744"><span class="hs-identifier hs-var">toRemove</span></a></span><span>
</span><span id="line-1318"></span><span>        </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686859745"><span class="hs-identifier hs-var">toAdd</span></a></span><span>
</span><span id="line-1319"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-1320"></span><span>  </span><span id="local-6989586621686859748"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859748"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686859746"><span class="hs-identifier hs-var">committeeAction</span></a></span><span>
</span><span id="line-1321"></span><span>  </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#DRepVoter"><span class="hs-identifier hs-var">DRepVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859743"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859748"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span><span>
</span><span id="line-1322"></span><span>  </span><span class="annot"><span class="annottext">GovPurposeId 'CommitteePurpose
-&gt; ImpM (LedgerSpec era) (GovPurposeId 'CommitteePurpose)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'CommitteePurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859748"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>
</span><span id="line-1324"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#electBasicCommittee"><span class="hs-identifier hs-type">electBasicCommittee</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1325"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854467"><span class="annot"><a href="#local-6989586621686854467"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-1327"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854467"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1328"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1329"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span>
</span><span id="line-1330"></span><span>    </span><span class="annot"><a href="#local-6989586621686854467"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1331"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span>
</span><span id="line-1333"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span>
</span><span id="line-1334"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span id="electBasicCommittee"><span class="annot"><span class="annottext">electBasicCommittee :: forall era.
(HasCallStack, ConwayEraImp era) =&gt;
ImpTestM
  era
  (Credential 'DRepRole, Credential 'HotCommitteeRole,
   GovPurposeId 'CommitteePurpose)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#electBasicCommittee"><span class="hs-identifier hs-var hs-var">electBasicCommittee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1336"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686859840"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859840"><span class="hs-identifier hs-var">drep</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Integer
-&gt; ImpTestM
     era (Credential 'DRepRole, Credential 'Staking, KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupSingleDRep"><span class="hs-identifier hs-var">setupSingleDRep</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-1337"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) ()
forall t. HasCallStack =&gt; String -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logString"><span class="hs-identifier hs-var">logString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpM (LedgerSpec era) ())
-&gt; String -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Registered DRep: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; String
forall a. ToExpr a =&gt; a -&gt; String
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#showExpr"><span class="hs-identifier hs-var">showExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859840"><span class="hs-identifier hs-var">drep</span></a></span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686859843"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686859843"><span class="hs-identifier hs-var">spoC</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Payment
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
forall era.
ConwayEraImp era =&gt;
Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#setupPoolWithStake"><span class="hs-identifier hs-var">setupPoolWithStake</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin
 -&gt; ImpTestM
      era (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking))
-&gt; Coin
-&gt; ImpTestM
     era (KeyHash 'StakePool, Credential 'Payment, Credential 'Staking)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000</span></span><span>
</span><span id="line-1340"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) ()
forall t. HasCallStack =&gt; String -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logString"><span class="hs-identifier hs-var">logString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpM (LedgerSpec era) ())
-&gt; String -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Registered SPO: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; String
forall a. ToExpr a =&gt; a -&gt; String
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#showExpr"><span class="hs-identifier hs-var">showExpr</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686859843"><span class="hs-identifier hs-var">spoC</span></a></span><span>
</span><span id="line-1341"></span><span>
</span><span id="line-1342"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpTestM
     era
     (Credential 'DRepRole, Credential 'HotCommitteeRole,
      GovPurposeId 'CommitteePurpose)
-&gt; ImpTestM
     era
     (Credential 'DRepRole, Credential 'HotCommitteeRole,
      GovPurposeId 'CommitteePurpose)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Registering committee member&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM
   era
   (Credential 'DRepRole, Credential 'HotCommitteeRole,
    GovPurposeId 'CommitteePurpose)
 -&gt; ImpTestM
      era
      (Credential 'DRepRole, Credential 'HotCommitteeRole,
       GovPurposeId 'CommitteePurpose))
-&gt; ImpTestM
     era
     (Credential 'DRepRole, Credential 'HotCommitteeRole,
      GovPurposeId 'CommitteePurpose)
-&gt; ImpTestM
     era
     (Credential 'DRepRole, Credential 'HotCommitteeRole,
      GovPurposeId 'CommitteePurpose)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1343"></span><span>    </span><span id="local-6989586621686859844"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859844"><span class="hs-identifier hs-var">coldCommitteeC</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'ColdCommitteeRole -&gt; Credential 'ColdCommitteeRole
forall (kr :: KeyRole). KeyHash kr -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#KeyHashObj"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'ColdCommitteeRole -&gt; Credential 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (KeyHash 'ColdCommitteeRole)
-&gt; ImpM (LedgerSpec era) (Credential 'ColdCommitteeRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'ColdCommitteeRole)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-1344"></span><span>    </span><span id="local-6989586621686859845"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859845"><span class="hs-identifier hs-var">startEpochNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1345"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-1346"></span><span>      </span><span id="local-6989586621686859847"><span class="annot"><span class="annottext">committeeAction :: GovAction era
</span><a href="#local-6989586621686859847"><span class="hs-identifier hs-var hs-var">committeeAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1347"></span><span>        </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#UpdateCommittee"><span class="hs-identifier hs-var">UpdateCommittee</span></a></span><span>
</span><span id="line-1348"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-1349"></span><span>          </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1350"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; EpochNo -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859844"><span class="hs-identifier hs-var">coldCommitteeC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo -&gt; EpochInterval -&gt; EpochNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#addEpochInterval"><span class="hs-identifier hs-var">addEpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686859845"><span class="hs-identifier hs-var">startEpochNo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; EpochInterval
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-var">EpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-1352"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621686859848"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859848"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">NE.:|</span></span><span> </span><span class="annot"><span class="annottext">[GovActionId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1353"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId)
-&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId)
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Submitting UpdateCommittee action&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (NonEmpty GovActionId)
 -&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId))
-&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId)
-&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1354"></span><span>        </span><span class="annot"><span class="annottext">NonEmpty (GovAction era)
-&gt; ImpM (LedgerSpec era) (NonEmpty GovActionId)
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
NonEmpty (GovAction era) -&gt; ImpTestM era (NonEmpty GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActions"><span class="hs-identifier hs-var">submitGovActions</span></a></span><span>
</span><span id="line-1355"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item (NonEmpty (GovAction era))
GovAction era
</span><a href="#local-6989586621686859847"><span class="hs-identifier hs-var">committeeAction</span></a></span><span>
</span><span id="line-1356"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#UpdateCommittee"><span class="hs-identifier hs-var">UpdateCommittee</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; UnitInterval
forall r. (IsRatio r, HasCallStack) =&gt; Integer -&gt; Integer -&gt; r
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Rational.html#%25%21"><span class="hs-operator hs-var">%!</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1358"></span><span>    </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpM (LedgerSpec era) ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#DRepVoter"><span class="hs-identifier hs-var">DRepVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859840"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859848"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span><span>
</span><span id="line-1359"></span><span>    </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpM (LedgerSpec era) ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#StakePoolVoter"><span class="hs-identifier hs-var">StakePoolVoter</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686859843"><span class="hs-identifier hs-var">spoC</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859848"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span><span>
</span><span id="line-1360"></span><span>    </span><span class="annot"><span class="annottext">Natural -&gt; ImpM (LedgerSpec era) ()
forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1361"></span><span>    </span><span id="local-6989586621686859850"><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859850"><span class="hs-identifier hs-var">committeeMembers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Set (Credential 'ColdCommitteeRole))
forall era.
ConwayEraImp era =&gt;
ImpTestM era (Set (Credential 'ColdCommitteeRole))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommitteeMembers"><span class="hs-identifier hs-var">getCommitteeMembers</span></a></span><span>
</span><span id="line-1362"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The committee should be enacted&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1363"></span><span>      </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686859850"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; (Set (Credential 'ColdCommitteeRole) -&gt; Bool)
-&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a) =&gt;
a -&gt; (a -&gt; Bool) -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldSatisfy"><span class="hs-operator hs-var">`shouldSatisfy`</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Set (Credential 'ColdCommitteeRole) -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859844"><span class="hs-identifier hs-var">coldCommitteeC</span></a></span><span>
</span><span id="line-1364"></span><span>    </span><span id="local-6989586621686859852"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859852"><span class="hs-identifier hs-var">hotCommitteeC</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; ImpTestM era (Credential 'HotCommitteeRole)
forall era.
(ShelleyEraImp era, ConwayEraTxCert era) =&gt;
Credential 'ColdCommitteeRole
-&gt; ImpTestM era (Credential 'HotCommitteeRole)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#registerCommitteeHotKey"><span class="hs-identifier hs-var">registerCommitteeHotKey</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686859844"><span class="hs-identifier hs-var">coldCommitteeC</span></a></span><span>
</span><span id="line-1365"></span><span>    </span><span class="annot"><span class="annottext">(Credential 'DRepRole, Credential 'HotCommitteeRole,
 GovPurposeId 'CommitteePurpose)
-&gt; ImpTestM
     era
     (Credential 'DRepRole, Credential 'HotCommitteeRole,
      GovPurposeId 'CommitteePurpose)
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686859840"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686859852"><span class="hs-identifier hs-var">hotCommitteeC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId 'CommitteePurpose
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859848"><span class="hs-identifier hs-var">gaidCommitteeProp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>
</span><span id="line-1367"></span><span id="local-6989586621686854476"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logCurPParams"><span class="hs-identifier hs-type">logCurPParams</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1368"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854476"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1369"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParamsHKD"><span class="hs-identifier hs-type">PParamsHKD</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="annot"><a href="#local-6989586621686854476"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-1371"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1372"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854476"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1373"></span><span id="logCurPParams"><span class="annot"><span class="annottext">logCurPParams :: forall era.
(EraGov era, ToExpr (PParamsHKD Identity era), HasCallStack) =&gt;
ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logCurPParams"><span class="hs-identifier hs-var hs-var">logCurPParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1374"></span><span>  </span><span id="local-6989586621686859865"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686859865"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (PParams era)
 -&gt; ImpTestM era (PParams era))
-&gt; SimpleGetter (NewEpochState era) (PParams era)
-&gt; ImpTestM era (PParams era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PParams era -&gt; Const r (PParams era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PParams era -&gt; Const r (PParams era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; Const r (PParams era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
Lens' (EpochState era) (PParams era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#curPParamsEpochStateL"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-1375"></span><span>  </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; Doc AnsiStyle -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logDoc"><span class="hs-identifier hs-var">logDoc</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; ImpTestM era ())
-&gt; Doc AnsiStyle -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1376"></span><span>    </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">vsep</span></a></span><span>
</span><span id="line-1377"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1378"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;----- Current PParams -----&quot;</span></span><span>
</span><span id="line-1379"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; Doc AnsiStyle
forall a. ToExpr a =&gt; a -&gt; Doc AnsiStyle
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#ansiExpr"><span class="hs-identifier hs-var">ansiExpr</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686859865"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-1380"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;---------------------------&quot;</span></span><span>
</span><span id="line-1381"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1382"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1383"></span><span>
</span><span id="line-1384"></span><span id="local-6989586621686854282"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#proposalsShowDebug"><span class="hs-identifier hs-type">proposalsShowDebug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854282"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-ansi-terminal-1.1.3-a24411d18619b5d689908d5d4f76fb9930e56a7348a141a734e42bdce42c3c2c/share/doc/html/src/Prettyprinter.Render.Terminal.Internal.html#AnsiStyle"><span class="hs-identifier hs-type">AnsiStyle</span></a></span></span><span>
</span><span id="line-1385"></span><span id="proposalsShowDebug"><span class="annot"><span class="annottext">proposalsShowDebug :: forall era. Proposals era -&gt; Bool -&gt; Doc AnsiStyle
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#proposalsShowDebug"><span class="hs-identifier hs-var hs-var">proposalsShowDebug</span></a></span></span><span> </span><span id="local-6989586621686859937"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621686859938"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621686859938"><span class="hs-identifier hs-var">showRoots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1386"></span><span>  </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Doc AnsiStyle
forall ann. Doc ann -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#align"><span class="hs-identifier hs-var">align</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Doc AnsiStyle)
-&gt; ([Doc AnsiStyle] -&gt; Doc AnsiStyle)
-&gt; [Doc AnsiStyle]
-&gt; Doc AnsiStyle
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">vsep</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc AnsiStyle] -&gt; Doc AnsiStyle)
-&gt; [Doc AnsiStyle] -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1387"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1388"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;----- Proposals -----&quot;</span></span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;Size&quot;</span></span><span>
</span><span id="line-1390"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Doc AnsiStyle) -&gt; Int -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; Int
forall era. Proposals era -&gt; Int
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsSize"><span class="hs-identifier hs-var">proposalsSize</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1391"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;OMap&quot;</span></span><span>
</span><span id="line-1392"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictSeq GovActionId -&gt; Doc AnsiStyle)
-&gt; StrictSeq GovActionId -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; StrictSeq GovActionId
forall era. Proposals era -&gt; StrictSeq GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsIds"><span class="hs-identifier hs-var">proposalsIds</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1393"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1394"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;Roots&quot;</span></span><span>
</span><span id="line-1395"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt; PParamUpdate&quot;</span></span><span>
</span><span id="line-1396"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'PParamUpdatePurpose) -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'PParamUpdatePurpose) -&gt; Doc AnsiStyle)
-&gt; PRoot (GovPurposeId 'PParamUpdatePurpose) -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (PRoot (GovPurposeId 'PParamUpdatePurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'PParamUpdatePurpose))
-&gt; PRoot (GovPurposeId 'PParamUpdatePurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (PRoot (GovPurposeId 'PParamUpdatePurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (PRoot (GovPurposeId 'PParamUpdatePurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (PRoot (GovPurposeId 'PParamUpdatePurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (PRoot (GovPurposeId 'PParamUpdatePurpose)) (Proposals era))
-&gt; ((PRoot (GovPurposeId 'PParamUpdatePurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'PParamUpdatePurpose))
          (PRoot (GovPurposeId 'PParamUpdatePurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (PRoot (GovPurposeId 'PParamUpdatePurpose)) (GovRelation PRoot))
-&gt; Getting
     (PRoot (GovPurposeId 'PParamUpdatePurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'PParamUpdatePurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'PParamUpdatePurpose)
 -&gt; Const
      (PRoot (GovPurposeId 'PParamUpdatePurpose))
      (PRoot (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (PRoot (GovPurposeId 'PParamUpdatePurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span>
</span><span id="line-1397"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt; HardFork&quot;</span></span><span>
</span><span id="line-1398"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'HardForkPurpose) -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'HardForkPurpose) -&gt; Doc AnsiStyle)
-&gt; PRoot (GovPurposeId 'HardForkPurpose) -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (PRoot (GovPurposeId 'HardForkPurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'HardForkPurpose))
-&gt; PRoot (GovPurposeId 'HardForkPurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (PRoot (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const (PRoot (GovPurposeId 'HardForkPurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (PRoot (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const (PRoot (GovPurposeId 'HardForkPurpose)) (Proposals era))
-&gt; ((PRoot (GovPurposeId 'HardForkPurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'HardForkPurpose))
          (PRoot (GovPurposeId 'HardForkPurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (PRoot (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot))
-&gt; Getting
     (PRoot (GovPurposeId 'HardForkPurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'HardForkPurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'HardForkPurpose)
 -&gt; Const
      (PRoot (GovPurposeId 'HardForkPurpose))
      (PRoot (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (PRoot (GovPurposeId 'HardForkPurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'HardForkPurpose)
 -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grHardForkL"><span class="hs-identifier hs-var">grHardForkL</span></a></span><span>
</span><span id="line-1399"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt; Committee&quot;</span></span><span>
</span><span id="line-1400"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'CommitteePurpose) -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'CommitteePurpose) -&gt; Doc AnsiStyle)
-&gt; PRoot (GovPurposeId 'CommitteePurpose) -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (PRoot (GovPurposeId 'CommitteePurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'CommitteePurpose))
-&gt; PRoot (GovPurposeId 'CommitteePurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era))
-&gt; ((PRoot (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'CommitteePurpose))
          (PRoot (GovPurposeId 'CommitteePurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; Getting
     (PRoot (GovPurposeId 'CommitteePurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'CommitteePurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'CommitteePurpose)
 -&gt; Const
      (PRoot (GovPurposeId 'CommitteePurpose))
      (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span>
</span><span id="line-1401"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt; Constitution&quot;</span></span><span>
</span><span id="line-1402"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'ConstitutionPurpose) -&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'ConstitutionPurpose) -&gt; Doc AnsiStyle)
-&gt; PRoot (GovPurposeId 'ConstitutionPurpose) -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (PRoot (GovPurposeId 'ConstitutionPurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'ConstitutionPurpose))
-&gt; PRoot (GovPurposeId 'ConstitutionPurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (PRoot (GovPurposeId 'ConstitutionPurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const
     (PRoot (GovPurposeId 'ConstitutionPurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (PRoot (GovPurposeId 'ConstitutionPurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const
      (PRoot (GovPurposeId 'ConstitutionPurpose)) (Proposals era))
-&gt; ((PRoot (GovPurposeId 'ConstitutionPurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'ConstitutionPurpose))
          (PRoot (GovPurposeId 'ConstitutionPurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (PRoot (GovPurposeId 'ConstitutionPurpose)) (GovRelation PRoot))
-&gt; Getting
     (PRoot (GovPurposeId 'ConstitutionPurpose))
     (Proposals era)
     (PRoot (GovPurposeId 'ConstitutionPurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'ConstitutionPurpose)
 -&gt; Const
      (PRoot (GovPurposeId 'ConstitutionPurpose))
      (PRoot (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (PRoot (GovPurposeId 'ConstitutionPurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span>
</span><span id="line-1403"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1404"></span><span>      </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; [Doc AnsiStyle] -&gt; [Doc AnsiStyle]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621686859938"><span class="hs-identifier hs-var">showRoots</span></a></span><span>
</span><span id="line-1405"></span><span>             </span><span class="hs-keyword">then</span><span>
</span><span id="line-1406"></span><span>               </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;Hierarchy&quot;</span></span><span>
</span><span id="line-1407"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;&gt; PParamUpdate&quot;</span></span><span>
</span><span id="line-1408"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'PParamUpdatePurpose)
  (PEdges (GovPurposeId 'PParamUpdatePurpose))
-&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'PParamUpdatePurpose)
   (PEdges (GovPurposeId 'PParamUpdatePurpose))
 -&gt; Doc AnsiStyle)
-&gt; Map
     (GovPurposeId 'PParamUpdatePurpose)
     (PEdges (GovPurposeId 'PParamUpdatePurpose))
-&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
-&gt; Map
     (GovPurposeId 'PParamUpdatePurpose)
     (PEdges (GovPurposeId 'PParamUpdatePurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'PParamUpdatePurpose)
          (PEdges (GovPurposeId 'PParamUpdatePurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'PParamUpdatePurpose)
       (PEdges (GovPurposeId 'PParamUpdatePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose)))
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'PParamUpdatePurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (PGraph (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'PParamUpdatePurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'PParamUpdatePurpose)
          (PEdges (GovPurposeId 'PParamUpdatePurpose)))
       (PGraph (GovPurposeId 'PParamUpdatePurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'PParamUpdatePurpose)
       (PEdges (GovPurposeId 'PParamUpdatePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose)))
          (Map
             (GovPurposeId 'PParamUpdatePurpose)
             (PEdges (GovPurposeId 'PParamUpdatePurpose))))
    -&gt; PGraph (GovPurposeId 'PParamUpdatePurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (PGraph (GovPurposeId 'PParamUpdatePurpose)))
-&gt; (Map
      (GovPurposeId 'PParamUpdatePurpose)
      (PEdges (GovPurposeId 'PParamUpdatePurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose)))
         (Map
            (GovPurposeId 'PParamUpdatePurpose)
            (PEdges (GovPurposeId 'PParamUpdatePurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'PParamUpdatePurpose)
   (PEdges (GovPurposeId 'PParamUpdatePurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose)))
      (Map
         (GovPurposeId 'PParamUpdatePurpose)
         (PEdges (GovPurposeId 'PParamUpdatePurpose))))
-&gt; PGraph (GovPurposeId 'PParamUpdatePurpose)
-&gt; Const
     (Map
        (GovPurposeId 'PParamUpdatePurpose)
        (PEdges (GovPurposeId 'PParamUpdatePurpose)))
     (PGraph (GovPurposeId 'PParamUpdatePurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-1409"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;&gt; HardFork&quot;</span></span><span>
</span><span id="line-1410"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'HardForkPurpose)
  (PEdges (GovPurposeId 'HardForkPurpose))
-&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'HardForkPurpose)
   (PEdges (GovPurposeId 'HardForkPurpose))
 -&gt; Doc AnsiStyle)
-&gt; Map
     (GovPurposeId 'HardForkPurpose)
     (PEdges (GovPurposeId 'HardForkPurpose))
-&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
-&gt; Map
     (GovPurposeId 'HardForkPurpose)
     (PEdges (GovPurposeId 'HardForkPurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'HardForkPurpose)
          (PEdges (GovPurposeId 'HardForkPurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'HardForkPurpose)
       (PEdges (GovPurposeId 'HardForkPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'HardForkPurpose)
             (PEdges (GovPurposeId 'HardForkPurpose)))
          (Map
             (GovPurposeId 'HardForkPurpose)
             (PEdges (GovPurposeId 'HardForkPurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'HardForkPurpose)
            (PEdges (GovPurposeId 'HardForkPurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'HardForkPurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose)))
      (PGraph (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'HardForkPurpose)
 -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grHardForkL"><span class="hs-identifier hs-var">grHardForkL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'HardForkPurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'HardForkPurpose)
          (PEdges (GovPurposeId 'HardForkPurpose)))
       (PGraph (GovPurposeId 'HardForkPurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'HardForkPurpose)
       (PEdges (GovPurposeId 'HardForkPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'HardForkPurpose)
             (PEdges (GovPurposeId 'HardForkPurpose)))
          (Map
             (GovPurposeId 'HardForkPurpose)
             (PEdges (GovPurposeId 'HardForkPurpose))))
    -&gt; PGraph (GovPurposeId 'HardForkPurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'HardForkPurpose)
            (PEdges (GovPurposeId 'HardForkPurpose)))
         (PGraph (GovPurposeId 'HardForkPurpose)))
-&gt; (Map
      (GovPurposeId 'HardForkPurpose)
      (PEdges (GovPurposeId 'HardForkPurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'HardForkPurpose)
            (PEdges (GovPurposeId 'HardForkPurpose)))
         (Map
            (GovPurposeId 'HardForkPurpose)
            (PEdges (GovPurposeId 'HardForkPurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'HardForkPurpose)
   (PEdges (GovPurposeId 'HardForkPurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose)))
      (Map
         (GovPurposeId 'HardForkPurpose)
         (PEdges (GovPurposeId 'HardForkPurpose))))
-&gt; PGraph (GovPurposeId 'HardForkPurpose)
-&gt; Const
     (Map
        (GovPurposeId 'HardForkPurpose)
        (PEdges (GovPurposeId 'HardForkPurpose)))
     (PGraph (GovPurposeId 'HardForkPurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-1411"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;&gt; Committee&quot;</span></span><span>
</span><span id="line-1412"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'CommitteePurpose)
  (PEdges (GovPurposeId 'CommitteePurpose))
-&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'CommitteePurpose)
   (PEdges (GovPurposeId 'CommitteePurpose))
 -&gt; Doc AnsiStyle)
-&gt; Map
     (GovPurposeId 'CommitteePurpose)
     (PEdges (GovPurposeId 'CommitteePurpose))
-&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
-&gt; Map
     (GovPurposeId 'CommitteePurpose)
     (PEdges (GovPurposeId 'CommitteePurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'CommitteePurpose)
          (PEdges (GovPurposeId 'CommitteePurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'CommitteePurpose)
       (PEdges (GovPurposeId 'CommitteePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'CommitteePurpose)
             (PEdges (GovPurposeId 'CommitteePurpose)))
          (Map
             (GovPurposeId 'CommitteePurpose)
             (PEdges (GovPurposeId 'CommitteePurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'CommitteePurpose)
            (PEdges (GovPurposeId 'CommitteePurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'CommitteePurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose)))
      (PGraph (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'CommitteePurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'CommitteePurpose)
          (PEdges (GovPurposeId 'CommitteePurpose)))
       (PGraph (GovPurposeId 'CommitteePurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'CommitteePurpose)
       (PEdges (GovPurposeId 'CommitteePurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'CommitteePurpose)
             (PEdges (GovPurposeId 'CommitteePurpose)))
          (Map
             (GovPurposeId 'CommitteePurpose)
             (PEdges (GovPurposeId 'CommitteePurpose))))
    -&gt; PGraph (GovPurposeId 'CommitteePurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'CommitteePurpose)
            (PEdges (GovPurposeId 'CommitteePurpose)))
         (PGraph (GovPurposeId 'CommitteePurpose)))
-&gt; (Map
      (GovPurposeId 'CommitteePurpose)
      (PEdges (GovPurposeId 'CommitteePurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'CommitteePurpose)
            (PEdges (GovPurposeId 'CommitteePurpose)))
         (Map
            (GovPurposeId 'CommitteePurpose)
            (PEdges (GovPurposeId 'CommitteePurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'CommitteePurpose)
   (PEdges (GovPurposeId 'CommitteePurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose)))
      (Map
         (GovPurposeId 'CommitteePurpose)
         (PEdges (GovPurposeId 'CommitteePurpose))))
-&gt; PGraph (GovPurposeId 'CommitteePurpose)
-&gt; Const
     (Map
        (GovPurposeId 'CommitteePurpose)
        (PEdges (GovPurposeId 'CommitteePurpose)))
     (PGraph (GovPurposeId 'CommitteePurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-1413"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;&gt;&gt; Constitution&quot;</span></span><span>
</span><span id="line-1414"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map
  (GovPurposeId 'ConstitutionPurpose)
  (PEdges (GovPurposeId 'ConstitutionPurpose))
-&gt; Doc AnsiStyle
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#viaShow"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'ConstitutionPurpose)
   (PEdges (GovPurposeId 'ConstitutionPurpose))
 -&gt; Doc AnsiStyle)
-&gt; Map
     (GovPurposeId 'ConstitutionPurpose)
     (PEdges (GovPurposeId 'ConstitutionPurpose))
-&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859937"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
-&gt; Map
     (GovPurposeId 'ConstitutionPurpose)
     (PEdges (GovPurposeId 'ConstitutionPurpose))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map
          (GovPurposeId 'ConstitutionPurpose)
          (PEdges (GovPurposeId 'ConstitutionPurpose)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (Proposals era))
-&gt; ((Map
       (GovPurposeId 'ConstitutionPurpose)
       (PEdges (GovPurposeId 'ConstitutionPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose)))
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (GovRelation PGraph))
-&gt; Getting
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (Proposals era)
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId 'ConstitutionPurpose)
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (PGraph (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (GovRelation PGraph)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId 'ConstitutionPurpose)
  -&gt; Const
       (Map
          (GovPurposeId 'ConstitutionPurpose)
          (PEdges (GovPurposeId 'ConstitutionPurpose)))
       (PGraph (GovPurposeId 'ConstitutionPurpose)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (GovRelation PGraph))
-&gt; ((Map
       (GovPurposeId 'ConstitutionPurpose)
       (PEdges (GovPurposeId 'ConstitutionPurpose))
     -&gt; Const
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose)))
          (Map
             (GovPurposeId 'ConstitutionPurpose)
             (PEdges (GovPurposeId 'ConstitutionPurpose))))
    -&gt; PGraph (GovPurposeId 'ConstitutionPurpose)
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (PGraph (GovPurposeId 'ConstitutionPurpose)))
-&gt; (Map
      (GovPurposeId 'ConstitutionPurpose)
      (PEdges (GovPurposeId 'ConstitutionPurpose))
    -&gt; Const
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose)))
         (Map
            (GovPurposeId 'ConstitutionPurpose)
            (PEdges (GovPurposeId 'ConstitutionPurpose))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (GovPurposeId 'ConstitutionPurpose)
   (PEdges (GovPurposeId 'ConstitutionPurpose))
 -&gt; Const
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose)))
      (Map
         (GovPurposeId 'ConstitutionPurpose)
         (PEdges (GovPurposeId 'ConstitutionPurpose))))
-&gt; PGraph (GovPurposeId 'ConstitutionPurpose)
-&gt; Const
     (Map
        (GovPurposeId 'ConstitutionPurpose)
        (PEdges (GovPurposeId 'ConstitutionPurpose)))
     (PGraph (GovPurposeId 'ConstitutionPurpose))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-1415"></span><span>               </span><span class="hs-special">]</span><span>
</span><span id="line-1416"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1417"></span><span>         </span><span class="hs-special">)</span><span>
</span><span id="line-1418"></span><span>      </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; [Doc AnsiStyle] -&gt; [Doc AnsiStyle]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [Doc AnsiStyle]
Doc AnsiStyle
</span><span class="hs-string">&quot;----- Proposals End -----&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1419"></span><span>
</span><span id="line-1420"></span><span id="local-6989586621686854489"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposalsForest"><span class="hs-identifier hs-type">getProposalsForest</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1421"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854489"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1422"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854489"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Forest</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1423"></span><span id="getProposalsForest"><span class="annot"><span class="annottext">getProposalsForest :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (Forest (StrictMaybe GovActionId))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposalsForest"><span class="hs-identifier hs-var hs-var">getProposalsForest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1424"></span><span>  </span><span id="local-6989586621686859946"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-1425"></span><span>  </span><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
-&gt; ImpTestM era (Forest (StrictMaybe GovActionId))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-1426"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (GovRelation PRoot) (PRoot (GovPurposeId 'PParamUpdatePurpose))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
forall (p :: GovActionPurpose) era.
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
</span><a href="#local-6989586621686859948"><span class="hs-identifier hs-var">mkRoot</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f (PRoot (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation PRoot -&gt; f (GovRelation PRoot)
Lens'
  (GovRelation PRoot) (PRoot (GovPurposeId 'PParamUpdatePurpose))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Forest (StrictMaybe GovActionId)
 -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
 Functor f2 =&gt;
 (f1 (GovPurposeId 'PParamUpdatePurpose)
  -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
 -&gt; GovRelation f1 -&gt; f2 (GovRelation f1))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
forall (p :: GovActionPurpose) era.
(forall (f :: * -&gt; *) (f :: * -&gt; *).
 Functor f =&gt;
 (f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
 -&gt; GovRelation f -&gt; f (GovRelation f))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686859951"><span class="hs-identifier hs-var">mkForest</span></a></span><span> </span><span class="annot"><span class="annottext">(f (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f (f (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f -&gt; f (GovRelation f)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'PParamUpdatePurpose)
 -&gt; f2 (f1 (GovPurposeId 'PParamUpdatePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grPParamUpdateL"><span class="hs-identifier hs-var">grPParamUpdateL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1427"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' (GovRelation PRoot) (PRoot (GovPurposeId 'HardForkPurpose))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
forall (p :: GovActionPurpose) era.
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
</span><a href="#local-6989586621686859948"><span class="hs-identifier hs-var">mkRoot</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'HardForkPurpose)
 -&gt; f (PRoot (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation PRoot -&gt; f (GovRelation PRoot)
Lens' (GovRelation PRoot) (PRoot (GovPurposeId 'HardForkPurpose))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'HardForkPurpose)
 -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grHardForkL"><span class="hs-identifier hs-var">grHardForkL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Forest (StrictMaybe GovActionId)
 -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
 Functor f2 =&gt;
 (f1 (GovPurposeId 'HardForkPurpose)
  -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
 -&gt; GovRelation f1 -&gt; f2 (GovRelation f1))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
forall (p :: GovActionPurpose) era.
(forall (f :: * -&gt; *) (f :: * -&gt; *).
 Functor f =&gt;
 (f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
 -&gt; GovRelation f -&gt; f (GovRelation f))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686859951"><span class="hs-identifier hs-var">mkForest</span></a></span><span> </span><span class="annot"><span class="annottext">(f (GovPurposeId 'HardForkPurpose)
 -&gt; f (f (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f -&gt; f (GovRelation f)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'HardForkPurpose)
 -&gt; f2 (f1 (GovPurposeId 'HardForkPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grHardForkL"><span class="hs-identifier hs-var">grHardForkL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1428"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' (GovRelation PRoot) (PRoot (GovPurposeId 'CommitteePurpose))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
forall (p :: GovActionPurpose) era.
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
</span><a href="#local-6989586621686859948"><span class="hs-identifier hs-var">mkRoot</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'CommitteePurpose)
 -&gt; f (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PRoot -&gt; f (GovRelation PRoot)
Lens' (GovRelation PRoot) (PRoot (GovPurposeId 'CommitteePurpose))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Forest (StrictMaybe GovActionId)
 -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
 Functor f2 =&gt;
 (f1 (GovPurposeId 'CommitteePurpose)
  -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
 -&gt; GovRelation f1 -&gt; f2 (GovRelation f1))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
forall (p :: GovActionPurpose) era.
(forall (f :: * -&gt; *) (f :: * -&gt; *).
 Functor f =&gt;
 (f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
 -&gt; GovRelation f -&gt; f (GovRelation f))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686859951"><span class="hs-identifier hs-var">mkForest</span></a></span><span> </span><span class="annot"><span class="annottext">(f (GovPurposeId 'CommitteePurpose)
 -&gt; f (f (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f -&gt; f (GovRelation f)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1429"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens'
  (GovRelation PRoot) (PRoot (GovPurposeId 'ConstitutionPurpose))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
forall (p :: GovActionPurpose) era.
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
</span><a href="#local-6989586621686859948"><span class="hs-identifier hs-var">mkRoot</span></a></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'ConstitutionPurpose)
 -&gt; f (PRoot (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation PRoot -&gt; f (GovRelation PRoot)
Lens'
  (GovRelation PRoot) (PRoot (GovPurposeId 'ConstitutionPurpose))
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Forest (StrictMaybe GovActionId)
 -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
 Functor f2 =&gt;
 (f1 (GovPurposeId 'ConstitutionPurpose)
  -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
 -&gt; GovRelation f1 -&gt; f2 (GovRelation f1))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
forall (p :: GovActionPurpose) era.
(forall (f :: * -&gt; *) (f :: * -&gt; *).
 Functor f =&gt;
 (f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
 -&gt; GovRelation f -&gt; f (GovRelation f))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686859951"><span class="hs-identifier hs-var">mkForest</span></a></span><span> </span><span class="annot"><span class="annottext">(f (GovPurposeId 'ConstitutionPurpose)
 -&gt; f (f (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f -&gt; f (GovRelation f)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'ConstitutionPurpose)
 -&gt; f2 (f1 (GovPurposeId 'ConstitutionPurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grConstitutionL"><span class="hs-identifier hs-var">grConstitutionL</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859946"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1430"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1431"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1432"></span><span>    </span><span id="local-6989586621686854494"><span id="local-6989586621686854495"><span class="annot"><a href="#local-6989586621686859948"><span class="hs-identifier hs-type">mkRoot</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1433"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovRelation"><span class="hs-identifier hs-type">GovRelation</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#PRoot"><span class="hs-identifier hs-type">PRoot</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#PRoot"><span class="hs-identifier hs-type">PRoot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854494"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1434"></span><span>      </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854495"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1435"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span></span><span>
</span><span id="line-1436"></span><span>    </span><span id="local-6989586621686859948"><span class="annot"><span class="annottext">mkRoot :: forall (p :: GovActionPurpose) era.
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
-&gt; Proposals era -&gt; StrictMaybe GovActionId
</span><a href="#local-6989586621686859948"><span class="hs-identifier hs-var hs-var">mkRoot</span></a></span></span><span> </span><span id="local-6989586621686859970"><span class="annot"><span class="annottext">Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
</span><a href="#local-6989586621686859970"><span class="hs-identifier hs-var">rootL</span></a></span></span><span> </span><span id="local-6989586621686859971"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859971"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GovPurposeId p -&gt; GovActionId)
-&gt; StrictMaybe (GovPurposeId p) -&gt; StrictMaybe GovActionId
forall a b. (a -&gt; b) -&gt; StrictMaybe a -&gt; StrictMaybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">GovPurposeId p -&gt; GovActionId
forall (p :: GovActionPurpose). GovPurposeId p -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#unGovPurposeId"><span class="hs-identifier hs-var">unGovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId p) -&gt; StrictMaybe GovActionId)
-&gt; StrictMaybe (GovPurposeId p) -&gt; StrictMaybe GovActionId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859971"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (StrictMaybe (GovPurposeId p))
     (Proposals era)
     (StrictMaybe (GovPurposeId p))
-&gt; StrictMaybe (GovPurposeId p)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const (StrictMaybe (GovPurposeId p)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const (StrictMaybe (GovPurposeId p)) (Proposals era))
-&gt; ((StrictMaybe (GovPurposeId p)
     -&gt; Const
          (StrictMaybe (GovPurposeId p)) (StrictMaybe (GovPurposeId p)))
    -&gt; GovRelation PRoot
    -&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot))
-&gt; Getting
     (StrictMaybe (GovPurposeId p))
     (Proposals era)
     (StrictMaybe (GovPurposeId p))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId p)
 -&gt; Const (StrictMaybe (GovPurposeId p)) (PRoot (GovPurposeId p)))
-&gt; GovRelation PRoot
-&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot)
Lens' (GovRelation PRoot) (PRoot (GovPurposeId p))
</span><a href="#local-6989586621686859970"><span class="hs-identifier hs-var">rootL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId p)
  -&gt; Const (StrictMaybe (GovPurposeId p)) (PRoot (GovPurposeId p)))
 -&gt; GovRelation PRoot
 -&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot))
-&gt; ((StrictMaybe (GovPurposeId p)
     -&gt; Const
          (StrictMaybe (GovPurposeId p)) (StrictMaybe (GovPurposeId p)))
    -&gt; PRoot (GovPurposeId p)
    -&gt; Const (StrictMaybe (GovPurposeId p)) (PRoot (GovPurposeId p)))
-&gt; (StrictMaybe (GovPurposeId p)
    -&gt; Const
         (StrictMaybe (GovPurposeId p)) (StrictMaybe (GovPurposeId p)))
-&gt; GovRelation PRoot
-&gt; Const (StrictMaybe (GovPurposeId p)) (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (GovPurposeId p)
 -&gt; Const
      (StrictMaybe (GovPurposeId p)) (StrictMaybe (GovPurposeId p)))
-&gt; PRoot (GovPurposeId p)
-&gt; Const (StrictMaybe (GovPurposeId p)) (PRoot (GovPurposeId p))
forall a (f :: * -&gt; *).
Functor f =&gt;
(StrictMaybe a -&gt; f (StrictMaybe a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRootL"><span class="hs-identifier hs-var">prRootL</span></a></span><span>
</span><span id="line-1437"></span><span>    </span><span id="local-6989586621686854499"><span id="local-6989586621686854500"><span class="annot"><a href="#local-6989586621686859951"><span class="hs-identifier hs-type">mkForest</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1438"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854498"><span class="annot"><a href="#local-6989586621686854498"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovRelation"><span class="hs-identifier hs-type">GovRelation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854498"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621686854498"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854499"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1439"></span><span>      </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#Proposals"><span class="hs-identifier hs-type">Proposals</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854500"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1440"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Forest</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1441"></span><span>    </span><span id="local-6989586621686859951"><span class="annot"><span class="annottext">mkForest :: forall (p :: GovActionPurpose) era.
(forall (f :: * -&gt; *) (f :: * -&gt; *).
 Functor f =&gt;
 (f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
 -&gt; GovRelation f -&gt; f (GovRelation f))
-&gt; Proposals era -&gt; Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686859951"><span class="hs-identifier hs-var hs-var">mkForest</span></a></span></span><span> </span><span id="local-6989586621686859986"><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (f :: * -&gt; *).
Functor f =&gt;
(f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
-&gt; GovRelation f -&gt; f (GovRelation f)
</span><a href="#local-6989586621686859986"><span class="hs-identifier hs-var">forestL</span></a></span></span><span> </span><span id="local-6989586621686859987"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859987"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1442"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686859988"><span class="annot"><span class="annottext">h :: Map (GovPurposeId p) (PEdges (GovPurposeId p))
</span><a href="#local-6989586621686859988"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859987"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
     (Proposals era)
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
-&gt; Map (GovPurposeId p) (PEdges (GovPurposeId p))
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PGraph
 -&gt; Const
      (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
      (GovRelation PGraph))
-&gt; Proposals era
-&gt; Const
     (Map (GovPurposeId p) (PEdges (GovPurposeId p))) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PGraph -&gt; f (GovRelation PGraph))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphL"><span class="hs-identifier hs-var">pGraphL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PGraph
  -&gt; Const
       (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
       (GovRelation PGraph))
 -&gt; Proposals era
 -&gt; Const
      (Map (GovPurposeId p) (PEdges (GovPurposeId p))) (Proposals era))
-&gt; ((Map (GovPurposeId p) (PEdges (GovPurposeId p))
     -&gt; Const
          (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
          (Map (GovPurposeId p) (PEdges (GovPurposeId p))))
    -&gt; GovRelation PGraph
    -&gt; Const
         (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
         (GovRelation PGraph))
-&gt; Getting
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
     (Proposals era)
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PGraph (GovPurposeId p)
 -&gt; Const
      (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
      (PGraph (GovPurposeId p)))
-&gt; GovRelation PGraph
-&gt; Const
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
     (GovRelation PGraph)
forall (f :: * -&gt; *) (f :: * -&gt; *).
Functor f =&gt;
(f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
-&gt; GovRelation f -&gt; f (GovRelation f)
</span><a href="#local-6989586621686859986"><span class="hs-identifier hs-var">forestL</span></a></span><span> </span><span class="annot"><span class="annottext">((PGraph (GovPurposeId p)
  -&gt; Const
       (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
       (PGraph (GovPurposeId p)))
 -&gt; GovRelation PGraph
 -&gt; Const
      (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
      (GovRelation PGraph))
-&gt; ((Map (GovPurposeId p) (PEdges (GovPurposeId p))
     -&gt; Const
          (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
          (Map (GovPurposeId p) (PEdges (GovPurposeId p))))
    -&gt; PGraph (GovPurposeId p)
    -&gt; Const
         (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
         (PGraph (GovPurposeId p)))
-&gt; (Map (GovPurposeId p) (PEdges (GovPurposeId p))
    -&gt; Const
         (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
         (Map (GovPurposeId p) (PEdges (GovPurposeId p))))
-&gt; GovRelation PGraph
-&gt; Const
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
     (GovRelation PGraph)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (GovPurposeId p) (PEdges (GovPurposeId p))
 -&gt; Const
      (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
      (Map (GovPurposeId p) (PEdges (GovPurposeId p))))
-&gt; PGraph (GovPurposeId p)
-&gt; Const
     (Map (GovPurposeId p) (PEdges (GovPurposeId p)))
     (PGraph (GovPurposeId p))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Map a (PEdges a) -&gt; f (Map a (PEdges a)))
-&gt; PGraph a -&gt; f (PGraph a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pGraphNodesL"><span class="hs-identifier hs-var">pGraphNodesL</span></a></span><span>
</span><span id="line-1443"></span><span>          </span><span id="local-6989586621686859989"><span class="annot"><span class="annottext">s :: [GovActionId]
</span><a href="#local-6989586621686859989"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; [GovActionId]
forall a. StrictSeq a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq GovActionId -&gt; [GovActionId])
-&gt; StrictSeq GovActionId -&gt; [GovActionId]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; StrictSeq GovActionId
forall era. Proposals era -&gt; StrictSeq GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsIds"><span class="hs-identifier hs-var">proposalsIds</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859987"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1444"></span><span>          </span><span id="local-6989586621686859990"><span class="annot"><span class="annottext">getOrderedChildren :: Set (GovPurposeId p) -&gt; [GovActionId]
</span><a href="#local-6989586621686859990"><span class="hs-identifier hs-var hs-var">getOrderedChildren</span></a></span></span><span> </span><span id="local-6989586621686859991"><span class="annot"><span class="annottext">Set (GovPurposeId p)
</span><a href="#local-6989586621686859991"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GovActionId -&gt; Bool) -&gt; [GovActionId] -&gt; [GovActionId]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; Set GovActionId -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.member`</span></span><span> </span><span class="annot"><span class="annottext">(GovPurposeId p -&gt; GovActionId)
-&gt; Set (GovPurposeId p) -&gt; Set GovActionId
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="annot"><span class="annottext">GovPurposeId p -&gt; GovActionId
forall (p :: GovActionPurpose). GovPurposeId p -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#unGovPurposeId"><span class="hs-identifier hs-var">unGovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">Set (GovPurposeId p)
</span><a href="#local-6989586621686859991"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GovActionId]
</span><a href="#local-6989586621686859989"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1445"></span><span>          </span><span id="local-6989586621686859993"><span class="annot"><span class="annottext">go :: GovActionId -&gt; (StrictMaybe GovActionId, [GovActionId])
</span><a href="#local-6989586621686859993"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621686859994"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859994"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; StrictMaybe GovActionId
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859994"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (GovPurposeId p) -&gt; [GovActionId]
</span><a href="#local-6989586621686859990"><span class="hs-identifier hs-var">getOrderedChildren</span></a></span><span> </span><span class="annot"><span class="annottext">(Set (GovPurposeId p) -&gt; [GovActionId])
-&gt; Set (GovPurposeId p) -&gt; [GovActionId]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map (GovPurposeId p) (PEdges (GovPurposeId p))
</span><a href="#local-6989586621686859988"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Map (GovPurposeId p) (PEdges (GovPurposeId p))
-&gt; GovPurposeId p -&gt; PEdges (GovPurposeId p)
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; GovPurposeId p
forall (p :: GovActionPurpose). GovActionId -&gt; GovPurposeId p
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-var">GovPurposeId</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686859994"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">PEdges (GovPurposeId p)
-&gt; Getting
     (Set (GovPurposeId p))
     (PEdges (GovPurposeId p))
     (Set (GovPurposeId p))
-&gt; Set (GovPurposeId p)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Set (GovPurposeId p))
  (PEdges (GovPurposeId p))
  (Set (GovPurposeId p))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Set a -&gt; f (Set a)) -&gt; PEdges a -&gt; f (PEdges a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#peChildrenL"><span class="hs-identifier hs-var">peChildrenL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(GovActionId -&gt; (StrictMaybe GovActionId, [GovActionId]))
-&gt; [GovActionId] -&gt; Forest (StrictMaybe GovActionId)
forall b a. (b -&gt; (a, [b])) -&gt; [b] -&gt; [Tree a]
</span><span class="hs-identifier hs-var">unfoldForest</span></span><span> </span><span class="annot"><span class="annottext">GovActionId -&gt; (StrictMaybe GovActionId, [GovActionId])
</span><a href="#local-6989586621686859993"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (GovPurposeId p) -&gt; [GovActionId]
</span><a href="#local-6989586621686859990"><span class="hs-identifier hs-var">getOrderedChildren</span></a></span><span> </span><span class="annot"><span class="annottext">(Set (GovPurposeId p) -&gt; [GovActionId])
-&gt; Set (GovPurposeId p) -&gt; [GovActionId]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686859987"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
-&gt; Getting
     (Set (GovPurposeId p)) (Proposals era) (Set (GovPurposeId p))
-&gt; Set (GovPurposeId p)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot))
-&gt; Proposals era -&gt; Const (Set (GovPurposeId p)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot))
 -&gt; Proposals era -&gt; Const (Set (GovPurposeId p)) (Proposals era))
-&gt; ((Set (GovPurposeId p)
     -&gt; Const (Set (GovPurposeId p)) (Set (GovPurposeId p)))
    -&gt; GovRelation PRoot
    -&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot))
-&gt; Getting
     (Set (GovPurposeId p)) (Proposals era) (Set (GovPurposeId p))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId p)
 -&gt; Const (Set (GovPurposeId p)) (PRoot (GovPurposeId p)))
-&gt; GovRelation PRoot
-&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot)
forall (f :: * -&gt; *) (f :: * -&gt; *).
Functor f =&gt;
(f (GovPurposeId p) -&gt; f (f (GovPurposeId p)))
-&gt; GovRelation f -&gt; f (GovRelation f)
</span><a href="#local-6989586621686859986"><span class="hs-identifier hs-var">forestL</span></a></span><span> </span><span class="annot"><span class="annottext">((PRoot (GovPurposeId p)
  -&gt; Const (Set (GovPurposeId p)) (PRoot (GovPurposeId p)))
 -&gt; GovRelation PRoot
 -&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot))
-&gt; ((Set (GovPurposeId p)
     -&gt; Const (Set (GovPurposeId p)) (Set (GovPurposeId p)))
    -&gt; PRoot (GovPurposeId p)
    -&gt; Const (Set (GovPurposeId p)) (PRoot (GovPurposeId p)))
-&gt; (Set (GovPurposeId p)
    -&gt; Const (Set (GovPurposeId p)) (Set (GovPurposeId p)))
-&gt; GovRelation PRoot
-&gt; Const (Set (GovPurposeId p)) (GovRelation PRoot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set (GovPurposeId p)
 -&gt; Const (Set (GovPurposeId p)) (Set (GovPurposeId p)))
-&gt; PRoot (GovPurposeId p)
-&gt; Const (Set (GovPurposeId p)) (PRoot (GovPurposeId p))
forall a (f :: * -&gt; *).
Functor f =&gt;
(Set a -&gt; f (Set a)) -&gt; PRoot a -&gt; f (PRoot a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prChildrenL"><span class="hs-identifier hs-var">prChildrenL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span id="local-6989586621686854529"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionTree"><span class="hs-identifier hs-type">submitGovActionTree</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1449"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854529"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1450"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1451"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Tree</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1452"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854529"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tree</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1453"></span><span id="submitGovActionTree"><span class="annot"><span class="annottext">submitGovActionTree :: forall era.
(StrictMaybe GovActionId -&gt; ImpTestM era GovActionId)
-&gt; StrictMaybe GovActionId
-&gt; Tree ()
-&gt; ImpTestM era (Tree GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionTree"><span class="hs-identifier hs-var hs-var">submitGovActionTree</span></a></span></span><span> </span><span id="local-6989586621686860006"><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era GovActionId
</span><a href="#local-6989586621686860006"><span class="hs-identifier hs-var">submitAction</span></a></span></span><span> </span><span id="local-6989586621686860007"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860007"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621686860008"><span class="annot"><span class="annottext">Tree ()
</span><a href="#local-6989586621686860008"><span class="hs-identifier hs-var">tree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1454"></span><span>  </span><span class="annot"><span class="annottext">(Tree (StrictMaybe GovActionId)
 -&gt; ImpM
      (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId)))
-&gt; Tree (StrictMaybe GovActionId)
-&gt; ImpM (LedgerSpec era) (Tree GovActionId)
forall (m :: * -&gt; *) b a.
Monad m =&gt;
(b -&gt; m (a, [b])) -&gt; b -&gt; m (Tree a)
</span><span class="hs-identifier hs-var">unfoldTreeM</span></span><span> </span><span class="annot"><span class="annottext">Tree (StrictMaybe GovActionId)
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
</span><a href="#local-6989586621686860010"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Tree (StrictMaybe GovActionId)
 -&gt; ImpM (LedgerSpec era) (Tree GovActionId))
-&gt; Tree (StrictMaybe GovActionId)
-&gt; ImpM (LedgerSpec era) (Tree GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(() -&gt; StrictMaybe GovActionId)
-&gt; Tree () -&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; Tree a -&gt; Tree b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; () -&gt; StrictMaybe GovActionId
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860007"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tree ()
</span><a href="#local-6989586621686860008"><span class="hs-identifier hs-var">tree</span></a></span><span>
</span><span id="line-1455"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1456"></span><span>    </span><span id="local-6989586621686860010"><span class="annot"><span class="annottext">go :: Tree (StrictMaybe GovActionId)
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
</span><a href="#local-6989586621686860010"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Node</span></span><span> </span><span id="local-6989586621686860012"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860012"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621686860013"><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860013"><span class="hs-identifier hs-var">children</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1457"></span><span>      </span><span id="local-6989586621686860014"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860014"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era GovActionId
</span><a href="#local-6989586621686860006"><span class="hs-identifier hs-var">submitAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860012"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-1458"></span><span>      </span><span class="annot"><span class="annottext">(GovActionId, Forest (StrictMaybe GovActionId))
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860014"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Tree (StrictMaybe GovActionId) -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Forest (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Node</span></span><span> </span><span id="local-6989586621686860015"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860015"><span class="hs-identifier hs-var">_child</span></a></span></span><span> </span><span id="local-6989586621686860016"><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860016"><span class="hs-identifier hs-var">subtree</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; StrictMaybe GovActionId
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860014"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860016"><span class="hs-identifier hs-var">subtree</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860013"><span class="hs-identifier hs-var">children</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1459"></span><span>
</span><span id="line-1460"></span><span id="local-6989586621686854536"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionForest"><span class="hs-identifier hs-type">submitGovActionForest</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1461"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854536"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1462"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1463"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Forest</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1464"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854536"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Forest</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1465"></span><span id="submitGovActionForest"><span class="annot"><span class="annottext">submitGovActionForest :: forall era.
(StrictMaybe GovActionId -&gt; ImpTestM era GovActionId)
-&gt; StrictMaybe GovActionId
-&gt; Forest ()
-&gt; ImpTestM era (Forest GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovActionForest"><span class="hs-identifier hs-var hs-var">submitGovActionForest</span></a></span></span><span> </span><span id="local-6989586621686860023"><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era GovActionId
</span><a href="#local-6989586621686860023"><span class="hs-identifier hs-var">submitAction</span></a></span></span><span> </span><span id="local-6989586621686860024"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860024"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621686860025"><span class="annot"><span class="annottext">Forest ()
</span><a href="#local-6989586621686860025"><span class="hs-identifier hs-var">forest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1466"></span><span>  </span><span class="annot"><span class="annottext">(Tree (StrictMaybe GovActionId)
 -&gt; ImpM
      (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId)))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; ImpM (LedgerSpec era) (Forest GovActionId)
forall (m :: * -&gt; *) b a.
Monad m =&gt;
(b -&gt; m (a, [b])) -&gt; [b] -&gt; m [Tree a]
</span><span class="hs-identifier hs-var">unfoldForestM</span></span><span> </span><span class="annot"><span class="annottext">Tree (StrictMaybe GovActionId)
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
</span><a href="#local-6989586621686860027"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(Forest (StrictMaybe GovActionId)
 -&gt; ImpM (LedgerSpec era) (Forest GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; ImpM (LedgerSpec era) (Forest GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Tree () -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest () -&gt; Forest (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() -&gt; StrictMaybe GovActionId)
-&gt; Tree () -&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; Tree a -&gt; Tree b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((() -&gt; StrictMaybe GovActionId)
 -&gt; Tree () -&gt; Tree (StrictMaybe GovActionId))
-&gt; (() -&gt; StrictMaybe GovActionId)
-&gt; Tree ()
-&gt; Tree (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; () -&gt; StrictMaybe GovActionId
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860024"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Forest ()
</span><a href="#local-6989586621686860025"><span class="hs-identifier hs-var">forest</span></a></span><span>
</span><span id="line-1467"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1468"></span><span>    </span><span id="local-6989586621686860027"><span class="annot"><span class="annottext">go :: Tree (StrictMaybe GovActionId)
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
</span><a href="#local-6989586621686860027"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Node</span></span><span> </span><span id="local-6989586621686860028"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860028"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621686860029"><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860029"><span class="hs-identifier hs-var">children</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1469"></span><span>      </span><span id="local-6989586621686860030"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860030"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId -&gt; ImpTestM era GovActionId
</span><a href="#local-6989586621686860023"><span class="hs-identifier hs-var">submitAction</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860028"><span class="hs-identifier hs-var">parent</span></a></span><span>
</span><span id="line-1470"></span><span>      </span><span class="annot"><span class="annottext">(GovActionId, Forest (StrictMaybe GovActionId))
-&gt; ImpM
     (LedgerSpec era) (GovActionId, Forest (StrictMaybe GovActionId))
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860030"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Tree (StrictMaybe GovActionId) -&gt; Tree (StrictMaybe GovActionId))
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Forest (StrictMaybe GovActionId)
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Node</span></span><span> </span><span id="local-6989586621686860031"><span class="annot"><span class="annottext">StrictMaybe GovActionId
</span><a href="#local-6989586621686860031"><span class="hs-identifier hs-var">_child</span></a></span></span><span> </span><span id="local-6989586621686860032"><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860032"><span class="hs-identifier hs-var">subtree</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe GovActionId
-&gt; Forest (StrictMaybe GovActionId)
-&gt; Tree (StrictMaybe GovActionId)
forall a. a -&gt; [Tree a] -&gt; Tree a
</span><span class="hs-identifier hs-var">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; StrictMaybe GovActionId
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860030"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860032"><span class="hs-identifier hs-var">subtree</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Forest (StrictMaybe GovActionId)
</span><a href="#local-6989586621686860029"><span class="hs-identifier hs-var">children</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>
</span><span id="line-1472"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-type">enactConstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1473"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854541"><span class="annot"><a href="#local-6989586621686854541"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1474"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854541"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1475"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-1476"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1477"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1478"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-type">Constitution</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854541"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1479"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1480"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1481"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854541"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span>
</span><span id="line-1482"></span><span id="enactConstitution"><span class="annot"><span class="annottext">enactConstitution :: forall era.
(ConwayEraImp era, HasCallStack) =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era
-&gt; Credential 'DRepRole
-&gt; NonEmpty (Credential 'HotCommitteeRole)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#enactConstitution"><span class="hs-identifier hs-var hs-var">enactConstitution</span></a></span></span><span> </span><span id="local-6989586621686860078"><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860078"><span class="hs-identifier hs-var">prevGovId</span></a></span></span><span> </span><span id="local-6989586621686860079"><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860079"><span class="hs-identifier hs-var">constitution</span></a></span></span><span> </span><span id="local-6989586621686860080"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860080"><span class="hs-identifier hs-var">dRep</span></a></span></span><span> </span><span id="local-6989586621686860081"><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686860081"><span class="hs-identifier hs-var">committeeMembers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) GovActionId
-&gt; ImpM (LedgerSpec era) GovActionId
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Enacting constitution&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) GovActionId
 -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
-&gt; ImpM (LedgerSpec era) GovActionId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1483"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686860082"><span class="annot"><span class="annottext">action :: GovAction era
</span><a href="#local-6989586621686860082"><span class="hs-identifier hs-var hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#NewConstitution"><span class="hs-identifier hs-var">NewConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860078"><span class="hs-identifier hs-var">prevGovId</span></a></span><span> </span><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860079"><span class="hs-identifier hs-var">constitution</span></a></span><span>
</span><span id="line-1484"></span><span>  </span><span id="local-6989586621686860084"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860084"><span class="hs-identifier hs-var">govId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ConwayEraImp era, HasCallStack) =&gt;
GovAction era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitGovAction"><span class="hs-identifier hs-var">submitGovAction</span></a></span><span> </span><span class="annot"><span class="annottext">GovAction era
</span><a href="#local-6989586621686860082"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1485"></span><span>  </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#DRepVoter"><span class="hs-identifier hs-var">DRepVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860080"><span class="hs-identifier hs-var">dRep</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860084"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-1486"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
-&gt; GovActionId -&gt; ImpTestM era ()
forall era (f :: * -&gt; *).
(ConwayEraImp era, Foldable f) =&gt;
f (Credential 'HotCommitteeRole) -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier hs-var">submitYesVoteCCs_</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686860081"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860084"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-1487"></span><span>  </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpTestM era ()
forall era.
(ConwayEraGov era, ConwayEraPParams era, HasCallStack,
 ConwayEraCertState era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logRatificationChecks"><span class="hs-identifier hs-var">logRatificationChecks</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860084"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-1488"></span><span>  </span><span class="annot"><span class="annottext">Natural -&gt; ImpTestM era ()
forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1489"></span><span>  </span><span id="local-6989586621686860085"><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860085"><span class="hs-identifier hs-var">enactedConstitution</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Constitution era)
-&gt; ImpTestM era (Constitution era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (Constitution era)
 -&gt; ImpTestM era (Constitution era))
-&gt; SimpleGetter (NewEpochState era) (Constitution era)
-&gt; ImpTestM era (Constitution era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
(ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((ConwayGovState era -&gt; Const r (ConwayGovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Constitution era -&gt; Const r (Constitution era))
    -&gt; ConwayGovState era -&gt; Const r (ConwayGovState era))
-&gt; (Constitution era -&gt; Const r (Constitution era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Constitution era -&gt; Const r (Constitution era))
-&gt; GovState era -&gt; Const r (GovState era)
(Constitution era -&gt; Const r (Constitution era))
-&gt; ConwayGovState era -&gt; Const r (ConwayGovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Constitution era)
Lens' (GovState era) (Constitution era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#constitutionGovStateL"><span class="hs-identifier hs-var">constitutionGovStateL</span></a></span><span>
</span><span id="line-1490"></span><span>  </span><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860085"><span class="hs-identifier hs-var">enactedConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">Constitution era -&gt; Constitution era -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860079"><span class="hs-identifier hs-var">constitution</span></a></span><span>
</span><span id="line-1491"></span><span>  </span><span class="annot"><span class="annottext">GovActionId -&gt; ImpM (LedgerSpec era) GovActionId
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860084"><span class="hs-identifier hs-var">govId</span></a></span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span id="local-6989586621686854546"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNumDormantEpochs"><span class="hs-identifier hs-type">expectNumDormantEpochs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854546"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854546"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1494"></span><span id="expectNumDormantEpochs"><span class="annot"><span class="annottext">expectNumDormantEpochs :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
EpochNo -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNumDormantEpochs"><span class="hs-identifier hs-var hs-var">expectNumDormantEpochs</span></a></span></span><span> </span><span id="local-6989586621686860099"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860099"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1495"></span><span>  </span><span id="local-6989586621686860100"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860100"><span class="hs-identifier hs-var">nd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1496"></span><span>    </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo)
-&gt; SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1497"></span><span>      </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((EpochNo -&gt; Const r EpochNo)
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((EpochNo -&gt; Const r EpochNo)
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (EpochNo -&gt; Const r EpochNo)
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((EpochNo -&gt; Const r EpochNo)
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (EpochNo -&gt; Const r EpochNo)
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((EpochNo -&gt; Const r EpochNo)
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (EpochNo -&gt; Const r EpochNo)
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo) -&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo) -&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsNumDormantEpochsL"><span class="hs-identifier hs-var">vsNumDormantEpochsL</span></a></span><span>
</span><span id="line-1498"></span><span>  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860100"><span class="hs-identifier hs-var">nd</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; ImpTestM era ()
forall a (m :: * -&gt; *).
(HasCallStack, ToExpr a, Eq a, MonadIO m) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html#shouldBeExpr"><span class="hs-operator hs-var">`shouldBeExpr`</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860099"><span class="hs-identifier hs-var">expected</span></a></span><span>
</span><span id="line-1499"></span><span>
</span><span id="line-1500"></span><span id="local-6989586621686854551"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkConstitutionProposal"><span class="hs-identifier hs-type">mkConstitutionProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1501"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854551"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1502"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1503"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854551"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854551"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Constitution"><span class="hs-identifier hs-type">Constitution</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854551"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1504"></span><span id="mkConstitutionProposal"><span class="annot"><span class="annottext">mkConstitutionProposal :: forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era (ProposalProcedure era, Constitution era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkConstitutionProposal"><span class="hs-identifier hs-var hs-var">mkConstitutionProposal</span></a></span></span><span> </span><span id="local-6989586621686860119"><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860119"><span class="hs-identifier hs-var">prevGovId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1505"></span><span>  </span><span id="local-6989586621686860120"><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860120"><span class="hs-identifier hs-var">constitution</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Constitution era)
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1506"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860120"><span class="hs-identifier hs-var">constitution</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ProposalProcedure era
 -&gt; (ProposalProcedure era, Constitution era))
-&gt; ImpM (LedgerSpec era) (ProposalProcedure era)
-&gt; ImpTestM era (ProposalProcedure era, Constitution era)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpM (LedgerSpec era) (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era -&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; Constitution era -&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#NewConstitution"><span class="hs-identifier hs-var">NewConstitution</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860119"><span class="hs-identifier hs-var">prevGovId</span></a></span><span> </span><span class="annot"><span class="annottext">Constitution era
</span><a href="#local-6989586621686860120"><span class="hs-identifier hs-var">constitution</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitConstitution"><span class="hs-identifier hs-type">submitConstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1509"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854554"><span class="annot"><a href="#local-6989586621686854554"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1510"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854554"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1511"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ConstitutionPurpose"><span class="hs-identifier hs-type">ConstitutionPurpose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1512"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854554"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span>
</span><span id="line-1513"></span><span id="submitConstitution"><span class="annot"><span class="annottext">submitConstitution :: forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitConstitution"><span class="hs-identifier hs-var hs-var">submitConstitution</span></a></span></span><span> </span><span id="local-6989586621686860134"><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860134"><span class="hs-identifier hs-var">prevGovId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1514"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621686860135"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860135"><span class="hs-identifier hs-var">proposal</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Constitution era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era (ProposalProcedure era, Constitution era)
forall era.
ConwayEraImp era =&gt;
StrictMaybe (GovPurposeId 'ConstitutionPurpose)
-&gt; ImpTestM era (ProposalProcedure era, Constitution era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkConstitutionProposal"><span class="hs-identifier hs-var">mkConstitutionProposal</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'ConstitutionPurpose)
</span><a href="#local-6989586621686860134"><span class="hs-identifier hs-var">prevGovId</span></a></span><span>
</span><span id="line-1515"></span><span>  </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpTestM era GovActionId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var">submitProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860135"><span class="hs-identifier hs-var">proposal</span></a></span><span>
</span><span id="line-1516"></span><span>
</span><span id="line-1517"></span><span id="local-6989586621686854556"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepNotRegistered"><span class="hs-identifier hs-type">expectDRepNotRegistered</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1518"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854556"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1519"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1520"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854556"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1521"></span><span id="expectDRepNotRegistered"><span class="annot"><span class="annottext">expectDRepNotRegistered :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepNotRegistered"><span class="hs-identifier hs-var hs-var">expectDRepNotRegistered</span></a></span></span><span> </span><span id="local-6989586621686860148"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860148"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1522"></span><span>  </span><span id="local-6989586621686860149"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686860149"><span class="hs-identifier hs-var">dsMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState
 -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>  </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860148"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686860149"><span class="hs-identifier hs-var">dsMap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DRepState -&gt; Maybe DRepState -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DRepState
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1524"></span><span>
</span><span id="line-1525"></span><span id="local-6989586621686854559"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepExpired"><span class="hs-identifier hs-type">isDRepExpired</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1526"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854559"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1527"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1528"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854559"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1529"></span><span id="isDRepExpired"><span class="annot"><span class="annottext">isDRepExpired :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; ImpTestM era Bool
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#isDRepExpired"><span class="hs-identifier hs-var hs-var">isDRepExpired</span></a></span></span><span> </span><span id="local-6989586621686860174"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860174"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1530"></span><span>  </span><span id="local-6989586621686860175"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621686860175"><span class="hs-identifier hs-var">vState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (VState era)
-&gt; ImpTestM era (VState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (VState era)
 -&gt; ImpTestM era (VState era))
-&gt; SimpleGetter (NewEpochState era) (VState era)
-&gt; ImpTestM era (VState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span>
</span><span id="line-1531"></span><span>  </span><span id="local-6989586621686860181"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860181"><span class="hs-identifier hs-var">currentEpoch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) EpochNo -&gt; ImpTestM era EpochNo
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(EpochNo -&gt; Const r EpochNo)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1532"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860174"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState)
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621686860175"><span class="hs-identifier hs-var">vState</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
-&gt; Getting
     (Map (Credential 'DRepRole) DRepState)
     (VState era)
     (Map (Credential 'DRepRole) DRepState)
-&gt; Map (Credential 'DRepRole) DRepState
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'DRepRole) DRepState)
  (VState era)
  (Map (Credential 'DRepRole) DRepState)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1533"></span><span>    </span><span class="annot"><span class="annottext">Maybe DRepState
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era Bool
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpTestM era Bool) -&gt; String -&gt; ImpTestM era Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
Item [String]
</span><span class="hs-string">&quot;DRep not found&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860174"><span class="hs-identifier hs-var">drep</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1534"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621686860184"><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686860184"><span class="hs-identifier hs-var">drep'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1535"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; ImpTestM era Bool
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era Bool) -&gt; Bool -&gt; ImpTestM era Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1536"></span><span>        </span><span class="annot"><span class="annottext">(Word64 -&gt; Word64 -&gt; Word64) -&gt; EpochNo -&gt; EpochNo -&gt; EpochNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#binOpEpochNo"><span class="hs-identifier hs-var">binOpEpochNo</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621686860175"><span class="hs-identifier hs-var">vState</span></a></span><span> </span><span class="annot"><span class="annottext">VState era -&gt; Getting EpochNo (VState era) EpochNo -&gt; EpochNo
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EpochNo (VState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo) -&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsNumDormantEpochsL"><span class="hs-identifier hs-var">vsNumDormantEpochsL</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686860184"><span class="hs-identifier hs-var">drep'</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState -&gt; Getting EpochNo DRepState EpochNo -&gt; EpochNo
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EpochNo DRepState EpochNo
Lens' DRepState EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#drepExpiryL"><span class="hs-identifier hs-var">drepExpiryL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>          </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860181"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span>
</span><span id="line-1538"></span><span>
</span><span id="line-1539"></span><span id="local-6989586621686854563"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepExpiry"><span class="hs-identifier hs-type">expectDRepExpiry</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1540"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854563"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1541"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1542"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1543"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854563"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1544"></span><span id="expectDRepExpiry"><span class="annot"><span class="annottext">expectDRepExpiry :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; EpochNo -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectDRepExpiry"><span class="hs-identifier hs-var hs-var">expectDRepExpiry</span></a></span></span><span> </span><span id="local-6989586621686860198"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860198"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span id="local-6989586621686860199"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860199"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1545"></span><span>  </span><span id="local-6989586621686860200"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686860200"><span class="hs-identifier hs-var">dsMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter
  (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter
   (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
 -&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState))
-&gt; SimpleGetter
     (NewEpochState era) (Map (Credential 'DRepRole) DRepState)
-&gt; ImpTestM era (Map (Credential 'DRepRole) DRepState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((VState era -&gt; Const r (VState era))
 -&gt; CertState era -&gt; Const r (CertState era))
-&gt; ((Map (Credential 'DRepRole) DRepState
     -&gt; Const r (Map (Credential 'DRepRole) DRepState))
    -&gt; VState era -&gt; Const r (VState era))
-&gt; (Map (Credential 'DRepRole) DRepState
    -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; CertState era
-&gt; Const r (CertState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'DRepRole) DRepState
 -&gt; Const r (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; Const r (VState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; VState era -&gt; f (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsDRepsL"><span class="hs-identifier hs-var">vsDRepsL</span></a></span><span>
</span><span id="line-1546"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686860207"><span class="annot"><span class="annottext">ds :: DRepState
</span><a href="#local-6989586621686860207"><span class="hs-identifier hs-var hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe DRepState -&gt; DRepState
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe DRepState -&gt; DRepState) -&gt; Maybe DRepState -&gt; DRepState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Maybe DRepState
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860198"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621686860200"><span class="hs-identifier hs-var">dsMap</span></a></span><span>
</span><span id="line-1547"></span><span>  </span><span class="annot"><span class="annottext">DRepState -&gt; EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#drepExpiry"><span class="hs-identifier hs-var">drepExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">DRepState
</span><a href="#local-6989586621686860207"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860199"><span class="hs-identifier hs-var">expected</span></a></span><span>
</span><span id="line-1548"></span><span>
</span><span id="line-1549"></span><span id="local-6989586621686860209"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectActualDRepExpiry"><span class="hs-identifier hs-type">expectActualDRepExpiry</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1550"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860209"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1551"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1552"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1553"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860209"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1554"></span><span id="expectActualDRepExpiry"><span class="annot"><span class="annottext">expectActualDRepExpiry :: forall era.
(HasCallStack, ConwayEraCertState era) =&gt;
Credential 'DRepRole -&gt; EpochNo -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectActualDRepExpiry"><span class="hs-identifier hs-var hs-var">expectActualDRepExpiry</span></a></span></span><span> </span><span id="local-6989586621686860220"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860220"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span id="local-6989586621686860221"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860221"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1555"></span><span>  </span><span id="local-6989586621686860222"><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621686860222"><span class="hs-identifier hs-var">vState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (VState era)
-&gt; ImpTestM era (VState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (VState era)
 -&gt; ImpTestM era (VState era))
-&gt; SimpleGetter (NewEpochState era) (VState era)
-&gt; ImpTestM era (VState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((CertState era -&gt; Const r (CertState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((VState era -&gt; Const r (VState era))
    -&gt; CertState era -&gt; Const r (CertState era))
-&gt; (VState era -&gt; Const r (VState era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Const r (VState era))
-&gt; CertState era -&gt; Const r (CertState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span>
</span><span id="line-1556"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686860228"><span class="annot"><span class="annottext">actualDRepExpiry :: EpochNo
</span><a href="#local-6989586621686860228"><span class="hs-identifier hs-var hs-var">actualDRepExpiry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EpochNo -&gt; EpochNo
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe EpochNo -&gt; EpochNo) -&gt; Maybe EpochNo -&gt; EpochNo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole -&gt; VState era -&gt; Maybe EpochNo
forall era. Credential 'DRepRole -&gt; VState era -&gt; Maybe EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#vsActualDRepExpiry"><span class="hs-identifier hs-var">vsActualDRepExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621686860220"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">VState era
</span><a href="#local-6989586621686860222"><span class="hs-identifier hs-var">vState</span></a></span><span>
</span><span id="line-1557"></span><span>  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860228"><span class="hs-identifier hs-var">actualDRepExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochNo -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860221"><span class="hs-identifier hs-var">expected</span></a></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span id="local-6989586621686860230"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalsShouldContain"><span class="hs-identifier hs-type">currentProposalsShouldContain</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-1561"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860230"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1562"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1563"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1564"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860230"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1565"></span><span id="currentProposalsShouldContain"><span class="annot"><span class="annottext">currentProposalsShouldContain :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalsShouldContain"><span class="hs-identifier hs-var hs-var">currentProposalsShouldContain</span></a></span></span><span> </span><span id="local-6989586621686860243"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860243"><span class="hs-identifier hs-var">gai</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1566"></span><span>  </span><span class="annot"><span class="annottext">ImpTestM era (StrictSeq GovActionId)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalIds"><span class="hs-identifier hs-var">currentProposalIds</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (StrictSeq GovActionId)
-&gt; (StrictSeq GovActionId -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) ()
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">([GovActionId] -&gt; [GovActionId] -&gt; ImpM (LedgerSpec era) ())
-&gt; [GovActionId] -&gt; [GovActionId] -&gt; ImpM (LedgerSpec era) ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">[GovActionId] -&gt; [GovActionId] -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
[a] -&gt; [a] -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldContain"><span class="hs-identifier hs-var">shouldContain</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [GovActionId]
GovActionId
</span><a href="#local-6989586621686860243"><span class="hs-identifier hs-var">gai</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([GovActionId] -&gt; ImpM (LedgerSpec era) ())
-&gt; (StrictSeq GovActionId -&gt; [GovActionId])
-&gt; StrictSeq GovActionId
-&gt; ImpM (LedgerSpec era) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; [GovActionId]
forall a. StrictSeq a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span id="local-6989586621686854577"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCurrentProposals"><span class="hs-identifier hs-type">expectCurrentProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854577"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854577"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1569"></span><span id="expectCurrentProposals"><span class="annot"><span class="annottext">expectCurrentProposals :: forall era. (HasCallStack, ConwayEraGov era) =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCurrentProposals"><span class="hs-identifier hs-var hs-var">expectCurrentProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1570"></span><span>  </span><span id="local-6989586621686860254"><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860254"><span class="hs-identifier hs-var">props</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (StrictSeq GovActionId)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalIds"><span class="hs-identifier hs-var">currentProposalIds</span></a></span><span>
</span><span id="line-1571"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; ImpTestM era ()
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; Bool -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertBool"><span class="hs-identifier hs-var">assertBool</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected proposals in current gov state&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; Bool
forall a. StrictSeq a -&gt; Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#null"><span class="hs-identifier hs-var">SSeq.null</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860254"><span class="hs-identifier hs-var">props</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1572"></span><span>
</span><span id="line-1573"></span><span id="local-6989586621686854581"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoCurrentProposals"><span class="hs-identifier hs-type">expectNoCurrentProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854581"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854581"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1574"></span><span id="expectNoCurrentProposals"><span class="annot"><span class="annottext">expectNoCurrentProposals :: forall era. (HasCallStack, ConwayEraImp era) =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoCurrentProposals"><span class="hs-identifier hs-var hs-var">expectNoCurrentProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1575"></span><span>  </span><span id="local-6989586621686860283"><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686860283"><span class="hs-identifier hs-var">proposals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (Proposals era)
forall era. ConwayEraGov era =&gt; ImpTestM era (Proposals era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getProposals"><span class="hs-identifier hs-var">getProposals</span></a></span><span>
</span><span id="line-1576"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; StrictSeq (GovActionState era)
forall era. Proposals era -&gt; StrictSeq (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsActions"><span class="hs-identifier hs-var">proposalsActions</span></a></span><span> </span><span class="annot"><span class="annottext">Proposals era
</span><a href="#local-6989586621686860283"><span class="hs-identifier hs-var">proposals</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1577"></span><span>    </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#Empty"><span class="hs-identifier hs-var">Empty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ImpTestM era ()
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>    </span><span id="local-6989586621686860286"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621686860286"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertFailure"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpTestM era ()) -&gt; String -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected no active proposals, but got:\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq (GovActionState era) -&gt; Expr
forall a. ToExpr a =&gt; a -&gt; Expr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#toExpr"><span class="hs-identifier hs-var">toExpr</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621686860286"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1579"></span><span>
</span><span id="line-1580"></span><span id="local-6989586621686860288"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPulserProposals"><span class="hs-identifier hs-type">expectPulserProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860288"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860288"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1581"></span><span id="expectPulserProposals"><span class="annot"><span class="annottext">expectPulserProposals :: forall era. (HasCallStack, ConwayEraGov era) =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectPulserProposals"><span class="hs-identifier hs-var hs-var">expectPulserProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1582"></span><span>  </span><span id="local-6989586621686860296"><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860296"><span class="hs-identifier hs-var">props</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (StrictSeq GovActionId)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lastEpochProposals"><span class="hs-identifier hs-var">lastEpochProposals</span></a></span><span>
</span><span id="line-1583"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; ImpTestM era ()
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; Bool -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertBool"><span class="hs-identifier hs-var">assertBool</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected proposals in the pulser&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; Bool
forall a. StrictSeq a -&gt; Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#null"><span class="hs-identifier hs-var">SSeq.null</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860296"><span class="hs-identifier hs-var">props</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1584"></span><span>
</span><span id="line-1585"></span><span id="local-6989586621686860298"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoPulserProposals"><span class="hs-identifier hs-type">expectNoPulserProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860298"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860298"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1586"></span><span id="expectNoPulserProposals"><span class="annot"><span class="annottext">expectNoPulserProposals :: forall era. (HasCallStack, ConwayEraGov era) =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectNoPulserProposals"><span class="hs-identifier hs-var hs-var">expectNoPulserProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1587"></span><span>  </span><span id="local-6989586621686860306"><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860306"><span class="hs-identifier hs-var">props</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (StrictSeq GovActionId)
forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lastEpochProposals"><span class="hs-identifier hs-var">lastEpochProposals</span></a></span><span>
</span><span id="line-1588"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; ImpTestM era ()
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; Bool -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertBool"><span class="hs-identifier hs-var">assertBool</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected no proposals in the pulser&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq GovActionId -&gt; Bool
forall a. StrictSeq a -&gt; Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#null"><span class="hs-identifier hs-var">SSeq.null</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq GovActionId
</span><a href="#local-6989586621686860306"><span class="hs-identifier hs-var">props</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1589"></span><span>
</span><span id="line-1590"></span><span id="local-6989586621686854571"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalIds"><span class="hs-identifier hs-type">currentProposalIds</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1591"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854571"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854571"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier hs-type">SSeq.StrictSeq</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1592"></span><span id="currentProposalIds"><span class="annot"><span class="annottext">currentProposalIds :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#currentProposalIds"><span class="hs-identifier hs-var hs-var">currentProposalIds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proposals era -&gt; StrictSeq GovActionId
forall era. Proposals era -&gt; StrictSeq GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#proposalsIds"><span class="hs-identifier hs-var">proposalsIds</span></a></span><span> </span><span class="annot"><span class="annottext">(Proposals era -&gt; StrictSeq GovActionId)
-&gt; ImpM (LedgerSpec era) (Proposals era)
-&gt; ImpM (LedgerSpec era) (StrictSeq GovActionId)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (Proposals era)
-&gt; ImpM (LedgerSpec era) (Proposals era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((Proposals era -&gt; Const r (Proposals era))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (Proposals era -&gt; Const r (Proposals era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Proposals era -&gt; Const r (Proposals era))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Proposals era)
Lens' (GovState era) (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#proposalsGovStateL"><span class="hs-identifier hs-var">proposalsGovStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>
</span><span id="line-1594"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lastEpochProposals"><span class="hs-identifier hs-type">lastEpochProposals</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1595"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686860312"><span class="annot"><a href="#local-6989586621686860312"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1596"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860312"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1597"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860312"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier hs-type">SSeq.StrictSeq</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span id="lastEpochProposals"><span class="annot"><span class="annottext">lastEpochProposals :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictSeq GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#lastEpochProposals"><span class="hs-identifier hs-var hs-var">lastEpochProposals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1599"></span><span>  </span><span class="annot"><span class="annottext">(GovActionState era -&gt; GovActionId)
-&gt; StrictSeq (GovActionState era) -&gt; StrictSeq GovActionId
forall a b. (a -&gt; b) -&gt; StrictSeq a -&gt; StrictSeq b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. GovActionState era -&gt; GovActionId
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#gasId"><span class="hs-identifier hs-var">gasId</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621686860312"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StrictSeq (GovActionState era) -&gt; StrictSeq GovActionId)
-&gt; (PulsingSnapshot era -&gt; StrictSeq (GovActionState era))
-&gt; PulsingSnapshot era
-&gt; StrictSeq GovActionId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span>
</span><span id="line-1600"></span><span>    </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; StrictSeq GovActionId)
-&gt; ImpM (LedgerSpec era) (PulsingSnapshot era)
-&gt; ImpM (LedgerSpec era) (StrictSeq GovActionId)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (PulsingSnapshot era)
-&gt; ImpM (LedgerSpec era) (PulsingSnapshot era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span>
</span><span id="line-1601"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span>
</span><span id="line-1602"></span><span>          </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span>
</span><span id="line-1603"></span><span>          </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(UTxOState era -&gt; Const r (UTxOState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(UTxOState era -&gt; f (UTxOState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsUTxOStateL"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span>
</span><span id="line-1604"></span><span>          </span><span class="annot"><span class="annottext">((UTxOState era -&gt; Const r (UTxOState era))
 -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; ((PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
    -&gt; UTxOState era -&gt; Const r (UTxOState era))
-&gt; (PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; LedgerState era
-&gt; Const r (LedgerState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; UTxOState era -&gt; Const r (UTxOState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; UTxOState era -&gt; f (UTxOState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#utxosGovStateL"><span class="hs-identifier hs-var">utxosGovStateL</span></a></span><span>
</span><span id="line-1605"></span><span>          </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; UTxOState era -&gt; Const r (UTxOState era))
-&gt; ((PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; UTxOState era
-&gt; Const r (UTxOState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DRepPulsingState era -&gt; Const r (DRepPulsingState era))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (DRepPulsingState era)
Lens' (GovState era) (DRepPulsingState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#drepPulsingStateGovStateL"><span class="hs-identifier hs-var">drepPulsingStateGovStateL</span></a></span><span>
</span><span id="line-1606"></span><span>          </span><span class="annot"><span class="annottext">((DRepPulsingState era -&gt; Const r (DRepPulsingState era))
 -&gt; GovState era -&gt; Const r (GovState era))
-&gt; ((PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
    -&gt; DRepPulsingState era -&gt; Const r (DRepPulsingState era))
-&gt; (PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; GovState era
-&gt; Const r (GovState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; Const r (PulsingSnapshot era))
-&gt; DRepPulsingState era -&gt; Const r (DRepPulsingState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
Lens' (DRepPulsingState era) (PulsingSnapshot era)
Lens' (DRepPulsingState era) (PulsingSnapshot era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#pulsingStateSnapshotL"><span class="hs-identifier hs-var">pulsingStateSnapshotL</span></a></span><span>
</span><span id="line-1607"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1608"></span><span>
</span><span id="line-1609"></span><span id="local-6989586621686854599"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#pulsingStateSnapshotL"><span class="hs-identifier hs-type">pulsingStateSnapshotL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1610"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1611"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1612"></span><span id="pulsingStateSnapshotL"><span class="annot"><span class="annottext">pulsingStateSnapshotL :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
Lens' (DRepPulsingState era) (PulsingSnapshot era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#pulsingStateSnapshotL"><span class="hs-identifier hs-var hs-var">pulsingStateSnapshotL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DRepPulsingState era -&gt; PulsingSnapshot era)
-&gt; (DRepPulsingState era
    -&gt; PulsingSnapshot era -&gt; DRepPulsingState era)
-&gt; Lens
     (DRepPulsingState era)
     (DRepPulsingState era)
     (PulsingSnapshot era)
     (PulsingSnapshot era)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; PulsingSnapshot era
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; PulsingSnapshot era
</span><a href="#local-6989586621686860353"><span class="hs-identifier hs-var">getter</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; PulsingSnapshot era -&gt; DRepPulsingState era
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; PulsingSnapshot era -&gt; DRepPulsingState era
</span><a href="#local-6989586621686860354"><span class="hs-identifier hs-var">setter</span></a></span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1614"></span><span>    </span><span id="local-6989586621686860353"><span class="annot"><span class="annottext">getter :: DRepPulsingState era -&gt; PulsingSnapshot era
</span><a href="#local-6989586621686860353"><span class="hs-identifier hs-var hs-var">getter</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621686860482"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860482"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860482"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1615"></span><span>    </span><span class="annot"><a href="#local-6989586621686860353"><span class="hs-identifier hs-var">getter</span></a></span><span> </span><span id="local-6989586621686860483"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686860483"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era) -&gt; PulsingSnapshot era
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686860483"><span class="hs-identifier hs-var">state</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>    </span><span id="local-6989586621686860354"><span class="annot"><span class="annottext">setter :: DRepPulsingState era -&gt; PulsingSnapshot era -&gt; DRepPulsingState era
</span><a href="#local-6989586621686860354"><span class="hs-identifier hs-var hs-var">setter</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621686860611"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686860611"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621686860612"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860612"><span class="hs-identifier hs-var">snap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860612"><span class="hs-identifier hs-var">snap</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621686860611"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1617"></span><span>    </span><span class="annot"><a href="#local-6989586621686860354"><span class="hs-identifier hs-var">setter</span></a></span><span> </span><span id="local-6989586621686860613"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686860613"><span class="hs-identifier hs-var">state</span></a></span></span><span> </span><span id="local-6989586621686860614"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860614"><span class="hs-identifier hs-var">snap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621686860614"><span class="hs-identifier hs-var">snap</span></a></span><span> </span><span class="annot"><span class="annottext">(RatifyState era -&gt; DRepPulsingState era)
-&gt; RatifyState era -&gt; DRepPulsingState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era) -&gt; RatifyState era
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((PulsingSnapshot era, RatifyState era) -&gt; RatifyState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; RatifyState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621686860613"><span class="hs-identifier hs-var">state</span></a></span><span>
</span><span id="line-1618"></span><span>
</span><span id="line-1619"></span><span id="local-6989586621686854609"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenBootstrap"><span class="hs-identifier hs-type">whenBootstrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854609"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854609"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854609"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1620"></span><span id="whenBootstrap"><span class="annot"><span class="annottext">whenBootstrap :: forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenBootstrap"><span class="hs-identifier hs-var hs-var">whenBootstrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, 0 &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersion"><span class="hs-identifier hs-var">whenMajorVersion</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">9</span></span><span>
</span><span id="line-1621"></span><span>
</span><span id="line-1622"></span><span id="local-6989586621686860622"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-type">whenPostBootstrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860622"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860622"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860622"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1623"></span><span id="whenPostBootstrap"><span class="annot"><span class="annottext">whenPostBootstrap :: forall era. EraGov era =&gt; ImpTestM era () -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#whenPostBootstrap"><span class="hs-identifier hs-var hs-var">whenPostBootstrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (v :: Natural) era.
(EraGov era, KnownNat v, 0 &lt;= v, v &lt;= MaxVersion) =&gt;
ImpTestM era () -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#whenMajorVersionAtLeast"><span class="hs-identifier hs-var">whenMajorVersionAtLeast</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">10</span></span><span>
</span><span id="line-1624"></span><span>
</span><span id="line-1625"></span><span id="local-6989586621686854614"><span id="local-6989586621686854615"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier hs-type">ifBootstrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854614"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854614"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854615"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854614"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854615"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854614"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854615"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1626"></span><span id="ifBootstrap"><span class="annot"><span class="annottext">ifBootstrap :: forall era a.
EraGov era =&gt;
ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier hs-var hs-var">ifBootstrap</span></a></span></span><span> </span><span id="local-6989586621686860633"><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686860633"><span class="hs-identifier hs-var">inBootstrap</span></a></span></span><span> </span><span id="local-6989586621686860634"><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686860634"><span class="hs-identifier hs-var">outOfBootstrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1627"></span><span>  </span><span id="local-6989586621686860635"><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686860635"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era ProtVer
forall era. EraGov era =&gt; ImpTestM era ProtVer
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getProtVer"><span class="hs-identifier hs-var">getProtVer</span></a></span><span>
</span><span id="line-1628"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ProtVer -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Era.html#hardforkConwayBootstrapPhase"><span class="hs-identifier hs-var">hardforkConwayBootstrapPhase</span></a></span><span> </span><span class="annot"><span class="annottext">ProtVer
</span><a href="#local-6989586621686860635"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686860633"><span class="hs-identifier hs-var">inBootstrap</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686860634"><span class="hs-identifier hs-var">outOfBootstrap</span></a></span><span>
</span><span id="line-1629"></span><span>
</span><span id="line-1630"></span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier hs-type">submitYesVoteCCs_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1631"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621686854246"><span class="annot"><a href="#local-6989586621686854246"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621686854247"><span class="annot"><a href="#local-6989586621686854247"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1632"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854246"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621686854247"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1633"></span><span>  </span><span class="annot"><a href="#local-6989586621686854247"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1634"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1635"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854246"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1636"></span><span id="submitYesVoteCCs_"><span class="annot"><span class="annottext">submitYesVoteCCs_ :: forall era (f :: * -&gt; *).
(ConwayEraImp era, Foldable f) =&gt;
f (Credential 'HotCommitteeRole) -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVoteCCs_"><span class="hs-identifier hs-var hs-var">submitYesVoteCCs_</span></a></span></span><span> </span><span id="local-6989586621686860650"><span class="annot"><span class="annottext">f (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686860650"><span class="hs-identifier hs-var">committeeMembers</span></a></span></span><span> </span><span id="local-6989586621686860651"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860651"><span class="hs-identifier hs-var">govId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1637"></span><span>  </span><span class="annot"><span class="annottext">(Credential 'HotCommitteeRole -&gt; ImpM (LedgerSpec era) ())
-&gt; f (Credential 'HotCommitteeRole) -&gt; ImpM (LedgerSpec era) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621686860653"><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686860653"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Voter -&gt; GovActionId -&gt; ImpM (LedgerSpec era) ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitYesVote_"><span class="hs-identifier hs-var">submitYesVote_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole -&gt; Voter
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteeVoter"><span class="hs-identifier hs-var">CommitteeVoter</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'HotCommitteeRole
</span><a href="#local-6989586621686860653"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860651"><span class="hs-identifier hs-var">govId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f (Credential 'HotCommitteeRole)
</span><a href="#local-6989586621686860650"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span id="local-6989586621686854624"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkUpdateCommitteeProposal"><span class="hs-identifier hs-type">mkUpdateCommitteeProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1640"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854624"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1641"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Set the parent. When Nothing is supplied latest parent will be used.</span></span><span>
</span><span id="line-1642"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1643"></span><span>  </span><span class="annot"><span class="hs-comment">-- | CC members to remove</span></span><span>
</span><span id="line-1644"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1645"></span><span>  </span><span class="annot"><span class="hs-comment">-- | CC members to add</span></span><span>
</span><span id="line-1646"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-type">EpochInterval</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1647"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#UnitInterval"><span class="hs-identifier hs-type">UnitInterval</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1648"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854624"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854624"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1649"></span><span id="mkUpdateCommitteeProposal"><span class="annot"><span class="annottext">mkUpdateCommitteeProposal :: forall era.
ConwayEraImp era =&gt;
Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; [(Credential 'ColdCommitteeRole, EpochInterval)]
-&gt; UnitInterval
-&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkUpdateCommitteeProposal"><span class="hs-identifier hs-var hs-var">mkUpdateCommitteeProposal</span></a></span></span><span> </span><span id="local-6989586621686860667"><span class="annot"><span class="annottext">Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
</span><a href="#local-6989586621686860667"><span class="hs-identifier hs-var">mParent</span></a></span></span><span> </span><span id="local-6989586621686860668"><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860668"><span class="hs-identifier hs-var">ccsToRemove</span></a></span></span><span> </span><span id="local-6989586621686860669"><span class="annot"><span class="annottext">[(Credential 'ColdCommitteeRole, EpochInterval)]
</span><a href="#local-6989586621686860669"><span class="hs-identifier hs-var">ccsToAdd</span></a></span></span><span> </span><span id="local-6989586621686860670"><span class="annot"><span class="annottext">UnitInterval
</span><a href="#local-6989586621686860670"><span class="hs-identifier hs-var">threshold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1650"></span><span>  </span><span id="local-6989586621686860671"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621686860671"><span class="hs-identifier hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (NewEpochState era)
-&gt; ImpTestM era (NewEpochState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall a. a -&gt; a
SimpleGetter (NewEpochState era) (NewEpochState era)
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-1651"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1652"></span><span>    </span><span id="local-6989586621686860673"><span class="annot"><span class="annottext">curEpochNo :: EpochNo
</span><a href="#local-6989586621686860673"><span class="hs-identifier hs-var hs-var">curEpochNo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621686860671"><span class="hs-identifier hs-var">nes</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era
-&gt; Getting EpochNo (NewEpochState era) EpochNo -&gt; EpochNo
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EpochNo (NewEpochState era) EpochNo
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochNo -&gt; f EpochNo)
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesELL"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-1653"></span><span>    </span><span id="local-6989586621686860674"><span class="annot"><span class="annottext">rootCommittee :: PRoot (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686860674"><span class="hs-identifier hs-var hs-var">rootCommittee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621686860671"><span class="hs-identifier hs-var">nes</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era
-&gt; Getting
     (PRoot (GovPurposeId 'CommitteePurpose))
     (NewEpochState era)
     (PRoot (GovPurposeId 'CommitteePurpose))
-&gt; PRoot (GovPurposeId 'CommitteePurpose)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(GovState era
 -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era))
-&gt; NewEpochState era
-&gt; Const
     (PRoot (GovPurposeId 'CommitteePurpose)) (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era
  -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era))
 -&gt; NewEpochState era
 -&gt; Const
      (PRoot (GovPurposeId 'CommitteePurpose)) (NewEpochState era))
-&gt; ((PRoot (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'CommitteePurpose))
          (PRoot (GovPurposeId 'CommitteePurpose)))
    -&gt; GovState era
    -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era))
-&gt; Getting
     (PRoot (GovPurposeId 'CommitteePurpose))
     (NewEpochState era)
     (PRoot (GovPurposeId 'CommitteePurpose))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Proposals era
 -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era))
-&gt; GovState era
-&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (Proposals era)
Lens' (GovState era) (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#proposalsGovStateL"><span class="hs-identifier hs-var">proposalsGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((Proposals era
  -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era))
 -&gt; GovState era
 -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era))
-&gt; ((PRoot (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'CommitteePurpose))
          (PRoot (GovPurposeId 'CommitteePurpose)))
    -&gt; Proposals era
    -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era))
-&gt; (PRoot (GovPurposeId 'CommitteePurpose)
    -&gt; Const
         (PRoot (GovPurposeId 'CommitteePurpose))
         (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; GovState era
-&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (GovState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovRelation PRoot
 -&gt; Const
      (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; Proposals era
-&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovRelation PRoot -&gt; f (GovRelation PRoot))
-&gt; Proposals era -&gt; f (Proposals era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#pRootsL"><span class="hs-identifier hs-var">pRootsL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovRelation PRoot
  -&gt; Const
       (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
 -&gt; Proposals era
 -&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era))
-&gt; ((PRoot (GovPurposeId 'CommitteePurpose)
     -&gt; Const
          (PRoot (GovPurposeId 'CommitteePurpose))
          (PRoot (GovPurposeId 'CommitteePurpose)))
    -&gt; GovRelation PRoot
    -&gt; Const
         (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot))
-&gt; (PRoot (GovPurposeId 'CommitteePurpose)
    -&gt; Const
         (PRoot (GovPurposeId 'CommitteePurpose))
         (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; Proposals era
-&gt; Const (PRoot (GovPurposeId 'CommitteePurpose)) (Proposals era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PRoot (GovPurposeId 'CommitteePurpose)
 -&gt; Const
      (PRoot (GovPurposeId 'CommitteePurpose))
      (PRoot (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation PRoot
-&gt; Const
     (PRoot (GovPurposeId 'CommitteePurpose)) (GovRelation PRoot)
forall (f1 :: * -&gt; *) (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 (GovPurposeId 'CommitteePurpose)
 -&gt; f2 (f1 (GovPurposeId 'CommitteePurpose)))
-&gt; GovRelation f1 -&gt; f2 (GovRelation f1)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#grCommitteeL"><span class="hs-identifier hs-var">grCommitteeL</span></a></span><span>
</span><span id="line-1654"></span><span>    </span><span id="local-6989586621686860675"><span class="annot"><span class="annottext">parent :: StrictMaybe (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686860675"><span class="hs-identifier hs-var hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; StrictMaybe (GovPurposeId 'CommitteePurpose)
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'CommitteePurpose)
-&gt; StrictMaybe (GovPurposeId 'CommitteePurpose)
forall a. PRoot a -&gt; StrictMaybe a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Proposals.html#prRoot"><span class="hs-identifier hs-var">prRoot</span></a></span><span> </span><span class="annot"><span class="annottext">PRoot (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686860674"><span class="hs-identifier hs-var">rootCommittee</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
</span><a href="#local-6989586621686860667"><span class="hs-identifier hs-var">mParent</span></a></span><span>
</span><span id="line-1655"></span><span>    </span><span id="local-6989586621686860677"><span class="annot"><span class="annottext">newCommitteMembers :: Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686860677"><span class="hs-identifier hs-var hs-var">newCommitteMembers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1656"></span><span>      </span><span class="annot"><span class="annottext">[(Credential 'ColdCommitteeRole, EpochNo)]
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860678"><span class="hs-identifier hs-var">cc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; EpochInterval -&gt; EpochNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#addEpochInterval"><span class="hs-identifier hs-var">addEpochInterval</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621686860673"><span class="hs-identifier hs-var">curEpochNo</span></a></span><span> </span><span class="annot"><span class="annottext">EpochInterval
</span><a href="#local-6989586621686860679"><span class="hs-identifier hs-var">lifetime</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621686860678"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860678"><span class="hs-identifier hs-var">cc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621686860679"><span class="annot"><span class="annottext">EpochInterval
</span><a href="#local-6989586621686860679"><span class="hs-identifier hs-var">lifetime</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Credential 'ColdCommitteeRole, EpochInterval)]
</span><a href="#local-6989586621686860669"><span class="hs-identifier hs-var">ccsToAdd</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1657"></span><span>  </span><span class="annot"><span class="annottext">GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
GovAction era -&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkProposal"><span class="hs-identifier hs-var">mkProposal</span></a></span><span> </span><span class="annot"><span class="annottext">(GovAction era -&gt; ImpTestM era (ProposalProcedure era))
-&gt; GovAction era -&gt; ImpTestM era (ProposalProcedure era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
forall era.
StrictMaybe (GovPurposeId 'CommitteePurpose)
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; UnitInterval
-&gt; GovAction era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#UpdateCommittee"><span class="hs-identifier hs-var">UpdateCommittee</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (GovPurposeId 'CommitteePurpose)
</span><a href="#local-6989586621686860675"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860668"><span class="hs-identifier hs-var">ccsToRemove</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="#local-6989586621686860677"><span class="hs-identifier hs-var">newCommitteMembers</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInterval
</span><a href="#local-6989586621686860670"><span class="hs-identifier hs-var">threshold</span></a></span><span>
</span><span id="line-1658"></span><span>
</span><span id="line-1659"></span><span id="local-6989586621686854630"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitUpdateCommittee"><span class="hs-identifier hs-type">submitUpdateCommittee</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1660"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854630"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1661"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Set the parent. When Nothing is supplied latest parent will be used.</span></span><span>
</span><span id="line-1662"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovPurposeId"><span class="hs-identifier hs-type">GovPurposeId</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#CommitteePurpose"><span class="hs-identifier hs-type">CommitteePurpose</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1663"></span><span>  </span><span class="annot"><span class="hs-comment">-- | CC members to remove</span></span><span>
</span><span id="line-1664"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1665"></span><span>  </span><span class="annot"><span class="hs-comment">-- | CC members to add</span></span><span>
</span><span id="line-1666"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochInterval"><span class="hs-identifier hs-type">EpochInterval</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1667"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#UnitInterval"><span class="hs-identifier hs-type">UnitInterval</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1668"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854630"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span></span><span>
</span><span id="line-1669"></span><span id="submitUpdateCommittee"><span class="annot"><span class="annottext">submitUpdateCommittee :: forall era.
ConwayEraImp era =&gt;
Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; [(Credential 'ColdCommitteeRole, EpochInterval)]
-&gt; UnitInterval
-&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitUpdateCommittee"><span class="hs-identifier hs-var hs-var">submitUpdateCommittee</span></a></span></span><span> </span><span id="local-6989586621686860693"><span class="annot"><span class="annottext">Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
</span><a href="#local-6989586621686860693"><span class="hs-identifier hs-var">mParent</span></a></span></span><span> </span><span id="local-6989586621686860694"><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860694"><span class="hs-identifier hs-var">ccsToRemove</span></a></span></span><span> </span><span id="local-6989586621686860695"><span class="annot"><span class="annottext">[(Credential 'ColdCommitteeRole, EpochInterval)]
</span><a href="#local-6989586621686860695"><span class="hs-identifier hs-var">ccsToAdd</span></a></span></span><span> </span><span id="local-6989586621686860696"><span class="annot"><span class="annottext">UnitInterval
</span><a href="#local-6989586621686860696"><span class="hs-identifier hs-var">threshold</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1670"></span><span>  </span><span class="annot"><span class="annottext">Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; [(Credential 'ColdCommitteeRole, EpochInterval)]
-&gt; UnitInterval
-&gt; ImpTestM era (ProposalProcedure era)
forall era.
ConwayEraImp era =&gt;
Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
-&gt; Set (Credential 'ColdCommitteeRole)
-&gt; [(Credential 'ColdCommitteeRole, EpochInterval)]
-&gt; UnitInterval
-&gt; ImpTestM era (ProposalProcedure era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#mkUpdateCommitteeProposal"><span class="hs-identifier hs-var">mkUpdateCommitteeProposal</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (StrictMaybe (GovPurposeId 'CommitteePurpose))
</span><a href="#local-6989586621686860693"><span class="hs-identifier hs-var">mParent</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860694"><span class="hs-identifier hs-var">ccsToRemove</span></a></span><span> </span><span class="annot"><span class="annottext">[(Credential 'ColdCommitteeRole, EpochInterval)]
</span><a href="#local-6989586621686860695"><span class="hs-identifier hs-var">ccsToAdd</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInterval
</span><a href="#local-6989586621686860696"><span class="hs-identifier hs-var">threshold</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (ProposalProcedure era)
-&gt; (ProposalProcedure era -&gt; ImpM (LedgerSpec era) GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var">submitProposal</span></a></span><span>
</span><span id="line-1671"></span><span>
</span><span id="line-1672"></span><span id="local-6989586621686860697"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberPresence"><span class="hs-identifier hs-type">expectCommitteeMemberPresence</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1673"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860697"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860697"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1674"></span><span id="expectCommitteeMemberPresence"><span class="annot"><span class="annottext">expectCommitteeMemberPresence :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberPresence"><span class="hs-identifier hs-var hs-var">expectCommitteeMemberPresence</span></a></span></span><span> </span><span id="local-6989586621686860711"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860711"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1675"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621686860712"><span class="annot"><span class="annottext">Committee era
</span><a href="#local-6989586621686860712"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1676"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; ImpTestM era ()
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; Bool -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertBool"><span class="hs-identifier hs-var">assertBool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected Committee Member: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860711"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; to be present in the committee&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era ()) -&gt; Bool -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1677"></span><span>    </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.member</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860711"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Committee era
</span><a href="#local-6989586621686860712"><span class="hs-identifier hs-var">committee</span></a></span><span> </span><span class="annot"><span class="annottext">Committee era
-&gt; Getting
     (Map (Credential 'ColdCommitteeRole) EpochNo)
     (Committee era)
     (Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'ColdCommitteeRole) EpochNo)
  (Committee era)
  (Map (Credential 'ColdCommitteeRole) EpochNo)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'ColdCommitteeRole) EpochNo
 -&gt; f (Map (Credential 'ColdCommitteeRole) EpochNo))
-&gt; Committee era -&gt; f (Committee era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembersL"><span class="hs-identifier hs-var">committeeMembersL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1678"></span><span>
</span><span id="line-1679"></span><span id="local-6989586621686860717"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberAbsence"><span class="hs-identifier hs-type">expectCommitteeMemberAbsence</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1680"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860717"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860717"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1681"></span><span id="expectCommitteeMemberAbsence"><span class="annot"><span class="annottext">expectCommitteeMemberAbsence :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Credential 'ColdCommitteeRole -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectCommitteeMemberAbsence"><span class="hs-identifier hs-var hs-var">expectCommitteeMemberAbsence</span></a></span></span><span> </span><span id="local-6989586621686860731"><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860731"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1682"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-type">SJust</span></a></span><span> </span><span id="local-6989586621686860732"><span class="annot"><span class="annottext">Committee era
</span><a href="#local-6989586621686860732"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1683"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; ImpTestM era ()
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; Bool -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#assertBool"><span class="hs-identifier hs-var">assertBool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected Committee Member: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860731"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; to be absent from the committee&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; ImpTestM era ()) -&gt; Bool -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1684"></span><span>    </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.notMember</span></span><span> </span><span class="annot"><span class="annottext">Credential 'ColdCommitteeRole
</span><a href="#local-6989586621686860731"><span class="hs-identifier hs-var">cc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Committee era
</span><a href="#local-6989586621686860732"><span class="hs-identifier hs-var">committee</span></a></span><span> </span><span class="annot"><span class="annottext">Committee era
-&gt; Getting
     (Map (Credential 'ColdCommitteeRole) EpochNo)
     (Committee era)
     (Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'ColdCommitteeRole) EpochNo)
  (Committee era)
  (Map (Credential 'ColdCommitteeRole) EpochNo)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'ColdCommitteeRole) EpochNo
 -&gt; f (Map (Credential 'ColdCommitteeRole) EpochNo))
-&gt; Committee era -&gt; f (Committee era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembersL"><span class="hs-identifier hs-var">committeeMembersL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1685"></span><span>
</span><span id="line-1686"></span><span id="local-6989586621686854638"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#donateToTreasury"><span class="hs-identifier hs-type">donateToTreasury</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1687"></span><span id="donateToTreasury"><span class="annot"><span class="annottext">donateToTreasury :: forall era. ConwayEraImp era =&gt; Coin -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#donateToTreasury"><span class="hs-identifier hs-var hs-var">donateToTreasury</span></a></span></span><span> </span><span id="local-6989586621686860782"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860782"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1688"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Donation to treasury in the amount of: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860782"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) () -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1689"></span><span>    </span><span id="local-6989586621686860783"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860783"><span class="hs-identifier hs-var">treasuryStart</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) Coin
Lens' (NewEpochState era) Coin
forall (t :: * -&gt; *) era.
CanSetChainAccountState t =&gt;
Lens' (t era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.ChainAccount.html#treasuryL"><span class="hs-identifier hs-var">treasuryL</span></a></span><span>
</span><span id="line-1690"></span><span>    </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era)
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Coin -&gt; Identity Coin) -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Coin -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860782"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1691"></span><span>    </span><span id="local-6989586621686860787"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860787"><span class="hs-identifier hs-var">treasuryEndEpoch0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) Coin
Lens' (NewEpochState era) Coin
forall (t :: * -&gt; *) era.
CanSetChainAccountState t =&gt;
Lens' (t era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.ChainAccount.html#treasuryL"><span class="hs-identifier hs-var">treasuryL</span></a></span><span>
</span><span id="line-1692"></span><span>    </span><span class="hs-comment">-- Actual donation happens on the epoch boundary</span><span>
</span><span id="line-1693"></span><span>    </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860783"><span class="hs-identifier hs-var">treasuryStart</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860787"><span class="hs-identifier hs-var">treasuryEndEpoch0</span></a></span><span>
</span><span id="line-1694"></span><span>    </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) ()
forall era. (ShelleyEraImp era, HasCallStack) =&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-var">passEpoch</span></a></span><span>
</span><span id="line-1695"></span><span>    </span><span id="local-6989586621686860791"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860791"><span class="hs-identifier hs-var">treasuryEndEpoch1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) Coin -&gt; ImpTestM era Coin
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; Const r Coin)
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) Coin
Lens' (NewEpochState era) Coin
forall (t :: * -&gt; *) era.
CanSetChainAccountState t =&gt;
Lens' (t era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.ChainAccount.html#treasuryL"><span class="hs-identifier hs-var">treasuryL</span></a></span><span>
</span><span id="line-1696"></span><span>    </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860791"><span class="hs-identifier hs-var">treasuryEndEpoch1</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; Coin
forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#%3C-%3E"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860783"><span class="hs-identifier hs-var">treasuryStart</span></a></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; Coin -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860782"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-1697"></span><span>
</span><span id="line-1698"></span><span id="local-6989586621686854644"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMembers"><span class="hs-identifier hs-type">expectMembers</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1699"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854644"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1700"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#ColdCommitteeRole"><span class="hs-identifier hs-type">ColdCommitteeRole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1701"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854644"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1702"></span><span id="expectMembers"><span class="annot"><span class="annottext">expectMembers :: forall era.
(HasCallStack, ConwayEraGov era) =&gt;
Set (Credential 'ColdCommitteeRole) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#expectMembers"><span class="hs-identifier hs-var hs-var">expectMembers</span></a></span></span><span> </span><span id="local-6989586621686860809"><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860809"><span class="hs-identifier hs-var">expKhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1703"></span><span>  </span><span id="local-6989586621686860810"><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686860810"><span class="hs-identifier hs-var">committee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#newEpochStateGovStateL"><span class="hs-identifier hs-var">newEpochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1704"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621686860814"><span class="annot"><span class="annottext">members :: Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860814"><span class="hs-identifier hs-var hs-var">members</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Set (Credential 'ColdCommitteeRole)
forall k a. Map k a -&gt; Set k
</span><span class="hs-identifier hs-var">Map.keysSet</span></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'ColdCommitteeRole) EpochNo
 -&gt; Set (Credential 'ColdCommitteeRole))
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
-&gt; Set (Credential 'ColdCommitteeRole)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo)
-&gt; StrictMaybe (Committee era)
-&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; StrictMaybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap'</span></span><span> </span><span class="annot"><span class="annottext">Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
forall era.
Committee era -&gt; Map (Credential 'ColdCommitteeRole) EpochNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#committeeMembers"><span class="hs-identifier hs-var">committeeMembers</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Committee era)
</span><a href="#local-6989586621686860810"><span class="hs-identifier hs-var">committee</span></a></span><span>
</span><span id="line-1705"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a t. NFData a =&gt; String -&gt; ImpM t a -&gt; ImpM t a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expecting committee members&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpTestM era () -&gt; ImpTestM era ())
-&gt; ImpTestM era () -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860814"><span class="hs-identifier hs-var">members</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
-&gt; Set (Credential 'ColdCommitteeRole) -&gt; ImpTestM era ()
forall (m :: * -&gt; *) a.
(HasCallStack, MonadIO m, Show a, Eq a) =&gt;
a -&gt; a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-lifted-0.10.0-3b9af14f4044ae8391bddf2d12815688264dd87b731d8f5b89bdb0b08f389286/share/doc/html/src/Test.Hspec.Expectations.Lifted.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'ColdCommitteeRole)
</span><a href="#local-6989586621686860809"><span class="hs-identifier hs-var">expKhs</span></a></span><span>
</span><span id="line-1706"></span><span>
</span><span id="line-1707"></span><span id="local-6989586621686854648"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#showConwayTxBalance"><span class="hs-identifier hs-type">showConwayTxBalance</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1708"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#EraUTxO"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1709"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1710"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1711"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1712"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#PParams"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1713"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#CertState"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1714"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#UTxO"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1715"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854648"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1716"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-1717"></span><span id="showConwayTxBalance"><span class="annot"><span class="annottext">showConwayTxBalance :: forall era.
(EraUTxO era, ConwayEraTxBody era, ConwayEraCertState era) =&gt;
PParams era -&gt; CertState era -&gt; UTxO era -&gt; Tx era -&gt; String
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#showConwayTxBalance"><span class="hs-identifier hs-var hs-var">showConwayTxBalance</span></a></span></span><span> </span><span id="local-6989586621686860895"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860895"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span id="local-6989586621686860896"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span id="local-6989586621686860897"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621686860897"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span id="local-6989586621686860898"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686860898"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1718"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span>
</span><span id="line-1719"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
Item [String]
</span><span class="hs-string">&quot;Consumed:&quot;</span></span><span>
</span><span id="line-1720"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tInputs:     \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value era -&gt; Coin
forall t. Val t =&gt; t -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#coin"><span class="hs-identifier hs-var">coin</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621686860900"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1721"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tRefunds:    \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860901"><span class="hs-identifier hs-var">refunds</span></a></span><span>
</span><span id="line-1722"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tWithdrawals \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686860902"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-1723"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tTotal:      \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; String) -&gt; (Value era -&gt; Coin) -&gt; Value era -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value era -&gt; Coin
forall t. Val t =&gt; t -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#coin"><span class="hs-identifier hs-var">coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Value era -&gt; String) -&gt; Value era -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; CertState era -&gt; UTxO era -&gt; TxBody era -&gt; Value era
forall era.
EraUTxO era =&gt;
PParams era -&gt; CertState era -&gt; UTxO era -&gt; TxBody era -&gt; Value era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#consumed"><span class="hs-identifier hs-var">consumed</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860895"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621686860897"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1724"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
Item [String]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1725"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
Item [String]
</span><span class="hs-string">&quot;Produced:&quot;</span></span><span>
</span><span id="line-1726"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tOutputs:   \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value era -&gt; Coin
forall t. Val t =&gt; t -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#coin"><span class="hs-identifier hs-var">coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Value era -&gt; Coin) -&gt; Value era -&gt; Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (TxOut era) -&gt; Value era
forall era (f :: * -&gt; *).
(EraTxOut era, Foldable f) =&gt;
f (TxOut era) -&gt; Value era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#sumAllValue"><span class="hs-identifier hs-var">sumAllValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
-&gt; Getting
     (StrictSeq (TxOut era)) (TxBody era) (StrictSeq (TxOut era))
-&gt; StrictSeq (TxOut era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (StrictSeq (TxOut era)) (TxBody era) (StrictSeq (TxOut era))
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1727"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tDonations: \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Getting Coin (TxBody era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (TxBody era) Coin
forall era. ConwayEraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#treasuryDonationTxBodyL"><span class="hs-identifier hs-var">treasuryDonationTxBodyL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1728"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tDeposits:  \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams era -&gt; (KeyHash 'StakePool -&gt; Bool) -&gt; TxBody era -&gt; Coin
forall era.
EraTxBody era =&gt;
PParams era -&gt; (KeyHash 'StakePool -&gt; Bool) -&gt; TxBody era -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#getTotalDepositsTxBody"><span class="hs-identifier hs-var">getTotalDepositsTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860895"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool -&gt; Bool
</span><a href="#local-6989586621686860907"><span class="hs-identifier hs-var">isRegPoolId</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1729"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tFees:      \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Getting Coin (TxBody era) Coin -&gt; Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Coin (TxBody era) Coin
forall era. EraTxBody era =&gt; Lens' (TxBody era) Coin
Lens' (TxBody era) Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#feeTxBodyL"><span class="hs-identifier hs-var">feeTxBodyL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1730"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\tTotal:     \t&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; String) -&gt; (Value era -&gt; Coin) -&gt; Value era -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Value era -&gt; Coin
forall t. Val t =&gt; t -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Val.html#coin"><span class="hs-identifier hs-var">coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Value era -&gt; String) -&gt; Value era -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; CertState era -&gt; TxBody era -&gt; Value era
forall era.
(EraUTxO era, EraCertState era) =&gt;
PParams era -&gt; CertState era -&gt; TxBody era -&gt; Value era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.UTxO.html#produced"><span class="hs-identifier hs-var">produced</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860895"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1731"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1732"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1733"></span><span>    </span><span id="local-6989586621686860904"><span class="annot"><span class="annottext">txBody :: TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686860898"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; Getting (TxBody era) (Tx era) (TxBody era) -&gt; TxBody era
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (TxBody era) (Tx era) (TxBody era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span>
</span><span id="line-1734"></span><span>    </span><span id="local-6989586621686860900"><span class="annot"><span class="annottext">inputs :: Value era
</span><a href="#local-6989586621686860900"><span class="hs-identifier hs-var hs-var">inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxO era -&gt; Value era
forall era. EraTxOut era =&gt; UTxO era -&gt; Value era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#sumUTxO"><span class="hs-identifier hs-var">sumUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxO era -&gt; Set TxIn -&gt; UTxO era
forall era. UTxO era -&gt; Set TxIn -&gt; UTxO era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#txInsFilter"><span class="hs-identifier hs-var">txInsFilter</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621686860897"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
-&gt; Getting (Set TxIn) (TxBody era) (Set TxIn) -&gt; Set TxIn
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Set TxIn) (TxBody era) (Set TxIn)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1735"></span><span>    </span><span id="local-6989586621686860901"><span class="annot"><span class="annottext">refunds :: Coin
</span><a href="#local-6989586621686860901"><span class="hs-identifier hs-var hs-var">refunds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1736"></span><span>      </span><span class="annot"><span class="annottext">PParams era
-&gt; (Credential 'Staking -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole -&gt; Maybe Coin)
-&gt; TxBody era
-&gt; Coin
forall era.
EraTxBody era =&gt;
PParams era
-&gt; (Credential 'Staking -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole -&gt; Maybe Coin)
-&gt; TxBody era
-&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#getTotalRefundsTxBody"><span class="hs-identifier hs-var">getTotalRefundsTxBody</span></a></span><span>
</span><span id="line-1737"></span><span>        </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860895"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-1738"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState era -&gt; Credential 'Staking -&gt; Maybe Coin
forall era.
EraAccounts era =&gt;
DState era -&gt; Credential 'Staking -&gt; Maybe Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#lookupDepositDState"><span class="hs-identifier hs-var">lookupDepositDState</span></a></span><span> </span><span class="annot"><span class="annottext">(DState era -&gt; Credential 'Staking -&gt; Maybe Coin)
-&gt; DState era -&gt; Credential 'Staking -&gt; Maybe Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
-&gt; Getting (DState era) (CertState era) (DState era) -&gt; DState era
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (DState era) (CertState era) (DState era)
forall era. EraCertState era =&gt; Lens' (CertState era) (DState era)
Lens' (CertState era) (DState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#certDStateL"><span class="hs-identifier hs-var">certDStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1739"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VState era -&gt; Credential 'DRepRole -&gt; Maybe Coin
forall era. VState era -&gt; Credential 'DRepRole -&gt; Maybe Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.VState.html#lookupDepositVState"><span class="hs-identifier hs-var">lookupDepositVState</span></a></span><span> </span><span class="annot"><span class="annottext">(VState era -&gt; Credential 'DRepRole -&gt; Maybe Coin)
-&gt; VState era -&gt; Credential 'DRepRole -&gt; Maybe Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
-&gt; Getting (VState era) (CertState era) (VState era) -&gt; VState era
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (VState era) (CertState era) (VState era)
forall era.
ConwayEraCertState era =&gt;
Lens' (CertState era) (VState era)
Lens' (CertState era) (VState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#certVStateL"><span class="hs-identifier hs-var">certVStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1740"></span><span>        </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-1741"></span><span>    </span><span id="local-6989586621686860907"><span class="annot"><span class="annottext">isRegPoolId :: KeyHash 'StakePool -&gt; Bool
</span><a href="#local-6989586621686860907"><span class="hs-identifier hs-var hs-var">isRegPoolId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'StakePool
-&gt; Map (KeyHash 'StakePool) StakePoolState -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-operator hs-var">`Map.member`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860896"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
-&gt; Getting
     (Map (KeyHash 'StakePool) StakePoolState)
     (CertState era)
     (Map (KeyHash 'StakePool) StakePoolState)
-&gt; Map (KeyHash 'StakePool) StakePoolState
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(PState era
 -&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (PState era))
-&gt; CertState era
-&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (CertState era)
forall era. EraCertState era =&gt; Lens' (CertState era) (PState era)
Lens' (CertState era) (PState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#certPStateL"><span class="hs-identifier hs-var">certPStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((PState era
  -&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (PState era))
 -&gt; CertState era
 -&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (CertState era))
-&gt; ((Map (KeyHash 'StakePool) StakePoolState
     -&gt; Const
          (Map (KeyHash 'StakePool) StakePoolState)
          (Map (KeyHash 'StakePool) StakePoolState))
    -&gt; PState era
    -&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (PState era))
-&gt; Getting
     (Map (KeyHash 'StakePool) StakePoolState)
     (CertState era)
     (Map (KeyHash 'StakePool) StakePoolState)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) StakePoolState
 -&gt; Const
      (Map (KeyHash 'StakePool) StakePoolState)
      (Map (KeyHash 'StakePool) StakePoolState))
-&gt; PState era
-&gt; Const (Map (KeyHash 'StakePool) StakePoolState) (PState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool) StakePoolState
 -&gt; f (Map (KeyHash 'StakePool) StakePoolState))
-&gt; PState era -&gt; f (PState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#psStakePoolsL"><span class="hs-identifier hs-var">psStakePoolsL</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1742"></span><span>    </span><span id="local-6989586621686860902"><span class="annot"><span class="annottext">withdrawals :: Coin
</span><a href="#local-6989586621686860902"><span class="hs-identifier hs-var hs-var">withdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; Coin
forall m. Monoid m =&gt; Map RewardAccount m -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">(Map RewardAccount Coin -&gt; Coin)
-&gt; (Withdrawals -&gt; Map RewardAccount Coin) -&gt; Withdrawals -&gt; Coin
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Withdrawals -&gt; Map RewardAccount Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#unWithdrawals"><span class="hs-identifier hs-var">unWithdrawals</span></a></span><span> </span><span class="annot"><span class="annottext">(Withdrawals -&gt; Coin) -&gt; Withdrawals -&gt; Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621686860904"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
-&gt; Getting Withdrawals (TxBody era) Withdrawals -&gt; Withdrawals
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting Withdrawals (TxBody era) Withdrawals
forall era. EraTxBody era =&gt; Lens' (TxBody era) Withdrawals
Lens' (TxBody era) Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#withdrawalsTxBodyL"><span class="hs-identifier hs-var">withdrawalsTxBodyL</span></a></span><span>
</span><span id="line-1743"></span><span>
</span><span id="line-1744"></span><span id="local-6989586621686854664"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logConwayTxBalance"><span class="hs-identifier hs-type">logConwayTxBalance</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1745"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#EraUTxO"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1746"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1747"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.TxBody.html#ConwayEraTxBody"><span class="hs-identifier hs-type">ConwayEraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1748"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.State.CertState.html#ConwayEraCertState"><span class="hs-identifier hs-type">ConwayEraCertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1749"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1750"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1751"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854664"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1752"></span><span id="logConwayTxBalance"><span class="annot"><span class="annottext">logConwayTxBalance :: forall era.
(EraUTxO era, EraGov era, ConwayEraTxBody era,
 ConwayEraCertState era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#logConwayTxBalance"><span class="hs-identifier hs-var hs-var">logConwayTxBalance</span></a></span></span><span> </span><span id="local-6989586621686860933"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686860933"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1753"></span><span>  </span><span id="local-6989586621686860934"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860934"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens' (PParams era) (PParams era) -&gt; ImpTestM era (PParams era)
forall era a. EraGov era =&gt; Lens' (PParams era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsPParams"><span class="hs-identifier hs-var">getsPParams</span></a></span><span> </span><span class="annot"><span class="annottext">(PParams era -&gt; f (PParams era)) -&gt; PParams era -&gt; f (PParams era)
forall a. a -&gt; a
Lens' (PParams era) (PParams era)
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-1754"></span><span>  </span><span id="local-6989586621686860937"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860937"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (CertState era)
-&gt; ImpTestM era (CertState era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (CertState era)
 -&gt; ImpTestM era (CertState era))
-&gt; SimpleGetter (NewEpochState era) (CertState era)
-&gt; ImpTestM era (CertState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((CertState era -&gt; Const r (CertState era))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (CertState era -&gt; Const r (CertState era))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(LedgerState era -&gt; Const r (LedgerState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(LedgerState era -&gt; f (LedgerState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#esLStateL"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((LedgerState era -&gt; Const r (LedgerState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((CertState era -&gt; Const r (CertState era))
    -&gt; LedgerState era -&gt; Const r (LedgerState era))
-&gt; (CertState era -&gt; Const r (CertState era))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CertState era -&gt; Const r (CertState era))
-&gt; LedgerState era -&gt; Const r (LedgerState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(CertState era -&gt; f (CertState era))
-&gt; LedgerState era -&gt; f (LedgerState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#lsCertStateL"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span>
</span><span id="line-1755"></span><span>  </span><span id="local-6989586621686860941"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621686860941"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (UTxO era)
-&gt; ImpTestM era (UTxO era)
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(UTxO era -&gt; Const r (UTxO era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
SimpleGetter (NewEpochState era) (UTxO era)
forall era. Lens' (NewEpochState era) (UTxO era)
forall (t :: * -&gt; *) era. CanSetUTxO t =&gt; Lens' (t era) (UTxO era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#utxoL"><span class="hs-identifier hs-var">utxoL</span></a></span><span>
</span><span id="line-1756"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ImpTestM era ()
forall t. HasCallStack =&gt; String -&gt; ImpM t ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#logString"><span class="hs-identifier hs-var">logString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ImpTestM era ()) -&gt; String -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; CertState era -&gt; UTxO era -&gt; Tx era -&gt; String
forall era.
(EraUTxO era, ConwayEraTxBody era, ConwayEraCertState era) =&gt;
PParams era -&gt; CertState era -&gt; UTxO era -&gt; Tx era -&gt; String
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#showConwayTxBalance"><span class="hs-identifier hs-var">showConwayTxBalance</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621686860934"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621686860937"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621686860941"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621686860933"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1757"></span><span>
</span><span id="line-1758"></span><span id="local-6989586621686854674"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingVote"><span class="hs-identifier hs-type">submitBootstrapAwareFailingVote</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1759"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854674"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1760"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Vote"><span class="hs-identifier hs-type">Vote</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1761"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Voter"><span class="hs-identifier hs-type">Voter</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1762"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1763"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier hs-type">SubmitFailureExpectation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854674"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1764"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854674"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1765"></span><span id="submitBootstrapAwareFailingVote"><span class="annot"><span class="annottext">submitBootstrapAwareFailingVote :: forall era.
ConwayEraImp era =&gt;
Vote
-&gt; Voter
-&gt; GovActionId
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingVote"><span class="hs-identifier hs-var hs-var">submitBootstrapAwareFailingVote</span></a></span></span><span> </span><span id="local-6989586621686860964"><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686860964"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span id="local-6989586621686860965"><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686860965"><span class="hs-identifier hs-var">voter</span></a></span></span><span> </span><span id="local-6989586621686860966"><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860966"><span class="hs-identifier hs-var">gaId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1766"></span><span>  </span><span class="annot"><span class="annottext">ImpTestM era ()
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpTestM era ())
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era ()
forall era a.
EraGov era =&gt;
ImpTestM era a
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpTestM era a)
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAware"><span class="hs-identifier hs-var">submitBootstrapAware</span></a></span><span>
</span><span id="line-1767"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Vote -&gt; Voter -&gt; GovActionId -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitVote_"><span class="hs-identifier hs-var">submitVote_</span></a></span><span> </span><span class="annot"><span class="annottext">Vote
</span><a href="#local-6989586621686860964"><span class="hs-identifier hs-var">vote</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686860965"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860966"><span class="hs-identifier hs-var">gaId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1768"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Voter
-&gt; GovActionId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
Voter
-&gt; GovActionId
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingVote"><span class="hs-identifier hs-var">submitFailingVote</span></a></span><span> </span><span class="annot"><span class="annottext">Voter
</span><a href="#local-6989586621686860965"><span class="hs-identifier hs-var">voter</span></a></span><span> </span><span class="annot"><span class="annottext">GovActionId
</span><a href="#local-6989586621686860966"><span class="hs-identifier hs-var">gaId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1769"></span><span>
</span><span id="line-1770"></span><span id="local-6989586621686854679"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal"><span class="hs-identifier hs-type">submitBootstrapAwareFailingProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1771"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854679"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1772"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854679"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1773"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier hs-type">SubmitFailureExpectation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854679"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1774"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854679"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#GovActionId"><span class="hs-identifier hs-type">GovActionId</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1775"></span><span id="submitBootstrapAwareFailingProposal"><span class="annot"><span class="annottext">submitBootstrapAwareFailingProposal :: forall era.
ConwayEraImp era =&gt;
ProposalProcedure era
-&gt; SubmitFailureExpectation era -&gt; ImpTestM era (Maybe GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal"><span class="hs-identifier hs-var hs-var">submitBootstrapAwareFailingProposal</span></a></span></span><span> </span><span id="local-6989586621686860987"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860987"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1776"></span><span>  </span><span class="annot"><span class="annottext">ImpTestM era (Maybe GovActionId)
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpTestM era (Maybe GovActionId))
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era (Maybe GovActionId)
forall era a.
EraGov era =&gt;
ImpTestM era a
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpTestM era a)
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAware"><span class="hs-identifier hs-var">submitBootstrapAware</span></a></span><span>
</span><span id="line-1777"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GovActionId -&gt; Maybe GovActionId
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(GovActionId -&gt; Maybe GovActionId)
-&gt; ImpM (LedgerSpec era) GovActionId
-&gt; ImpTestM era (Maybe GovActionId)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era -&gt; ImpM (LedgerSpec era) GovActionId
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era -&gt; ImpTestM era GovActionId
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitProposal"><span class="hs-identifier hs-var">submitProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860987"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1778"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe GovActionId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe GovActionId
-&gt; ImpM (LedgerSpec era) () -&gt; ImpTestM era (Maybe GovActionId)
forall a b. a -&gt; ImpM (LedgerSpec era) b -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) () -&gt; ImpTestM era (Maybe GovActionId))
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpM (LedgerSpec era) ())
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era (Maybe GovActionId)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(ShelleyEraImp era, ConwayEraTxBody era, HasCallStack) =&gt;
ProposalProcedure era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitFailingProposal"><span class="hs-identifier hs-var">submitFailingProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860987"><span class="hs-identifier hs-var">proposal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1779"></span><span>
</span><span id="line-1780"></span><span id="local-6989586621686854683"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal_"><span class="hs-identifier hs-type">submitBootstrapAwareFailingProposal_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1781"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854683"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1782"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#ProposalProcedure"><span class="hs-identifier hs-type">ProposalProcedure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854683"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1783"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier hs-type">SubmitFailureExpectation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854683"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1784"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854683"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1785"></span><span id="submitBootstrapAwareFailingProposal_"><span class="annot"><span class="annottext">submitBootstrapAwareFailingProposal_ :: forall era.
ConwayEraImp era =&gt;
ProposalProcedure era
-&gt; SubmitFailureExpectation era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal_"><span class="hs-identifier hs-var hs-var">submitBootstrapAwareFailingProposal_</span></a></span></span><span> </span><span id="local-6989586621686860992"><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860992"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (Maybe GovActionId)
-&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (Maybe GovActionId)
 -&gt; ImpM (LedgerSpec era) ())
-&gt; (SubmitFailureExpectation era
    -&gt; ImpM (LedgerSpec era) (Maybe GovActionId))
-&gt; SubmitFailureExpectation era
-&gt; ImpM (LedgerSpec era) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
-&gt; SubmitFailureExpectation era
-&gt; ImpM (LedgerSpec era) (Maybe GovActionId)
forall era.
ConwayEraImp era =&gt;
ProposalProcedure era
-&gt; SubmitFailureExpectation era -&gt; ImpTestM era (Maybe GovActionId)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAwareFailingProposal"><span class="hs-identifier hs-var">submitBootstrapAwareFailingProposal</span></a></span><span> </span><span class="annot"><span class="annottext">ProposalProcedure era
</span><a href="#local-6989586621686860992"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="hs-keyword">data</span><span> </span><span id="SubmitFailureExpectation"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier hs-var">SubmitFailureExpectation</span></a></span></span><span> </span><span id="local-6989586621686860993"><span class="annot"><a href="#local-6989586621686860993"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-1788"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="FailBootstrap"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBootstrap"><span class="hs-identifier hs-var">FailBootstrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686860993"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FailPostBootstrap"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailPostBootstrap"><span class="hs-identifier hs-var">FailPostBootstrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686860993"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1790"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FailBootstrapAndPostBootstrap"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBootstrapAndPostBootstrap"><span class="hs-identifier hs-var">FailBootstrapAndPostBootstrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBoth"><span class="hs-identifier hs-type">FailBoth</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686860993"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1791"></span><span>
</span><span id="line-1792"></span><span class="hs-keyword">data</span><span> </span><span id="FailBoth"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBoth"><span class="hs-identifier hs-var">FailBoth</span></a></span></span><span> </span><span id="local-6989586621686854685"><span class="annot"><a href="#local-6989586621686854685"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FailBoth"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBoth"><span class="hs-identifier hs-var">FailBoth</span></a></span></span><span>
</span><span id="line-1793"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="bootstrapFailures"><span class="annot"><span class="annottext">forall era.
FailBoth era -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#bootstrapFailures"><span class="hs-identifier hs-var hs-var">bootstrapFailures</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854685"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1794"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="postBootstrapFailures"><span class="annot"><span class="annottext">forall era.
FailBoth era -&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#postBootstrapFailures"><span class="hs-identifier hs-var hs-var">postBootstrapFailures</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854685"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1795"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1796"></span><span>
</span><span id="line-1797"></span><span id="local-6989586621686854677"><span id="local-6989586621686854678"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAware"><span class="hs-identifier hs-type">submitBootstrapAware</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1798"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Governance.html#EraGov"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1799"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854678"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1800"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#EraRule"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854678"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1801"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#SubmitFailureExpectation"><span class="hs-identifier hs-type">SubmitFailureExpectation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1802"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854677"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854678"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1803"></span><span id="submitBootstrapAware"><span class="annot"><span class="annottext">submitBootstrapAware :: forall era a.
EraGov era =&gt;
ImpTestM era a
-&gt; (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
    -&gt; ImpTestM era a)
-&gt; SubmitFailureExpectation era
-&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#submitBootstrapAware"><span class="hs-identifier hs-var hs-var">submitBootstrapAware</span></a></span></span><span> </span><span id="local-6989586621686861004"><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686861004"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span id="local-6989586621686861005"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era a
</span><a href="#local-6989586621686861005"><span class="hs-identifier hs-var">failAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1804"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1805"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBootstrap"><span class="hs-identifier hs-type">FailBootstrap</span></a></span><span> </span><span id="local-6989586621686861006"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861006"><span class="hs-identifier hs-var">failures</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1806"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
forall era a.
EraGov era =&gt;
ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier hs-var">ifBootstrap</span></a></span><span>
</span><span id="line-1807"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era a
</span><a href="#local-6989586621686861005"><span class="hs-identifier hs-var">failAction</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861006"><span class="hs-identifier hs-var">failures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1808"></span><span>        </span><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686861004"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1809"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailPostBootstrap"><span class="hs-identifier hs-type">FailPostBootstrap</span></a></span><span> </span><span id="local-6989586621686861007"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861007"><span class="hs-identifier hs-var">failures</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1810"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
forall era a.
EraGov era =&gt;
ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier hs-var">ifBootstrap</span></a></span><span>
</span><span id="line-1811"></span><span>        </span><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621686861004"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-1812"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era a
</span><a href="#local-6989586621686861005"><span class="hs-identifier hs-var">failAction</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861007"><span class="hs-identifier hs-var">failures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1813"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBootstrapAndPostBootstrap"><span class="hs-identifier hs-type">FailBootstrapAndPostBootstrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#FailBoth"><span class="hs-identifier hs-type">FailBoth</span></a></span><span> </span><span id="local-6989586621686861008"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861008"><span class="hs-identifier hs-var">bFailures</span></a></span></span><span> </span><span id="local-6989586621686861009"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861009"><span class="hs-identifier hs-var">pBFailures</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1814"></span><span>      </span><span class="annot"><span class="annottext">ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
forall era a.
EraGov era =&gt;
ImpTestM era a -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ifBootstrap"><span class="hs-identifier hs-var">ifBootstrap</span></a></span><span>
</span><span id="line-1815"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era a
</span><a href="#local-6989586621686861005"><span class="hs-identifier hs-var">failAction</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861008"><span class="hs-identifier hs-var">bFailures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1816"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era a
</span><a href="#local-6989586621686861005"><span class="hs-identifier hs-var">failAction</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621686861009"><span class="hs-identifier hs-var">pBFailures</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span id="local-6989586621686854691"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateSPORewardAddressToDRep_"><span class="hs-identifier hs-type">delegateSPORewardAddressToDRep_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1819"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#ConwayEraImp"><span class="hs-identifier hs-type">ConwayEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854691"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1820"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1821"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1822"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1823"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854691"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1824"></span><span id="delegateSPORewardAddressToDRep_"><span class="annot"><span class="annottext">delegateSPORewardAddressToDRep_ :: forall era.
ConwayEraImp era =&gt;
KeyHash 'StakePool -&gt; Coin -&gt; DRep -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateSPORewardAddressToDRep_"><span class="hs-identifier hs-var hs-var">delegateSPORewardAddressToDRep_</span></a></span></span><span> </span><span id="local-6989586621686861024"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686861024"><span class="hs-identifier hs-var">kh</span></a></span></span><span> </span><span id="local-6989586621686861025"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686861025"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span id="local-6989586621686861026"><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621686861026"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1825"></span><span>  </span><span id="local-6989586621686861027"><span class="annot"><span class="annottext">StakePoolState
</span><a href="#local-6989586621686861027"><span class="hs-identifier hs-var">sps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
forall era.
(ConwayEraGov era, ConwayEraCertState era) =&gt;
ImpTestM era (RatifyEnv era)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getRatifyEnv"><span class="hs-identifier hs-var">getRatifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era (RatifyEnv era)
-&gt; (RatifyEnv era -&gt; ImpM (LedgerSpec era) StakePoolState)
-&gt; ImpM (LedgerSpec era) StakePoolState
forall a b.
ImpM (LedgerSpec era) a
-&gt; (a -&gt; ImpM (LedgerSpec era) b) -&gt; ImpM (LedgerSpec era) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Maybe StakePoolState -&gt; ImpM (LedgerSpec era) StakePoolState
forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; Maybe a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.Lifted.html#expectJust"><span class="hs-identifier hs-var">expectJust</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe StakePoolState -&gt; ImpM (LedgerSpec era) StakePoolState)
-&gt; (RatifyEnv era -&gt; Maybe StakePoolState)
-&gt; RatifyEnv era
-&gt; ImpM (LedgerSpec era) StakePoolState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
-&gt; Map (KeyHash 'StakePool) StakePoolState -&gt; Maybe StakePoolState
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621686861024"><span class="hs-identifier hs-var">kh</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) StakePoolState -&gt; Maybe StakePoolState)
-&gt; (RatifyEnv era -&gt; Map (KeyHash 'StakePool) StakePoolState)
-&gt; RatifyEnv era
-&gt; Maybe StakePoolState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era -&gt; Map (KeyHash 'StakePool) StakePoolState
forall era.
RatifyEnv era -&gt; Map (KeyHash 'StakePool) StakePoolState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Internal.html#reStakePools"><span class="hs-identifier hs-var">reStakePools</span></a></span><span>
</span><span id="line-1826"></span><span>  </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyPair 'Payment) -&gt; ImpTestM era ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) (KeyPair 'Payment) -&gt; ImpTestM era ())
-&gt; ImpM (LedgerSpec era) (KeyPair 'Payment) -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1827"></span><span>    </span><span class="annot"><span class="annottext">Credential 'Staking
-&gt; Coin -&gt; DRep -&gt; ImpM (LedgerSpec era) (KeyPair 'Payment)
forall era.
ConwayEraImp era =&gt;
Credential 'Staking
-&gt; Coin -&gt; DRep -&gt; ImpTestM era (KeyPair 'Payment)
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#delegateToDRep"><span class="hs-identifier hs-var">delegateToDRep</span></a></span><span>
</span><span id="line-1828"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount -&gt; Credential 'Staking
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#raCredential"><span class="hs-identifier hs-var">raCredential</span></a></span><span> </span><span class="annot"><span class="annottext">(RewardAccount -&gt; Credential 'Staking)
-&gt; RewardAccount -&gt; Credential 'Staking
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StakePoolState -&gt; RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.StakePool.html#spsRewardAccount"><span class="hs-identifier hs-var">spsRewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">StakePoolState
</span><a href="#local-6989586621686861027"><span class="hs-identifier hs-var">sps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1829"></span><span>      </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686861025"><span class="hs-identifier hs-var">stake</span></a></span><span>
</span><span id="line-1830"></span><span>      </span><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621686861026"><span class="hs-identifier hs-var">drep</span></a></span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span class="hs-comment">-- Partial implementation used for checking predicate failures</span><span>
</span><span id="line-1833"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier hs-type">ShelleyDelegPredFailure</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1834"></span><span>  </span><span id="local-6989586621686861038"><span class="annot"><span class="annottext">injectFailure :: ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;LEDGER&quot; ConwayEra
</span><a href="#local-6989586621686861038"><span class="hs-identifier hs-var hs-var hs-var hs-var">injectFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;CERTS&quot; ConwayEra)
-&gt; ConwayLedgerPredFailure ConwayEra
ConwayCertsPredFailure ConwayEra
-&gt; ConwayLedgerPredFailure ConwayEra
forall era.
PredicateFailure (EraRule &quot;CERTS&quot; era)
-&gt; ConwayLedgerPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Ledger.html#ConwayCertsFailure"><span class="hs-identifier hs-var">ConwayCertsFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ConwayCertsPredFailure ConwayEra
 -&gt; ConwayLedgerPredFailure ConwayEra)
-&gt; (ShelleyDelegPredFailure ConwayEra
    -&gt; ConwayCertsPredFailure ConwayEra)
-&gt; ShelleyDelegPredFailure ConwayEra
-&gt; ConwayLedgerPredFailure ConwayEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;CERTS&quot; ConwayEra
ShelleyDelegPredFailure ConwayEra
-&gt; ConwayCertsPredFailure ConwayEra
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span>
</span><span id="line-1835"></span><span>
</span><span id="line-1836"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;CERTS&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier hs-type">ShelleyDelegPredFailure</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1837"></span><span>  </span><span id="local-6989586621686861047"><span class="annot"><span class="annottext">injectFailure :: ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;CERTS&quot; ConwayEra
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var hs-var hs-var hs-var">injectFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;CERT&quot; ConwayEra)
-&gt; ConwayCertsPredFailure ConwayEra
ConwayCertPredFailure ConwayEra -&gt; ConwayCertsPredFailure ConwayEra
forall era.
PredicateFailure (EraRule &quot;CERT&quot; era) -&gt; ConwayCertsPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Certs.html#CertFailure"><span class="hs-identifier hs-var">CertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ConwayCertPredFailure ConwayEra
 -&gt; ConwayCertsPredFailure ConwayEra)
-&gt; (ShelleyDelegPredFailure ConwayEra
    -&gt; ConwayCertPredFailure ConwayEra)
-&gt; ShelleyDelegPredFailure ConwayEra
-&gt; ConwayCertsPredFailure ConwayEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;CERT&quot; ConwayEra
ShelleyDelegPredFailure ConwayEra
-&gt; ConwayCertPredFailure ConwayEra
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span>
</span><span id="line-1838"></span><span>
</span><span id="line-1839"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;CERT&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier hs-type">ShelleyDelegPredFailure</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1840"></span><span>  </span><span id="local-6989586621686861055"><span class="annot"><span class="annottext">injectFailure :: ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;CERT&quot; ConwayEra
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var hs-var hs-var hs-var">injectFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure (EraRule &quot;DELEG&quot; ConwayEra)
-&gt; ConwayCertPredFailure ConwayEra
ConwayDelegPredFailure ConwayEra -&gt; ConwayCertPredFailure ConwayEra
forall era.
PredicateFailure (EraRule &quot;DELEG&quot; era) -&gt; ConwayCertPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Cert.html#DelegFailure"><span class="hs-identifier hs-var">DelegFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ConwayDelegPredFailure ConwayEra
 -&gt; ConwayCertPredFailure ConwayEra)
-&gt; (ShelleyDelegPredFailure ConwayEra
    -&gt; ConwayDelegPredFailure ConwayEra)
-&gt; ShelleyDelegPredFailure ConwayEra
-&gt; ConwayCertPredFailure ConwayEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;DELEG&quot; ConwayEra
ShelleyDelegPredFailure ConwayEra
-&gt; ConwayDelegPredFailure ConwayEra
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span>
</span><span id="line-1841"></span><span>
</span><span id="line-1842"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#InjectRuleFailure"><span class="hs-identifier hs-type">InjectRuleFailure</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;DELEG&quot;</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier hs-type">ShelleyDelegPredFailure</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#ConwayEra"><span class="hs-identifier hs-type">ConwayEra</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1843"></span><span>  </span><span id="local-6989586621686861063"><span class="annot"><span class="annottext">injectFailure :: ShelleyDelegPredFailure ConwayEra
-&gt; EraRuleFailure &quot;DELEG&quot; ConwayEra
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var hs-var hs-var hs-var">injectFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#StakeKeyAlreadyRegisteredDELEG"><span class="hs-identifier hs-type">Shelley.StakeKeyAlreadyRegisteredDELEG</span></a></span><span> </span><span id="local-6989586621686861065"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686861065"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ConwayDelegPredFailure ConwayEra
forall era. Credential 'Staking -&gt; ConwayDelegPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Deleg.html#StakeKeyRegisteredDELEG"><span class="hs-identifier hs-var">StakeKeyRegisteredDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686861065"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1844"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#StakeKeyNotRegisteredDELEG"><span class="hs-identifier hs-type">Shelley.StakeKeyNotRegisteredDELEG</span></a></span><span> </span><span id="local-6989586621686861068"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686861068"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ConwayDelegPredFailure ConwayEra
forall era. Credential 'Staking -&gt; ConwayDelegPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Deleg.html#StakeKeyNotRegisteredDELEG"><span class="hs-identifier hs-var">StakeKeyNotRegisteredDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621686861068"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1845"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#StakeKeyNonZeroAccountBalanceDELEG"><span class="hs-identifier hs-type">Shelley.StakeKeyNonZeroAccountBalanceDELEG</span></a></span><span> </span><span id="local-6989586621686861071"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686861071"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coin -&gt; ConwayDelegPredFailure ConwayEra
forall era. Coin -&gt; ConwayDelegPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Rules.Deleg.html#StakeKeyHasNonZeroRewardAccountBalanceDELEG"><span class="hs-identifier hs-var">StakeKeyHasNonZeroRewardAccountBalanceDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621686861071"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1846"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyDelegPredFailure ConwayEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ConwayDelegPredFailure ConwayEra
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot inject ShelleyDelegPredFailure into ConwayEra&quot;</span></span><span>
</span><span id="line-1847"></span><span>
</span><span id="line-1848"></span><span id="local-6989586621686854703"><span class="annot"><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommittee"><span class="hs-identifier hs-type">getCommittee</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#ConwayEraGov"><span class="hs-identifier hs-type">ConwayEraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854703"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854703"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.Procedures.html#Committee"><span class="hs-identifier hs-type">Committee</span></a></span><span> </span><span class="annot"><a href="#local-6989586621686854703"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1849"></span><span id="getCommittee"><span class="annot"><span class="annottext">getCommittee :: forall era.
ConwayEraGov era =&gt;
ImpTestM era (StrictMaybe (Committee era))
</span><a href="Test.Cardano.Ledger.Conway.ImpTest.html#getCommittee"><span class="hs-identifier hs-var hs-var">getCommittee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">(SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
 -&gt; ImpTestM era (StrictMaybe (Committee era)))
-&gt; SimpleGetter (NewEpochState era) (StrictMaybe (Committee era))
-&gt; ImpTestM era (StrictMaybe (Committee era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EpochState era -&gt; Const r (EpochState era))
-&gt; NewEpochState era -&gt; Const r (NewEpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(EpochState era -&gt; f (EpochState era))
-&gt; NewEpochState era -&gt; f (NewEpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#nesEsL"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">((EpochState era -&gt; Const r (EpochState era))
 -&gt; NewEpochState era -&gt; Const r (NewEpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; NewEpochState era
-&gt; Const r (NewEpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GovState era -&gt; Const r (GovState era))
-&gt; EpochState era -&gt; Const r (EpochState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(GovState era -&gt; f (GovState era))
-&gt; EpochState era -&gt; f (EpochState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.LedgerState.Types.html#epochStateGovStateL"><span class="hs-identifier hs-var">epochStateGovStateL</span></a></span><span> </span><span class="annot"><span class="annottext">((GovState era -&gt; Const r (GovState era))
 -&gt; EpochState era -&gt; Const r (EpochState era))
-&gt; ((StrictMaybe (Committee era)
     -&gt; Const r (StrictMaybe (Committee era)))
    -&gt; GovState era -&gt; Const r (GovState era))
-&gt; (StrictMaybe (Committee era)
    -&gt; Const r (StrictMaybe (Committee era)))
-&gt; EpochState era
-&gt; Const r (EpochState era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (Committee era)
 -&gt; Const r (StrictMaybe (Committee era)))
-&gt; GovState era -&gt; Const r (GovState era)
forall era.
ConwayEraGov era =&gt;
Lens' (GovState era) (StrictMaybe (Committee era))
Lens' (GovState era) (StrictMaybe (Committee era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-conway-1.21.0.0/doc/html/cardano-ledger-conway/src/Cardano.Ledger.Conway.Governance.html#committeeGovStateL"><span class="hs-identifier hs-var">committeeGovStateL</span></a></span><span>
</span><span id="line-1850"></span></pre></body></html>