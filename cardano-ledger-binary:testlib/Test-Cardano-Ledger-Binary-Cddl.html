<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Test.Cardano.Ledger.Binary.Cddl</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-ledger-binary-1.7.0.1: Binary serialization library used throughout ledger</span><ul class="links" id="page-menu"><li><a href="src/Test.Cardano.Ledger.Binary.Cddl.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Test.Cardano.Ledger.Binary.Cddl</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Helper functions and types</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:cddlDecoderEquivalenceSpec">cddlDecoderEquivalenceSpec</a> &#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a)) &#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></li><li class="src short"><a href="#v:cddlRoundTripCborSpec">cddlRoundTripCborSpec</a> &#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Encoding.html#t:EncCBOR" title="Cardano.Ledger.Binary.Encoding">EncCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> a) &#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></li><li class="src short"><a href="#v:cddlRoundTripExpectation">cddlRoundTripExpectation</a> &#8759; (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) &#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="Test-Cardano-Ledger-Binary-RoundTrip.html#t:Trip" title="Test.Cardano.Ledger.Binary.RoundTrip">Trip</a> a a &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a> &#8594; <a href="../hspec-core/Test-Hspec-Core-Spec.html#t:Expectation" title="Test.Hspec.Core.Spec">Expectation</a></li><li class="src short"><a href="#v:cddlRoundTripAnnCborSpec">cddlRoundTripAnnCborSpec</a> &#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Encoding.html#t:EncCBOR" title="Cardano.Ledger.Binary.Encoding">EncCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a)) &#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></li><li class="src short"><a href="#v:cddlRoundTripAnnExpectation">cddlRoundTripAnnExpectation</a> &#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) &#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="Test-Cardano-Ledger-Binary-RoundTrip.html#t:Trip" title="Test.Cardano.Ledger.Binary.RoundTrip">Trip</a> a (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a) &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a> &#8594; <a href="../hspec-core/Test-Hspec-Core-Spec.html#t:Expectation" title="Test.Hspec.Core.Spec">Expectation</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Cddl">Cddl</a> = <a href="#v:Cddl">Cddl</a> {<ul class="subs"><li><a href="#v:unCddl">unCddl</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Cbor">Cbor</a> = <a href="#v:Cbor">Cbor</a> {<ul class="subs"><li><a href="#v:unCbor">unCbor</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:DiagCbor">DiagCbor</a> = <a href="#v:DiagCbor">DiagCbor</a> {<ul class="subs"><li><a href="#v:unDiagCbor">unDiagCbor</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:CddlData">CddlData</a> = <a href="#v:CddlData">CddlData</a> {<ul class="subs"><li><a href="#v:cddlData">cddlData</a> &#8759; !<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a></li><li><a href="#v:cddlNumExamples">cddlNumExamples</a> &#8759; !<a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:CddlVarFile">CddlVarFile</a> = <a href="#v:CddlVarFile">CddlVarFile</a> {<ul class="subs"><li><a href="#v:cddlVarFilePath">cddlVarFilePath</a> &#8759; !<a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:cddlVarName">cddlVarName</a> &#8759; !<a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></li><li><a href="#v:cddlVarData">cddlVarData</a> &#8759; !<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a></li><li><a href="#v:cddlVarDiagCbor">cddlVarDiagCbor</a> &#8759; ![<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a>]</li></ul>}</li><li class="src short"><a href="#v:beforeAllCddlFile">beforeAllCddlFile</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>] &#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a> &#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:Spec" title="Test.ImpSpec">Spec</a></li><li class="src short"><a href="#v:withCddlVarFile">withCddlVarFile</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a> &#8594; (<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> b) &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> b</li><li class="src short"><a href="#v:genCddlDiagCbor">genCddlDiagCbor</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a>]</li><li class="src short"><a href="#v:diagCborToCbor">diagCborToCbor</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cbor" title="Test.Cardano.Ledger.Binary.Cddl">Cbor</a></li><li class="src short"><a href="#v:validateCddlConformance">validateCddlConformance</a> &#8759; <a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a> &#8594; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</li><li class="src short"><a href="#v:readProcessNoFailure">readProcessNoFailure</a> &#8759; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> &#8594; <a href="../typed-process/System-Process-Typed-Internal.html#t:ProcessConfig" title="System.Process.Typed.Internal">ProcessConfig</a> stdin stdout stderr &#8594; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</li><li class="src short"><a href="#v:usingTempFile">usingTempFile</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; (<a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> a) &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:cddlDecoderEquivalenceSpec" class="def">cddlDecoderEquivalenceSpec</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#cddlDecoderEquivalenceSpec" class="link">Source</a> <a href="#v:cddlDecoderEquivalenceSpec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a></td><td class="doc"><p>Serialization version</p></td></tr><tr><td class="src">&#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></td><td class="doc"><p>Name of the CDDL variable to test</p></td></tr><tr><td class="src">&#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Using the supplied <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></code> inside the <code><a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a></code>, generate random data
 and verify that decoding with `DecCBOR (Annotator)` produces the same result
 as decoding with <code><a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:cddlRoundTripCborSpec" class="def">cddlRoundTripCborSpec</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#cddlRoundTripCborSpec" class="link">Source</a> <a href="#v:cddlRoundTripCborSpec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Encoding.html#t:EncCBOR" title="Cardano.Ledger.Binary.Encoding">EncCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a></td><td class="doc"><p>Serialization version</p></td></tr><tr><td class="src">&#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></td><td class="doc"><p>Name of the CDDL variable to test</p></td></tr><tr><td class="src">&#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Using the supplied <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></code> inside the <code><a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a></code> generate random data and run the
 <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#v:cddlRoundTripExpectation" title="Test.Cardano.Ledger.Binary.Cddl">cddlRoundTripExpectation</a></code> for the supplied CDDL variable</p></div></div><div class="top"><p class="src"><a id="v:cddlRoundTripExpectation" class="def">cddlRoundTripExpectation</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#cddlRoundTripExpectation" class="link">Source</a> <a href="#v:cddlRoundTripExpectation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a></td><td class="doc"><p>Version to use for decoding</p></td></tr><tr><td class="src">&#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a></td><td class="doc"><p>Version to use for encoding</p></td></tr><tr><td class="src">&#8594; <a href="Test-Cardano-Ledger-Binary-RoundTrip.html#t:Trip" title="Test.Cardano.Ledger.Binary.RoundTrip">Trip</a> a a</td><td class="doc"><p>Decode/encoder that needs tsting</p></td></tr><tr><td class="src">&#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a></td><td class="doc"><p>Randomly generated data and the CDDL spec</p></td></tr><tr><td class="src">&#8594; <a href="../hspec-core/Test-Hspec-Core-Spec.html#t:Expectation" title="Test.Hspec.Core.Spec">Expectation</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Verify that random data generated is:</p><ul><li>Decoded successfully into a Haskell type using the decoder in <code><a href="Test-Cardano-Ledger-Binary-RoundTrip.html#t:Trip" title="Test.Cardano.Ledger.Binary.RoundTrip">Trip</a></code> and the version
   supplied</li><li>When reencoded conforms to the CDDL spec and produces valid <code>FlatTerm</code></li><li>When decoded again from the bytes produced by the encoder matches the type exactly
   when it was decoded from random bytes</li></ul></div></div><div class="top"><p class="src"><a id="v:cddlRoundTripAnnCborSpec" class="def">cddlRoundTripAnnCborSpec</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#cddlRoundTripAnnCborSpec" class="link">Source</a> <a href="#v:cddlRoundTripAnnCborSpec" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Encoding.html#t:EncCBOR" title="Cardano.Ledger.Binary.Encoding">EncCBOR</a> a, <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:DecCBOR" title="Cardano.Ledger.Binary.Decoding">DecCBOR</a> (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a></td><td class="doc"><p>Serialization version</p></td></tr><tr><td class="src">&#8594; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></td><td class="doc"><p>Cddl variable name</p></td></tr><tr><td class="src">&#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Similar to <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#v:cddlRoundTripCborSpec" title="Test.Cardano.Ledger.Binary.Cddl">cddlRoundTripCborSpec</a></code>, but for Annotator.</p></div></div><div class="top"><p class="src"><a id="v:cddlRoundTripAnnExpectation" class="def">cddlRoundTripAnnExpectation</a> &#8759; &#8704; a. (<a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a>, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="../base/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a) &#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Version.html#t:Version" title="Cardano.Ledger.Binary.Version">Version</a> &#8594; <a href="Test-Cardano-Ledger-Binary-RoundTrip.html#t:Trip" title="Test.Cardano.Ledger.Binary.RoundTrip">Trip</a> a (<a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a> a) &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a> &#8594; <a href="../hspec-core/Test-Hspec-Core-Spec.html#t:Expectation" title="Test.Hspec.Core.Spec">Expectation</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#cddlRoundTripAnnExpectation" class="link">Source</a> <a href="#v:cddlRoundTripAnnExpectation" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#v:cddlRoundTripExpectation" title="Test.Cardano.Ledger.Binary.Cddl">cddlRoundTripExpectation</a></code>, but works for decoders that are wrapped into
 <code><a href="../cardano-ledger-binary/Cardano-Ledger-Binary-Decoding.html#t:Annotator" title="Cardano.Ledger.Binary.Decoding">Annotator</a></code></p></div></div><a href="#g:1" id="g:1"><h1>Helper functions and types</h1></a><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Cddl" class="def">Cddl</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#Cddl" class="link">Source</a> <a href="#t:Cddl" class="selflink">#</a></p><div class="doc"><p>Contents of CDDL Spec</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Cddl" class="def">Cddl</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unCddl" class="def">unCddl</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Cbor" class="def">Cbor</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#Cbor" class="link">Source</a> <a href="#t:Cbor" class="selflink">#</a></p><div class="doc"><p>Binary form of CBOR data.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Cbor" class="def">Cbor</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unCbor" class="def">unCbor</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:DiagCbor" class="def">DiagCbor</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#DiagCbor" class="link">Source</a> <a href="#t:DiagCbor" class="selflink">#</a></p><div class="doc"><p>Human readable CBOR, which was randomly generated.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DiagCbor" class="def">DiagCbor</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unDiagCbor" class="def">unDiagCbor</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CddlData" class="def">CddlData</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#CddlData" class="link">Source</a> <a href="#t:CddlData" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CddlData" class="def">CddlData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cddlData" class="def">cddlData</a> &#8759; !<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cddlNumExamples" class="def">cddlNumExamples</a> &#8759; !<a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Number of random cases to generate</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CddlVarFile" class="def">CddlVarFile</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#CddlVarFile" class="link">Source</a> <a href="#t:CddlVarFile" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CddlVarFile" class="def">CddlVarFile</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:cddlVarFilePath" class="def">cddlVarFilePath</a> &#8759; !<a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>File that contains the Cddl data included in this type</p></div></li><li><dfn class="src"><a id="v:cddlVarName" class="def">cddlVarName</a> &#8759; !<a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></dfn><div class="doc"><p>Name of the variable being tested</p></div></li><li><dfn class="src"><a id="v:cddlVarData" class="def">cddlVarData</a> &#8759; !<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a></dfn><div class="doc"><p>Full CDDL spec with <code>output=<code><a href="Test-Cardano-Ledger-Binary-Cddl.html#v:cddlVarName" title="Test.Cardano.Ledger.Binary.Cddl">cddlVarName</a></code></code> prefix</p></div></li><li><dfn class="src"><a id="v:cddlVarDiagCbor" class="def">cddlVarDiagCbor</a> &#8759; ![<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a>]</dfn><div class="doc"><p>Generated CBOR data from the above CDDL spec</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:beforeAllCddlFile" class="def">beforeAllCddlFile</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#beforeAllCddlFile" class="link">Source</a> <a href="#v:beforeAllCddlFile" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></td><td class="doc"><p>Number of random cases to generate</p></td></tr><tr><td class="src">&#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>]</td><td class="doc"><p>Action that produces a list of valid CDDL specs</p></td></tr><tr><td class="src">&#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:SpecWith" title="Test.ImpSpec">SpecWith</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8594; <a href="../ImpSpec/Test-ImpSpec.html#t:Spec" title="Test.ImpSpec">Spec</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given an action that produces CDDL content, we combine it all into <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></code> and
 make it available to every subsequent Spec. Important point about this is that the
 supplied action will only be executed once.</p></div></div><div class="top"><p class="src"><a id="v:withCddlVarFile" class="def">withCddlVarFile</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#withCddlVarFile" class="link">Source</a> <a href="#v:withCddlVarFile" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">&#8658; <a href="../cardano-prelude/Cardano-Prelude.html#t:Text" title="Cardano.Prelude">Text</a></td><td class="doc"><p>Name of the variable that will be tested</p></td></tr><tr><td class="src">&#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></td><td class="doc"><p>CddlData that will be used for random data generation</p></td></tr><tr><td class="src">&#8594; (<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> b)</td><td class="doc"><p>Action that can use the random data for roundtrip and conformance testing</p></td></tr><tr><td class="src">&#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlData" title="Test.Cardano.Ledger.Binary.Cddl">CddlData</a></code> and a CDDL variable name present in the supplied data, generate a
 <code><a href="Test-Cardano-Ledger-Binary-Cddl.html#t:CddlVarFile" title="Test.Cardano.Ledger.Binary.Cddl">CddlVarFile</a></code>, that contains random data for that variable.</p></div></div><div class="top"><p class="src"><a id="v:genCddlDiagCbor" class="def">genCddlDiagCbor</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cddl" title="Test.Cardano.Ledger.Binary.Cddl">Cddl</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> [<a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a>] <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#genCddlDiagCbor" class="link">Source</a> <a href="#v:genCddlDiagCbor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:diagCborToCbor" class="def">diagCborToCbor</a> &#8759; <a href="../base/GHC-Stack.html#t:HasCallStack" title="GHC.Stack">HasCallStack</a> &#8658; <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:DiagCbor" title="Test.Cardano.Ledger.Binary.Cddl">DiagCbor</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Test-Cardano-Ledger-Binary-Cddl.html#t:Cbor" title="Test.Cardano.Ledger.Binary.Cddl">Cbor</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#diagCborToCbor" class="link">Source</a> <a href="#v:diagCborToCbor" class="selflink">#</a></p><div class="doc"><p>Convert randomly generated Cbor in special Diag (human readable) format to binary CBOR
 format</p></div></div><div class="top"><p class="src"><a id="v:validateCddlConformance" class="def">validateCddlConformance</a> <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#validateCddlConformance" class="link">Source</a> <a href="#v:validateCddlConformance" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&#8759; <a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a></td><td class="doc"><p>File path to the file with CDDL spec</p></td></tr><tr><td class="src">&#8594; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a></td><td class="doc"><p>CBOR encoded data that should conform with CDDL spec</p></td></tr><tr><td class="src">&#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Run a <code>cddl</code> process and validate that encoded data is in confomrance with the
 supplied CDDL spec</p></div></div><div class="top"><p class="src"><a id="v:readProcessNoFailure" class="def">readProcessNoFailure</a> &#8759; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> &#8594; <a href="../typed-process/System-Process-Typed-Internal.html#t:ProcessConfig" title="System.Process.Typed.Internal">ProcessConfig</a> stdin stdout stderr &#8594; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a>) <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#readProcessNoFailure" class="link">Source</a> <a href="#v:readProcessNoFailure" class="selflink">#</a></p><div class="doc"><p>Run a process with <code><a href="../typed-process/System-Process-Typed.html#v:readProcess" title="System.Process.Typed">readProcess</a></code> and return <code><a href="../base/Data-Either.html#v:Left" title="Data.Either">Left</a></code> on failure, which will contain the
 output produced on <code>stderr</code>. Accepts lazy bytestring as input for the spawned
 process. In case when a process exits successfuly, the output is returned on the
 <code><a href="../base/Data-Either.html#v:Right" title="Data.Either">Right</a></code>. Upon a successful exit, <code>stderr</code> output is ignored to avoid polluting test
 suite output with copious amounts of warnings.</p></div></div><div class="top"><p class="src"><a id="v:usingTempFile" class="def">usingTempFile</a> &#8759; <a href="../bytestring/Data-ByteString-Lazy.html#t:ByteString" title="Data.ByteString.Lazy">ByteString</a> &#8594; (<a href="../base/System-IO.html#t:FilePath" title="System.IO">FilePath</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> a) &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> a <a href="src/Test.Cardano.Ledger.Binary.Cddl.html#usingTempFile" class="link">Source</a> <a href="#v:usingTempFile" class="selflink">#</a></p><div class="doc"><p>Write binary data to a temporary file and apply an action to a temporary file name
 path that contains that data. File is guaranteed to be alive only until the supplied
 action is active, therefore make sure not to return the name for the temporary file
 name.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>