<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Api.Upgrade</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier">BinaryUpgradeOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#spec"><span class="hs-identifier">spec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html"><span class="hs-identifier">Cardano.Ledger.Api.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier">EraApi</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.html"><span class="hs-identifier">Cardano.Ledger.Binary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier">DecCBOR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decNoShareCBOR"><span class="hs-identifier">decNoShareCBOR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.html#encodeMemPack"><span class="hs-identifier">encodeMemPack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.html"><span class="hs-identifier">Cardano.Ledger.MemoBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#EqRaw"><span class="hs-identifier">EqRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#eqRaw"><span class="hs-identifier">eqRaw</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.html"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#Default"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.html"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pretty</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Arbitrary.html"><span class="hs-identifier">Test.Cardano.Ledger.Api.Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html"><span class="hs-identifier">Test.Cardano.Ledger.Binary.RoundTrip</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Common.html"><span class="hs-identifier">Test.Cardano.Ledger.Common</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Arbitrary.html"><span class="hs-identifier">Test.Cardano.Ledger.Core.Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.TreeDiff.html"><span class="hs-identifier">Test.Cardano.Ledger.TreeDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-ansi-terminal-1.1.3-a24411d18619b5d689908d5d4f76fb9930e56a7348a141a734e42bdce42c3c2c/share/doc/html/src/Prettyprinter.Render.Terminal.Internal.html#AnsiStyle"><span class="hs-identifier">AnsiStyle</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#Doc"><span class="hs-identifier">Doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">data</span><span> </span><span id="BinaryUpgradeOpts"><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-var">BinaryUpgradeOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BinaryUpgradeOpts"><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-var">BinaryUpgradeOpts</span></a></span></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="isScriptUpgradeable"><span class="annot"><span class="annottext">BinaryUpgradeOpts -&gt; Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isScriptUpgradeable"><span class="hs-identifier hs-var hs-var">isScriptUpgradeable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="isTxUpgradeable"><span class="annot"><span class="annottext">BinaryUpgradeOpts -&gt; Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isTxUpgradeable"><span class="hs-identifier hs-var hs-var">isTxUpgradeable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#Default"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-type">BinaryUpgradeOpts</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>  </span><span id="local-6989586621679270836"><span class="annot"><span class="annottext">def :: BinaryUpgradeOpts
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-type">BinaryUpgradeOpts</span></a></span><span>
</span><span id="line-34"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">isScriptUpgradeable :: Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isScriptUpgradeable"><span class="hs-identifier hs-var">isScriptUpgradeable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-35"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">isTxUpgradeable :: Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isTxUpgradeable"><span class="hs-identifier hs-var">isTxUpgradeable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-36"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxOutUpgrade"><span class="hs-identifier hs-type">specTxOutUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270708"><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTxOut"><span class="hs-identifier hs-type">EraTxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-46"></span><span id="specTxOutUpgrade"><span class="annot"><span class="annottext">specTxOutUpgrade :: forall era.
(EraApi era, EraTxOut (PreviousEra era),
 Arbitrary (TxOut (PreviousEra era)), HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxOutUpgrade"><span class="hs-identifier hs-var hs-var">specTxOutUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxOut (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxOut is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxOut (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxOut (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679270891"><span class="annot"><span class="annottext">TxOut (PreviousEra era)
</span><a href="#local-6989586621679270891"><span class="hs-identifier hs-var">prevTxOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxOut (PreviousEra era)) (TxOut era)
-&gt; TxOut (PreviousEra era)
-&gt; Either RoundTripFailure (TxOut era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (TxOut (PreviousEra era)) (TxOut era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (PreviousEra era)
</span><a href="#local-6989586621679270891"><span class="hs-identifier hs-var">prevTxOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-49"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679270896"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679270896"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-51"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-52"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679270896"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-53"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679270899"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679270899"><span class="hs-identifier hs-var">curTxOut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270708"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679270899"><span class="hs-identifier hs-var">curTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; TxOut era -&gt; Expectation
forall a. (HasCallStack, Show a, Eq a) =&gt; a -&gt; a -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (PreviousEra era) -&gt; TxOut era
forall era.
(EraTxOut era, EraTxOut (PreviousEra era)) =&gt;
TxOut (PreviousEra era) -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#upgradeTxOut"><span class="hs-identifier hs-var">upgradeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (PreviousEra era)
</span><a href="#local-6989586621679270891"><span class="hs-identifier hs-var">prevTxOut</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxCertUpgrade"><span class="hs-identifier hs-type">specTxCertUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270751"><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#EraTxCert"><span class="hs-identifier hs-type">EraTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-64"></span><span id="specTxCertUpgrade"><span class="annot"><span class="annottext">specTxCertUpgrade :: forall era.
(EraApi era, EraTxCert (PreviousEra era),
 Arbitrary (TxCert (PreviousEra era)), HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxCertUpgrade"><span class="hs-identifier hs-var hs-var">specTxCertUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxCert (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxCert is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxCert (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxCert (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679270951"><span class="annot"><span class="annottext">TxCert (PreviousEra era)
</span><a href="#local-6989586621679270951"><span class="hs-identifier hs-var">prevTxCert</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxCert (PreviousEra era)) (TxCert era)
-&gt; TxCert (PreviousEra era)
-&gt; Either RoundTripFailure (TxCert era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (TxCert (PreviousEra era)) (TxCert era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert (PreviousEra era)
</span><a href="#local-6989586621679270951"><span class="hs-identifier hs-var">prevTxCert</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-67"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679270952"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679270952"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-68"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxCert (PreviousEra era)
-&gt; Either (TxCertUpgradeError era) (TxCert era)
forall era.
(EraTxCert era, EraTxCert (PreviousEra era)) =&gt;
TxCert (PreviousEra era)
-&gt; Either (TxCertUpgradeError era) (TxCert era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#upgradeTxCert"><span class="hs-identifier hs-var">upgradeTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert (PreviousEra era)
</span><a href="#local-6989586621679270951"><span class="hs-identifier hs-var">prevTxCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-69"></span><span>            </span><span class="hs-comment">-- We expect deserialization to succeed, when upgrade is possible</span><span>
</span><span id="line-70"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-71"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-72"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679270952"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Expectation
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Both upgrade and deserializer fail successfully</span><span>
</span><span id="line-74"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679270954"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621679270954"><span class="hs-identifier hs-var">curTxCert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">TxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270751"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679270955"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621679270955"><span class="hs-identifier hs-var">upgradedTxCert</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxCert (PreviousEra era)
-&gt; Either (TxCertUpgradeError era) (TxCert era)
forall era.
(EraTxCert era, EraTxCert (PreviousEra era)) =&gt;
TxCert (PreviousEra era)
-&gt; Either (TxCertUpgradeError era) (TxCert era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#upgradeTxCert"><span class="hs-identifier hs-var">upgradeTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert (PreviousEra era)
</span><a href="#local-6989586621679270951"><span class="hs-identifier hs-var">prevTxCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-76"></span><span>            </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621679270954"><span class="hs-identifier hs-var">curTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era -&gt; TxCert era -&gt; Expectation
forall a. (HasCallStack, Show a, Eq a) =&gt; a -&gt; a -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621679270955"><span class="hs-identifier hs-var">upgradedTxCert</span></a></span><span>
</span><span id="line-77"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected upgradeTxCert to succeed&quot;</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxAuxDataUpgrade"><span class="hs-identifier hs-type">specTxAuxDataUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270760"><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTxAuxData"><span class="hs-identifier hs-type">EraTxAuxData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-89"></span><span id="specTxAuxDataUpgrade"><span class="annot"><span class="annottext">specTxAuxDataUpgrade :: forall era.
(EraApi era, EraTxAuxData (PreviousEra era),
 Arbitrary (TxAuxData (PreviousEra era)), HasCallStack,
 ToExpr (TxAuxData era), DecCBOR (TxAuxData era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxAuxDataUpgrade"><span class="hs-identifier hs-var hs-var">specTxAuxDataUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxAuxData is preserved through serialization (Annotator)&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271022"><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271022"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; TxAuxData (PreviousEra era)
-&gt; Either RoundTripFailure (TxAuxData era)
forall a b.
(ToCBOR a, DecCBOR (Annotator b)) =&gt;
Version -&gt; Version -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripAnn"><span class="hs-identifier hs-var">embedTripAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271022"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-92"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271024"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271024"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-94"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271024"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271025"><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271025"><span class="hs-identifier hs-var">curTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679271026"><span class="annot"><span class="annottext">upgradedTxAuxData :: TxAuxData era
</span><a href="#local-6989586621679271026"><span class="hs-identifier hs-var hs-var">upgradedTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era) -&gt; TxAuxData era
forall era.
(EraApi era, EraTxAuxData (PreviousEra era)) =&gt;
TxAuxData (PreviousEra era) -&gt; TxAuxData era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxAuxData"><span class="hs-identifier hs-var">upgradeTxAuxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271022"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxAuxData era -&gt; TxAuxData era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxAuxData&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271025"><span class="hs-identifier hs-var">curTxAuxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271026"><span class="hs-identifier hs-var">upgradedTxAuxData</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxAuxData is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxAuxData (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271029"><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271029"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxAuxData (PreviousEra era)) (TxAuxData era)
-&gt; TxAuxData (PreviousEra era)
-&gt; Either RoundTripFailure (TxAuxData era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (TxAuxData (PreviousEra era)) (TxAuxData era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271029"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-101"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271030"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271030"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-103"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-104"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271030"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-105"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271031"><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271031"><span class="hs-identifier hs-var">curTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270760"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679271032"><span class="annot"><span class="annottext">upgradedTxAuxData :: TxAuxData era
</span><a href="#local-6989586621679271032"><span class="hs-identifier hs-var hs-var">upgradedTxAuxData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era) -&gt; TxAuxData era
forall era.
(EraApi era, EraTxAuxData (PreviousEra era)) =&gt;
TxAuxData (PreviousEra era) -&gt; TxAuxData era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxAuxData"><span class="hs-identifier hs-var">upgradeTxAuxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxData (PreviousEra era)
</span><a href="#local-6989586621679271029"><span class="hs-identifier hs-var">prevTxAuxData</span></a></span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxAuxData era -&gt; TxAuxData era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxAuxData&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271031"><span class="hs-identifier hs-var">curTxAuxData</span></a></span><span> </span><span class="annot"><span class="annottext">TxAuxData era
</span><a href="#local-6989586621679271032"><span class="hs-identifier hs-var">upgradedTxAuxData</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specScriptUpgrade"><span class="hs-identifier hs-type">specScriptUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270774"><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraScript"><span class="hs-identifier hs-type">EraScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-118"></span><span id="specScriptUpgrade"><span class="annot"><span class="annottext">specScriptUpgrade :: forall era.
(EraApi era, EraScript (PreviousEra era),
 Arbitrary (Script (PreviousEra era)), DecCBOR (Script era),
 HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specScriptUpgrade"><span class="hs-identifier hs-var hs-var">specScriptUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (Script (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeScript is preserved through serialization (Annotator)&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Script (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (Script (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271096"><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271096"><span class="hs-identifier hs-var">prevScript</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Script (PreviousEra era)
-&gt; Either RoundTripFailure (Script era)
forall a b.
(ToCBOR a, DecCBOR (Annotator b)) =&gt;
Version -&gt; Version -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripAnn"><span class="hs-identifier hs-var">embedTripAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271096"><span class="hs-identifier hs-var">prevScript</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271097"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271097"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-123"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-124"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271097"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271098"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679271098"><span class="hs-identifier hs-var">curScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679271098"><span class="hs-identifier hs-var">curScript</span></a></span><span> </span><span class="annot"><span class="annottext">Script era -&gt; Script era -&gt; Expectation
forall a. (HasCallStack, Show a, Eq a) =&gt; a -&gt; a -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era) -&gt; Script era
forall era.
(EraScript era, EraScript (PreviousEra era)) =&gt;
Script (PreviousEra era) -&gt; Script era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#upgradeScript"><span class="hs-identifier hs-var">upgradeScript</span></a></span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271096"><span class="hs-identifier hs-var">prevScript</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (Script (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeScript is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Script (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (Script (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271100"><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271100"><span class="hs-identifier hs-var">prevScript</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (Script (PreviousEra era)) (Script era)
-&gt; Script (PreviousEra era)
-&gt; Either RoundTripFailure (Script era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (Script (PreviousEra era)) (Script era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271100"><span class="hs-identifier hs-var">prevScript</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-129"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271101"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271101"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-131"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-132"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271101"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271102"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679271102"><span class="hs-identifier hs-var">curScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270774"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679271102"><span class="hs-identifier hs-var">curScript</span></a></span><span> </span><span class="annot"><span class="annottext">Script era -&gt; Script era -&gt; Expectation
forall a. (HasCallStack, Show a, Eq a) =&gt; a -&gt; a -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era) -&gt; Script era
forall era.
(EraScript era, EraScript (PreviousEra era)) =&gt;
Script (PreviousEra era) -&gt; Script era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#upgradeScript"><span class="hs-identifier hs-var">upgradeScript</span></a></span><span> </span><span class="annot"><span class="annottext">Script (PreviousEra era)
</span><a href="#local-6989586621679271100"><span class="hs-identifier hs-var">prevScript</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxWitsUpgrade"><span class="hs-identifier hs-type">specTxWitsUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270779"><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTxWits"><span class="hs-identifier hs-type">EraTxWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-146"></span><span id="specTxWitsUpgrade"><span class="annot"><span class="annottext">specTxWitsUpgrade :: forall era.
(EraApi era, EraTxWits (PreviousEra era),
 Arbitrary (TxWits (PreviousEra era)), HasCallStack,
 ToExpr (TxWits era), DecCBOR (TxWits era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxWitsUpgrade"><span class="hs-identifier hs-var hs-var">specTxWitsUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxWits is preserved through serialization (Annotator)&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271171"><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271171"><span class="hs-identifier hs-var">prevTxWits</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; TxWits (PreviousEra era)
-&gt; Either RoundTripFailure (TxWits era)
forall a b.
(ToCBOR a, DecCBOR (Annotator b)) =&gt;
Version -&gt; Version -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripAnn"><span class="hs-identifier hs-var">embedTripAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271171"><span class="hs-identifier hs-var">prevTxWits</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271172"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271172"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-151"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-152"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271172"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271173"><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271173"><span class="hs-identifier hs-var">curTxWits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679271174"><span class="annot"><span class="annottext">upgradedTxWits :: TxWits era
</span><a href="#local-6989586621679271174"><span class="hs-identifier hs-var hs-var">upgradedTxWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era) -&gt; TxWits era
forall era.
(EraApi era, EraTxWits (PreviousEra era)) =&gt;
TxWits (PreviousEra era) -&gt; TxWits era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxWits"><span class="hs-identifier hs-var">upgradeTxWits</span></a></span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271171"><span class="hs-identifier hs-var">prevTxWits</span></a></span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxWits era -&gt; TxWits era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxWits&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271173"><span class="hs-identifier hs-var">curTxWits</span></a></span><span> </span><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271174"><span class="hs-identifier hs-var">upgradedTxWits</span></a></span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxWits is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxWits (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271176"><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271176"><span class="hs-identifier hs-var">prevTxWits</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxWits (PreviousEra era)) (TxWits era)
-&gt; TxWits (PreviousEra era)
-&gt; Either RoundTripFailure (TxWits era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (TxWits (PreviousEra era)) (TxWits era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271176"><span class="hs-identifier hs-var">prevTxWits</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271177"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271177"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-160"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-161"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271177"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271178"><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271178"><span class="hs-identifier hs-var">curTxWits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270779"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-163"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679271179"><span class="annot"><span class="annottext">upgradedTxWits :: TxWits era
</span><a href="#local-6989586621679271179"><span class="hs-identifier hs-var hs-var">upgradedTxWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era) -&gt; TxWits era
forall era.
(EraApi era, EraTxWits (PreviousEra era)) =&gt;
TxWits (PreviousEra era) -&gt; TxWits era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxWits"><span class="hs-identifier hs-var">upgradeTxWits</span></a></span><span> </span><span class="annot"><span class="annottext">TxWits (PreviousEra era)
</span><a href="#local-6989586621679271176"><span class="hs-identifier hs-var">prevTxWits</span></a></span><span>
</span><span id="line-164"></span><span>        </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxWits era -&gt; TxWits era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxWits&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271178"><span class="hs-identifier hs-var">curTxWits</span></a></span><span> </span><span class="annot"><span class="annottext">TxWits era
</span><a href="#local-6989586621679271179"><span class="hs-identifier hs-var">upgradedTxWits</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxBodyUpgrade"><span class="hs-identifier hs-type">specTxBodyUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270784"><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTxBody"><span class="hs-identifier hs-type">EraTxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-176"></span><span id="specTxBodyUpgrade"><span class="annot"><span class="annottext">specTxBodyUpgrade :: forall era.
(EraApi era, EraTxBody (PreviousEra era),
 Arbitrary (TxBody (PreviousEra era)), HasCallStack,
 ToExpr (TxBody era), DecCBOR (TxBody era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxBodyUpgrade"><span class="hs-identifier hs-var hs-var">specTxBodyUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxBody is preserved through serialization (Annotator)&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271258"><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271258"><span class="hs-identifier hs-var">prevTxBody</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; TxBody (PreviousEra era)
-&gt; Either RoundTripFailure (TxBody era)
forall a b.
(ToCBOR a, DecCBOR (Annotator b)) =&gt;
Version -&gt; Version -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripAnn"><span class="hs-identifier hs-var">embedTripAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271258"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271259"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271259"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
forall era.
(EraApi era, EraTxBody (PreviousEra era)) =&gt;
TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxBody"><span class="hs-identifier hs-var">upgradeTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271258"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-181"></span><span>            </span><span class="hs-comment">-- We expect deserialization to succeed, when upgrade is possible</span><span>
</span><span id="line-182"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-183"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-184"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271259"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Expectation
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Both upgrade and deserializer fail successfully</span><span>
</span><span id="line-186"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271261"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271261"><span class="hs-identifier hs-var">curTxBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679271262"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271262"><span class="hs-identifier hs-var">upgradedTxBody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
forall era.
(EraApi era, EraTxBody (PreviousEra era)) =&gt;
TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxBody"><span class="hs-identifier hs-var">upgradeTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271258"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-188"></span><span>            </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxBody era -&gt; TxBody era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxBody&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271261"><span class="hs-identifier hs-var">curTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271262"><span class="hs-identifier hs-var">upgradedTxBody</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected upgradeTxBody to succeed&quot;</span></span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTxBody is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxBody (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271263"><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271263"><span class="hs-identifier hs-var">prevTxBody</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxBody (PreviousEra era)) (TxBody era)
-&gt; TxBody (PreviousEra era)
-&gt; Either RoundTripFailure (TxBody era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (TxBody (PreviousEra era)) (TxBody era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271263"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271264"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271264"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
forall era.
(EraApi era, EraTxBody (PreviousEra era)) =&gt;
TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxBody"><span class="hs-identifier hs-var">upgradeTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271263"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-comment">-- We expect deserialization to succeed, when upgrade is possible</span><span>
</span><span id="line-195"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-196"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-197"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271264"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Expectation
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Both upgrade and deserializer fail successfully</span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271265"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271265"><span class="hs-identifier hs-var">curTxBody</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270784"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679271266"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271266"><span class="hs-identifier hs-var">upgradedTxBody</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
forall era.
(EraApi era, EraTxBody (PreviousEra era)) =&gt;
TxBody (PreviousEra era)
-&gt; Either (TxBodyUpgradeError era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTxBody"><span class="hs-identifier hs-var">upgradeTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (PreviousEra era)
</span><a href="#local-6989586621679271263"><span class="hs-identifier hs-var">prevTxBody</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-201"></span><span>            </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; TxBody era -&gt; TxBody era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;TxBody&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271265"><span class="hs-identifier hs-var">curTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679271266"><span class="hs-identifier hs-var">upgradedTxBody</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected upgradeTxBody to succeed&quot;</span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxUpgrade"><span class="hs-identifier hs-type">specTxUpgrade</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270790"><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTx"><span class="hs-identifier hs-type">EraTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#EqRaw"><span class="hs-identifier hs-type">EqRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-215"></span><span id="specTxUpgrade"><span class="annot"><span class="annottext">specTxUpgrade :: forall era.
(EraApi era, EraTx (PreviousEra era),
 Arbitrary (Tx (PreviousEra era)), HasCallStack, ToExpr (Tx era),
 DecCBOR (Tx era), EqRaw (Tx era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxUpgrade"><span class="hs-identifier hs-var hs-var">specTxUpgrade</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTx is preserved through serialization (Annotator)&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271344"><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271344"><span class="hs-identifier hs-var">prevTx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Tx (PreviousEra era)
-&gt; Either RoundTripFailure (Tx era)
forall a b.
(ToCBOR a, DecCBOR (Annotator b)) =&gt;
Version -&gt; Version -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripAnn"><span class="hs-identifier hs-var">embedTripAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271344"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-218"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271345"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271345"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-219"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
forall era.
(EraApi era, EraTx (PreviousEra era)) =&gt;
Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTx"><span class="hs-identifier hs-var">upgradeTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271344"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-220"></span><span>            </span><span class="hs-comment">-- We expect deserialization to succeed, when upgrade is possible</span><span>
</span><span id="line-221"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-222"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-223"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271345"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Expectation
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Both upgrade and deserializer fail successfully</span><span>
</span><span id="line-225"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271347"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271347"><span class="hs-identifier hs-var">curTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679271348"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271348"><span class="hs-identifier hs-var">upgradedTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
forall era.
(EraApi era, EraTx (PreviousEra era)) =&gt;
Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTx"><span class="hs-identifier hs-var">upgradeTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271344"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>            </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Tx era -&gt; Tx era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;Tx&quot;</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271347"><span class="hs-identifier hs-var">curTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271348"><span class="hs-identifier hs-var">upgradedTx</span></a></span><span>
</span><span id="line-228"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected upgradeTx to succeed&quot;</span></span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; (Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall prop.
(HasCallStack, Testable prop) =&gt;
[Char] -&gt; prop -&gt; Spec
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-2.11.13-9c3b235a66c4833958c1e584ebb61c2df8b2ee0401136c2810995c1b6a4bd0c5/share/doc/html/src/Test.Hspec.QuickCheck.html#prop"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;upgradeTx is preserved through serialization&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (Tx (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679271349"><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271349"><span class="hs-identifier hs-var">prevTx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (Tx (PreviousEra era)) (Tx era)
-&gt; Tx (PreviousEra era)
-&gt; Either RoundTripFailure (Tx era)
forall a b.
(Eq b, Typeable b) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; a -&gt; Either RoundTripFailure b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTrip"><span class="hs-identifier hs-var">embedTrip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trip (Tx (PreviousEra era)) (Tx era)
forall a b. (EncCBOR a, DecCBOR b) =&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#cborTrip"><span class="hs-identifier hs-var">cborTrip</span></a></span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271349"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-231"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679271350"><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271350"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-232"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
forall era.
(EraApi era, EraTx (PreviousEra era)) =&gt;
Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTx"><span class="hs-identifier hs-var">upgradeTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271349"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>            </span><span class="hs-comment">-- We expect deserialization to succeed, when upgrade is possible</span><span>
</span><span id="line-234"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation) -&gt; [Char] -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-235"></span><span>              </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected to deserialize: =======================================================\n&quot;</span></span><span>
</span><span id="line-236"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RoundTripFailure
</span><a href="#local-6989586621679271350"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Expectation
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Both upgrade and deserializer fail successfully</span><span>
</span><span id="line-238"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271351"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271351"><span class="hs-identifier hs-var">curTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270790"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679271352"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271352"><span class="hs-identifier hs-var">upgradedTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
forall era.
(EraApi era, EraTx (PreviousEra era)) =&gt;
Tx (PreviousEra era) -&gt; Either (TxUpgradeError era) (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#upgradeTx"><span class="hs-identifier hs-var">upgradeTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx (PreviousEra era)
</span><a href="#local-6989586621679271349"><span class="hs-identifier hs-var">prevTx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-240"></span><span>            </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; Tx era -&gt; Tx era -&gt; Expectation
forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var">expectRawEqual</span></a></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;Tx&quot;</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271351"><span class="hs-identifier hs-var">curTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679271352"><span class="hs-identifier hs-var">upgradedTx</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; [Char] -&gt; Expectation
[Char] -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#expectationFailure"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Expected upgradeTx to succeed&quot;</span></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#spec"><span class="hs-identifier hs-type">spec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679270796"><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-api-1.13.0.0/doc/html/cardano-ledger-api/src/Cardano.Ledger.Api.Era.html#EraApi"><span class="hs-identifier hs-type">EraApi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.TxCert.html#TxCert"><span class="hs-identifier hs-type">TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#EraTx"><span class="hs-identifier hs-type">EraTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Arbitrary.html#Arbitrary"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxAuxData"><span class="hs-identifier hs-type">TxAuxData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Script"><span class="hs-identifier hs-type">Script</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxWits"><span class="hs-identifier hs-type">TxWits</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxBody"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#EqRaw"><span class="hs-identifier hs-type">EqRaw</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#Tx"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-266"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-type">BinaryUpgradeOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#Spec"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-268"></span><span id="spec"><span class="annot"><span class="annottext">spec :: forall era.
(EraApi era, Arbitrary (TxOut (PreviousEra era)),
 Arbitrary (TxCert (PreviousEra era)),
 Arbitrary (TxAuxData (PreviousEra era)),
 Arbitrary (TxWits (PreviousEra era)),
 Arbitrary (TxBody (PreviousEra era)), EraTx (PreviousEra era),
 Arbitrary (Tx (PreviousEra era)),
 Arbitrary (Script (PreviousEra era)), HasCallStack,
 ToExpr (Tx era), ToExpr (TxBody era), ToExpr (TxWits era),
 ToExpr (TxAuxData era), DecCBOR (TxAuxData era),
 DecCBOR (Script era), DecCBOR (TxWits era), DecCBOR (TxBody era),
 DecCBOR (Tx era), EqRaw (Tx era)) =&gt;
BinaryUpgradeOpts -&gt; Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#spec"><span class="hs-identifier hs-var hs-var">spec</span></a></span></span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#BinaryUpgradeOpts"><span class="hs-identifier hs-type">BinaryUpgradeOpts</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679271475"><span class="annot"><span class="annottext">Bool
isScriptUpgradeable :: BinaryUpgradeOpts -&gt; Bool
isScriptUpgradeable :: Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isScriptUpgradeable"><span class="hs-identifier hs-var hs-var">isScriptUpgradeable</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679271476"><span class="annot"><span class="annottext">Bool
isTxUpgradeable :: BinaryUpgradeOpts -&gt; Bool
isTxUpgradeable :: Bool
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#isTxUpgradeable"><span class="hs-identifier hs-var hs-var">isTxUpgradeable</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; Spec -&gt; Spec
forall a. HasCallStack =&gt; [Char] -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Upgrade from &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; [Char]
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#eraName"><span class="hs-identifier hs-var">eraName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; to &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; [Char]
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#eraName"><span class="hs-identifier hs-var">eraName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Spec -&gt; Spec) -&gt; Spec -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTxOut (PreviousEra era),
 Arbitrary (TxOut (PreviousEra era)), HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxOutUpgrade"><span class="hs-identifier hs-var">specTxOutUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTxCert (PreviousEra era),
 Arbitrary (TxCert (PreviousEra era)), HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxCertUpgrade"><span class="hs-identifier hs-var">specTxCertUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTxAuxData (PreviousEra era),
 Arbitrary (TxAuxData (PreviousEra era)), HasCallStack,
 ToExpr (TxAuxData era), DecCBOR (TxAuxData era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxAuxDataUpgrade"><span class="hs-identifier hs-var">specTxAuxDataUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTxWits (PreviousEra era),
 Arbitrary (TxWits (PreviousEra era)), HasCallStack,
 ToExpr (TxWits era), DecCBOR (TxWits era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxWitsUpgrade"><span class="hs-identifier hs-var">specTxWitsUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-274"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTxBody (PreviousEra era),
 Arbitrary (TxBody (PreviousEra era)), HasCallStack,
 ToExpr (TxBody era), DecCBOR (TxBody era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxBodyUpgrade"><span class="hs-identifier hs-var">specTxBodyUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Spec -&gt; Spec
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679271476"><span class="hs-identifier hs-var">isTxUpgradeable</span></a></span><span> </span><span class="annot"><span class="annottext">(Spec -&gt; Spec) -&gt; Spec -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-276"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraTx (PreviousEra era),
 Arbitrary (Tx (PreviousEra era)), HasCallStack, ToExpr (Tx era),
 DecCBOR (Tx era), EqRaw (Tx era)) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specTxUpgrade"><span class="hs-identifier hs-var">specTxUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Spec -&gt; Spec
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679271475"><span class="hs-identifier hs-var">isScriptUpgradeable</span></a></span><span> </span><span class="annot"><span class="annottext">(Spec -&gt; Spec) -&gt; Spec -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(EraApi era, EraScript (PreviousEra era),
 Arbitrary (Script (PreviousEra era)), DecCBOR (Script era),
 HasCallStack) =&gt;
Spec
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#specScriptUpgrade"><span class="hs-identifier hs-var">specScriptUpgrade</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-comment">-- This is a test that ensures that binary version of a TxOut is backwards compatible as it is</span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-comment">-- stored in the ledger state. This property is only important for using MemPack with UTxOHD</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">Version
-&gt; Version
-&gt; Trip (TxOut (PreviousEra era)) (TxOut era)
-&gt; (TxOut era -&gt; TxOut (PreviousEra era) -&gt; Expectation)
-&gt; Spec
forall a b.
(Show a, Typeable a, Typeable b, Arbitrary a, Eq b,
 HasCallStack) =&gt;
Version -&gt; Version -&gt; Trip a b -&gt; (b -&gt; a -&gt; Expectation) -&gt; Spec
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#embedTripSpec"><span class="hs-identifier hs-var">embedTripSpec</span></a></span><span>
</span><span id="line-282"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerHigh"><span class="hs-identifier hs-var">eraProtVerHigh</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxOut (PreviousEra era) -&gt; Encoding)
-&gt; (forall s. Decoder s (TxOut era))
-&gt; Trip (TxOut (PreviousEra era)) (TxOut era)
forall a b. (a -&gt; Encoding) -&gt; (forall s. Decoder s b) -&gt; Trip a b
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.RoundTrip.html#mkTrip"><span class="hs-identifier hs-var">mkTrip</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (PreviousEra era) -&gt; Encoding
forall a. MemPack a =&gt; a -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.html#encodeMemPack"><span class="hs-identifier hs-var">encodeMemPack</span></a></span><span> </span><span class="annot"><span class="annottext">Decoder s (TxOut era)
forall s. Decoder s (TxOut era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decNoShareCBOR"><span class="hs-identifier hs-var">decNoShareCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>      </span><span class="annot"><span class="annottext">((TxOut era -&gt; TxOut (PreviousEra era) -&gt; Expectation) -&gt; Spec)
-&gt; (TxOut era -&gt; TxOut (PreviousEra era) -&gt; Expectation) -&gt; Spec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679271483"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679271483"><span class="hs-identifier hs-var">txOutCur</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679271484"><span class="annot"><span class="annottext">TxOut (PreviousEra era)
</span><a href="#local-6989586621679271484"><span class="hs-identifier hs-var">txOutPrev</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#TxOut"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/internal/doc/html/cardano-ledger-core/src/Cardano.Ledger.Internal.Definition.Era.html#PreviousEra"><span class="hs-identifier hs-type">PreviousEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270796"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><span class="annottext">TxOut (PreviousEra era) -&gt; TxOut era
forall era.
(EraTxOut era, EraTxOut (PreviousEra era)) =&gt;
TxOut (PreviousEra era) -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#upgradeTxOut"><span class="hs-identifier hs-var">upgradeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (PreviousEra era)
</span><a href="#local-6989586621679271484"><span class="hs-identifier hs-var">txOutPrev</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; TxOut era -&gt; Expectation
forall a. (HasCallStack, Show a, Eq a) =&gt; a -&gt; a -&gt; Expectation
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#shouldBe"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679271483"><span class="hs-identifier hs-var">txOutCur</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span id="local-6989586621679270773"><span class="annot"><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-type">expectRawEqual</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#EqRaw"><span class="hs-identifier hs-type">EqRaw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270773"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/tree-diff-0.3.4-ef016b9048a98243efba583942a384684f7a662dffbb0844de08f7ab79f0b6af/share/doc/html/src/Data.TreeDiff.Class.html#ToExpr"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679270773"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-ansi-terminal-1.1.3-a24411d18619b5d689908d5d4f76fb9930e56a7348a141a734e42bdce42c3c2c/share/doc/html/src/Prettyprinter.Render.Terminal.Internal.html#AnsiStyle"><span class="hs-identifier hs-type">AnsiStyle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679270773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679270773"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-expectations-0.8.4-803bfab44be1d57de46c2fd729766b4529923f957d0248f7f06e545b69067993/share/doc/html/src/Test.Hspec.Expectations.html#Expectation"><span class="hs-identifier hs-type">Expectation</span></a></span></span><span>
</span><span id="line-289"></span><span id="expectRawEqual"><span class="annot"><span class="annottext">expectRawEqual :: forall a.
(EqRaw a, ToExpr a, HasCallStack) =&gt;
Doc AnsiStyle -&gt; a -&gt; a -&gt; Expectation
</span><a href="Test.Cardano.Ledger.Api.Upgrade.html#expectRawEqual"><span class="hs-identifier hs-var hs-var">expectRawEqual</span></a></span></span><span> </span><span id="local-6989586621679271495"><span class="annot"><span class="annottext">Doc AnsiStyle
</span><a href="#local-6989586621679271495"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span id="local-6989586621679271496"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271496"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span id="local-6989586621679271497"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271497"><span class="hs-identifier hs-var">actual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Expectation -&gt; Expectation
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqRaw a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.MemoBytes.Internal.html#eqRaw"><span class="hs-identifier hs-var">eqRaw</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271496"><span class="hs-identifier hs-var">expected</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271497"><span class="hs-identifier hs-var">actual</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expectation -&gt; Expectation) -&gt; Expectation -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">[Char] -&gt; Expectation
forall a. HasCallStack =&gt; [Char] -&gt; IO a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Expectations.html#assertColorFailure"><span class="hs-identifier hs-var">assertColorFailure</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Expectation)
-&gt; (Doc AnsiStyle -&gt; [Char]) -&gt; Doc AnsiStyle -&gt; Expectation
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle -&gt; [Char]
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ansiDocToString"><span class="hs-identifier hs-var">ansiDocToString</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Expectation) -&gt; Doc AnsiStyle -&gt; Expectation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#vsep"><span class="hs-identifier hs-var">Pretty.vsep</span></a></span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Doc AnsiStyle] -&gt; Doc AnsiStyle
forall ann. [Doc ann] -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#hsep"><span class="hs-identifier hs-var">Pretty.hsep</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;Expected raw representation of&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><a href="#local-6989586621679271495"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Doc AnsiStyle
</span><span class="hs-string">&quot;to be equal:&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc AnsiStyle -&gt; Doc AnsiStyle
forall ann. Int -&gt; Doc ann -&gt; Doc ann
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/prettyprinter-1.7.1-318bfdf9d6702b01d9e5968bc160c179db42096d98c6a62c9b2a9c2ecaf4b7ee/share/doc/html/src/Prettyprinter.Internal.html#indent"><span class="hs-identifier hs-var">Pretty.indent</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(Doc AnsiStyle -&gt; Doc AnsiStyle) -&gt; Doc AnsiStyle -&gt; Doc AnsiStyle
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Doc AnsiStyle
forall a. ToExpr a =&gt; a -&gt; a -&gt; Doc AnsiStyle
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/l/testlib/doc/html/cardano-ledger-binary/src/Test.Cardano.Ledger.Binary.TreeDiff.html#diffExpr"><span class="hs-identifier hs-var">diffExpr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271496"><span class="hs-identifier hs-var">expected</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679271497"><span class="hs-identifier hs-var">actual</span></a></span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-296"></span></pre></body></html>