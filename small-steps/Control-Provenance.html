<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Provenance</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">small-steps-1.1.2.0: Small step semantics</span><ul class="links" id="page-menu"><li><a href="src/Control.Provenance.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Provenance</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Basic Provenance Monad Transformer</a></li><li><a href="#g:2">Dynamically typed Provenance objects</a></li><li><a href="#g:3">Type constraint on data stored in PObject</a></li><li><a href="#g:4">ProvM instantiated (Map Text PObject)</a></li><li><a href="#g:5">Abstraction barrier to isolate the provenence type from the result type.</a></li><li><a href="#g:6">Operations in ProvM</a></li><li><a href="#g:7">Operations in Prov instantiation</a></li><li><a href="#g:8">Operation on PObject</a></li><li><a href="#g:9">For testing invariants</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:ProvM">ProvM</a> t m a = <a href="#v:ProvM">ProvM</a> (<a href="../mtl/Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> (<a href="../cardano-strict-containers/Data-Maybe-Strict.html#t:StrictMaybe" title="Data.Maybe.Strict">StrictMaybe</a> t) m a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:PObject">PObject</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Provenance">Provenance</a> t = (<a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t, <a href="../aeson/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> t, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> t, <a href="../nothunks/NoThunks-Class.html#t:NoThunks" title="NoThunks.Class">NoThunks</a> t)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Prov">Prov</a> m a = <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> Store m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:BlackBox">BlackBox</a> t</li><li class="src short"><a href="#v:lift">lift</a> &#8759; (<a href="../transformers/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; m a &#8594; t m a</li><li class="src short"><a href="#v:putM">putM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m ()</li><li class="src short"><a href="#v:getM">getM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m (<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s)</li><li class="src short"><a href="#v:modifyM">modifyM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; (t &#8594; t) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m ()</li><li class="src short"><a href="#v:modifyWithBlackBox">modifyWithBlackBox</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> p &#8594; (p &#8594; t &#8594; t) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m ()</li><li class="src short"><a href="#v:runProv">runProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t &#8594; m t</li><li class="src short"><a href="#v:runWithProv">runWithProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t &#8594; m (t, Store)</li><li class="src short"><a href="#v:runOtherProv">runOtherProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s1 &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s2 m (a, <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s1)</li><li class="src short"><a href="#v:liftProv">liftProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; s1 &#8594; (a &#8594; s1 &#8594; s2 &#8594; s2) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s2 m a</li><li class="src short"><a href="#v:dump">dump</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m <a href="../base/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:store">store</a> &#8759; &#8704; t m. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; m t &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t</li><li class="src short"><a href="#v:push">push</a> &#8759; (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; t &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m ()</li><li class="src short"><a href="#v:pull">pull</a> &#8759; &#8704; t m. (<a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m (<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t)</li><li class="src short"><a href="#v:update">update</a> &#8759; &#8704; t m. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; (t &#8594; t) &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m ()</li><li class="src short"><a href="#v:updateWithBlackBox">updateWithBlackBox</a> &#8759; &#8704; t m s. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s &#8594; (s &#8594; t &#8594; t) &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m ()</li><li class="src short"><a href="#v:pushOtherProv">pushOtherProv</a> &#8759; (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> s1, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; s1 &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> Store m a</li><li class="src short"><a href="#v:runWithProvM">runWithProvM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m a &#8594; m (a, s)</li><li class="src short"><a href="#v:runProvM">runProvM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m b &#8594; m b</li><li class="src short"><a href="#v:find">find</a> &#8759; &#8704; t k. (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t) &#8658; k &#8594; <a href="../containers/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../cardano-strict-containers/Data-Maybe-Strict.html#t:StrictMaybe" title="Data.Maybe.Strict">StrictMaybe</a> t</li><li class="src short"><a href="#v:observe">observe</a> &#8759; Store &#8594; <a href="../base/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:preservesNothing">preservesNothing</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; m <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:preservesJust">preservesJust</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; t &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; m <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ProvM" class="def">ProvM</a> t m a <a href="src/Control.Provenance.html#ProvM" class="link">Source</a> <a href="#t:ProvM" class="selflink">#</a></p><div class="doc"><p>The Provenance Monad is just the StateT transformer
 wrapped in a newtype, where the state is (StrictMaybe t).
 By running the state transformer with an initial state of SNothing
 we indicate we are not collecting provenance. With an initial
 state of (SJust t), we are collecting provenance. If we start off
 as SNothing, then actions on the state are no-ops and are ignored.
 We maintain several invariants. If we start with SNothing, we get
 SNothing, and if we start with (SJust s) we end up with (SJust t)</p><p>invariant1 (ProvM m) = do (_,SNothing) &lt;- runStateT m SNothing
 invariant2 (ProvM m) = do (_,SJust t) &lt;- runStateT m (SJust 1)</p><p>The second invariant is that regardless of whether we compute
 provenance or not, the non-provenance part is the same.
 Currently this is enforced by the BlackBox type and its API.</p><p>invariant3 (ProvM m) = do
   (ans1,SNothing) &lt;- runStateT m SNothing
   (ans2,SJust p) &lt;- runStateT m (SJust s)
   pure(ans1 == ans2)</p><p>All operations that read the provenance (i.e the state) return
 a (BlackBox t). BlackBoxes can only be used to modify provenance.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ProvM" class="def">ProvM</a> (<a href="../mtl/Control-Monad-State-Strict.html#t:StateT" title="Control.Monad.State.Strict">StateT</a> (<a href="../cardano-strict-containers/Data-Maybe-Strict.html#t:StrictMaybe" title="Data.Maybe.Strict">StrictMaybe</a> t) m a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ProvM">Instances</h4><details id="i:ProvM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProvM:MonadTrans:1"></span> <a href="../transformers/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> (<a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t)</span> <a href="src/Control.Provenance.html#line-104" class="link">Source</a> <a href="#t:ProvM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProvM:MonadTrans:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a <a href="#v:lift" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProvM:Applicative:2"></span> <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="../base/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m)</span> <a href="src/Control.Provenance.html#line-102" class="link">Source</a> <a href="#t:ProvM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProvM:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> &#8759; a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> &#8759; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m (a &#8594; b) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> &#8759; (a &#8594; b &#8594; c) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> &#8759; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> &#8759; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProvM:Functor:3"></span> <a href="../base/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m &#8658; <a href="../base/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m)</span> <a href="src/Control.Provenance.html#line-102" class="link">Source</a> <a href="#t:ProvM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProvM:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> &#8759; (a &#8594; b) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> &#8759; a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ProvM:Monad:4"></span> <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m)</span> <a href="src/Control.Provenance.html#line-102" class="link">Source</a> <a href="#t:ProvM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ProvM:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> &#8759; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; (a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> &#8759; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> &#8759; a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:1" id="g:1"><h1>Basic Provenance Monad Transformer</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PObject" class="def">PObject</a> <a href="src/Control.Provenance.html#PObject" class="link">Source</a> <a href="#t:PObject" class="selflink">#</a></p><div class="doc"><p>Provenance Object</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PObject">Instances</h4><details id="i:PObject" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PObject:Show:1"></span> <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a></span> <a href="src/Control.Provenance.html#line-300" class="link">Source</a> <a href="#t:PObject" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PObject:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a>] &#8594; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PObject:NoThunks:2"></span> <a href="../nothunks/NoThunks-Class.html#t:NoThunks" title="NoThunks.Class">NoThunks</a> <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a></span> <a href="src/Control.Provenance.html#line-296" class="link">Source</a> <a href="#t:PObject" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PObject:NoThunks:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:noThunks">noThunks</a> &#8759; <a href="../nothunks/NoThunks-Class.html#t:Context" title="NoThunks.Class">Context</a> &#8594; <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../nothunks/NoThunks-Class.html#t:ThunkInfo" title="NoThunks.Class">ThunkInfo</a>) <a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src" class="link">Source</a> <a href="#v:noThunks" class="selflink">#</a></p><p class="src"><a href="#v:wNoThunks">wNoThunks</a> &#8759; <a href="../nothunks/NoThunks-Class.html#t:Context" title="NoThunks.Class">Context</a> &#8594; <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../base/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../nothunks/NoThunks-Class.html#t:ThunkInfo" title="NoThunks.Class">ThunkInfo</a>) <a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src" class="link">Source</a> <a href="#v:wNoThunks" class="selflink">#</a></p><p class="src"><a href="#v:showTypeOf">showTypeOf</a> &#8759; <a href="../base/Data-Proxy.html#t:Proxy" title="Data.Proxy">Proxy</a> <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src" class="link">Source</a> <a href="#v:showTypeOf" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Dynamically typed Provenance objects</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Provenance" class="def">Provenance</a> t = (<a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t, <a href="../aeson/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> t, <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> t, <a href="../nothunks/NoThunks-Class.html#t:NoThunks" title="NoThunks.Class">NoThunks</a> t) <a href="src/Control.Provenance.html#Provenance" class="link">Source</a> <a href="#t:Provenance" class="selflink">#</a></p><div class="doc"><p>Since PObjects are dynamically typed, What operations are
 required on a type to act as Provenance? We might want to
 add or subtract some properties from this list.</p></div></div><a href="#g:3" id="g:3"><h1>Type constraint on data stored in PObject</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Prov" class="def">Prov</a> m a = <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> Store m a <a href="src/Control.Provenance.html#Prov" class="link">Source</a> <a href="#t:Prov" class="selflink">#</a></p><div class="doc"><p>A special case of the ProvM Monad, where the state type is Store
 a (Map Text PObject), where PObject is a dynamically typed value. This
 allows the collection of a Set of provenance values, indexed by keys of
 type Text. As in the ProvM monad, if run with <code><a href="Control-Provenance.html#v:runProv" title="Control.Provenance">runProv</a></code> operations on
 the Store are ignored.</p></div></div><a href="#g:4" id="g:4"><h1>ProvM instantiated (Map Text PObject)</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BlackBox" class="def">BlackBox</a> t <a href="src/Control.Provenance.html#BlackBox" class="link">Source</a> <a href="#t:BlackBox" class="selflink">#</a></p><div class="doc"><p>BlackBox is an abstraction barrier. Reading the provenance is always returned
 in a BlackBox. The only way to open the BlackBox is to use one of the BlackBlox
 eliminator operations: modifyWithBlackBox or runOtherProv, that merge the contents of the
 BlackBox into the current provenance. This ensures that there is no easy way for the
 provenance computation to have an effect on the result of the underlying computation.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BlackBox">Instances</h4><details id="i:BlackBox" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlackBox:Functor:1"></span> <a href="../base/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a></span> <a href="src/Control.Provenance.html#line-134" class="link">Source</a> <a href="#t:BlackBox" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlackBox:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> &#8759; (a &#8594; b) &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> a &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> &#8759; a &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> b &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BlackBox:Show:2"></span> <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> t &#8658; <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t)</span> <a href="src/Control.Provenance.html#line-134" class="link">Source</a> <a href="#t:BlackBox" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BlackBox:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Control-Provenance.html">Control.Provenance</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> &#8759; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t &#8594; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> &#8759; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t &#8594; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> &#8759; [<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t] &#8594; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:5" id="g:5"><h1>Abstraction barrier to isolate the provenence type from the result type.</h1></a><a href="#g:6" id="g:6"><h1>Operations in ProvM</h1></a><div class="top"><p class="src"><a id="v:lift" class="def">lift</a> &#8759; (<a href="../transformers/Control-Monad-Trans-Class.html#t:MonadTrans" title="Control.Monad.Trans.Class">MonadTrans</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; m a &#8594; t m a <a href="#v:lift" class="selflink">#</a></p><div class="doc"><p>Lift a computation from the argument monad to the constructed monad.</p></div></div><div class="top"><p class="src"><a id="v:putM" class="def">putM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m () <a href="src/Control.Provenance.html#putM" class="link">Source</a> <a href="#v:putM" class="selflink">#</a></p><div class="doc"><p>Overwrite the current provenance with something new.</p></div></div><div class="top"><p class="src"><a id="v:getM" class="def">getM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m (<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s) <a href="src/Control.Provenance.html#getM" class="link">Source</a> <a href="#v:getM" class="selflink">#</a></p><div class="doc"><p>Extract the current provenance. The result is wrapped in
 a BlackBox. This ensures that provenance cannot be used in the
 non-provenance part of the computation.</p></div></div><div class="top"><p class="src"><a id="v:modifyM" class="def">modifyM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; (t &#8594; t) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m () <a href="src/Control.Provenance.html#modifyM" class="link">Source</a> <a href="#v:modifyM" class="selflink">#</a></p><div class="doc"><p>Modify the provenance if collecting provenance, otherwise do nothing.</p></div></div><div class="top"><p class="src"><a id="v:modifyWithBlackBox" class="def">modifyWithBlackBox</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> p &#8594; (p &#8594; t &#8594; t) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m () <a href="src/Control.Provenance.html#modifyWithBlackBox" class="link">Source</a> <a href="#v:modifyWithBlackBox" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runProv" class="def">runProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t &#8594; m t <a href="src/Control.Provenance.html#runProv" class="link">Source</a> <a href="#v:runProv" class="selflink">#</a></p><div class="doc"><p>Run the (Prov m a) computation and ignore the provenance part</p></div></div><div class="top"><p class="src"><a id="v:runWithProv" class="def">runWithProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t &#8594; m (t, Store) <a href="src/Control.Provenance.html#runWithProv" class="link">Source</a> <a href="#v:runWithProv" class="selflink">#</a></p><div class="doc"><p>Run the (Prov m a) computation, compute and return the provenance as well as the result.</p></div></div><div class="top"><p class="src"><a id="v:runOtherProv" class="def">runOtherProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s1 &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s2 m (a, <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s1) <a href="src/Control.Provenance.html#runOtherProv" class="link">Source</a> <a href="#v:runOtherProv" class="selflink">#</a></p><div class="doc"><p>Run a provenance computation, with provenance s1, and lift the
 result to a provenance computation with provenance s2. Use the active
 state of the s2 computation to decide if we actually compute the
 provenance s1. The s1 result is returned in a BlackBox. This ensures that
 provenance cannot be used in the non-provenance part of the computation.</p></div></div><div class="top"><p class="src"><a id="v:liftProv" class="def">liftProv</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; s1 &#8594; (a &#8594; s1 &#8594; s2 &#8594; s2) &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s2 m a <a href="src/Control.Provenance.html#liftProv" class="link">Source</a> <a href="#v:liftProv" class="selflink">#</a></p><div class="doc"><p>lift a provenenace computation from one provenance type (s1) to another (s2)</p></div></div><div class="top"><p class="src"><a id="v:dump" class="def">dump</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Control.Provenance.html#dump" class="link">Source</a> <a href="#v:dump" class="selflink">#</a></p><div class="doc"><p>Return a String representation of the current provenance store.</p></div></div><a href="#g:7" id="g:7"><h1>Operations in Prov instantiation</h1></a><div class="top"><p class="src"><a id="v:store" class="def">store</a> &#8759; &#8704; t m. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; m t &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m t <a href="src/Control.Provenance.html#store" class="link">Source</a> <a href="#v:store" class="selflink">#</a></p><div class="doc"><p>Run a computation in the underlying monad (m), return that value in the
 (Prov m) monad. As a side effect store that value under the given key
 equivalent to: store key m = do { a &lt;- lift m; push key a; pure a}</p></div></div><div class="top"><p class="src"><a id="v:push" class="def">push</a> &#8759; (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; t &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m () <a href="src/Control.Provenance.html#push" class="link">Source</a> <a href="#v:push" class="selflink">#</a></p><div class="doc"><p>Push a key value pair into the provenance store. Overwrites any
 existing POjects stored under that key.</p></div></div><div class="top"><p class="src"><a id="v:pull" class="def">pull</a> &#8759; &#8704; t m. (<a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m (<a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> t) <a href="src/Control.Provenance.html#pull" class="link">Source</a> <a href="#v:pull" class="selflink">#</a></p><div class="doc"><p>Reads the provenance value at a key. The value is returned
 in a BlackBox. There are 3 reasons the BlackBox may be empty.
 1) The computation is not collecting provenance.
 2) The map does not contain the key
 3) The value at the key has the wrong type.</p></div></div><div class="top"><p class="src"><a id="v:update" class="def">update</a> &#8759; &#8704; t m. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; (t &#8594; t) &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m () <a href="src/Control.Provenance.html#update" class="link">Source</a> <a href="#v:update" class="selflink">#</a></p><div class="doc"><p>Modify the value stored at the given key. If the key isn't found
 or the PObject at that key has the wrong type, do nothing.</p></div></div><div class="top"><p class="src"><a id="v:updateWithBlackBox" class="def">updateWithBlackBox</a> &#8759; &#8704; t m s. (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> t, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; <a href="Control-Provenance.html#t:BlackBox" title="Control.Provenance">BlackBox</a> s &#8594; (s &#8594; t &#8594; t) &#8594; <a href="Control-Provenance.html#t:Prov" title="Control.Provenance">Prov</a> m () <a href="src/Control.Provenance.html#updateWithBlackBox" class="link">Source</a> <a href="#v:updateWithBlackBox" class="selflink">#</a></p><div class="doc"><p>Modify the value stored at the given key using a value in a BlackBox.
 if the key isn't found, or the PObject at that key has the wrong type, do nothing.</p></div></div><div class="top"><p class="src"><a id="v:pushOtherProv" class="def">pushOtherProv</a> &#8759; (<a href="Control-Provenance.html#t:Provenance" title="Control.Provenance">Provenance</a> s1, <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) &#8658; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> &#8594; s1 &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s1 m a &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> Store m a <a href="src/Control.Provenance.html#pushOtherProv" class="link">Source</a> <a href="#v:pushOtherProv" class="selflink">#</a></p><div class="doc"><p>Push the provenance of a computation, under the given key. The
 computation has provenance s1, and lift the result to a provenance
 computation with provenance Store. Use the active state of the Store
 computation to decide if we actually want to compute the
 provenance s1, and push it, or simply ignore it.</p></div></div><div class="top"><p class="src"><a id="v:runWithProvM" class="def">runWithProvM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; s &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m a &#8594; m (a, s) <a href="src/Control.Provenance.html#runWithProvM" class="link">Source</a> <a href="#v:runWithProvM" class="selflink">#</a></p><div class="doc"><p>Run and compute the result as well as the provenance. Supply an initial value for the provenance.</p></div></div><div class="top"><p class="src"><a id="v:runProvM" class="def">runProvM</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> s m b &#8594; m b <a href="src/Control.Provenance.html#runProvM" class="link">Source</a> <a href="#v:runProvM" class="selflink">#</a></p><div class="doc"><p>Run the computation with SNothing. Expend no resources to compute provenance.</p></div></div><a href="#g:8" id="g:8"><h1>Operation on PObject</h1></a><div class="top"><p class="src"><a id="v:find" class="def">find</a> &#8759; &#8704; t k. (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="../base/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> t) &#8658; k &#8594; <a href="../containers/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k <a href="Control-Provenance.html#t:PObject" title="Control.Provenance">PObject</a> &#8594; <a href="../cardano-strict-containers/Data-Maybe-Strict.html#t:StrictMaybe" title="Data.Maybe.Strict">StrictMaybe</a> t <a href="src/Control.Provenance.html#find" class="link">Source</a> <a href="#v:find" class="selflink">#</a></p><div class="doc"><p>Find a value for a given key from a Store (Map Text PObject). If
  the Store does not have that key, or the PObject at that key
  does not have the right type, returns SNothing. If the type context
  of the call does not fix the type, one can use a type
  application like:  find @Bool key map</p></div></div><div class="top"><p class="src"><a id="v:observe" class="def">observe</a> &#8759; Store &#8594; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Control.Provenance.html#observe" class="link">Source</a> <a href="#v:observe" class="selflink">#</a></p><div class="doc"><p>Turn a Map of PObjects into a String, indicating its contents.</p></div></div><a href="#g:9" id="g:9"><h1>For testing invariants</h1></a><div class="top"><p class="src"><a id="v:preservesNothing" class="def">preservesNothing</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; m <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Provenance.html#preservesNothing" class="link">Source</a> <a href="#v:preservesNothing" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:preservesJust" class="def">preservesJust</a> &#8759; <a href="../base/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m &#8658; t &#8594; <a href="Control-Provenance.html#t:ProvM" title="Control.Provenance">ProvM</a> t m a &#8594; m <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Provenance.html#preservesJust" class="link">Source</a> <a href="#v:preservesJust" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>