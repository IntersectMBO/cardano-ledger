<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLists #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#spec"><span class="hs-identifier">spec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#alonzoEraSpecificSpec"><span class="hs-identifier">alonzoEraSpecificSpec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html"><span class="hs-identifier">Cardano.Ledger.Allegra.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#RequireTimeExpire"><span class="hs-identifier">RequireTimeExpire</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Core.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.Core</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html#eraLanguages"><span class="hs-identifier">eraLanguages</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxWits.html"><span class="hs-identifier">Cardano.Ledger.Alonzo.TxWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxWits.html#unTxDatsL"><span class="hs-identifier">unTxDatsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Globals"><span class="hs-identifier">Globals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#networkId"><span class="hs-identifier">networkId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#StrictMaybe"><span class="hs-identifier">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier">inject</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Version.html#natVersion"><span class="hs-identifier">natVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeReference"><span class="hs-identifier">StakeReference</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#credToText"><span class="hs-identifier">credToText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html"><span class="hs-identifier">Cardano.Ledger.Mary.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#AssetName"><span class="hs-identifier">AssetName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#MaryValue"><span class="hs-identifier">MaryValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#MultiAsset"><span class="hs-identifier">MultiAsset</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#PolicyID"><span class="hs-identifier">PolicyID</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.html"><span class="hs-identifier">Cardano.Ledger.Plutus</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#hashData"><span class="hs-identifier">hashData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier">hashPlutusScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#withSLanguage"><span class="hs-identifier">withSLanguage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#ShelleyDelegPredFailure"><span class="hs-identifier">ShelleyDelegPredFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Scripts.html"><span class="hs-identifier">Cardano.Ledger.Shelley.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Scripts.html#RequireAllOf"><span class="hs-identifier">RequireAllOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Scripts.html#RequireSignature"><span class="hs-identifier">RequireSignature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SSeq</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#to"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator">(%~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator">(.~)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-mtl-0.2.1.0-0d9d0bb15333296047ba4b93a576c67cb2d2f407b8b7ffd0ab1ce8097b524420/share/doc/html/src/Lens.Micro.Mtl.html"><span class="hs-identifier">Lens.Micro.Mtl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-mtl-0.2.1.0-0d9d0bb15333296047ba4b93a576c67cb2d2f407b8b7ffd0ab1ce8097b524420/share/doc/html/src/Lens.Micro.Mtl.html#use"><span class="hs-identifier">use</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-ledger-api-1.54.0.0-cc90923e1d4848db7788cc174c20b16ae21e66915548bbaadb7b5dd5e94d4ab2/share/doc/html/src/PlutusLedgerApi.Common.html"><span class="hs-identifier">PlutusLedgerApi.Common</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html"><span class="hs-identifier">Test.Cardano.Ledger.Alonzo.ImpTest</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Utils.html"><span class="hs-identifier">Test.Cardano.Ledger.Core.Utils</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Imp.Common.html"><span class="hs-identifier">Test.Cardano.Ledger.Imp.Common</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html"><span class="hs-identifier">Test.Cardano.Ledger.Plutus.Examples</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#spec"><span class="hs-identifier hs-type">spec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680199341"><span class="annot"><a href="#local-6989586621680199341"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#AlonzoEraImp"><span class="hs-identifier hs-type">AlonzoEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680199341"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680199341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span id="spec"><span class="annot"><span class="annottext">spec :: forall era. AlonzoEraImp era =&gt; SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#spec"><span class="hs-identifier hs-var hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Valid transactions&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Non-script output with datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-comment">-- Attach a datum (hash) to a non-script output and then spend it.</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-comment">-- Note that the datum cannot be supplied when spending the output,</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-comment">-- because it's considered extraneous.</span><span>
</span><span id="line-53"></span><span>    </span><span id="local-6989586621680199912"><span class="annot"><span class="annottext">Addr
</span><a href="#local-6989586621680199912"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment -&gt; StakeReference -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'Payment -&gt; StakeReference -&gt; Addr)
-&gt; ImpM (LedgerSpec era) (KeyHash 'Payment)
-&gt; ImpM (LedgerSpec era) (StakeReference -&gt; Addr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (StakeReference -&gt; Addr)
-&gt; ImpM (LedgerSpec era) StakeReference
-&gt; ImpM (LedgerSpec era) Addr
forall a b.
ImpM (LedgerSpec era) (a -&gt; b)
-&gt; ImpM (LedgerSpec era) a -&gt; ImpM (LedgerSpec era) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">StakeReference -&gt; ImpM (LedgerSpec era) StakeReference
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span id="local-6989586621680199917"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621680199917"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Coin)
-&gt; ImpM (LedgerSpec era) Integer -&gt; ImpM (LedgerSpec era) Coin
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Integer, Integer) -&gt; ImpM (LedgerSpec era) Integer
forall a. Random a =&gt; (a, a) -&gt; ImpM (LedgerSpec era) a
forall (g :: * -&gt; *) a. (MonadGen g, Random a) =&gt; (a, a) -&gt; g a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#choose"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2_000_000</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">8_000_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-56"></span><span>      </span><span id="local-6989586621680199920"><span class="annot"><span class="annottext">datumHash :: DataHash
</span><a href="#local-6989586621680199920"><span class="hs-identifier hs-var hs-var">datumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Data era -&gt; DataHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#hashData"><span class="hs-identifier hs-var">hashData</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680199341"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">(Data era -&gt; DataHash) -&gt; Data era -&gt; DataHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Data -&gt; Data era
forall era. Era era =&gt; Data -&gt; Data era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Data
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-core-1.54.0.0-bf04dafee476ebec1e2a6ecdd6a97e38d49d10272f2132c9a6c1ec03c719ef10/share/doc/html/src/PlutusCore.Data.html#I"><span class="hs-identifier hs-var">P.I</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">123</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>      </span><span id="local-6989586621680199923"><span class="annot"><span class="annottext">txOut :: TxOut era
</span><a href="#local-6989586621680199923"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Addr
</span><a href="#local-6989586621680199912"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; Value era
forall t s. Inject t s =&gt; t -&gt; s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#inject"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621680199917"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
AlonzoEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe DataHash)
Lens' (TxOut era) (StrictMaybe DataHash)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxOut.html#dataHashTxOutL"><span class="hs-identifier hs-var">dataHashTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe DataHash -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash -&gt; StrictMaybe DataHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash
</span><a href="#local-6989586621680199920"><span class="hs-identifier hs-var">datumHash</span></a></span><span>
</span><span id="line-58"></span><span>      </span><span id="local-6989586621680199927"><span class="annot"><span class="annottext">tx1 :: Tx era
</span><a href="#local-6989586621680199927"><span class="hs-identifier hs-var hs-var">tx1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxOut era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (StrictSeq (TxOut era))
TxOut era
</span><a href="#local-6989586621680199923"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-59"></span><span>    </span><span id="local-6989586621680199933"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680199933"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Tx era -&gt; TxIn
forall era. (HasCallStack, EraTx era) =&gt; Int -&gt; Tx era -&gt; TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.Utils.html#txInAt"><span class="hs-identifier hs-var">txInAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; TxIn)
-&gt; ImpM (LedgerSpec era) (Tx era) -&gt; ImpM (LedgerSpec era) TxIn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) (Tx era)
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx"><span class="hs-identifier hs-var">submitTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680199927"><span class="hs-identifier hs-var">tx1</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-61"></span><span>      </span><span id="local-6989586621680199936"><span class="annot"><span class="annottext">tx2 :: Tx era
</span><a href="#local-6989586621680199936"><span class="hs-identifier hs-var hs-var">tx2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Set TxIn -&gt; Identity (Set TxIn))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (Set TxIn -&gt; Identity (Set TxIn))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn)) -&gt; Tx era -&gt; Identity (Tx era))
-&gt; Set TxIn -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680199933"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680199936"><span class="hs-identifier hs-var">tx2</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="annottext">[Language]
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; [Language]
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html#eraLanguages"><span class="hs-identifier hs-var">eraLanguages</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680199341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680199940"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680199940"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="annottext">Language
-&gt; (forall {l :: Language}.
    PlutusLanguage l =&gt;
    SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a.
Language
-&gt; (forall (l :: Language). PlutusLanguage l =&gt; SLanguage l -&gt; a)
-&gt; a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#withSLanguage"><span class="hs-identifier hs-var">withSLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680199940"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {l :: Language}.
  PlutusLanguage l =&gt;
  SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (forall {l :: Language}.
    PlutusLanguage l =&gt;
    SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680200092"><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200092"><span class="hs-identifier hs-var">slang</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-66"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Language -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680199940"><span class="hs-identifier hs-var">lang</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-67"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-68"></span><span>          </span><span id="local-6989586621680200094"><span class="annot"><span class="annottext">alwaysSucceedsWithDatumHash :: ScriptHash
</span><a href="#local-6989586621680200094"><span class="hs-identifier hs-var hs-var">alwaysSucceedsWithDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsWithDatum"><span class="hs-identifier hs-var">alwaysSucceedsWithDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200092"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-69"></span><span>          </span><span id="local-6989586621680200096"><span class="annot"><span class="annottext">alwaysSucceedsNoDatumHash :: ScriptHash
</span><a href="#local-6989586621680200096"><span class="hs-identifier hs-var hs-var">alwaysSucceedsNoDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier hs-var">alwaysSucceedsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200092"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-70"></span><span>          </span><span id="local-6989586621680200098"><span class="annot"><span class="annottext">alwaysFailsWithDatumHash :: ScriptHash
</span><a href="#local-6989586621680200098"><span class="hs-identifier hs-var hs-var">alwaysFailsWithDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsWithDatum"><span class="hs-identifier hs-var">alwaysFailsWithDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200092"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-71"></span><span>          </span><span id="local-6989586621680200100"><span class="annot"><span class="annottext">alwaysFailsNoDatumHash :: ScriptHash
</span><a href="#local-6989586621680200100"><span class="hs-identifier hs-var hs-var">alwaysFailsNoDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsNoDatum"><span class="hs-identifier hs-var">alwaysFailsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200092"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Validating SPEND script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-74"></span><span>          </span><span id="local-6989586621680200102"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680200102"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200094"><span class="hs-identifier hs-var">alwaysSucceedsWithDatumHash</span></a></span><span>
</span><span id="line-75"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-76"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-77"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680200102"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not validating SPEND script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>          </span><span id="local-6989586621680200104"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680200104"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200098"><span class="hs-identifier hs-var">alwaysFailsWithDatumHash</span></a></span><span>
</span><span id="line-81"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-82"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-83"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680200104"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Validating CERT script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-86"></span><span>          </span><span id="local-6989586621680200106"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680200106"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200094"><span class="hs-identifier hs-var">alwaysSucceedsWithDatumHash</span></a></span><span>
</span><span id="line-87"></span><span>          </span><span id="local-6989586621680200107"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621680200107"><span class="hs-identifier hs-var">txCert</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpM (LedgerSpec era) (TxCert era)
forall era.
ShelleyEraImp era =&gt;
Credential 'Staking -&gt; ImpTestM era (TxCert era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#genRegTxCert"><span class="hs-identifier hs-var">genRegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; ImpM (LedgerSpec era) (TxCert era))
-&gt; Credential 'Staking -&gt; ImpM (LedgerSpec era) (TxCert era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200096"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span>
</span><span id="line-88"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-89"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-90"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-91"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680200106"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-92"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; StrictSeq (TxCert era) -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (StrictSeq (TxCert era))
TxCert era
</span><a href="#local-6989586621680200107"><span class="hs-identifier hs-var">txCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Validating WITHDRAWAL script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-95"></span><span>          </span><span id="local-6989586621680200111"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200111"><span class="hs-identifier hs-var">account</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpTestM era RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Credential 'Staking -&gt; ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerStakeCredential"><span class="hs-identifier hs-var">registerStakeCredential</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; ImpTestM era RewardAccount)
-&gt; Credential 'Staking -&gt; ImpTestM era RewardAccount
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200096"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span>
</span><span id="line-96"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-97"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-98"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Withdrawals -&gt; Identity Withdrawals)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) Withdrawals
Lens' (TxBody era) Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#withdrawalsTxBodyL"><span class="hs-identifier hs-var">withdrawalsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Withdrawals -&gt; Identity Withdrawals)
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Withdrawals -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#Withdrawals"><span class="hs-identifier hs-var">Withdrawals</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200111"><span class="hs-identifier hs-var">account</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Validating MINT script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-101"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) (Tx era) -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) (Tx era)
forall era. MaryEraImp era =&gt; ScriptHash -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/l/testlib/doc/html/cardano-ledger-mary/src/Test.Cardano.Ledger.Mary.ImpTest.html#mkTokenMintingTx"><span class="hs-identifier hs-var">mkTokenMintingTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200096"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not validating MINT script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; ImpM (LedgerSpec era) (Tx era) -&gt; ImpM (LedgerSpec era) ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpM (LedgerSpec era) (Tx era)
forall era. MaryEraImp era =&gt; ScriptHash -&gt; ImpTestM era (Tx era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/l/testlib/doc/html/cardano-ledger-mary/src/Test.Cardano.Ledger.Mary.ImpTest.html#mkTokenMintingTx"><span class="hs-identifier hs-var">mkTokenMintingTx</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200100"><span class="hs-identifier hs-var">alwaysFailsNoDatumHash</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Acceptable supplementary datum&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>          </span><span id="local-6989586621680200117"><span class="annot"><span class="annottext">KeyHash 'Payment
</span><a href="#local-6989586621680200117"><span class="hs-identifier hs-var">inputAddr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span>
</span><span id="line-108"></span><span>          </span><span id="local-6989586621680200118"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621680200118"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Coin)
-&gt; ImpM (LedgerSpec era) Integer -&gt; ImpM (LedgerSpec era) Coin
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Integer, Integer) -&gt; ImpM (LedgerSpec era) Integer
forall a. Random a =&gt; (a, a) -&gt; ImpM (LedgerSpec era) a
forall (g :: * -&gt; *) a. (MonadGen g, Random a) =&gt; (a, a) -&gt; g a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/quickcheck-transformer-0.3.1.2-8c69fd32e35ce43d2fa08d505758002237123724318b720a1bb6c013ff6e3bc9/share/doc/html/src/Test.QuickCheck.GenT.html#choose"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2_000_000</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">8_000_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>          </span><span id="local-6989586621680200119"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680200119"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Addr -&gt; Coin -&gt; ImpM (LedgerSpec era) TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr -&gt; Coin -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo"><span class="hs-identifier hs-var">sendCoinTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Payment -&gt; StakeReference -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment
</span><a href="#local-6989586621680200117"><span class="hs-identifier hs-var">inputAddr</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621680200118"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-110"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-111"></span><span>            </span><span id="local-6989586621680200133"><span class="annot"><span class="annottext">datum :: Data era
</span><a href="#local-6989586621680200133"><span class="hs-identifier hs-var hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Data -&gt; Data era
forall era. Era era =&gt; Data -&gt; Data era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Data
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/plutus-core-1.54.0.0-bf04dafee476ebec1e2a6ecdd6a97e38d49d10272f2132c9a6c1ec03c719ef10/share/doc/html/src/PlutusCore.Data.html#I"><span class="hs-identifier hs-var">P.I</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">123</span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>            </span><span id="local-6989586621680200134"><span class="annot"><span class="annottext">datumHash :: DataHash
</span><a href="#local-6989586621680200134"><span class="hs-identifier hs-var hs-var">datumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Data era -&gt; DataHash
forall era. Data era -&gt; DataHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Data.html#hashData"><span class="hs-identifier hs-var">hashData</span></a></span><span> </span><span class="annot"><span class="annottext">Data era
</span><a href="#local-6989586621680200133"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-113"></span><span>            </span><span id="local-6989586621680200135"><span class="annot"><span class="annottext">txOut :: TxOut era
</span><a href="#local-6989586621680200135"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-114"></span><span>              </span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span>
</span><span id="line-115"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; StakeReference -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200094"><span class="hs-identifier hs-var">alwaysSucceedsWithDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; MultiAsset -&gt; MaryValue
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#MaryValue"><span class="hs-identifier hs-var">MaryValue</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621680200118"><span class="hs-identifier hs-var">amount</span></a></span><span> </span><span class="annot"><span class="annottext">MultiAsset
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>                </span><span class="annot"><span class="annottext">TxOut era -&gt; (TxOut era -&gt; TxOut era) -&gt; TxOut era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
-&gt; TxOut era -&gt; Identity (TxOut era)
forall era.
AlonzoEraTxOut era =&gt;
Lens' (TxOut era) (StrictMaybe DataHash)
Lens' (TxOut era) (StrictMaybe DataHash)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxOut.html#dataHashTxOutL"><span class="hs-identifier hs-var">dataHashTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictMaybe DataHash -&gt; Identity (StrictMaybe DataHash))
 -&gt; TxOut era -&gt; Identity (TxOut era))
-&gt; StrictMaybe DataHash -&gt; TxOut era -&gt; TxOut era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash -&gt; StrictMaybe DataHash
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash
</span><a href="#local-6989586621680200134"><span class="hs-identifier hs-var">datumHash</span></a></span><span>
</span><span id="line-118"></span><span>            </span><span id="local-6989586621680200137"><span class="annot"><span class="annottext">txBody :: TxBody era
</span><a href="#local-6989586621680200137"><span class="hs-identifier hs-var hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-120"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680200119"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-121"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; StrictSeq (TxOut era) -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (StrictSeq (TxOut era))
TxOut era
</span><a href="#local-6989586621680200135"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span>            </span><span id="local-6989586621680200138"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621680200138"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>              </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621680200137"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-124"></span><span>                </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxWits era -&gt; Identity (TxWits era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
Lens' (Tx era) (TxWits era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#witsTxL"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxWits era -&gt; Identity (TxWits era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
    -&gt; TxWits era -&gt; Identity (TxWits era))
-&gt; (Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxDats era -&gt; Identity (TxDats era))
-&gt; TxWits era -&gt; Identity (TxWits era)
forall era. AlonzoEraTxWits era =&gt; Lens' (TxWits era) (TxDats era)
Lens' (TxWits era) (TxDats era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxWits.html#datsTxWitsL"><span class="hs-identifier hs-var">datsTxWitsL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxDats era -&gt; Identity (TxDats era))
 -&gt; TxWits era -&gt; Identity (TxWits era))
-&gt; ((Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
    -&gt; TxDats era -&gt; Identity (TxDats era))
-&gt; (Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
-&gt; TxWits era
-&gt; Identity (TxWits era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
-&gt; TxDats era -&gt; Identity (TxDats era)
forall era. Era era =&gt; Lens' (TxDats era) (Map DataHash (Data era))
Lens' (TxDats era) (Map DataHash (Data era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.TxWits.html#unTxDatsL"><span class="hs-identifier hs-var">unTxDatsL</span></a></span><span> </span><span class="annot"><span class="annottext">((Map DataHash (Data era) -&gt; Identity (Map DataHash (Data era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; (Map DataHash (Data era) -&gt; Map DataHash (Data era))
-&gt; Tx era
-&gt; Tx era
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">DataHash
-&gt; Data era -&gt; Map DataHash (Data era) -&gt; Map DataHash (Data era)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">DataHash
</span><a href="#local-6989586621680200134"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Data era
</span><a href="#local-6989586621680200133"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-125"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680200138"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#alonzoEraSpecificSpec"><span class="hs-identifier hs-type">alonzoEraSpecificSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680199537"><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#AlonzoEraImp"><span class="hs-identifier hs-type">AlonzoEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#ShelleyEraTxCert"><span class="hs-identifier hs-type">ShelleyEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.Monad.html#SpecWith"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Internal.html#ImpInit"><span class="hs-identifier hs-type">ImpInit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#LedgerSpec"><span class="hs-identifier hs-type">LedgerSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span id="alonzoEraSpecificSpec"><span class="annot"><span class="annottext">alonzoEraSpecificSpec :: forall era.
(AlonzoEraImp era, ShelleyEraTxCert era) =&gt;
SpecWith (ImpInit (LedgerSpec era))
</span><a href="Test.Cardano.Ledger.Alonzo.Imp.UtxowSpec.Valid.html#alonzoEraSpecificSpec"><span class="hs-identifier hs-var hs-var">alonzoEraSpecificSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">[Language]
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; [Language]
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-alonzo-1.15.0.0/doc/html/cardano-ledger-alonzo/src/Cardano.Ledger.Alonzo.Scripts.html#eraLanguages"><span class="hs-identifier hs-var">eraLanguages</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (Language -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680200218"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680200218"><span class="hs-identifier hs-var">lang</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><span class="annottext">Language
-&gt; (forall {l :: Language}.
    PlutusLanguage l =&gt;
    SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a.
Language
-&gt; (forall (l :: Language). PlutusLanguage l =&gt; SLanguage l -&gt; a)
-&gt; a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#withSLanguage"><span class="hs-identifier hs-var">withSLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680200218"><span class="hs-identifier hs-var">lang</span></a></span><span> </span><span class="annot"><span class="annottext">((forall {l :: Language}.
  PlutusLanguage l =&gt;
  SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; (forall {l :: Language}.
    PlutusLanguage l =&gt;
    SLanguage l -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621680200424"><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200424"><span class="hs-identifier hs-var">slang</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a. HasCallStack =&gt; String -&gt; SpecWith a -&gt; SpecWith a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#describe"><span class="hs-identifier hs-var">describe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Language -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621680200218"><span class="hs-identifier hs-var">lang</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SpecWith (ImpInit (LedgerSpec era))
 -&gt; SpecWith (ImpInit (LedgerSpec era)))
-&gt; SpecWith (ImpInit (LedgerSpec era))
-&gt; SpecWith (ImpInit (LedgerSpec era))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-135"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-136"></span><span>          </span><span id="local-6989586621680200425"><span class="annot"><span class="annottext">alwaysSucceedsWithDatumHash :: ScriptHash
</span><a href="#local-6989586621680200425"><span class="hs-identifier hs-var hs-var">alwaysSucceedsWithDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsWithDatum"><span class="hs-identifier hs-var">alwaysSucceedsWithDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200424"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-137"></span><span>          </span><span id="local-6989586621680200426"><span class="annot"><span class="annottext">alwaysSucceedsNoDatumHash :: ScriptHash
</span><a href="#local-6989586621680200426"><span class="hs-identifier hs-var hs-var">alwaysSucceedsNoDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysSucceedsNoDatum"><span class="hs-identifier hs-var">alwaysSucceedsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200424"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-138"></span><span>          </span><span id="local-6989586621680200427"><span class="annot"><span class="annottext">alwaysFailsWithDatumHash :: ScriptHash
</span><a href="#local-6989586621680200427"><span class="hs-identifier hs-var hs-var">alwaysFailsWithDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsWithDatum"><span class="hs-identifier hs-var">alwaysFailsWithDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200424"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-139"></span><span>          </span><span id="local-6989586621680200428"><span class="annot"><span class="annottext">alwaysFailsNoDatumHash :: ScriptHash
</span><a href="#local-6989586621680200428"><span class="hs-identifier hs-var hs-var">alwaysFailsNoDatumHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Plutus l -&gt; ScriptHash
forall (l :: Language). PlutusLanguage l =&gt; Plutus l -&gt; ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Plutus.Language.html#hashPlutusScript"><span class="hs-identifier hs-var">hashPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">(Plutus l -&gt; ScriptHash) -&gt; Plutus l -&gt; ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SLanguage l -&gt; Plutus l
forall (l :: Language). SLanguage l -&gt; Plutus l
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Plutus.Examples.html#alwaysFailsNoDatum"><span class="hs-identifier hs-var">alwaysFailsNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">SLanguage l
</span><a href="#local-6989586621680200424"><span class="hs-identifier hs-var">slang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#ScriptHash"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not validating CERT script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>          </span><span id="local-6989586621680200429"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621680200429"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpTestM era TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200427"><span class="hs-identifier hs-var">alwaysFailsWithDatumHash</span></a></span><span>
</span><span id="line-143"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680200430"><span class="annot"><span class="annottext">txCert :: TxCert era
</span><a href="#local-6989586621680200430"><span class="hs-identifier hs-var hs-var">txCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#RegTxCert"><span class="hs-identifier hs-var">RegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; TxCert era)
-&gt; Credential 'Staking -&gt; TxCert era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200426"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span>
</span><span id="line-144"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-146"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-147"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (Set TxIn)
TxIn
</span><a href="#local-6989586621680200429"><span class="hs-identifier hs-var">txIn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; StrictSeq (TxCert era) -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (StrictSeq (TxCert era))
TxCert era
</span><a href="#local-6989586621680200430"><span class="hs-identifier hs-var">txCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not validating WITHDRAWAL script&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-151"></span><span>          </span><span id="local-6989586621680200432"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200432"><span class="hs-identifier hs-var">account</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraTxCert era, ShelleyEraImp era,
 Eq (Event (EraRule &quot;TICK&quot; era)), Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
</span><a href="#local-6989586621680200433"><span class="hs-identifier hs-var">registerStakeCredentialNoDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount)
-&gt; Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200428"><span class="hs-identifier hs-var">alwaysFailsNoDatumHash</span></a></span><span>
</span><span id="line-152"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, AlonzoEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Alonzo.ImpTest.html#submitPhase2Invalid_"><span class="hs-identifier hs-var">submitPhase2Invalid_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-153"></span><span>            </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Tx era) -&gt; TxBody era -&gt; Tx era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-154"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Withdrawals -&gt; Identity Withdrawals)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) Withdrawals
Lens' (TxBody era) Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#withdrawalsTxBodyL"><span class="hs-identifier hs-var">withdrawalsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Withdrawals -&gt; Identity Withdrawals)
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Withdrawals -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#Withdrawals"><span class="hs-identifier hs-var">Withdrawals</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200432"><span class="hs-identifier hs-var">account</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-comment">--  Process a transaction with a succeeding script in every place possible,</span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-comment">--  and also with succeeding timelock scripts.</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Validating scripts everywhere&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-159"></span><span>          </span><span id="local-6989586621680200434"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680200434"><span class="hs-identifier hs-var">slotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting SlotNo (ImpTestState era) SlotNo
-&gt; ImpM (LedgerSpec era) SlotNo
forall s (m :: * -&gt; *) a. MonadState s m =&gt; Getting a s a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-mtl-0.2.1.0-0d9d0bb15333296047ba4b93a576c67cb2d2f407b8b7ffd0ab1ce8097b524420/share/doc/html/src/Lens.Micro.Mtl.html#use"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">Getting SlotNo (ImpTestState era) SlotNo
forall era r. Getting r (ImpTestState era) SlotNo
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickG"><span class="hs-identifier hs-var">impLastTickG</span></a></span><span>
</span><span id="line-160"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-161"></span><span>            </span><span id="local-6989586621680200436"><span class="annot"><span class="annottext">timelockScriptHash :: SlotNo -&gt; ImpM (LedgerSpec era) ScriptHash
</span><a href="#local-6989586621680200436"><span class="hs-identifier hs-var hs-var">timelockScriptHash</span></a></span></span><span> </span><span id="local-6989586621680200437"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680200437"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>              </span><span id="local-6989586621680200438"><span class="annot"><span class="annottext">KeyHash 'Witness
</span><a href="#local-6989586621680200438"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) (KeyHash 'Witness)
forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-163"></span><span>              </span><span class="annot"><span class="annottext">NativeScript era -&gt; ImpM (LedgerSpec era) ScriptHash
forall era.
EraScript era =&gt;
NativeScript era -&gt; ImpTestM era ScriptHash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impAddNativeScript"><span class="hs-identifier hs-var">impAddNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">(NativeScript era -&gt; ImpM (LedgerSpec era) ScriptHash)
-&gt; NativeScript era -&gt; ImpM (LedgerSpec era) ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-164"></span><span>                </span><span class="annot"><span class="annottext">StrictSeq (NativeScript era) -&gt; NativeScript era
forall era.
ShelleyEraScript era =&gt;
StrictSeq (NativeScript era) -&gt; NativeScript era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Scripts.html#RequireAllOf"><span class="hs-identifier hs-var">RequireAllOf</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">KeyHash 'Witness -&gt; NativeScript era
forall era.
ShelleyEraScript era =&gt;
KeyHash 'Witness -&gt; NativeScript era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Scripts.html#RequireSignature"><span class="hs-identifier hs-var">RequireSignature</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness
</span><a href="#local-6989586621680200438"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; NativeScript era
forall era. AllegraEraScript era =&gt; SlotNo -&gt; NativeScript era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#RequireTimeExpire"><span class="hs-identifier hs-var">RequireTimeExpire</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680200434"><span class="hs-identifier hs-var">slotNo</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; SlotNo -&gt; SlotNo
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; SlotNo -&gt; SlotNo
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680200437"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-165"></span><span>            </span><span id="local-6989586621680200478"><span class="annot"><span class="annottext">scriptAsset :: ScriptHash -&gt; m (PolicyID, b)
</span><a href="#local-6989586621680200478"><span class="hs-identifier hs-var hs-var">scriptAsset</span></a></span></span><span> </span><span id="local-6989586621680200479"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200479"><span class="hs-identifier hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-166"></span><span>              </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/QuickCheck-2.15.0.1-db6b992e5543937dfb08677d3de2c6cdff04a2cc45767828f7dbc5be2917a404/share/doc/html/src/Test.QuickCheck.Modifiers.html#Positive"><span class="hs-identifier hs-type">Positive</span></a></span><span> </span><span id="local-6989586621680200481"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680200481"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Positive b)
forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/ImpSpec-0.1.0.0-6ea58913ddd2445c6ef0a09c850f2b8e9ef4a818708b4f2c102bd4532b2effb1/share/doc/html/src/Test.ImpSpec.Random.html#arbitrary"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-167"></span><span>              </span><span class="annot"><span class="annottext">(PolicyID, b) -&gt; m (PolicyID, b)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; PolicyID
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#PolicyID"><span class="hs-identifier hs-var">PolicyID</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200479"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Item b] -&gt; b
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShortByteString -&gt; AssetName
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#AssetName"><span class="hs-identifier hs-var">AssetName</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><span class="hs-string">&quot;Test Asset&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680200481"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>          </span><span id="local-6989586621680200485"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200485"><span class="hs-identifier hs-var">timelockScriptHash0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; ImpM (LedgerSpec era) ScriptHash
</span><a href="#local-6989586621680200436"><span class="hs-identifier hs-var">timelockScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span>
</span><span id="line-169"></span><span>          </span><span id="local-6989586621680200486"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200486"><span class="hs-identifier hs-var">timelockScriptHash1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; ImpM (LedgerSpec era) ScriptHash
</span><a href="#local-6989586621680200436"><span class="hs-identifier hs-var">timelockScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">1</span></span><span>
</span><span id="line-170"></span><span>          </span><span id="local-6989586621680200487"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200487"><span class="hs-identifier hs-var">timelockScriptHash2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; ImpM (LedgerSpec era) ScriptHash
</span><a href="#local-6989586621680200436"><span class="hs-identifier hs-var">timelockScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">2</span></span><span>
</span><span id="line-171"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-172"></span><span>            </span><span id="local-6989586621680200488"><span class="annot"><span class="annottext">inputScriptHashes :: [ScriptHash]
</span><a href="#local-6989586621680200488"><span class="hs-identifier hs-var hs-var">inputScriptHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200425"><span class="hs-identifier hs-var">alwaysSucceedsWithDatumHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200485"><span class="hs-identifier hs-var">timelockScriptHash0</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span>            </span><span id="local-6989586621680200489"><span class="annot"><span class="annottext">assetScriptHashes :: [ScriptHash]
</span><a href="#local-6989586621680200489"><span class="hs-identifier hs-var hs-var">assetScriptHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200426"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200486"><span class="hs-identifier hs-var">timelockScriptHash1</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>            </span><span id="local-6989586621680200490"><span class="annot"><span class="annottext">rewardScriptHashes :: [ScriptHash]
</span><a href="#local-6989586621680200490"><span class="hs-identifier hs-var hs-var">rewardScriptHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200426"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Item [ScriptHash]
ScriptHash
</span><a href="#local-6989586621680200487"><span class="hs-identifier hs-var">timelockScriptHash2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-175"></span><span>          </span><span id="local-6989586621680200491"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621680200491"><span class="hs-identifier hs-var">txIns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; ImpTestM era TxIn)
-&gt; [ScriptHash] -&gt; ImpM (LedgerSpec era) [TxIn]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ImpTestM era TxIn
forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
ScriptHash -&gt; ImpTestM era TxIn
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#produceScript"><span class="hs-identifier hs-var">produceScript</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptHash]
</span><a href="#local-6989586621680200488"><span class="hs-identifier hs-var">inputScriptHashes</span></a></span><span>
</span><span id="line-176"></span><span>          </span><span id="local-6989586621680200493"><span class="annot"><span class="annottext">MultiAsset
</span><a href="#local-6989586621680200493"><span class="hs-identifier hs-var">multiAsset</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map PolicyID (Map AssetName Integer) -&gt; MultiAsset
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#MultiAsset"><span class="hs-identifier hs-var">MultiAsset</span></a></span><span> </span><span class="annot"><span class="annottext">(Map PolicyID (Map AssetName Integer) -&gt; MultiAsset)
-&gt; ([(PolicyID, Map AssetName Integer)]
    -&gt; Map PolicyID (Map AssetName Integer))
-&gt; [(PolicyID, Map AssetName Integer)]
-&gt; MultiAsset
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(PolicyID, Map AssetName Integer)]
-&gt; Map PolicyID (Map AssetName Integer)
[Item (Map PolicyID (Map AssetName Integer))]
-&gt; Map PolicyID (Map AssetName Integer)
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">([(PolicyID, Map AssetName Integer)] -&gt; MultiAsset)
-&gt; ImpM (LedgerSpec era) [(PolicyID, Map AssetName Integer)]
-&gt; ImpM (LedgerSpec era) MultiAsset
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ScriptHash
 -&gt; ImpM (LedgerSpec era) (PolicyID, Map AssetName Integer))
-&gt; [ScriptHash]
-&gt; ImpM (LedgerSpec era) [(PolicyID, Map AssetName Integer)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
-&gt; ImpM (LedgerSpec era) (PolicyID, Map AssetName Integer)
forall {b} {b} {m :: * -&gt; *}.
(Item b ~ (AssetName, b), Num b, Ord b, Arbitrary b, MonadGen m,
 IsList b) =&gt;
ScriptHash -&gt; m (PolicyID, b)
</span><a href="#local-6989586621680200478"><span class="hs-identifier hs-var">scriptAsset</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptHash]
</span><a href="#local-6989586621680200489"><span class="hs-identifier hs-var">assetScriptHashes</span></a></span><span>
</span><span id="line-177"></span><span>          </span><span id="local-6989586621680200495"><span class="annot"><span class="annottext">[RewardAccount]
</span><a href="#local-6989586621680200495"><span class="hs-identifier hs-var">rewardAccounts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; ImpM (LedgerSpec era) RewardAccount)
-&gt; [ScriptHash] -&gt; ImpM (LedgerSpec era) [RewardAccount]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat MinVersion (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 ShelleyEraTxCert era, ShelleyEraImp era,
 Eq (Event (EraRule &quot;TICK&quot; era)), Eq (Event (EraRule &quot;LEDGER&quot; era)),
 NFData (Event (EraRule &quot;TICK&quot; era)),
 NFData (Event (EraRule &quot;LEDGER&quot; era)),
 Typeable (Event (EraRule &quot;TICK&quot; era)),
 Typeable (Event (EraRule &quot;LEDGER&quot; era)),
 ToExpr (Event (EraRule &quot;TICK&quot; era)),
 ToExpr (Event (EraRule &quot;LEDGER&quot; era))) =&gt;
Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
</span><a href="#local-6989586621680200433"><span class="hs-identifier hs-var">registerStakeCredentialNoDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount)
-&gt; (ScriptHash -&gt; Credential 'Staking)
-&gt; ScriptHash
-&gt; ImpM (LedgerSpec era) RewardAccount
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ScriptHash]
</span><a href="#local-6989586621680200490"><span class="hs-identifier hs-var">rewardScriptHashes</span></a></span><span>
</span><span id="line-178"></span><span>          </span><span id="local-6989586621680200496"><span class="annot"><span class="annottext">KeyHash 'Payment
</span><a href="#local-6989586621680200496"><span class="hs-identifier hs-var">outputAddr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) s g (m :: * -&gt; *).
(HasKeyPairs s, MonadState s m, HasStatefulGen g m) =&gt;
m (KeyHash r)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Payment"><span class="hs-identifier hs-type">Payment</span></a></span><span>
</span><span id="line-179"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-180"></span><span>            </span><span id="local-6989586621680200497"><span class="annot"><span class="annottext">txOut :: TxOut era
</span><a href="#local-6989586621680200497"><span class="hs-identifier hs-var hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-181"></span><span>              </span><span class="annot"><span class="annottext">Addr -&gt; Value era -&gt; TxOut era
forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr -&gt; Value era -&gt; TxOut era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxOut"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span>
</span><span id="line-182"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash 'Payment -&gt; StakeReference -&gt; Addr
forall p s.
(MakeCredential p 'Payment, MakeStakeReference s) =&gt;
p -&gt; s -&gt; Addr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/l/testlib/doc/html/cardano-ledger-core/src/Test.Cardano.Ledger.Core.KeyPair.html#mkAddr"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment
</span><a href="#local-6989586621680200496"><span class="hs-identifier hs-var">outputAddr</span></a></span><span> </span><span class="annot"><span class="annottext">StakeReference
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#StakeRefNull"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; MultiAsset -&gt; MaryValue
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.Value.html#MaryValue"><span class="hs-identifier hs-var">MaryValue</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">MultiAsset
</span><a href="#local-6989586621680200493"><span class="hs-identifier hs-var">multiAsset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>            </span><span id="local-6989586621680200498"><span class="annot"><span class="annottext">txBody :: TxBody era
</span><a href="#local-6989586621680200498"><span class="hs-identifier hs-var hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>              </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-186"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Set TxIn -&gt; Identity (Set TxIn))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) (Set TxIn)
Lens' (TxBody era) (Set TxIn)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#inputsTxBodyL"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Set TxIn -&gt; Identity (Set TxIn))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Set TxIn -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (Set TxIn)] -&gt; Set TxIn
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="annot"><span class="annottext">[Item (Set TxIn)]
[TxIn]
</span><a href="#local-6989586621680200491"><span class="hs-identifier hs-var">txIns</span></a></span><span>
</span><span id="line-187"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(ValidityInterval -&gt; Identity ValidityInterval)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
AllegraEraTxBody era =&gt;
Lens' (TxBody era) ValidityInterval
Lens' (TxBody era) ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.TxBody.html#vldtTxBodyL"><span class="hs-identifier hs-var">vldtTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((ValidityInterval -&gt; Identity ValidityInterval)
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; ValidityInterval -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo -&gt; StrictMaybe SlotNo -&gt; ValidityInterval
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-allegra-1.9.0.0/doc/html/cardano-ledger-allegra/src/Cardano.Ledger.Allegra.Scripts.html#ValidityInterval"><span class="hs-identifier hs-var">ValidityInterval</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SNothing"><span class="hs-identifier hs-var">SNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotNo -&gt; StrictMaybe SlotNo
forall a. a -&gt; StrictMaybe a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Maybe.Strict.html#SJust"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; StrictMaybe SlotNo) -&gt; SlotNo -&gt; StrictMaybe SlotNo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621680200434"><span class="hs-identifier hs-var">slotNo</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; SlotNo -&gt; SlotNo
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(MultiAsset -&gt; Identity MultiAsset)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. MaryEraTxBody era =&gt; Lens' (TxBody era) MultiAsset
Lens' (TxBody era) MultiAsset
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-mary-1.9.0.1/doc/html/cardano-ledger-mary/src/Cardano.Ledger.Mary.TxBody.html#mintTxBodyL"><span class="hs-identifier hs-var">mintTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((MultiAsset -&gt; Identity MultiAsset)
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; MultiAsset -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">MultiAsset
</span><a href="#local-6989586621680200493"><span class="hs-identifier hs-var">multiAsset</span></a></span><span>
</span><span id="line-189"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Withdrawals -&gt; Identity Withdrawals)
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era. EraTxBody era =&gt; Lens' (TxBody era) Withdrawals
Lens' (TxBody era) Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#withdrawalsTxBodyL"><span class="hs-identifier hs-var">withdrawalsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((Withdrawals -&gt; Identity Withdrawals)
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; Withdrawals -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Map RewardAccount Coin -&gt; Withdrawals
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#Withdrawals"><span class="hs-identifier hs-var">Withdrawals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Item (Map RewardAccount Coin)] -&gt; Map RewardAccount Coin
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200503"><span class="hs-identifier hs-var">acct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coin
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680200503"><span class="annot"><span class="annottext">RewardAccount
</span><a href="#local-6989586621680200503"><span class="hs-identifier hs-var">acct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[RewardAccount]
</span><a href="#local-6989586621680200495"><span class="hs-identifier hs-var">rewardAccounts</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; StrictSeq (TxCert era) -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (StrictSeq (TxCert era))] -&gt; StrictSeq (TxCert era)
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#UnRegTxCert"><span class="hs-identifier hs-var">UnRegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; TxCert era)
-&gt; (ScriptHash -&gt; Credential 'Staking) -&gt; ScriptHash -&gt; TxCert era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; TxCert era) -&gt; [ScriptHash] -&gt; [TxCert era]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[ScriptHash]
</span><a href="#local-6989586621680200490"><span class="hs-identifier hs-var">rewardScriptHashes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; (TxBody era -&gt; TxBody era) -&gt; TxBody era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#outputsTxBodyL"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxOut era) -&gt; Identity (StrictSeq (TxOut era)))
 -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; StrictSeq (TxOut era) -&gt; TxBody era -&gt; TxBody era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Item (StrictSeq (TxOut era))
TxOut era
</span><a href="#local-6989586621680200497"><span class="hs-identifier hs-var">txOut</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpM (LedgerSpec era) ())
-&gt; Tx era -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621680200498"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>        </span><span class="annot"><span class="annottext">String
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a.
(HasCallStack, Example a) =&gt;
String -&gt; a -&gt; SpecWith (Arg a)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hspec-core-2.11.13-707e7990f927091784a53f26b416ab321bc8328c835764c4a4c0a3c59ebc02a5/share/doc/html/src/Test.Hspec.Core.Spec.html#it"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Multiple identical certificates&quot;</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) ()
 -&gt; SpecWith (Arg (ImpM (LedgerSpec era) ())))
-&gt; ImpM (LedgerSpec era) ()
-&gt; SpecWith (Arg (ImpM (LedgerSpec era) ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680200505"><span class="annot"><span class="annottext">scriptHash :: ScriptHash
</span><a href="#local-6989586621680200505"><span class="hs-identifier hs-var hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200426"><span class="hs-identifier hs-var">alwaysSucceedsNoDatumHash</span></a></span><span>
</span><span id="line-196"></span><span>          </span><span class="annot"><span class="annottext">ImpM (LedgerSpec era) RewardAccount -&gt; ImpM (LedgerSpec era) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(ImpM (LedgerSpec era) RewardAccount -&gt; ImpM (LedgerSpec era) ())
-&gt; (Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount)
-&gt; Credential 'Staking
-&gt; ImpM (LedgerSpec era) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Credential 'Staking -&gt; ImpTestM era RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#registerStakeCredential"><span class="hs-identifier hs-var">registerStakeCredential</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; ImpM (LedgerSpec era) ())
-&gt; Credential 'Staking -&gt; ImpM (LedgerSpec era) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200505"><span class="hs-identifier hs-var">scriptHash</span></a></span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680200507"><span class="annot"><span class="annottext">tx :: Tx era
</span><a href="#local-6989586621680200507"><span class="hs-identifier hs-var hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>                </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-199"></span><span>                  </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[Item (StrictSeq (TxCert era))] -&gt; StrictSeq (TxCert era)
forall l. IsList l =&gt; [Item l] -&gt; l
</span><span class="hs-identifier hs-var">fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#UnRegTxCert"><span class="hs-identifier hs-var">UnRegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'Staking -&gt; TxCert era)
-&gt; (ScriptHash -&gt; Credential 'Staking) -&gt; ScriptHash -&gt; TxCert era
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptHash -&gt; TxCert era) -&gt; [ScriptHash] -&gt; [TxCert era]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ScriptHash -&gt; [ScriptHash]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200505"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#eraProtVerLow"><span class="hs-identifier hs-var">eraProtVerLow</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621680199537"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Version -&gt; Version -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">forall (v :: Nat).
(KnownNat v, MinVersion &lt;= v, v &lt;= MaxVersion) =&gt;
Version
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Version.html#natVersion"><span class="hs-identifier hs-var">natVersion</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-number">9</span></span><span>
</span><span id="line-201"></span><span>            </span><span class="hs-keyword">then</span><span>
</span><span id="line-202"></span><span>              </span><span class="hs-comment">-- This passes UTXOW rules but not DELEG rules; however, we care about only UTXOW rules here</span><span>
</span><span id="line-203"></span><span>              </span><span class="annot"><span class="annottext">Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var">submitFailingTx</span></a></span><span>
</span><span id="line-204"></span><span>                </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680200507"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-205"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShelleyDelegPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall (rule :: Symbol) (t :: * -&gt; *) era.
InjectRuleFailure rule t era =&gt;
t era -&gt; EraRuleFailure rule era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#injectFailure"><span class="hs-identifier hs-var">injectFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ShelleyDelegPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era)
-&gt; ShelleyDelegPredFailure era -&gt; EraRuleFailure &quot;LEDGER&quot; era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking -&gt; ShelleyDelegPredFailure era
forall era. Credential 'Staking -&gt; ShelleyDelegPredFailure era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.Rules.Deleg.html#StakeKeyNotRegisteredDELEG"><span class="hs-identifier hs-var">StakeKeyNotRegisteredDELEG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; Credential 'Staking
forall (kr :: KeyRole). ScriptHash -&gt; Credential kr
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#ScriptHashObj"><span class="hs-identifier hs-var">ScriptHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621680200505"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span>            </span><span class="hs-keyword">else</span><span>
</span><span id="line-207"></span><span>              </span><span class="hs-comment">-- Conway fixed the bug that was causing DELEG to fail</span><span>
</span><span id="line-208"></span><span>              </span><span class="annot"><span class="annottext">Tx era -&gt; ImpM (LedgerSpec era) ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var">submitTx_</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680200507"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- NOTE: certain tests somehow require certificates without deposits</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">-- otherwise, they will yield a Plutus failure</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- TODO: figure out what's the problem, this might be of interest:</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">-- https://github.com/IntersectMBO/cardano-ledger/issues/4571</span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621680200433"><span class="annot"><span class="annottext">registerStakeCredentialNoDeposit :: Credential 'Staking -&gt; ImpM (LedgerSpec era) RewardAccount
</span><a href="#local-6989586621680200433"><span class="hs-identifier hs-var hs-var">registerStakeCredentialNoDeposit</span></a></span></span><span> </span><span id="local-6989586621680203643"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621680203643"><span class="hs-identifier hs-var">cred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Tx era -&gt; ImpTestM era ()
forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Register Reward Account: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; Text
forall (kr :: KeyRole). Credential kr -&gt; Text
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#credToText"><span class="hs-identifier hs-var">credToText</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621680203643"><span class="hs-identifier hs-var">cred</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tx era -&gt; ImpTestM era ()) -&gt; Tx era -&gt; ImpTestM era ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-216"></span><span>        </span><span class="annot"><span class="annottext">TxBody era -&gt; Tx era
forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTx"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
forall era. EraTxBody era =&gt; TxBody era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#mkBasicTxBody"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-217"></span><span>          </span><span class="annot"><span class="annottext">Tx era -&gt; (Tx era -&gt; Tx era) -&gt; Tx era
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(TxBody era -&gt; Identity (TxBody era))
-&gt; Tx era -&gt; Identity (Tx era)
forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
Lens' (Tx era) (TxBody era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#bodyTxL"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">((TxBody era -&gt; Identity (TxBody era))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; ((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
    -&gt; TxBody era -&gt; Identity (TxBody era))
-&gt; (StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; Tx era
-&gt; Identity (Tx era)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
-&gt; TxBody era -&gt; Identity (TxBody era)
forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html#certsTxBodyL"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-218"></span><span>            </span><span class="annot"><span class="annottext">((StrictSeq (TxCert era) -&gt; Identity (StrictSeq (TxCert era)))
 -&gt; Tx era -&gt; Identity (Tx era))
-&gt; StrictSeq (TxCert era) -&gt; Tx era -&gt; Tx era
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCert era] -&gt; StrictSeq (TxCert era)
forall a. [a] -&gt; StrictSeq a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#fromList"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Credential 'Staking -&gt; TxCert era
forall era.
ShelleyEraTxCert era =&gt;
Credential 'Staking -&gt; TxCert era
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/doc/html/cardano-ledger-shelley/src/Cardano.Ledger.Shelley.TxCert.html#RegTxCert"><span class="hs-identifier hs-var">RegTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621680203643"><span class="hs-identifier hs-var">cred</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-219"></span><span>      </span><span id="local-6989586621680203647"><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621680203647"><span class="hs-identifier hs-var">nId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting Network (ImpTestState era) Network
-&gt; ImpM (LedgerSpec era) Network
forall s (m :: * -&gt; *) a. MonadState s m =&gt; Getting a s a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-mtl-0.2.1.0-0d9d0bb15333296047ba4b93a576c67cb2d2f407b8b7ffd0ab1ce8097b524420/share/doc/html/src/Lens.Micro.Mtl.html#use"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Globals -&gt; Const Network Globals)
-&gt; ImpTestState era -&gt; Const Network (ImpTestState era)
forall era (f :: * -&gt; *).
Functor f =&gt;
(Globals -&gt; f Globals) -&gt; ImpTestState era -&gt; f (ImpTestState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-shelley-1.17.2.0/l/testlib/doc/html/cardano-ledger-shelley/src/Test.Cardano.Ledger.Shelley.ImpTest.html#impGlobalsL"><span class="hs-identifier hs-var">impGlobalsL</span></a></span><span> </span><span class="annot"><span class="annottext">((Globals -&gt; Const Network Globals)
 -&gt; ImpTestState era -&gt; Const Network (ImpTestState era))
-&gt; ((Network -&gt; Const Network Network)
    -&gt; Globals -&gt; Const Network Globals)
-&gt; Getting Network (ImpTestState era) Network
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Globals -&gt; Network) -&gt; SimpleGetter Globals Network
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Globals -&gt; Network
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#networkId"><span class="hs-identifier hs-var">networkId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><span class="annottext">RewardAccount -&gt; ImpM (LedgerSpec era) RewardAccount
forall a. a -&gt; ImpM (LedgerSpec era) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(RewardAccount -&gt; ImpM (LedgerSpec era) RewardAccount)
-&gt; RewardAccount -&gt; ImpM (LedgerSpec era) RewardAccount
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Network -&gt; Credential 'Staking -&gt; RewardAccount
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Address.html#RewardAccount"><span class="hs-identifier hs-var">RewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621680203647"><span class="hs-identifier hs-var">nId</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621680203643"><span class="hs-identifier hs-var">cred</span></a></span><span>
</span><span id="line-221"></span></pre></body></html>