name:                delegation
version:             0.1.0.0
description:         Delegation Executable Model
author:              IOHK Formal Metheds Team
maintainer:          formal.methods@iohk.io
build-type:          Simple
cabal-version:       >=1.8

source-repository head
  type: git
  location: https://github.com/input-output-hk/cardano-ledger-specs.git
  subdir:   hs

flag development
    description: Disable '-Werror'
    default: False
    manual: True

library
  exposed-modules:   Address
                     BaseTypes
                     BlockChain
                     Coin
                     Keys
                     UTxO
                     Slot
                     PParams
                     EpochBoundary
                     LedgerState
                     MetaData
                     Serialization
                     Delegation.PoolParams
                     Delegation.Certificates
                     OCert
                     Tx
                     TxData
                     Updates
                     Validation
                     CostModel
                     Value
                     Scripts
                     STS.Avup
                     STS.Bbody
                     STS.Tick
                     STS.Chain
                     STS.Deleg
                     STS.Delegs
                     STS.Delpl
                     STS.Epoch
                     STS.Ledger
                     STS.Ledgers
                     STS.Mir
                     STS.NewEpoch
                     STS.Newpp
                     STS.Ocert
                     STS.Overlay
                     STS.Pool
                     STS.PoolReap
                     STS.Ppup
                     STS.Prtcl
                     STS.Rupd
                     STS.Snap
                     STS.Up
                     STS.Updn
                     STS.Utxo
                     STS.Utxow

                     Cardano.Ledger.Shelley.Crypto

                     Cardano.Ledger.Shelley.API
  other-modules:     Cardano.Ledger.Shelley.API.Validation
                     Cardano.Ledger.Shelley.API.Mempool
                     Cardano.Ledger.Shelley.API.Protocol
  hs-source-dirs: src
  ghc-options:
    -Wall
    -Wcompat
    -Wincomplete-record-updates
    -Wincomplete-uni-patterns
    -Wredundant-constraints
  if (!flag(development))
    ghc-options:
      -Werror
  build-depends:
    aeson,
    base >= 4.7 && < 5,
    bytestring,
    cborg,
    cborg-json,
    containers,
    cryptonite,
    hedgehog,
    QuickCheck,
    small-steps,
    microlens,
    microlens-th,
    mtl,
    non-integer,
    stm,
    text,
    transformers,
    cs-ledger,
    cardano-binary,
    cardano-crypto-class,
    cardano-prelude,
    cardano-slotting

test-suite delegation-test
    type:                exitcode-stdio-1.0
    main-is:             Tests.hs
    other-modules:       UnitTests
                         Test.Utils
                         ConcreteCryptoTypes
                         MultiSigExamples
                         Mutator
                         Generator
                         Generator.Core.Constants
                         Generator.Block
                         Generator.Core.QuickCheck
                         Generator.ChainTrace
                         Generator.LedgerTrace.QuickCheck
                         Generator.DCertTrace
                         Generator.Delegation.QuickCheck
                         Generator.Update.QuickCheck
                         Generator.Utxo.QuickCheck
                         PropertyTests
                         Shrinkers
                         STSTests
                         Examples
                         Rules.ClassifyTraces
                         Cardano.Crypto.VRF.Fake
                         Rules.TestChain
                         Rules.TestDeleg
                         Rules.TestLedger
                         Rules.TestNewEpoch
                         Rules.TestDelegs
                         Rules.TestPool
                         Rules.TestPoolreap
                         Rules.TestUtxo
                         Rules.TestUtxow
                         Test.Serialization
                         Test.CDDL
                         Test.Utils
    hs-source-dirs:      test
    ghc-options:
      -threaded
      -rtsopts
      -with-rtsopts=-N
      -Wall
      -Wcompat
      -Wincomplete-record-updates
      -Wincomplete-uni-patterns
      -Wredundant-constraints
      -- We set a bound here so that we're alerted of potential space
      -- leaks in our generators (or test) code.
      --
      -- The 4 megabytes stack bound and 150 megabytes heap bound were
      -- determined ad-hoc.
      "-with-rtsopts=-K4m -M150m"
    if (!flag(development))
      ghc-options:
        -Werror
    build-depends:
      QuickCheck,
      base,
      bytestring,
      cardano-binary,
      cardano-crypto-class,
      cardano-prelude,
      cardano-slotting,
      cborg,
      containers,
      cryptonite,
      cs-ledger,
      delegation,
      hedgehog,
      microlens,
      multiset,
      process-extras,
      small-steps,
      tasty,
      tasty-hedgehog,
      tasty-hunit,
      tasty-quickcheck,
      text,
      transformers
