<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Chain.Block.ValidationMode</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#tests"><span class="hs-identifier">tests</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Block.html"><span class="hs-identifier">Byron.Spec.Chain.STS.Block</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Abstract</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html"><span class="hs-identifier">Byron.Spec.Chain.STS.Rule.Chain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#CHAIN"><span class="hs-identifier">CHAIN</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html"><span class="hs-identifier">Byron.Spec.Chain.STS.Rule.Chain</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Abstract</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html"><span class="hs-identifier">Byron.Spec.Ledger.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Abstract</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html"><span class="hs-identifier">Byron.Spec.Ledger.Delegation</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier">ADELEGS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier">DELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier">DIState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier">DState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.GlobalParams.html"><span class="hs-identifier">Byron.Spec.Ledger.GlobalParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier">lovelaceCap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html"><span class="hs-identifier">Byron.Spec.Ledger.STS.UTXO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#UTxOEnv"><span class="hs-identifier">UTxOEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#UTxOState"><span class="hs-identifier">UTxOState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXOWS.html"><span class="hs-identifier">Byron.Spec.Ledger.STS.UTXOWS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXOWS.html#UTXOWS"><span class="hs-identifier">UTXOWS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.UTxO.html"><span class="hs-identifier">Byron.Spec.Ledger.UTxO</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Abstract</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.html"><span class="hs-identifier">Cardano.Chain.Block</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier">ABlock</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#AHeader"><span class="hs-identifier">AHeader</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#BlockValidationMode"><span class="hs-identifier">BlockValidationMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier">Proof</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier">blockProof</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#initialChainValidationState"><span class="hs-identifier">initialChainValidationState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#updateBlock"><span class="hs-identifier">updateBlock</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Delegation.html"><span class="hs-identifier">Cardano.Chain.Delegation</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Delegation</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.UTxO.html"><span class="hs-identifier">Cardano.Chain.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.UTxO.TxProof.html#TxProof"><span class="hs-identifier">TxProof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html"><span class="hs-identifier">Cardano.Chain.ValidationMode</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#ValidationMode"><span class="hs-identifier">ValidationMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#fromBlockValidationMode"><span class="hs-identifier">fromBlockValidationMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.html"><span class="hs-identifier">Cardano.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.Hashing.html#Hash"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.html"><span class="hs-identifier">Cardano.Ledger.Binary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier">Annotated</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.html"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">State</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Base.html#trace"><span class="hs-identifier">trace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.html"><span class="hs-identifier">Control.State.Transition</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/bimap-0.5.0-27098ee257ef2e554baff63313c57dc699014713bec5c50671e808ed86f54646/share/doc/html/src/Data.Bimap.html"><span class="hs-identifier">Data.Bimap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BM</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.html"><span class="hs-identifier">Hedgehog</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Gen.html"><span class="hs-identifier">Hedgehog.Gen</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gen</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Range.html"><span class="hs-identifier">Hedgehog.Range</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Range</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator">(^.)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Chain.Delegation.Gen.html"><span class="hs-identifier">Test.Cardano.Chain.Delegation.Gen</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Delegation</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html"><span class="hs-identifier">Test.Cardano.Chain.Elaboration.Block</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#abEnvToCfg"><span class="hs-identifier">abEnvToCfg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#elaborateBS"><span class="hs-identifier">elaborateBS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#rcDCert"><span class="hs-identifier">rcDCert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#transactionIds"><span class="hs-identifier">transactionIds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Chain.UTxO.Gen.html"><span class="hs-identifier">Test.Cardano.Chain.UTxO.Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Chain.UTxO.Gen.html#genTxProof"><span class="hs-identifier">genTxProof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Chain.UTxO.Model.html"><span class="hs-identifier">Test.Cardano.Chain.UTxO.Model</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Chain.UTxO.Model.html#elaborateInitialUTxO"><span class="hs-identifier">elaborateInitialUTxO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Chain.Update.Gen.html"><span class="hs-identifier">Test.Cardano.Chain.Update.Gen</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Update</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html"><span class="hs-identifier">Test.Cardano.Crypto.Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#feedPM"><span class="hs-identifier">feedPM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#genAbstractHash"><span class="hs-identifier">genAbstractHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-test-0.1.0.5-1696ff9dfe28e79e45c7f4d61d4d2aee5cd8c8a1c8e41332b69038cc5c66e5fe/share/doc/html/src/Test.Cardano.Prelude.html"><span class="hs-identifier">Test.Cardano.Prelude</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Generator.html"><span class="hs-identifier">Test.Control.State.Transition.Generator</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Generator.html#trace"><span class="hs-identifier">trace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Trace.html"><span class="hs-identifier">Test.Control.State.Transition.Trace</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Trace</span></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Options.html"><span class="hs-identifier">Test.Options</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Options.html#TSGroup"><span class="hs-identifier">TSGroup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Options.html#TSProperty"><span class="hs-identifier">TSProperty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Options.html#withTestsTS"><span class="hs-identifier">withTestsTS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- BlockValidationMode Properties</span><span>
</span><span id="line-68"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Property: When calling 'updateBlock' given a valid 'Block', validation</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- should pass in all 'BlockValidationMode's.</span><span>
</span><span id="line-72"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#ts_prop_updateBlock_Valid"><span class="hs-identifier hs-type">ts_prop_updateBlock_Valid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Options.html#TSProperty"><span class="hs-identifier hs-type">TSProperty</span></a></span><span>
</span><span id="line-73"></span><span id="ts_prop_updateBlock_Valid"><span class="annot"><span class="annottext">ts_prop_updateBlock_Valid :: TSProperty
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#ts_prop_updateBlock_Valid"><span class="hs-identifier hs-var hs-var">ts_prop_updateBlock_Valid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><span class="annottext">TestLimit -&gt; Property -&gt; TSProperty
</span><a href="Test.Options.html#withTestsTS"><span class="hs-identifier hs-var">withTestsTS</span></a></span><span> </span><span class="annot"><span class="annottext">TestLimit
</span><span class="hs-number">100</span></span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><span class="annottext">(Property -&gt; TSProperty)
-&gt; (PropertyT IO () -&gt; Property) -&gt; PropertyT IO () -&gt; TSProperty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; PropertyT IO () -&gt; Property
PropertyT IO () -&gt; Property
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#property"><span class="hs-identifier hs-var">property</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><span class="annottext">(PropertyT IO () -&gt; TSProperty) -&gt; PropertyT IO () -&gt; TSProperty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-77"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377899"><span class="annot"><span class="annottext">traceLength :: Word64
</span><a href="#local-6989586621679377899"><span class="hs-identifier hs-var hs-var">traceLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-comment">-- TODO: check that the @k@ value is not important</span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-comment">-- in this test, in that case we can get away with</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-comment">-- generating small traces.</span><span>
</span><span id="line-80"></span><span>      </span><span id="local-6989586621679377900"><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377900"><span class="hs-identifier hs-var">sampleTrace</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN)
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN))
-&gt; Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. HasTrace s =&gt; BaseEnv s -&gt; Word64 -&gt; Gen (Trace s)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Generator.html#trace"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679377899"><span class="hs-identifier hs-var">traceLength</span></a></span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377902"><span class="annot"><span class="annottext">lastState :: State CHAIN
</span><a href="#local-6989586621679377902"><span class="hs-identifier hs-var hs-var">lastState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace CHAIN -&gt; State CHAIN
forall s. Trace s -&gt; State s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Trace.html#lastState"><span class="hs-identifier hs-var">Trace.lastState</span></a></span><span> </span><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377900"><span class="hs-identifier hs-var">sampleTrace</span></a></span><span>
</span><span id="line-82"></span><span>          </span><span id="local-6989586621679377904"><span class="annot"><span class="annottext">chainEnv :: Environment CHAIN
</span><a href="#local-6989586621679377904"><span class="hs-identifier hs-var">chainEnv</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span> </span><span id="local-6989586621679377905"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679377905"><span class="hs-identifier hs-var">_currentSlot</span></a></span></span><span>
</span><span id="line-83"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377906"><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679377906"><span class="hs-identifier hs-var">abstractInitialUTxO</span></a></span></span><span>
</span><span id="line-84"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377907"><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679377907"><span class="hs-identifier hs-var">_allowedDelegators</span></a></span></span><span>
</span><span id="line-85"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377908"><span class="annot"><span class="annottext">PParams
</span><a href="#local-6989586621679377908"><span class="hs-identifier hs-var">_protocolParamaters</span></a></span></span><span>
</span><span id="line-86"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377909"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679377909"><span class="hs-identifier hs-var">stableAfter</span></a></span></span><span>
</span><span id="line-87"></span><span>                     </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace CHAIN -&gt; Environment CHAIN
forall s. Trace s -&gt; Environment s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Trace.html#_traceEnv"><span class="hs-identifier hs-var">Trace._traceEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377900"><span class="hs-identifier hs-var">sampleTrace</span></a></span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621679377911"><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377911"><span class="hs-identifier hs-var">abstractBlock</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="annottext">Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN)
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span>
</span><span id="line-90"></span><span>          </span><span class="annot"><span class="annottext">(Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN))
-&gt; Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShouldGenDelegation
-&gt; ShouldGenUTxO
-&gt; ShouldGenUpdate
-&gt; Environment CHAIN
-&gt; State CHAIN
-&gt; Gen (Signal CHAIN)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#sigGenChain"><span class="hs-identifier hs-var">Abstract.sigGenChain</span></a></span><span>
</span><span id="line-91"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenDelegation
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenDelegation"><span class="hs-identifier hs-var">Abstract.NoGenDelegation</span></a></span><span>
</span><span id="line-92"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenUTxO
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenUTxO"><span class="hs-identifier hs-var">Abstract.NoGenUTxO</span></a></span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenUpdate
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenUpdate"><span class="hs-identifier hs-var">Abstract.NoGenUpdate</span></a></span><span>
</span><span id="line-94"></span><span>            </span><span class="annot"><span class="annottext">(Slot, UTxO, Set VKeyGenesis, PParams, BlockCount)
Environment CHAIN
</span><a href="#local-6989586621679377904"><span class="hs-identifier hs-var">chainEnv</span></a></span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="annottext">(Slot, Seq VKeyGenesis, Hash, UTxOState, DIState, UPIState)
State CHAIN
</span><a href="#local-6989586621679377902"><span class="hs-identifier hs-var">lastState</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377916"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679377916"><span class="hs-identifier hs-var hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment CHAIN -&gt; Config
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#abEnvToCfg"><span class="hs-identifier hs-var">abEnvToCfg</span></a></span><span> </span><span class="annot"><span class="annottext">(Slot, UTxO, Set VKeyGenesis, PParams, BlockCount)
Environment CHAIN
</span><a href="#local-6989586621679377904"><span class="hs-identifier hs-var">chainEnv</span></a></span><span>
</span><span id="line-97"></span><span>          </span><span id="local-6989586621679377926"><span class="annot"><span class="annottext">cvs :: ChainValidationState
</span><a href="#local-6989586621679377926"><span class="hs-identifier hs-var hs-var">cvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Error -&gt; ChainValidationState)
-&gt; (ChainValidationState -&gt; ChainValidationState)
-&gt; Either Error ChainValidationState
-&gt; ChainValidationState
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ChainValidationState
forall a. HasCallStack =&gt; Text -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ChainValidationState)
-&gt; (Error -&gt; Text) -&gt; Error -&gt; ChainValidationState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Error -&gt; Text
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679377930"><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377930"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377930"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Either Error ChainValidationState
forall (m :: * -&gt; *).
MonadError Error m =&gt;
Config -&gt; m ChainValidationState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#initialChainValidationState"><span class="hs-identifier hs-var">initialChainValidationState</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377916"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxO
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377931"><span class="annot"><span class="annottext">Map TxId TxId
</span><a href="#local-6989586621679377931"><span class="hs-identifier hs-var">txIdMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxO -&gt; (UTxO, Map TxId TxId)
</span><a href="Test.Cardano.Chain.UTxO.Model.html#elaborateInitialUTxO"><span class="hs-identifier hs-var">elaborateInitialUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679377906"><span class="hs-identifier hs-var">abstractInitialUTxO</span></a></span><span>
</span><span id="line-99"></span><span>          </span><span id="local-6989586621679377938"><span class="annot"><span class="annottext">dCert :: DCert
</span><a href="#local-6989586621679377938"><span class="hs-identifier hs-var hs-var">dCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-100"></span><span>            </span><span class="annot"><span class="annottext">HasCallStack =&gt; VKey -&gt; BlockCount -&gt; State CHAIN -&gt; DCert
VKey -&gt; BlockCount -&gt; State CHAIN -&gt; DCert
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#rcDCert"><span class="hs-identifier hs-var">rcDCert</span></a></span><span>
</span><span id="line-101"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377911"><span class="hs-identifier hs-var">abstractBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Block -&gt; Getting VKey Block VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockHeader -&gt; Const VKey BlockHeader)
-&gt; Block -&gt; Const VKey Block
Lens' Block BlockHeader
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Block.html#bHeader"><span class="hs-identifier hs-var">Abstract.bHeader</span></a></span><span> </span><span class="annot"><span class="annottext">((BlockHeader -&gt; Const VKey BlockHeader)
 -&gt; Block -&gt; Const VKey Block)
-&gt; ((VKey -&gt; Const VKey VKey)
    -&gt; BlockHeader -&gt; Const VKey BlockHeader)
-&gt; Getting VKey Block VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VKey -&gt; Const VKey VKey) -&gt; BlockHeader -&gt; Const VKey BlockHeader
Lens' BlockHeader VKey
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Block.html#bhIssuer"><span class="hs-identifier hs-var">Abstract.bhIssuer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>              </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679377909"><span class="hs-identifier hs-var">stableAfter</span></a></span><span>
</span><span id="line-103"></span><span>              </span><span class="annot"><span class="annottext">(Slot, Seq VKeyGenesis, Hash, UTxOState, DIState, UPIState)
State CHAIN
</span><a href="#local-6989586621679377902"><span class="hs-identifier hs-var">lastState</span></a></span><span>
</span><span id="line-104"></span><span>      </span><span id="local-6989586621679377941"><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377941"><span class="hs-identifier hs-var">vMode</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Gen ValidationMode -&gt; PropertyT IO ValidationMode
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Gen ValidationMode -&gt; PropertyT IO ValidationMode)
-&gt; Gen ValidationMode -&gt; PropertyT IO ValidationMode
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockValidationMode -&gt; ValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#fromBlockValidationMode"><span class="hs-identifier hs-var">fromBlockValidationMode</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockValidationMode -&gt; ValidationMode)
-&gt; GenT Identity BlockValidationMode -&gt; Gen ValidationMode
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity BlockValidationMode
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#genBlockValidationMode"><span class="hs-identifier hs-var">genBlockValidationMode</span></a></span><span>
</span><span id="line-105"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679377946"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377946"><span class="hs-identifier hs-var">concreteBlock</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377947"><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
</span><a href="#local-6989586621679377947"><span class="hs-identifier hs-var">_txIdMap'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-106"></span><span>            </span><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
-&gt; Config
-&gt; DCert
-&gt; ChainValidationState
-&gt; Block
-&gt; (ABlock ByteString, AbstractToConcreteIdMaps)
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#elaborateBS"><span class="hs-identifier hs-var">elaborateBS</span></a></span><span>
</span><span id="line-107"></span><span>              </span><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#transactionIds"><span class="hs-identifier hs-var">transactionIds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679377931"><span class="hs-identifier hs-type">txIdMap</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-108"></span><span>              </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377916"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-109"></span><span>              </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679377938"><span class="hs-identifier hs-var">dCert</span></a></span><span>
</span><span id="line-110"></span><span>              </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377926"><span class="hs-identifier hs-var">cvs</span></a></span><span>
</span><span id="line-111"></span><span>              </span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377911"><span class="hs-identifier hs-var">abstractBlock</span></a></span><span>
</span><span id="line-112"></span><span>      </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; PropertyT IO ()
forall (m :: * -&gt; *) a.
(MonadTest m, Show a, HasCallStack) =&gt;
a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#annotateShow"><span class="hs-identifier hs-var">annotateShow</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377946"><span class="hs-identifier hs-var">concreteBlock</span></a></span><span>
</span><span id="line-113"></span><span>      </span><span id="local-6989586621679377949"><span class="annot"><span class="annottext">Either ChainValidationError ChainValidationState
</span><a href="#local-6989586621679377949"><span class="hs-identifier hs-var">updateRes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-114"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReaderT
  ValidationMode
  (PropertyT IO)
  (Either ChainValidationError ChainValidationState)
-&gt; ValidationMode
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-operator hs-var">`runReaderT`</span></span><span> </span><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377941"><span class="hs-identifier hs-var">vMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>          </span><span class="annot"><span class="annottext">(ReaderT
   ValidationMode
   (PropertyT IO)
   (Either ChainValidationError ChainValidationState)
 -&gt; PropertyT IO (Either ChainValidationError ChainValidationState))
-&gt; (ExceptT
      ChainValidationError
      (ReaderT ValidationMode (PropertyT IO))
      ChainValidationState
    -&gt; ReaderT
         ValidationMode
         (PropertyT IO)
         (Either ChainValidationError ChainValidationState))
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExceptT
  ChainValidationError
  (ReaderT ValidationMode (PropertyT IO))
  ChainValidationState
-&gt; ReaderT
     ValidationMode
     (PropertyT IO)
     (Either ChainValidationError ChainValidationState)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span>
</span><span id="line-116"></span><span>          </span><span class="annot"><span class="annottext">(ExceptT
   ChainValidationError
   (ReaderT ValidationMode (PropertyT IO))
   ChainValidationState
 -&gt; PropertyT IO (Either ChainValidationError ChainValidationState))
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config
-&gt; ChainValidationState
-&gt; ABlock ByteString
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
forall (m :: * -&gt; *).
(MonadError ChainValidationError m,
 MonadReader ValidationMode m) =&gt;
Config
-&gt; ChainValidationState
-&gt; ABlock ByteString
-&gt; m ChainValidationState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#updateBlock"><span class="hs-identifier hs-var">updateBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377916"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377926"><span class="hs-identifier hs-var">cvs</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377946"><span class="hs-identifier hs-var">concreteBlock</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ChainValidationError ChainValidationState
</span><a href="#local-6989586621679377949"><span class="hs-identifier hs-var">updateRes</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">ChainValidationError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *) a. (MonadTest m, HasCallStack) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#failure"><span class="hs-identifier hs-var">failure</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *). MonadTest m =&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#success"><span class="hs-identifier hs-var">success</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- | Property: When calling 'updateBlock' given a 'Block' with an invalid</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- 'Proof', 'Block' validation should only pass in the 'NoBlockValidation' mode.</span><span>
</span><span id="line-123"></span><span class="hs-comment">-- This is because this mode does not perform any validation on the 'Block'.</span><span>
</span><span id="line-124"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#ts_prop_updateBlock_InvalidProof"><span class="hs-identifier hs-type">ts_prop_updateBlock_InvalidProof</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Options.html#TSProperty"><span class="hs-identifier hs-type">TSProperty</span></a></span><span>
</span><span id="line-125"></span><span id="ts_prop_updateBlock_InvalidProof"><span class="annot"><span class="annottext">ts_prop_updateBlock_InvalidProof :: TSProperty
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#ts_prop_updateBlock_InvalidProof"><span class="hs-identifier hs-var hs-var">ts_prop_updateBlock_InvalidProof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><span class="annottext">TestLimit -&gt; Property -&gt; TSProperty
</span><a href="Test.Options.html#withTestsTS"><span class="hs-identifier hs-var">withTestsTS</span></a></span><span> </span><span class="annot"><span class="annottext">TestLimit
</span><span class="hs-number">100</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="annottext">(Property -&gt; TSProperty)
-&gt; (PropertyT IO () -&gt; Property) -&gt; PropertyT IO () -&gt; TSProperty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; PropertyT IO () -&gt; Property
PropertyT IO () -&gt; Property
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#property"><span class="hs-identifier hs-var">property</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">(PropertyT IO () -&gt; TSProperty) -&gt; PropertyT IO () -&gt; TSProperty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377958"><span class="annot"><span class="annottext">traceLength :: Word64
</span><a href="#local-6989586621679377958"><span class="hs-identifier hs-var hs-var">traceLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-130"></span><span>      </span><span id="local-6989586621679377959"><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377959"><span class="hs-identifier hs-var">sampleTrace</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN)
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN))
-&gt; Gen (Trace CHAIN) -&gt; PropertyT IO (Trace CHAIN)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall s. HasTrace s =&gt; BaseEnv s -&gt; Word64 -&gt; Gen (Trace s)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Generator.html#trace"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#CHAIN"><span class="hs-identifier hs-type">CHAIN</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679377958"><span class="hs-identifier hs-var">traceLength</span></a></span><span>
</span><span id="line-131"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377960"><span class="annot"><span class="annottext">chainEnv :: Environment CHAIN
</span><a href="#local-6989586621679377960"><span class="hs-identifier hs-var">chainEnv</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377961"><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679377961"><span class="hs-identifier hs-var">abstractInitialUTxO</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PParams
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377962"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679377962"><span class="hs-identifier hs-var">stableAfter</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace CHAIN -&gt; Environment CHAIN
forall s. Trace s -&gt; Environment s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Trace.html#_traceEnv"><span class="hs-identifier hs-var">Trace._traceEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377959"><span class="hs-identifier hs-var">sampleTrace</span></a></span><span>
</span><span id="line-132"></span><span>          </span><span id="local-6989586621679377963"><span class="annot"><span class="annottext">lastState :: State CHAIN
</span><a href="#local-6989586621679377963"><span class="hs-identifier hs-var hs-var">lastState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace CHAIN -&gt; State CHAIN
forall s. Trace s -&gt; State s
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/l/testlib/doc/html/small-steps/src/Test.Control.State.Transition.Trace.html#lastState"><span class="hs-identifier hs-var">Trace.lastState</span></a></span><span> </span><span class="annot"><span class="annottext">Trace CHAIN
</span><a href="#local-6989586621679377959"><span class="hs-identifier hs-var">sampleTrace</span></a></span><span>
</span><span id="line-133"></span><span>      </span><span id="local-6989586621679377964"><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377964"><span class="hs-identifier hs-var">abstractBlock</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><span class="annottext">Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN)
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span>
</span><span id="line-135"></span><span>          </span><span class="annot"><span class="annottext">(Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN))
-&gt; Gen (Signal CHAIN) -&gt; PropertyT IO (Signal CHAIN)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShouldGenDelegation
-&gt; ShouldGenUTxO
-&gt; ShouldGenUpdate
-&gt; Environment CHAIN
-&gt; State CHAIN
-&gt; Gen (Signal CHAIN)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#sigGenChain"><span class="hs-identifier hs-var">Abstract.sigGenChain</span></a></span><span>
</span><span id="line-136"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenDelegation
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenDelegation"><span class="hs-identifier hs-var">Abstract.NoGenDelegation</span></a></span><span>
</span><span id="line-137"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenUTxO
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenUTxO"><span class="hs-identifier hs-var">Abstract.NoGenUTxO</span></a></span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><span class="annottext">ShouldGenUpdate
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Rule.Chain.html#NoGenUpdate"><span class="hs-identifier hs-var">Abstract.NoGenUpdate</span></a></span><span>
</span><span id="line-139"></span><span>            </span><span class="annot"><span class="annottext">(Slot, UTxO, Set VKeyGenesis, PParams, BlockCount)
Environment CHAIN
</span><a href="#local-6989586621679377960"><span class="hs-identifier hs-var">chainEnv</span></a></span><span>
</span><span id="line-140"></span><span>            </span><span class="annot"><span class="annottext">(Slot, Seq VKeyGenesis, Hash, UTxOState, DIState, UPIState)
State CHAIN
</span><a href="#local-6989586621679377963"><span class="hs-identifier hs-var">lastState</span></a></span><span>
</span><span id="line-141"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679377965"><span class="annot"><span class="annottext">config :: Config
</span><a href="#local-6989586621679377965"><span class="hs-identifier hs-var hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment CHAIN -&gt; Config
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#abEnvToCfg"><span class="hs-identifier hs-var">abEnvToCfg</span></a></span><span> </span><span class="annot"><span class="annottext">(Slot, UTxO, Set VKeyGenesis, PParams, BlockCount)
Environment CHAIN
</span><a href="#local-6989586621679377960"><span class="hs-identifier hs-var">chainEnv</span></a></span><span>
</span><span id="line-142"></span><span>          </span><span id="local-6989586621679377972"><span class="annot"><span class="annottext">cvs :: ChainValidationState
</span><a href="#local-6989586621679377972"><span class="hs-identifier hs-var hs-var">cvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Error -&gt; ChainValidationState)
-&gt; (ChainValidationState -&gt; ChainValidationState)
-&gt; Either Error ChainValidationState
-&gt; ChainValidationState
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ChainValidationState
forall a. HasCallStack =&gt; Text -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Panic.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ChainValidationState)
-&gt; (Error -&gt; Text) -&gt; Error -&gt; ChainValidationState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Error -&gt; Text
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679377973"><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377973"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377973"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Either Error ChainValidationState
forall (m :: * -&gt; *).
MonadError Error m =&gt;
Config -&gt; m ChainValidationState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#initialChainValidationState"><span class="hs-identifier hs-var">initialChainValidationState</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377965"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTxO
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377974"><span class="annot"><span class="annottext">Map TxId TxId
</span><a href="#local-6989586621679377974"><span class="hs-identifier hs-var">txIdMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxO -&gt; (UTxO, Map TxId TxId)
</span><a href="Test.Cardano.Chain.UTxO.Model.html#elaborateInitialUTxO"><span class="hs-identifier hs-var">elaborateInitialUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679377961"><span class="hs-identifier hs-var">abstractInitialUTxO</span></a></span><span>
</span><span id="line-144"></span><span>          </span><span id="local-6989586621679377980"><span class="annot"><span class="annottext">dCert :: DCert
</span><a href="#local-6989586621679377980"><span class="hs-identifier hs-var hs-var">dCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; VKey -&gt; BlockCount -&gt; State CHAIN -&gt; DCert
VKey -&gt; BlockCount -&gt; State CHAIN -&gt; DCert
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#rcDCert"><span class="hs-identifier hs-var">rcDCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377964"><span class="hs-identifier hs-var">abstractBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Block -&gt; Getting VKey Block VKey -&gt; VKey
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockHeader -&gt; Const VKey BlockHeader)
-&gt; Block -&gt; Const VKey Block
Lens' Block BlockHeader
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Block.html#bHeader"><span class="hs-identifier hs-var">Abstract.bHeader</span></a></span><span> </span><span class="annot"><span class="annottext">((BlockHeader -&gt; Const VKey BlockHeader)
 -&gt; Block -&gt; Const VKey Block)
-&gt; ((VKey -&gt; Const VKey VKey)
    -&gt; BlockHeader -&gt; Const VKey BlockHeader)
-&gt; Getting VKey Block VKey
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(VKey -&gt; Const VKey VKey) -&gt; BlockHeader -&gt; Const VKey BlockHeader
Lens' BlockHeader VKey
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-chain-1.0.1.1/doc/html/byron-spec-chain/src/Byron.Spec.Chain.STS.Block.html#bhIssuer"><span class="hs-identifier hs-var">Abstract.bhIssuer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679377962"><span class="hs-identifier hs-var">stableAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(Slot, Seq VKeyGenesis, Hash, UTxOState, DIState, UPIState)
State CHAIN
</span><a href="#local-6989586621679377963"><span class="hs-identifier hs-var">lastState</span></a></span><span>
</span><span id="line-145"></span><span>      </span><span id="local-6989586621679377981"><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377981"><span class="hs-identifier hs-var">vMode</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Gen ValidationMode -&gt; PropertyT IO ValidationMode
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Gen ValidationMode -&gt; PropertyT IO ValidationMode)
-&gt; Gen ValidationMode -&gt; PropertyT IO ValidationMode
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockValidationMode -&gt; ValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#fromBlockValidationMode"><span class="hs-identifier hs-var">fromBlockValidationMode</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockValidationMode -&gt; ValidationMode)
-&gt; GenT Identity BlockValidationMode -&gt; Gen ValidationMode
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenT Identity BlockValidationMode
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#genBlockValidationMode"><span class="hs-identifier hs-var">genBlockValidationMode</span></a></span><span>
</span><span id="line-146"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679377982"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377982"><span class="hs-identifier hs-var">concreteBlock</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679377983"><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
</span><a href="#local-6989586621679377983"><span class="hs-identifier hs-var">_abstractToConcreteIdMaps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
-&gt; Config
-&gt; DCert
-&gt; ChainValidationState
-&gt; Block
-&gt; (ABlock ByteString, AbstractToConcreteIdMaps)
</span><a href="Test.Cardano.Chain.Elaboration.Block.html#elaborateBS"><span class="hs-identifier hs-var">elaborateBS</span></a></span><span>
</span><span id="line-148"></span><span>              </span><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
</span><a href="#local-6989586621679377984"><span class="hs-identifier hs-var">initialAbstractToConcreteIdMaps</span></a></span><span>
</span><span id="line-149"></span><span>              </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377965"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-150"></span><span>              </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679377980"><span class="hs-identifier hs-var">dCert</span></a></span><span>
</span><span id="line-151"></span><span>              </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377972"><span class="hs-identifier hs-var">cvs</span></a></span><span>
</span><span id="line-152"></span><span>              </span><span class="annot"><span class="annottext">Block
</span><a href="#local-6989586621679377964"><span class="hs-identifier hs-var">abstractBlock</span></a></span><span>
</span><span id="line-153"></span><span>          </span><span id="local-6989586621679377984"><span class="annot"><span class="annottext">initialAbstractToConcreteIdMaps :: AbstractToConcreteIdMaps
</span><a href="#local-6989586621679377984"><span class="hs-identifier hs-var hs-var">initialAbstractToConcreteIdMaps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AbstractToConcreteIdMaps
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Test.Cardano.Chain.Elaboration.Block.html#transactionIds"><span class="hs-identifier hs-var">transactionIds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679377974"><span class="hs-identifier hs-type">txIdMap</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; PropertyT IO ()
forall (m :: * -&gt; *) a.
(MonadTest m, Show a, HasCallStack) =&gt;
a -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#annotateShow"><span class="hs-identifier hs-var">annotateShow</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377982"><span class="hs-identifier hs-var">concreteBlock</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621679377986"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377986"><span class="hs-identifier hs-var">invalidBlock</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Gen (ABlock ByteString) -&gt; PropertyT IO (ABlock ByteString)
forall (m :: * -&gt; *) a.
(Monad m, Show a, HasCallStack) =&gt;
Gen a -&gt; PropertyT m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#forAll"><span class="hs-identifier hs-var">forAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Gen (ABlock ByteString) -&gt; PropertyT IO (ABlock ByteString))
-&gt; Gen (ABlock ByteString) -&gt; PropertyT IO (ABlock ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Gen (ABlock ByteString)
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#invalidateABlockProof"><span class="hs-identifier hs-var">invalidateABlockProof</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377982"><span class="hs-identifier hs-var">concreteBlock</span></a></span><span>
</span><span id="line-156"></span><span>      </span><span id="local-6989586621679377988"><span class="annot"><span class="annottext">Either ChainValidationError ChainValidationState
</span><a href="#local-6989586621679377988"><span class="hs-identifier hs-var">updateRes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReaderT
  ValidationMode
  (PropertyT IO)
  (Either ChainValidationError ChainValidationState)
-&gt; ValidationMode
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-operator hs-var">`runReaderT`</span></span><span> </span><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377981"><span class="hs-identifier hs-var">vMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>          </span><span class="annot"><span class="annottext">(ReaderT
   ValidationMode
   (PropertyT IO)
   (Either ChainValidationError ChainValidationState)
 -&gt; PropertyT IO (Either ChainValidationError ChainValidationState))
-&gt; (ExceptT
      ChainValidationError
      (ReaderT ValidationMode (PropertyT IO))
      ChainValidationState
    -&gt; ReaderT
         ValidationMode
         (PropertyT IO)
         (Either ChainValidationError ChainValidationState))
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExceptT
  ChainValidationError
  (ReaderT ValidationMode (PropertyT IO))
  ChainValidationState
-&gt; ReaderT
     ValidationMode
     (PropertyT IO)
     (Either ChainValidationError ChainValidationState)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span>
</span><span id="line-159"></span><span>          </span><span class="annot"><span class="annottext">(ExceptT
   ChainValidationError
   (ReaderT ValidationMode (PropertyT IO))
   ChainValidationState
 -&gt; PropertyT IO (Either ChainValidationError ChainValidationState))
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
-&gt; PropertyT IO (Either ChainValidationError ChainValidationState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config
-&gt; ChainValidationState
-&gt; ABlock ByteString
-&gt; ExceptT
     ChainValidationError
     (ReaderT ValidationMode (PropertyT IO))
     ChainValidationState
forall (m :: * -&gt; *).
(MonadError ChainValidationError m,
 MonadReader ValidationMode m) =&gt;
Config
-&gt; ChainValidationState
-&gt; ABlock ByteString
-&gt; m ChainValidationState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Validation.html#updateBlock"><span class="hs-identifier hs-var">updateBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679377965"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><a href="#local-6989586621679377972"><span class="hs-identifier hs-var">cvs</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679377986"><span class="hs-identifier hs-var">invalidBlock</span></a></span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ChainValidationError ChainValidationState
</span><a href="#local-6989586621679377988"><span class="hs-identifier hs-var">updateRes</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">ChainValidationError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-162"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidationMode -&gt; BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#blockValidationMode"><span class="hs-identifier hs-var">blockValidationMode</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377981"><span class="hs-identifier hs-var">vMode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockValidationMode -&gt; BlockValidationMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#BlockValidation"><span class="hs-identifier hs-var">BlockValidation</span></a></span><span>
</span><span id="line-163"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *). MonadTest m =&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#success"><span class="hs-identifier hs-var">success</span></a></span><span>
</span><span id="line-164"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *) a. (MonadTest m, HasCallStack) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#failure"><span class="hs-identifier hs-var">failure</span></a></span><span>
</span><span id="line-165"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">ChainValidationState
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-166"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidationMode -&gt; BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.ValidationMode.html#blockValidationMode"><span class="hs-identifier hs-var">blockValidationMode</span></a></span><span> </span><span class="annot"><span class="annottext">ValidationMode
</span><a href="#local-6989586621679377981"><span class="hs-identifier hs-var">vMode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockValidationMode -&gt; BlockValidationMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#NoBlockValidation"><span class="hs-identifier hs-var">NoBlockValidation</span></a></span><span>
</span><span id="line-167"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *). MonadTest m =&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#success"><span class="hs-identifier hs-var">success</span></a></span><span>
</span><span id="line-168"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">PropertyT IO ()
forall (m :: * -&gt; *) a. (MonadTest m, HasCallStack) =&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Property.html#failure"><span class="hs-identifier hs-var">failure</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- Generators</span><span>
</span><span id="line-172"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#genHash"><span class="hs-identifier hs-type">genHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#Gen"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier hs-type">Abstract.Hash</span></a></span><span>
</span><span id="line-175"></span><span id="genHash"><span class="annot"><span class="annottext">genHash :: Gen Hash
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#genHash"><span class="hs-identifier hs-var hs-var">genHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Hash
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier hs-var">Abstract.Hash</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Hash) -&gt; (Int -&gt; Maybe Int) -&gt; Int -&gt; Hash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Hash) -&gt; GenT Identity Int -&gt; Gen Hash
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range Int -&gt; GenT Identity Int
forall (m :: * -&gt; *). MonadGen m =&gt; Range Int -&gt; m Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#int"><span class="hs-identifier hs-var">Gen.int</span></a></span><span> </span><span class="annot"><span class="annottext">Range Int
forall a. (Bounded a, Num a) =&gt; Range a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Range.html#constantBounded"><span class="hs-identifier hs-var">Range.constantBounded</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#genBlockValidationMode"><span class="hs-identifier hs-type">genBlockValidationMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#Gen"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#BlockValidationMode"><span class="hs-identifier hs-type">BlockValidationMode</span></a></span><span>
</span><span id="line-178"></span><span id="genBlockValidationMode"><span class="annot"><span class="annottext">genBlockValidationMode :: GenT Identity BlockValidationMode
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#genBlockValidationMode"><span class="hs-identifier hs-var hs-var">genBlockValidationMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[BlockValidationMode] -&gt; GenT Identity BlockValidationMode
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(HasCallStack, Foldable f, MonadGen m) =&gt;
f a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#element"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#BlockValidation"><span class="hs-identifier hs-var">BlockValidation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockValidationMode
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.ValidationMode.html#NoBlockValidation"><span class="hs-identifier hs-var">NoBlockValidation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- Helpers</span><span>
</span><span id="line-182"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialUTxOState"><span class="hs-identifier hs-type">createInitialUTxOState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Environment"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXOWS.html#UTXOWS"><span class="hs-identifier hs-type">UTXOWS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXOWS.html#UTXOWS"><span class="hs-identifier hs-type">UTXOWS</span></a></span><span>
</span><span id="line-187"></span><span id="createInitialUTxOState"><span class="annot"><span class="annottext">createInitialUTxOState :: Environment UTXOWS -&gt; State UTXOWS
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialUTxOState"><span class="hs-identifier hs-var hs-var">createInitialUTxOState</span></a></span></span><span> </span><span id="local-6989586621679377997"><span class="annot"><span class="annottext">Environment UTXOWS
</span><a href="#local-6989586621679377997"><span class="hs-identifier hs-var">utxoEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#UTxOState"><span class="hs-identifier hs-type">UTxOState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">utxo :: UTxO
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679378000"><span class="hs-identifier hs-var">utxo0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reserves :: Lovelace
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#reserves"><span class="hs-identifier hs-var">reserves</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#lovelaceCap"><span class="hs-identifier hs-var">lovelaceCap</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Lovelace -&gt; Lovelace
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">UTxO -&gt; Lovelace
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.UTxO.html#balance"><span class="hs-identifier hs-var">Abstract.balance</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO
</span><a href="#local-6989586621679378000"><span class="hs-identifier hs-var">utxo0</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.STS.UTXO.html#UTxOEnv"><span class="hs-identifier hs-type">UTxOEnv</span></a></span><span>
</span><span id="line-191"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679378000"><span class="annot"><span class="annottext">UTxO
utxo0 :: UTxO
utxo0 :: UTxOEnv -&gt; UTxO
</span><a href="#local-6989586621679378000"><span class="hs-identifier hs-var hs-var">utxo0</span></a></span></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment UTXOWS
</span><a href="#local-6989586621679377997"><span class="hs-identifier hs-var">utxoEnv</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialDState"><span class="hs-identifier hs-type">createInitialDState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Environment"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span>
</span><span id="line-197"></span><span id="createInitialDState"><span class="annot"><span class="annottext">createInitialDState :: Environment ADELEGS -&gt; State ADELEGS
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialDState"><span class="hs-identifier hs-var hs-var">createInitialDState</span></a></span></span><span> </span><span id="local-6989586621679378006"><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679378006"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>        </span><span class="annot"><span class="annottext">[(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey
forall a b. (Ord a, Ord b) =&gt; [(a, b)] -&gt; Bimap a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/bimap-0.5.0-27098ee257ef2e554baff63313c57dc699014713bec5c50671e808ed86f54646/share/doc/html/src/Data.Bimap.html#fromList"><span class="hs-identifier hs-var">BM.fromList</span></a></span><span>
</span><span id="line-201"></span><span>          </span><span class="annot"><span class="annottext">([(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey)
-&gt; [(VKeyGenesis, VKey)] -&gt; Bimap VKeyGenesis VKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; (VKeyGenesis, VKey))
-&gt; [VKeyGenesis] -&gt; [(VKeyGenesis, VKey)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-0.2.1.0-a59cf9db2728e2b9c4e5b98de462f2c12b35f1d3360cd82a9f678672b897b0d2/share/doc/html/src/Cardano.Prelude.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span>
</span><span id="line-202"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679378011"><span class="annot"><span class="annottext">vkg :: VKeyGenesis
</span><a href="#local-6989586621679378011"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">Abstract.VKeyGenesis</span></a></span><span> </span><span id="local-6989586621679378013"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679378013"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679378011"><span class="hs-identifier hs-var">vkg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679378013"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; [VKeyGenesis]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
Environment ADELEGS
</span><a href="#local-6989586621679378006"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis -&gt; Slot) -&gt; Set VKeyGenesis -&gt; Map VKeyGenesis Slot
forall k a. (k -&gt; a) -&gt; Set k -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Slot -&gt; VKeyGenesis -&gt; Slot
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Slot
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-var">Abstract.Slot</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
Environment ADELEGS
</span><a href="#local-6989586621679378006"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialDIState"><span class="hs-identifier hs-type">createInitialDIState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span>
</span><span id="line-210"></span><span id="createInitialDIState"><span class="annot"><span class="annottext">createInitialDIState :: State ADELEGS -&gt; State DELEG
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#createInitialDIState"><span class="hs-identifier hs-var hs-var">createInitialDIState</span></a></span></span><span> </span><span id="local-6989586621679378020"><span class="annot"><span class="annottext">State ADELEGS
</span><a href="#local-6989586621679378020"><span class="hs-identifier hs-var">dState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dIStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier hs-var">_dIStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState -&gt; Bimap VKeyGenesis VKey
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="annot"><span class="annottext">DState
State ADELEGS
</span><a href="#local-6989586621679378020"><span class="hs-identifier hs-var">dState</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier hs-var">_dIStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState -&gt; Map VKeyGenesis Slot
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="annot"><span class="annottext">DState
State ADELEGS
</span><a href="#local-6989586621679378020"><span class="hs-identifier hs-var">dState</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var">_dIStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/byron-spec-ledger-1.1.0.1/doc/html/byron-spec-ledger/src/Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dIStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAHeader"><span class="hs-identifier hs-type">modifyAHeader</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#AHeader"><span class="hs-identifier hs-type">AHeader</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#AHeader"><span class="hs-identifier hs-type">AHeader</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-222"></span><span id="modifyAHeader"><span class="annot"><span class="annottext">modifyAHeader :: (AHeader ByteString -&gt; AHeader ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAHeader"><span class="hs-identifier hs-var hs-var">modifyAHeader</span></a></span></span><span> </span><span id="local-6989586621679378028"><span class="annot"><span class="annottext">AHeader ByteString -&gt; AHeader ByteString
</span><a href="#local-6989586621679378028"><span class="hs-identifier hs-var">ahModifier</span></a></span></span><span> </span><span id="local-6989586621679378029"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378029"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>  </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378029"><span class="hs-identifier hs-var">ab</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockHeader"><span class="hs-identifier hs-var">blockHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378028"><span class="hs-identifier hs-type">ahModifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockHeader"><span class="hs-identifier hs-var">blockHeader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679378029"><span class="hs-identifier hs-type">ab</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAProof"><span class="hs-identifier hs-type">modifyAProof</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-229"></span><span id="modifyAProof"><span class="annot"><span class="annottext">modifyAProof :: (Annotated Proof ByteString -&gt; Annotated Proof ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAProof"><span class="hs-identifier hs-var hs-var">modifyAProof</span></a></span></span><span> </span><span id="local-6989586621679378032"><span class="annot"><span class="annottext">Annotated Proof ByteString -&gt; Annotated Proof ByteString
</span><a href="#local-6989586621679378032"><span class="hs-identifier hs-var">apModifier</span></a></span></span><span> </span><span id="local-6989586621679378033"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378033"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="annottext">(AHeader ByteString -&gt; AHeader ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAHeader"><span class="hs-identifier hs-var">modifyAHeader</span></a></span><span> </span><span class="annot"><span class="annottext">AHeader ByteString -&gt; AHeader ByteString
</span><a href="#local-6989586621679378034"><span class="hs-identifier hs-var">ahModifier</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378033"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><a href="#local-6989586621679378034"><span class="hs-identifier hs-type">ahModifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#AHeader"><span class="hs-identifier hs-type">AHeader</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#AHeader"><span class="hs-identifier hs-type">AHeader</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-233"></span><span>    </span><span id="local-6989586621679378034"><span class="annot"><span class="annottext">ahModifier :: AHeader ByteString -&gt; AHeader ByteString
</span><a href="#local-6989586621679378034"><span class="hs-identifier hs-var hs-var">ahModifier</span></a></span></span><span> </span><span id="local-6989586621679378035"><span class="annot"><span class="annottext">AHeader ByteString
</span><a href="#local-6989586621679378035"><span class="hs-identifier hs-var">ah</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AHeader ByteString
</span><a href="#local-6989586621679378035"><span class="hs-identifier hs-var">ah</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#aHeaderProof"><span class="hs-identifier hs-var">aHeaderProof</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378032"><span class="hs-identifier hs-type">apModifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Header.html#aHeaderProof"><span class="hs-identifier hs-var">aHeaderProof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679378035"><span class="hs-identifier hs-type">ah</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyDelegationProof"><span class="hs-identifier hs-type">modifyDelegationProof</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.Hashing.html#Hash"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Delegation.Payload.html#Payload"><span class="hs-identifier hs-type">Delegation.Payload</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/doc/html/cardano-crypto-wrapper/src/Cardano.Crypto.Hashing.html#Hash"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Delegation.Payload.html#Payload"><span class="hs-identifier hs-type">Delegation.Payload</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-239"></span><span id="modifyDelegationProof"><span class="annot"><span class="annottext">modifyDelegationProof :: (Hash Payload -&gt; Hash Payload)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyDelegationProof"><span class="hs-identifier hs-var hs-var">modifyDelegationProof</span></a></span></span><span> </span><span id="local-6989586621679378038"><span class="annot"><span class="annottext">Hash Payload -&gt; Hash Payload
</span><a href="#local-6989586621679378038"><span class="hs-identifier hs-var">dpModifier</span></a></span></span><span> </span><span id="local-6989586621679378039"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378039"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><span class="annottext">(Annotated Proof ByteString -&gt; Annotated Proof ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAProof"><span class="hs-identifier hs-var">modifyAProof</span></a></span><span> </span><span class="annot"><span class="annottext">Annotated Proof ByteString -&gt; Annotated Proof ByteString
</span><a href="#local-6989586621679378040"><span class="hs-identifier hs-var">apModifier</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378039"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="#local-6989586621679378040"><span class="hs-identifier hs-type">apModifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-243"></span><span>    </span><span id="local-6989586621679378040"><span class="annot"><span class="annottext">apModifier :: Annotated Proof ByteString -&gt; Annotated Proof ByteString
</span><a href="#local-6989586621679378040"><span class="hs-identifier hs-var hs-var">apModifier</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679378042"><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378042"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679378043"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378043"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>      </span><span class="annot"><span class="annottext">Proof -&gt; ByteString -&gt; Annotated Proof ByteString
forall b a. b -&gt; a -&gt; Annotated b a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span>
</span><span id="line-245"></span><span>        </span><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378042"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofDelegation"><span class="hs-identifier hs-var">proofDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378038"><span class="hs-identifier hs-type">dpModifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofDelegation"><span class="hs-identifier hs-var">proofDelegation</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679378042"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-246"></span><span>        </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378043"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyTxProof"><span class="hs-identifier hs-type">modifyTxProof</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.UTxO.TxProof.html#TxProof"><span class="hs-identifier hs-type">TxProof</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.UTxO.TxProof.html#TxProof"><span class="hs-identifier hs-type">TxProof</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-252"></span><span id="modifyTxProof"><span class="annot"><span class="annottext">modifyTxProof :: (TxProof -&gt; TxProof) -&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyTxProof"><span class="hs-identifier hs-var hs-var">modifyTxProof</span></a></span></span><span> </span><span id="local-6989586621679378046"><span class="annot"><span class="annottext">TxProof -&gt; TxProof
</span><a href="#local-6989586621679378046"><span class="hs-identifier hs-var">tpModifier</span></a></span></span><span> </span><span id="local-6989586621679378047"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378047"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><span class="annottext">(Annotated Proof ByteString -&gt; Annotated Proof ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAProof"><span class="hs-identifier hs-var">modifyAProof</span></a></span><span> </span><span class="annot"><span class="annottext">Annotated Proof ByteString -&gt; Annotated Proof ByteString
</span><a href="#local-6989586621679378048"><span class="hs-identifier hs-var">apModifier</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378047"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="#local-6989586621679378048"><span class="hs-identifier hs-type">apModifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621679378048"><span class="annot"><span class="annottext">apModifier :: Annotated Proof ByteString -&gt; Annotated Proof ByteString
</span><a href="#local-6989586621679378048"><span class="hs-identifier hs-var hs-var">apModifier</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679378049"><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378049"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679378050"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378050"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>      </span><span class="annot"><span class="annottext">Proof -&gt; ByteString -&gt; Annotated Proof ByteString
forall b a. b -&gt; a -&gt; Annotated b a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378049"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUTxO"><span class="hs-identifier hs-var">proofUTxO</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378046"><span class="hs-identifier hs-type">tpModifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUTxO"><span class="hs-identifier hs-var">proofUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679378049"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-259"></span><span>        </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378050"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#invalidateABlockProof"><span class="hs-identifier hs-type">invalidateABlockProof</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#Gen"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#ABlock"><span class="hs-identifier hs-type">ABlock</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span id="invalidateABlockProof"><span class="annot"><span class="annottext">invalidateABlockProof :: ABlock ByteString -&gt; Gen (ABlock ByteString)
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#invalidateABlockProof"><span class="hs-identifier hs-var hs-var">invalidateABlockProof</span></a></span></span><span> </span><span id="local-6989586621679378052"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-comment">-- 'Gen.filter' to ensure we don't generate a valid proof</span><span>
</span><span id="line-266"></span><span>  </span><span class="annot"><span class="annottext">(ABlock ByteString -&gt; Bool)
-&gt; Gen (ABlock ByteString) -&gt; Gen (ABlock ByteString)
forall (m :: * -&gt; *) a.
(MonadGen m, GenBase m ~ Identity) =&gt;
(a -&gt; Bool) -&gt; m a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#filter"><span class="hs-identifier hs-var">Gen.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679378054"><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378054"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Proof
forall a. ABlock a -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier hs-var">blockProof</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378054"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Proof -&gt; Proof -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Proof
forall a. ABlock a -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier hs-var">blockProof</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Gen (ABlock ByteString) -&gt; Gen (ABlock ByteString))
-&gt; Gen (ABlock ByteString) -&gt; Gen (ABlock ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679378056"><span class="annot"><span class="annottext">TxProof
</span><a href="#local-6989586621679378056"><span class="hs-identifier hs-var">txProof</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-268"></span><span>      </span><span class="annot"><span class="annottext">[GenT Identity TxProof] -&gt; GenT Identity TxProof
forall (m :: * -&gt; *) a. (HasCallStack, MonadGen m) =&gt; [m a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#choice"><span class="hs-identifier hs-var">Gen.choice</span></a></span><span>
</span><span id="line-269"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TxProof -&gt; GenT Identity TxProof
forall a. a -&gt; GenT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TxProof -&gt; GenT Identity TxProof)
-&gt; TxProof -&gt; GenT Identity TxProof
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proof -&gt; TxProof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUTxO"><span class="hs-identifier hs-var">proofUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">(Proof -&gt; TxProof)
-&gt; (ABlock ByteString -&gt; Proof) -&gt; ABlock ByteString -&gt; TxProof
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Proof
forall a. ABlock a -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier hs-var">blockProof</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-270"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ProtocolMagicId -&gt; GenT Identity TxProof) -&gt; GenT Identity TxProof
forall a. (ProtocolMagicId -&gt; Gen a) -&gt; Gen a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#feedPM"><span class="hs-identifier hs-var">feedPM</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolMagicId -&gt; GenT Identity TxProof
</span><a href="Test.Cardano.Chain.UTxO.Gen.html#genTxProof"><span class="hs-identifier hs-var">genTxProof</span></a></span><span>
</span><span id="line-271"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-272"></span><span>    </span><span id="local-6989586621679378058"><span class="annot"><span class="annottext">Hash Payload
</span><a href="#local-6989586621679378058"><span class="hs-identifier hs-var">dlgProof</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-273"></span><span>      </span><span class="annot"><span class="annottext">[GenT Identity (Hash Payload)] -&gt; GenT Identity (Hash Payload)
forall (m :: * -&gt; *) a. (HasCallStack, MonadGen m) =&gt; [m a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#choice"><span class="hs-identifier hs-var">Gen.choice</span></a></span><span>
</span><span id="line-274"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Hash Payload -&gt; GenT Identity (Hash Payload)
forall a. a -&gt; GenT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Hash Payload -&gt; GenT Identity (Hash Payload))
-&gt; Hash Payload -&gt; GenT Identity (Hash Payload)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proof -&gt; Hash Payload
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofDelegation"><span class="hs-identifier hs-var">proofDelegation</span></a></span><span> </span><span class="annot"><span class="annottext">(Proof -&gt; Hash Payload)
-&gt; (ABlock ByteString -&gt; Proof)
-&gt; ABlock ByteString
-&gt; Hash Payload
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
forall {k} (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Proof
forall a. ABlock a -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier hs-var">blockProof</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-275"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Gen Payload -&gt; GenT Identity (Hash Payload)
forall a algo.
(EncCBOR a, HashAlgorithm algo) =&gt;
Gen a -&gt; Gen (AbstractHash algo a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#genAbstractHash"><span class="hs-identifier hs-var">genAbstractHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ProtocolMagicId -&gt; Gen Payload) -&gt; Gen Payload
forall a. (ProtocolMagicId -&gt; Gen a) -&gt; Gen a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#feedPM"><span class="hs-identifier hs-var">feedPM</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolMagicId -&gt; Gen Payload
</span><a href="Test.Cardano.Chain.Delegation.Gen.html#genPayload"><span class="hs-identifier hs-var">Delegation.genPayload</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-277"></span><span>    </span><span id="local-6989586621679378060"><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378060"><span class="hs-identifier hs-var">updProof</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><span class="annottext">[GenT Identity Proof] -&gt; GenT Identity Proof
forall (m :: * -&gt; *) a. (HasCallStack, MonadGen m) =&gt; [m a] -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-491273c491675cc21dc684e9f0d432f387f0f4ec3482f7b96db864fe9e6aa6fd/share/doc/html/src/Hedgehog.Internal.Gen.html#choice"><span class="hs-identifier hs-var">Gen.choice</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Proof -&gt; GenT Identity Proof
forall a. a -&gt; GenT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Proof -&gt; GenT Identity Proof) -&gt; Proof -&gt; GenT Identity Proof
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Proof -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUpdate"><span class="hs-identifier hs-var">proofUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Proof
forall a. ABlock a -&gt; Proof
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Block.html#blockProof"><span class="hs-identifier hs-var">blockProof</span></a></span><span> </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ProtocolMagicId -&gt; GenT Identity Proof) -&gt; GenT Identity Proof
forall a. (ProtocolMagicId -&gt; Gen a) -&gt; Gen a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-crypto-wrapper-1.6.1.0/l/testlib/doc/html/cardano-crypto-wrapper/src/Test.Cardano.Crypto.Gen.html#feedPM"><span class="hs-identifier hs-var">feedPM</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolMagicId -&gt; GenT Identity Proof
</span><a href="Test.Cardano.Chain.Update.Gen.html#genProof"><span class="hs-identifier hs-var">Update.genProof</span></a></span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">ABlock ByteString -&gt; Gen (ABlock ByteString)
forall a. a -&gt; GenT Identity a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-283"></span><span>      </span><span class="annot"><span class="annottext">(ABlock ByteString -&gt; Gen (ABlock ByteString))
-&gt; ABlock ByteString -&gt; Gen (ABlock ByteString)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Annotated Proof ByteString -&gt; Annotated Proof ByteString)
-&gt; ABlock ByteString -&gt; ABlock ByteString
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#modifyAProof"><span class="hs-identifier hs-var">modifyAProof</span></a></span><span>
</span><span id="line-284"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-type">Annotated</span></a></span><span> </span><span id="local-6989586621679378063"><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378063"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679378064"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378064"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-285"></span><span>            </span><span class="annot"><span class="annottext">Proof -&gt; ByteString -&gt; Annotated Proof ByteString
forall b a. b -&gt; a -&gt; Annotated b a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Annotated.html#Annotated"><span class="hs-identifier hs-var">Annotated</span></a></span><span>
</span><span id="line-286"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Proof
</span><a href="#local-6989586621679378063"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-287"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUTxO"><span class="hs-identifier hs-var">proofUTxO</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378056"><span class="hs-identifier hs-type">txProof</span></a></span><span>
</span><span id="line-288"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofDelegation"><span class="hs-identifier hs-var">proofDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378058"><span class="hs-identifier hs-type">dlgProof</span></a></span><span>
</span><span id="line-289"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-byron-1.2.0.0/doc/html/cardano-ledger-byron/src/Cardano.Chain.Block.Proof.html#proofUpdate"><span class="hs-identifier hs-var">proofUpdate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679378060"><span class="hs-identifier hs-type">updProof</span></a></span><span>
</span><span id="line-290"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-291"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>              </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679378064"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-293"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>        </span><span class="annot"><span class="annottext">ABlock ByteString
</span><a href="#local-6989586621679378052"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- Main Test Export</span><span>
</span><span id="line-298"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><a href="Test.Cardano.Chain.Block.ValidationMode.html#tests"><span class="hs-identifier hs-type">tests</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Options.html#TSGroup"><span class="hs-identifier hs-type">TSGroup</span></a></span><span>
</span><span id="line-301"></span><span id="tests"><span class="annot"><span class="annottext">tests :: TSGroup
</span><a href="Test.Cardano.Chain.Block.ValidationMode.html#tests"><span class="hs-identifier hs-var hs-var">tests</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">$$</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-prelude-test-0.1.0.5-1696ff9dfe28e79e45c7f4d61d4d2aee5cd8c8a1c8e41332b69038cc5c66e5fe/share/doc/html/src/Test.Cardano.Prelude.Tripping.html#discoverPropArg"><span class="hs-identifier hs-type">discoverPropArg</span></a></span><span>
</span><span id="line-302"></span></pre></body></html>