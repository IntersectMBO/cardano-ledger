<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.Conway.Governance.DRepPulser</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier">DRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier">DRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier">pulseDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier">completeDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier">extractDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier">finishDRepPulser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDRepDistr"><span class="hs-identifier">computeDRepDistr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier">psDRepDistrG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier">psProposalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier">psDRepDistrL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier">psDRepStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistrL"><span class="hs-identifier">psPoolDistrL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier">RunConwayRatify</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier">EpochNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Globals"><span class="hs-identifier">Globals</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#KeyValuePairs"><span class="hs-identifier">KeyValuePairs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ToKeyValuePairs"><span class="hs-identifier">ToKeyValuePairs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.html"><span class="hs-identifier">Cardano.Ledger.Binary</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#DecShareCBOR"><span class="hs-identifier">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.EncCBOR.html#EncCBOR"><span class="hs-identifier">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-binary-1.7.2.0-a8823886ffd0b2d51904ce75fd27e0a08a953fdc80b3ee2bc40708ca6dbab289/share/doc/html/src/Cardano.Binary.FromCBOR.html#FromCBOR"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier">Interns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-binary-1.7.2.0-a8823886ffd0b2d51904ce75fd27e0a08a953fdc80b3ee2bc40708ca6dbab289/share/doc/html/src/Cardano.Binary.ToCBOR.html#ToCBOR"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decNoShareCBOR"><span class="hs-identifier">decNoShareCBOR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeMap"><span class="hs-identifier">decodeMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeStrictSeq"><span class="hs-identifier">decodeStrictSeq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#interns"><span class="hs-identifier">interns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Coders.html"><span class="hs-identifier">Cardano.Ledger.Binary.Coders</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#Decode"><span class="hs-identifier">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#Encode"><span class="hs-identifier">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#decode"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#encode"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator">(&lt;!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html"><span class="hs-identifier">Cardano.Ledger.Compactible</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html"><span class="hs-identifier">Cardano.Ledger.Conway.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier">ConwayRATIFY</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance.Internal</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance.Procedures</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier">GovActionState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.html"><span class="hs-identifier">Cardano.Ledger.Conway.State</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.UTxO.html#balance"><span class="hs-identifier">balance</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.html"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NFData</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">deepseq</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reader</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runReader</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html"><span class="hs-identifier">Control.State.Transition.Extended</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.html"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#Default"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fold</span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Identity</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html"><span class="hs-identifier">Data.Pulse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#Pulsable"><span class="hs-identifier">Pulsable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#pulse"><span class="hs-identifier">pulse</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Void</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">absurd</span></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html"><span class="hs-identifier">Lens.Micro</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#allNoThunks"><span class="hs-identifier">allNoThunks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | A snapshot of information from the previous epoch stored inside the Pulser.</span><span>
</span><span id="line-94"></span><span class="hs-comment">--   After the pulser completes, but before the epoch turns, this information</span><span>
</span><span id="line-95"></span><span class="hs-comment">--   is store in the 'DRComplete' constructor of the 'DRepPulsingState'</span><span>
</span><span id="line-96"></span><span class="hs-comment">--   These are the values at the start of the current epoch. This allows the API</span><span>
</span><span id="line-97"></span><span class="hs-comment">--   To access these &quot;previous&quot; values, both during and after pulsing.</span><span>
</span><span id="line-98"></span><span class="hs-keyword">data</span><span> </span><span id="PulsingSnapshot"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span></span><span> </span><span id="local-6989586621679627576"><span class="annot"><a href="#local-6989586621679627576"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PulsingSnapshot"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="psProposals"><span class="annot"><span class="annottext">forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var hs-var">psProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627576"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDRepDistr"><span class="annot"><span class="annottext">forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var hs-var">psDRepDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDRepState"><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var hs-var">psDRepState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psPoolDistr"><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistr"><span class="hs-identifier hs-var hs-var">psPoolDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679628197"><span id="local-6989586621679628199"><span class="annot"><span class="annottext">(forall x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x)
-&gt; (forall x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era)
-&gt; Generic (PulsingSnapshot era)
forall x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
forall x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
forall era x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
$cfrom :: forall era x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
from :: forall x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
$cto :: forall era x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
to :: forall x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span id="local-6989586621679627588"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier hs-type">psProposalsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627588"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627588"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-107"></span><span id="psProposalsL"><span class="annot"><span class="annottext">psProposalsL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(StrictSeq (GovActionState era)
 -&gt; f (StrictSeq (GovActionState era)))
-&gt; PulsingSnapshot era -&gt; f (PulsingSnapshot era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier hs-var hs-var">psProposalsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; StrictSeq (GovActionState era))
-&gt; (PulsingSnapshot era
    -&gt; StrictSeq (GovActionState era) -&gt; PulsingSnapshot era)
-&gt; Lens
     (PulsingSnapshot era)
     (PulsingSnapshot era)
     (StrictSeq (GovActionState era))
     (StrictSeq (GovActionState era))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679628205"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628205"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679628206"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679628206"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628205"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628206"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span id="local-6989586621679627596"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier hs-type">psDRepDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627596"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-110"></span><span id="psDRepDistrL"><span class="annot"><span class="annottext">psDRepDistrL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map DRep (CompactForm Coin) -&gt; f (Map DRep (CompactForm Coin)))
-&gt; PulsingSnapshot era -&gt; f (PulsingSnapshot era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier hs-var hs-var">psDRepDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; Map DRep (CompactForm Coin))
-&gt; (PulsingSnapshot era
    -&gt; Map DRep (CompactForm Coin) -&gt; PulsingSnapshot era)
-&gt; Lens
     (PulsingSnapshot era)
     (PulsingSnapshot era)
     (Map DRep (CompactForm Coin))
     (Map DRep (CompactForm Coin))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679628209"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628209"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679628210"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628210"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628209"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628210"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679627599"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier hs-type">psDRepStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627599"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-114"></span><span id="psDRepStateL"><span class="annot"><span class="annottext">psDRepStateL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (Credential 'DRepRole) DRepState
 -&gt; f (Map (Credential 'DRepRole) DRepState))
-&gt; PulsingSnapshot era -&gt; f (PulsingSnapshot era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier hs-var hs-var">psDRepStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState)
-&gt; (PulsingSnapshot era
    -&gt; Map (Credential 'DRepRole) DRepState -&gt; PulsingSnapshot era)
-&gt; Lens
     (PulsingSnapshot era)
     (PulsingSnapshot era)
     (Map (Credential 'DRepRole) DRepState)
     (Map (Credential 'DRepRole) DRepState)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState
forall era.
PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var">psDRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679628213"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628213"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679628214"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628214"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628213"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var">psDRepState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628214"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621679627602"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistrL"><span class="hs-identifier hs-type">psPoolDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627602"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-120"></span><span id="psPoolDistrL"><span class="annot"><span class="annottext">psPoolDistrL :: forall era (f :: * -&gt; *).
Functor f =&gt;
(Map (KeyHash 'StakePool) (CompactForm Coin)
 -&gt; f (Map (KeyHash 'StakePool) (CompactForm Coin)))
-&gt; PulsingSnapshot era -&gt; f (PulsingSnapshot era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistrL"><span class="hs-identifier hs-var hs-var">psPoolDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era
 -&gt; Map (KeyHash 'StakePool) (CompactForm Coin))
-&gt; (PulsingSnapshot era
    -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
    -&gt; PulsingSnapshot era)
-&gt; Lens
     (PulsingSnapshot era)
     (PulsingSnapshot era)
     (Map (KeyHash 'StakePool) (CompactForm Coin))
     (Map (KeyHash 'StakePool) (CompactForm Coin))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
forall era.
PulsingSnapshot era -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistr"><span class="hs-identifier hs-var">psPoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679628217"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628217"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679628218"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="#local-6989586621679628218"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628217"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psPoolDistr"><span class="hs-identifier hs-var">psPoolDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628218"><span class="hs-identifier hs-type">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621679627615"><span id="local-6989586621679628221"><span id="local-6989586621679628235"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627615"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627615"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span id="local-6989586621679627625"><span id="local-6989586621679628247"><span id="local-6989586621679628260"><span id="local-6989586621679628264"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627625"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627625"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627648"><span id="local-6989586621679628269"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627648"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627648"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627694"><span id="local-6989586621679628311"><span id="local-6989586621679628315"><span id="local-6989586621679628321"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627694"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627694"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627701"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627701"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#ToKeyValuePairs"><span class="hs-identifier hs-type">ToKeyValuePairs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627701"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>  </span><span id="local-6989586621679628415"><span class="annot"><span class="annottext">toKeyValuePairs :: forall e kv. KeyValue e kv =&gt; PulsingSnapshot era -&gt; [kv]
</span><a href="#local-6989586621679628415"><span class="hs-identifier hs-var hs-var hs-var hs-var">toKeyValuePairs</span></a></span></span><span> </span><span id="local-6989586621679628417"><span class="annot"><span class="annottext">gas :: PulsingSnapshot era
</span><a href="#local-6989586621679628417"><span class="hs-identifier hs-var">gas</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679628418"><span id="local-6989586621679628419"><span id="local-6989586621679628420"><span id="local-6989586621679628421"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
Map DRep (CompactForm Coin)
Map (Credential 'DRepRole) DRepState
StrictSeq (GovActionState era)
psProposals :: forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
psDRepDistr :: forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
psDRepState :: forall era.
PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState
psPoolDistr :: forall era.
PulsingSnapshot era -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
psProposals :: StrictSeq (GovActionState era)
psDRepDistr :: Map DRep (CompactForm Coin)
psDRepState :: Map (Credential 'DRepRole) DRepState
psPoolDistr :: Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679628417"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-133"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psProposals&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; StrictSeq (GovActionState era) -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; kv
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679628418"><span class="hs-identifier hs-var">psProposals</span></a></span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psDRepDistr&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map DRep (CompactForm Coin) -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; kv
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628419"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span>
</span><span id="line-135"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psDRepState&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (Credential 'DRepRole) DRepState -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; kv
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628420"><span class="hs-identifier hs-var">psDRepState</span></a></span><span>
</span><span id="line-136"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psPoolDistr&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Map (KeyHash 'StakePool) (CompactForm Coin) -&gt; kv
forall v. ToJSON v =&gt; Key -&gt; v -&gt; kv
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="#local-6989586621679628421"><span class="hs-identifier hs-var">psPoolDistr</span></a></span><span>
</span><span id="line-137"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span id="local-6989586621679628424"><span id="local-6989586621679628430"><span id="local-6989586621679628435"><span id="local-6989586621679628440"><span id="local-6989586621679628445"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">via</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621679627725"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#KeyValuePairs"><span class="hs-identifier hs-type">KeyValuePairs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627725"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-keyword">instance</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627725"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/aeson-2.2.3.0-86b3ded2a2a93d56f93497d21d3bbbb23e8718e44c9fa876ad561a4cceac08c1/share/doc/html/src/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627725"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627729"><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#Default"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627729"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679628460"><span class="annot"><span class="annottext">def :: PulsingSnapshot era
</span><a href="#local-6989586621679628460"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
forall era.
StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
forall a. Default a =&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/data-default-0.8.0.1-9291b190c5bc542cf17f99ce44e9365d143d76b9889465ad3d362701e6cc609e/share/doc/html/src/Data.Default.Internal.html#def"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627742"><span id="local-6989586621679628469"><span id="local-6989586621679628473"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627742"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.EncCBOR.html#EncCBOR"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627742"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679628505"><span class="annot"><span class="annottext">encCBOR :: PulsingSnapshot era -&gt; Encoding
</span><a href="#local-6989586621679628505"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679628507"><span id="local-6989586621679628508"><span id="local-6989586621679628509"><span id="local-6989586621679628510"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
Map DRep (CompactForm Coin)
Map (Credential 'DRepRole) DRepState
StrictSeq (GovActionState era)
psProposals :: forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
psDRepDistr :: forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
psDRepState :: forall era.
PulsingSnapshot era -&gt; Map (Credential 'DRepRole) DRepState
psPoolDistr :: forall era.
PulsingSnapshot era -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
psProposals :: StrictSeq (GovActionState era)
psDRepDistr :: Map DRep (CompactForm Coin)
psDRepState :: Map (Credential 'DRepRole) DRepState
psPoolDistr :: Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (PulsingSnapshot era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">(Encode ('Closed 'Dense) (PulsingSnapshot era) -&gt; Encoding)
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era) -&gt; Encoding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-150"></span><span>      </span><span class="annot"><span class="annottext">(StrictSeq (GovActionState era)
 -&gt; Map DRep (CompactForm Coin)
 -&gt; Map (Credential 'DRepRole) DRepState
 -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
 -&gt; PulsingSnapshot era)
-&gt; Encode
     ('Closed 'Dense)
     (StrictSeq (GovActionState era)
      -&gt; Map DRep (CompactForm Coin)
      -&gt; Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
forall era.
StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-151"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (StrictSeq (GovActionState era)
   -&gt; Map DRep (CompactForm Coin)
   -&gt; Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Encode ('Closed 'Dense) (StrictSeq (GovActionState era))
-&gt; Encode
     ('Closed 'Dense)
     (Map DRep (CompactForm Coin)
      -&gt; Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
-&gt; Encode ('Closed 'Dense) (StrictSeq (GovActionState era))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679628507"><span class="hs-identifier hs-var">psProposals</span></a></span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Map DRep (CompactForm Coin)
   -&gt; Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Encode ('Closed 'Dense) (Map DRep (CompactForm Coin))
-&gt; Encode
     ('Closed 'Dense)
     (Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
-&gt; Encode ('Closed 'Dense) (Map DRep (CompactForm Coin))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628508"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Encode ('Closed 'Dense) (Map (Credential 'DRepRole) DRepState)
-&gt; Encode
     ('Closed 'Dense)
     (Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
-&gt; Encode ('Closed 'Dense) (Map (Credential 'DRepRole) DRepState)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628509"><span class="hs-identifier hs-var">psDRepState</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Encode
     ('Closed 'Dense) (Map (KeyHash 'StakePool) (CompactForm Coin))
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; Encode
     ('Closed 'Dense) (Map (KeyHash 'StakePool) (CompactForm Coin))
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) (CompactForm Coin)
</span><a href="#local-6989586621679628510"><span class="hs-identifier hs-var">psPoolDistr</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627781"><span id="local-6989586621679628518"><span id="local-6989586621679628523"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627781"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#DecShareCBOR"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627781"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-158"></span><span>    </span><span id="Share"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627781"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679628558"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (PulsingSnapshot era) -&gt; Decoder s (PulsingSnapshot era)
</span><a href="#local-6989586621679628558"><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></a></span></span><span> </span><span id="local-6989586621679628560"><span class="annot"><span class="annottext">is :: Share (PulsingSnapshot era)
</span><a href="#local-6989586621679628560"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621679628561"><span class="annot"><span class="annottext">Interns (Credential 'Staking)
</span><a href="#local-6989586621679628561"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679628562"><span class="annot"><span class="annottext">Interns (KeyHash 'StakePool)
</span><a href="#local-6989586621679628562"><span class="hs-identifier hs-var">ks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679628563"><span class="annot"><span class="annottext">Interns (Credential 'DRepRole)
</span><a href="#local-6989586621679628563"><span class="hs-identifier hs-var">cd</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Interns (Credential 'HotCommitteeRole)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (PulsingSnapshot era)
-&gt; Decoder s (PulsingSnapshot era)
forall t (w :: Wrapped) s. Typeable t =&gt; Decode w t -&gt; Decoder s t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">(Decode ('Closed 'Dense) (PulsingSnapshot era)
 -&gt; Decoder s (PulsingSnapshot era))
-&gt; Decode ('Closed 'Dense) (PulsingSnapshot era)
-&gt; Decoder s (PulsingSnapshot era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">(StrictSeq (GovActionState era)
 -&gt; Map DRep (CompactForm Coin)
 -&gt; Map (Credential 'DRepRole) DRepState
 -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
 -&gt; PulsingSnapshot era)
-&gt; Decode
     ('Closed 'Dense)
     (StrictSeq (GovActionState era)
      -&gt; Map DRep (CompactForm Coin)
      -&gt; Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#RecD"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
forall era.
StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (StrictSeq (GovActionState era)
   -&gt; Map DRep (CompactForm Coin)
   -&gt; Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Decode ('Closed 'Dense) (StrictSeq (GovActionState era))
-&gt; Decode
     ('Closed 'Dense)
     (Map DRep (CompactForm Coin)
      -&gt; Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (StrictSeq (GovActionState era)))
-&gt; Decode ('Closed 'Dense) (StrictSeq (GovActionState era))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s (GovActionState era)
-&gt; Decoder s (StrictSeq (GovActionState era))
forall s a. Decoder s a -&gt; Decoder s (StrictSeq a)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeStrictSeq"><span class="hs-identifier hs-var">decodeStrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share (GovActionState era) -&gt; Decoder s (GovActionState era)
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s.
Share (GovActionState era) -&gt; Decoder s (GovActionState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var">decShareCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Share (GovActionState era)
Share (PulsingSnapshot era)
</span><a href="#local-6989586621679628560"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (Map DRep (CompactForm Coin)
   -&gt; Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Decode ('Closed 'Dense) (Map DRep (CompactForm Coin))
-&gt; Decode
     ('Closed 'Dense)
     (Map (Credential 'DRepRole) DRepState
      -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Map DRep (CompactForm Coin)))
-&gt; Decode ('Closed 'Dense) (Map DRep (CompactForm Coin))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s DRep
-&gt; Decoder s (CompactForm Coin)
-&gt; Decoder s (Map DRep (CompactForm Coin))
forall k s v.
Ord k =&gt;
Decoder s k -&gt; Decoder s v -&gt; Decoder s (Map k v)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeMap"><span class="hs-identifier hs-var">decodeMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share DRep -&gt; Decoder s DRep
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s. Share DRep -&gt; Decoder s DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var">decShareCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Share DRep
Interns (Credential 'DRepRole)
</span><a href="#local-6989586621679628563"><span class="hs-identifier hs-var">cd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s (CompactForm Coin)
forall s. Decoder s (CompactForm Coin)
forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var">decCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (Map (Credential 'DRepRole) DRepState
   -&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Decode ('Closed 'Dense) (Map (Credential 'DRepRole) DRepState)
-&gt; Decode
     ('Closed 'Dense)
     (Map (KeyHash 'StakePool) (CompactForm Coin)
      -&gt; PulsingSnapshot era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Map (Credential 'DRepRole) DRepState))
-&gt; Decode ('Closed 'Dense) (Map (Credential 'DRepRole) DRepState)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s (Credential 'DRepRole)
-&gt; Decoder s DRepState
-&gt; Decoder s (Map (Credential 'DRepRole) DRepState)
forall k s v.
Ord k =&gt;
Decoder s k -&gt; Decoder s v -&gt; Decoder s (Map k v)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeMap"><span class="hs-identifier hs-var">decodeMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Interns (Credential 'DRepRole)
-&gt; Credential 'DRepRole -&gt; Credential 'DRepRole
forall k. Interns k -&gt; k -&gt; k
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#interns"><span class="hs-identifier hs-var">interns</span></a></span><span> </span><span class="annot"><span class="annottext">Interns (Credential 'DRepRole)
</span><a href="#local-6989586621679628563"><span class="hs-identifier hs-var">cd</span></a></span><span> </span><span class="annot"><span class="annottext">(Credential 'DRepRole -&gt; Credential 'DRepRole)
-&gt; Decoder s (Credential 'DRepRole)
-&gt; Decoder s (Credential 'DRepRole)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (Credential 'DRepRole)
forall s. Decoder s (Credential 'DRepRole)
forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var">decCBOR</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share DRepState -&gt; Decoder s DRepState
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s. Share DRepState -&gt; Decoder s DRepState
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var">decShareCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Share DRepState
Interns (Credential 'Staking)
</span><a href="#local-6989586621679628561"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (Map (KeyHash 'StakePool) (CompactForm Coin)
   -&gt; PulsingSnapshot era)
-&gt; Decode
     ('Closed 'Dense) (Map (KeyHash 'StakePool) (CompactForm Coin))
-&gt; Decode ('Closed 'Dense) (PulsingSnapshot era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (Map (KeyHash 'StakePool) (CompactForm Coin)))
-&gt; Decode
     ('Closed 'Dense) (Map (KeyHash 'StakePool) (CompactForm Coin))
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Decoder s (KeyHash 'StakePool)
-&gt; Decoder s (CompactForm Coin)
-&gt; Decoder s (Map (KeyHash 'StakePool) (CompactForm Coin))
forall k s v.
Ord k =&gt;
Decoder s k -&gt; Decoder s v -&gt; Decoder s (Map k v)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Decoder.html#decodeMap"><span class="hs-identifier hs-var">decodeMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Interns (KeyHash 'StakePool)
-&gt; KeyHash 'StakePool -&gt; KeyHash 'StakePool
forall k. Interns k -&gt; k -&gt; k
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#interns"><span class="hs-identifier hs-var">interns</span></a></span><span> </span><span class="annot"><span class="annottext">Interns (KeyHash 'StakePool)
</span><a href="#local-6989586621679628562"><span class="hs-identifier hs-var">ks</span></a></span><span> </span><span class="annot"><span class="annottext">(KeyHash 'StakePool -&gt; KeyHash 'StakePool)
-&gt; Decoder s (KeyHash 'StakePool) -&gt; Decoder s (KeyHash 'StakePool)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Decoder s (KeyHash 'StakePool)
forall s. Decoder s (KeyHash 'StakePool)
forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var">decCBOR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decoder s (CompactForm Coin)
forall s. Decoder s (CompactForm Coin)
forall a s. DecCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var">decCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627816"><span id="local-6989586621679628594"><span id="local-6989586621679628598"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627816"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627816"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-173"></span><span>  </span><span id="local-6989586621679628603"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (PulsingSnapshot era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decoder s (PulsingSnapshot era)
forall a s. DecShareCBOR a =&gt; Decoder s a
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decNoShareCBOR"><span class="hs-identifier hs-var">decNoShareCBOR</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627825"><span id="local-6989586621679628611"><span id="local-6989586621679628615"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627825"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-binary-1.7.2.0-a8823886ffd0b2d51904ce75fd27e0a08a953fdc80b3ee2bc40708ca6dbab289/share/doc/html/src/Cardano.Binary.ToCBOR.html#ToCBOR"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627825"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-176"></span><span>  </span><span id="local-6989586621679628621"><span class="annot"><span class="annottext">toCBOR :: PulsingSnapshot era -&gt; Encoding
</span><a href="#local-6989586621679628621"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#toEraCBOR"><span class="hs-identifier hs-var">toEraCBOR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679627825"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627833"><span id="local-6989586621679628631"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627833"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-binary-1.7.2.0-a8823886ffd0b2d51904ce75fd27e0a08a953fdc80b3ee2bc40708ca6dbab289/share/doc/html/src/Cardano.Binary.FromCBOR.html#FromCBOR"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627833"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621679628638"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (PulsingSnapshot era)
</span><a href="#local-6989586621679628638"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t s. (Era era, DecCBOR t) =&gt; Decoder s t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.Era.html#fromEraCBOR"><span class="hs-identifier hs-var">fromEraCBOR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679627833"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | We iterate over a pulse-sized chunk of the Accounts.</span><span>
</span><span id="line-182"></span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- For each staking credential in the chunk that has delegated to a DRep, add</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- the stake distribution, rewards, and proposal deposits for that credential to</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- the DRep distribution, if the DRep is a DRepCredential (also, AlwaysAbstain</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- or AlwaysNoConfidence) and a member of the registered DReps. If the</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- DRepCredential is not a member of the registered DReps, ignore and skip that</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- DRep.</span><span>
</span><span id="line-189"></span><span class="hs-comment">--</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- For each staking credential in the chunk that has delegated to an SPO,</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- add only the proposal deposits for that credential to the stake pool</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- distribution, since the rewards and stake are already added to it by the</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- SNAP rule.</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- Give or take, this operation has roughly</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-197"></span><span class="hs-comment">--   O (a * (log(b) + log(c) + log(d) + log(e) + log(f)))</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- complexity, where,</span><span>
</span><span id="line-200"></span><span class="hs-comment">--   (a) is the size of the chunk of the Accounts, which is the pulse-size, iterate over</span><span>
</span><span id="line-201"></span><span class="hs-comment">--   (b) is the size of the StakeDistr, lookup</span><span>
</span><span id="line-202"></span><span class="hs-comment">--   (c) is the size of the DRepDistr, insertWith</span><span>
</span><span id="line-203"></span><span class="hs-comment">--   (d) is the size of the dpProposalDeposits, lookup</span><span>
</span><span id="line-204"></span><span class="hs-comment">--   (e) is the size of the registered DReps, lookup</span><span>
</span><span id="line-205"></span><span class="hs-comment">--   (f) is the size of the PoolDistr, insert</span><span>
</span><span id="line-206"></span><span id="local-6989586621679627838"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDRepDistr"><span class="hs-identifier hs-type">computeDRepDistr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627838"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627838"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627838"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#PoolDistr"><span class="hs-identifier hs-type">PoolDistr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#AccountState"><span class="hs-identifier hs-type">AccountState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627838"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#PoolDistr"><span class="hs-identifier hs-type">PoolDistr</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-215"></span><span id="computeDRepDistr"><span class="annot"><span class="annottext">computeDRepDistr :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
InstantStake era
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; PoolDistr
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDRepDistr"><span class="hs-identifier hs-var hs-var">computeDRepDistr</span></a></span></span><span> </span><span id="local-6989586621679628682"><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679628682"><span class="hs-identifier hs-var">instantStake</span></a></span></span><span> </span><span id="local-6989586621679628683"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628683"><span class="hs-identifier hs-var">regDReps</span></a></span></span><span> </span><span id="local-6989586621679628684"><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679628684"><span class="hs-identifier hs-var">proposalDeposits</span></a></span></span><span> </span><span id="local-6989586621679628685"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628685"><span class="hs-identifier hs-var">poolDistr</span></a></span></span><span> </span><span id="local-6989586621679628686"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628686"><span class="hs-identifier hs-var">dRepDistr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="annottext">((Map DRep (CompactForm Coin), PoolDistr)
 -&gt; Credential 'Staking
 -&gt; AccountState era
 -&gt; (Map DRep (CompactForm Coin), PoolDistr))
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><span class="hs-identifier hs-var">Map.foldlWithKey'</span></span><span> </span><span class="annot"><span class="annottext">(Map DRep (CompactForm Coin), PoolDistr)
-&gt; Credential 'Staking
-&gt; AccountState era
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
</span><a href="#local-6989586621679628688"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628686"><span class="hs-identifier hs-var">dRepDistr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628685"><span class="hs-identifier hs-var">poolDistr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>    </span><span id="local-6989586621679628688"><span class="annot"><span class="annottext">go :: (Map DRep (CompactForm Coin), PoolDistr)
-&gt; Credential 'Staking
-&gt; AccountState era
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
</span><a href="#local-6989586621679628688"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679628689"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628689"><span class="hs-identifier hs-var">drepAccum</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679628690"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628690"><span class="hs-identifier hs-var">poolAccum</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679628691"><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621679628691"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span> </span><span id="local-6989586621679628692"><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628692"><span class="hs-identifier hs-var">accountState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679628693"><span class="annot"><span class="annottext">instantStakeCredentials :: Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679628693"><span class="hs-identifier hs-var hs-var">instantStakeCredentials</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679628682"><span class="hs-identifier hs-var">instantStake</span></a></span><span> </span><span class="annot"><span class="annottext">InstantStake era
-&gt; Getting
     (Map (Credential 'Staking) (CompactForm Coin))
     (InstantStake era)
     (Map (Credential 'Staking) (CompactForm Coin))
-&gt; Map (Credential 'Staking) (CompactForm Coin)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'Staking) (CompactForm Coin))
  (InstantStake era)
  (Map (Credential 'Staking) (CompactForm Coin))
forall era.
EraStake era =&gt;
Lens'
  (InstantStake era) (Map (Credential 'Staking) (CompactForm Coin))
Lens'
  (InstantStake era) (Map (Credential 'Staking) (CompactForm Coin))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#instantStakeCredentialsL"><span class="hs-identifier hs-var">instantStakeCredentialsL</span></a></span><span>
</span><span id="line-220"></span><span>          </span><span id="local-6989586621679628696"><span class="annot"><span class="annottext">mInstantStake :: Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628696"><span class="hs-identifier hs-var hs-var">mInstantStake</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; Maybe (CompactForm Coin)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621679628691"><span class="hs-identifier hs-var">stakeCred</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679628693"><span class="hs-identifier hs-var">instantStakeCredentials</span></a></span><span>
</span><span id="line-221"></span><span>          </span><span id="local-6989586621679628698"><span class="annot"><span class="annottext">mProposalDeposit :: Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628698"><span class="hs-identifier hs-var hs-var">mProposalDeposit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; Maybe (CompactForm Coin)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking
</span><a href="#local-6989586621679628691"><span class="hs-identifier hs-var">stakeCred</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679628684"><span class="hs-identifier hs-var">proposalDeposits</span></a></span><span>
</span><span id="line-222"></span><span>          </span><span id="local-6989586621679628699"><span class="annot"><span class="annottext">stakeAndDeposits :: CompactForm Coin
</span><a href="#local-6989586621679628699"><span class="hs-identifier hs-var hs-var">stakeAndDeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin) -&gt; CompactForm Coin
forall m. Monoid m =&gt; Maybe m -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (CompactForm Coin) -&gt; CompactForm Coin)
-&gt; Maybe (CompactForm Coin) -&gt; CompactForm Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628696"><span class="hs-identifier hs-var">mInstantStake</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
-&gt; Maybe (CompactForm Coin) -&gt; Maybe (CompactForm Coin)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628698"><span class="hs-identifier hs-var">mProposalDeposit</span></a></span><span>
</span><span id="line-223"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; CompactForm Coin
-&gt; Map DRep (CompactForm Coin)
-&gt; Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628700"><span class="hs-identifier hs-var">addToDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628692"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628699"><span class="hs-identifier hs-var">stakeAndDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628689"><span class="hs-identifier hs-var">drepAccum</span></a></span><span>
</span><span id="line-224"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; Maybe (CompactForm Coin) -&gt; PoolDistr -&gt; PoolDistr
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 EraAccounts era) =&gt;
AccountState era
-&gt; Maybe (CompactForm Coin) -&gt; PoolDistr -&gt; PoolDistr
</span><a href="#local-6989586621679628701"><span class="hs-identifier hs-var">addToPoolDistr</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628692"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628698"><span class="hs-identifier hs-var">mProposalDeposit</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628690"><span class="hs-identifier hs-var">poolAccum</span></a></span><span>
</span><span id="line-225"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679628701"><span class="annot"><span class="annottext">addToPoolDistr :: AccountState era
-&gt; Maybe (CompactForm Coin) -&gt; PoolDistr -&gt; PoolDistr
</span><a href="#local-6989586621679628701"><span class="hs-identifier hs-var hs-var">addToPoolDistr</span></a></span></span><span> </span><span id="local-6989586621679628802"><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628802"><span class="hs-identifier hs-var">accountState</span></a></span></span><span> </span><span id="local-6989586621679628803"><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628803"><span class="hs-identifier hs-var">mProposalDeposit</span></a></span></span><span> </span><span id="local-6989586621679628804"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628804"><span class="hs-identifier hs-var">distr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoolDistr -&gt; Maybe PoolDistr -&gt; PoolDistr
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628804"><span class="hs-identifier hs-var">distr</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe PoolDistr -&gt; PoolDistr) -&gt; Maybe PoolDistr -&gt; PoolDistr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-227"></span><span>      </span><span id="local-6989586621679628805"><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621679628805"><span class="hs-identifier hs-var">stakePool</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628802"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; Getting
     (Maybe (KeyHash 'StakePool))
     (AccountState era)
     (Maybe (KeyHash 'StakePool))
-&gt; Maybe (KeyHash 'StakePool)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Maybe (KeyHash 'StakePool))
  (AccountState era)
  (Maybe (KeyHash 'StakePool))
forall era.
EraAccounts era =&gt;
Lens' (AccountState era) (Maybe (KeyHash 'StakePool))
Lens' (AccountState era) (Maybe (KeyHash 'StakePool))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#stakePoolDelegationAccountStateL"><span class="hs-identifier hs-var">stakePoolDelegationAccountStateL</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span id="local-6989586621679628807"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628807"><span class="hs-identifier hs-var">proposalDeposit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (CompactForm Coin)
</span><a href="#local-6989586621679628803"><span class="hs-identifier hs-var">mProposalDeposit</span></a></span><span>
</span><span id="line-229"></span><span>      </span><span id="local-6989586621679628808"><span class="annot"><span class="annottext">IndividualPoolStake
</span><a href="#local-6989586621679628808"><span class="hs-identifier hs-var">ips</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
-&gt; Maybe IndividualPoolStake
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621679628805"><span class="hs-identifier hs-var">stakePool</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) IndividualPoolStake
 -&gt; Maybe IndividualPoolStake)
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
-&gt; Maybe IndividualPoolStake
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628804"><span class="hs-identifier hs-var">distr</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr
-&gt; Getting
     (Map (KeyHash 'StakePool) IndividualPoolStake)
     PoolDistr
     (Map (KeyHash 'StakePool) IndividualPoolStake)
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (KeyHash 'StakePool) IndividualPoolStake)
  PoolDistr
  (Map (KeyHash 'StakePool) IndividualPoolStake)
Lens' PoolDistr (Map (KeyHash 'StakePool) IndividualPoolStake)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#poolDistrDistrL"><span class="hs-identifier hs-var">poolDistrDistrL</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="annot"><span class="annottext">PoolDistr -&gt; Maybe PoolDistr
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(PoolDistr -&gt; Maybe PoolDistr) -&gt; PoolDistr -&gt; Maybe PoolDistr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-231"></span><span>        </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628804"><span class="hs-identifier hs-var">distr</span></a></span><span>
</span><span id="line-232"></span><span>          </span><span class="annot"><span class="annottext">PoolDistr -&gt; (PoolDistr -&gt; PoolDistr) -&gt; PoolDistr
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) IndividualPoolStake
 -&gt; Identity (Map (KeyHash 'StakePool) IndividualPoolStake))
-&gt; PoolDistr -&gt; Identity PoolDistr
Lens' PoolDistr (Map (KeyHash 'StakePool) IndividualPoolStake)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#poolDistrDistrL"><span class="hs-identifier hs-var">poolDistrDistrL</span></a></span><span> </span><span class="annot"><span class="annottext">((Map (KeyHash 'StakePool) IndividualPoolStake
  -&gt; Identity (Map (KeyHash 'StakePool) IndividualPoolStake))
 -&gt; PoolDistr -&gt; Identity PoolDistr)
-&gt; (Map (KeyHash 'StakePool) IndividualPoolStake
    -&gt; Map (KeyHash 'StakePool) IndividualPoolStake)
-&gt; PoolDistr
-&gt; PoolDistr
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
-&gt; IndividualPoolStake
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool
</span><a href="#local-6989586621679628805"><span class="hs-identifier hs-var">stakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IndividualPoolStake
</span><a href="#local-6989586621679628808"><span class="hs-identifier hs-var">ips</span></a></span><span> </span><span class="annot"><span class="annottext">IndividualPoolStake
-&gt; (IndividualPoolStake -&gt; IndividualPoolStake)
-&gt; IndividualPoolStake
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; Identity (CompactForm Coin))
-&gt; IndividualPoolStake -&gt; Identity IndividualPoolStake
Lens' IndividualPoolStake (CompactForm Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#individualTotalPoolStakeL"><span class="hs-identifier hs-var">individualTotalPoolStakeL</span></a></span><span> </span><span class="annot"><span class="annottext">((CompactForm Coin -&gt; Identity (CompactForm Coin))
 -&gt; IndividualPoolStake -&gt; Identity IndividualPoolStake)
-&gt; CompactForm Coin -&gt; IndividualPoolStake -&gt; IndividualPoolStake
forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%3C%3E~"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628807"><span class="hs-identifier hs-var">proposalDeposit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>          </span><span class="annot"><span class="annottext">PoolDistr -&gt; (PoolDistr -&gt; PoolDistr) -&gt; PoolDistr
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; Identity (CompactForm Coin))
-&gt; PoolDistr -&gt; Identity PoolDistr
Lens' PoolDistr (CompactForm Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#poolDistrTotalL"><span class="hs-identifier hs-var">poolDistrTotalL</span></a></span><span> </span><span class="annot"><span class="annottext">((CompactForm Coin -&gt; Identity (CompactForm Coin))
 -&gt; PoolDistr -&gt; Identity PoolDistr)
-&gt; CompactForm Coin -&gt; PoolDistr -&gt; PoolDistr
forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%3C%3E~"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628807"><span class="hs-identifier hs-var">proposalDeposit</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span id="local-6989586621679628700"><span class="annot"><span class="annottext">addToDRepDistr :: AccountState era
-&gt; CompactForm Coin
-&gt; Map DRep (CompactForm Coin)
-&gt; Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628700"><span class="hs-identifier hs-var hs-var">addToDRepDistr</span></a></span></span><span> </span><span id="local-6989586621679628816"><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628816"><span class="hs-identifier hs-var">accountState</span></a></span></span><span> </span><span id="local-6989586621679628817"><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628817"><span class="hs-identifier hs-var">stakeAndDeposits</span></a></span></span><span> </span><span id="local-6989586621679628818"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628818"><span class="hs-identifier hs-var">distr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
-&gt; Maybe (Map DRep (CompactForm Coin))
-&gt; Map DRep (CompactForm Coin)
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628818"><span class="hs-identifier hs-var">distr</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Map DRep (CompactForm Coin))
 -&gt; Map DRep (CompactForm Coin))
-&gt; Maybe (Map DRep (CompactForm Coin))
-&gt; Map DRep (CompactForm Coin)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-235"></span><span>      </span><span id="local-6989586621679628819"><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621679628819"><span class="hs-identifier hs-var">dRep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628816"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; Getting (Maybe DRep) (AccountState era) (Maybe DRep)
-&gt; Maybe DRep
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe DRep) (AccountState era) (Maybe DRep)
forall era.
ConwayEraAccounts era =&gt;
Lens' (AccountState era) (Maybe DRep)
Lens' (AccountState era) (Maybe DRep)
</span><a href="Cardano.Ledger.Conway.State.Account.html#dRepDelegationAccountStateL"><span class="hs-identifier hs-var">dRepDelegationAccountStateL</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-237"></span><span>        </span><span id="local-6989586621679628821"><span class="annot"><span class="annottext">balance :: CompactForm Coin
</span><a href="#local-6989586621679628821"><span class="hs-identifier hs-var hs-var">balance</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AccountState era
</span><a href="#local-6989586621679628816"><span class="hs-identifier hs-var">accountState</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState era
-&gt; Getting (CompactForm Coin) (AccountState era) (CompactForm Coin)
-&gt; CompactForm Coin
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting (CompactForm Coin) (AccountState era) (CompactForm Coin)
forall era.
EraAccounts era =&gt;
Lens' (AccountState era) (CompactForm Coin)
Lens' (AccountState era) (CompactForm Coin)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#balanceAccountStateL"><span class="hs-identifier hs-var">balanceAccountStateL</span></a></span><span>
</span><span id="line-238"></span><span>        </span><span id="local-6989586621679628823"><span class="annot"><span class="annottext">updatedDistr :: Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628823"><span class="hs-identifier hs-var hs-var">updatedDistr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin)
-&gt; DRep
-&gt; CompactForm Coin
-&gt; Map DRep (CompactForm Coin)
-&gt; Map DRep (CompactForm Coin)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insertWith</span></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621679628819"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628817"><span class="hs-identifier hs-var">stakeAndDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679628821"><span class="hs-identifier hs-var">balance</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628818"><span class="hs-identifier hs-var">distr</span></a></span><span>
</span><span id="line-239"></span><span>      </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin) -&gt; Maybe (Map DRep (CompactForm Coin))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Map DRep (CompactForm Coin)
 -&gt; Maybe (Map DRep (CompactForm Coin)))
-&gt; Map DRep (CompactForm Coin)
-&gt; Maybe (Map DRep (CompactForm Coin))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DRep
</span><a href="#local-6989586621679628819"><span class="hs-identifier hs-var">dRep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-240"></span><span>        </span><span class="annot"><span class="annottext">DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepAlwaysAbstain"><span class="hs-identifier hs-var">DRepAlwaysAbstain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628823"><span class="hs-identifier hs-var">updatedDistr</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span class="annot"><span class="annottext">DRep
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepAlwaysNoConfidence"><span class="hs-identifier hs-var">DRepAlwaysNoConfidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628823"><span class="hs-identifier hs-var">updatedDistr</span></a></span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepCredential"><span class="hs-identifier hs-type">DRepCredential</span></a></span><span> </span><span id="local-6989586621679628828"><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621679628828"><span class="hs-identifier hs-var">cred</span></a></span></span><span>
</span><span id="line-243"></span><span>          </span><span class="hs-comment">-- TODO: Potential optimization. Avoid this membership check, since delegation is</span><span>
</span><span id="line-244"></span><span>          </span><span class="hs-comment">-- guaranteed to exist. I believe it would also be safe for PV9, but we need to verify</span><span>
</span><span id="line-245"></span><span>          </span><span class="hs-comment">-- that it is in fact true due to #4772</span><span>
</span><span id="line-246"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
-&gt; Map (Credential 'DRepRole) DRepState -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.member</span></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole
</span><a href="#local-6989586621679628828"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628683"><span class="hs-identifier hs-var">regDReps</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628823"><span class="hs-identifier hs-var">updatedDistr</span></a></span><span>
</span><span id="line-247"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628818"><span class="hs-identifier hs-var">distr</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-comment">-- | The type of a Pulser which uses 'computeDRepDistr' as its underlying</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- function. Note that we use two type equality (~) constraints to fix both</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- the monad 'm' and the 'ans' type, to the context where we will use the</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- type as a Pulser. The type DRepPulser must have 'm' and 'ans' as its last</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- two parameters so we can make a Pulsable instance. We will always use this</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- instantiation (DRepPulser era Identity (RatifyState era))</span><span>
</span><span id="line-255"></span><span class="hs-keyword">data</span><span> </span><span id="DRepPulser"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-var">DRepPulser</span></a></span></span><span> </span><span id="local-6989586621679628830"><span class="annot"><a href="#local-6989586621679628830"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679628831"><span class="annot"><a href="#local-6989586621679628831"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679628832"><span class="annot"><a href="#local-6989586621679628832"><span class="hs-identifier hs-type">ans</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>  </span><span id="DRepPulser"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-var">DRepPulser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679627897"><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679627899"><span class="annot"><a href="#local-6989586621679627899"><span class="hs-identifier hs-type">ans</span></a></span></span><span> </span><span id="local-6989586621679627898"><span class="annot"><a href="#local-6989586621679627898"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679627899"><span class="hs-identifier hs-type">ans</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679627898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier hs-type">RunConwayRatify</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="dpPulseSize"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-identifier hs-var hs-var">dpPulseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ How many elements of 'dpAccounts' to consume each pulse.</span></span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpAccounts"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Accounts era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpAccounts"><span class="hs-identifier hs-var hs-var">dpAccounts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot containing the mapping of stake credentials to DReps, Pools and Rewards.</span></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpIndex"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpIndex"><span class="hs-identifier hs-var hs-var">dpIndex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The index of the iterator over `dpAccounts`. Grows with each pulse.</span></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpInstantStake"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; InstantStake era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpInstantStake"><span class="hs-identifier hs-var hs-var">dpInstantStake</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the stake distr (comes from the IncrementalStake)</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpStakePoolDistr"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; PoolDistr
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakePoolDistr"><span class="hs-identifier hs-var hs-var">dpStakePoolDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#PoolDistr"><span class="hs-identifier hs-type">PoolDistr</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the pool distr. Lazy on purpose: See `ssStakeMarkPoolDistr` and ADR-7</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">-- for explanation.</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpDRepDistr"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var hs-var">dpDRepDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ The partial result that grows with each pulse. The purpose of the pulsing.</span></span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpDRepState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (Credential 'DRepRole) DRepState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepState"><span class="hs-identifier hs-var hs-var">dpDRepState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRepState"><span class="hs-identifier hs-type">DRepState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of registered DRep credentials</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpCurrentEpoch"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCurrentEpoch"><span class="hs-identifier hs-var hs-var">dpCurrentEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-slotting-0.2.0.1-cbaa0d455a08b054bafb132b87b34221d87bbbacf98d60661b1ed3cfc20b13c4/share/doc/html/src/Cardano.Slotting.Slot.html#EpochNo"><span class="hs-identifier hs-type">EpochNo</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the EpochNo this pulser will complete in.</span></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpCommitteeState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCommitteeState"><span class="hs-identifier hs-var hs-var">dpCommitteeState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.CertState.html#CommitteeState"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the CommitteeState</span></span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpEnactState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpEnactState"><span class="hs-identifier hs-var hs-var">dpEnactState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#EnactState"><span class="hs-identifier hs-type">EnactState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the EnactState, Used to build the Env of the RATIFY rule</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpProposals"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposals"><span class="hs-identifier hs-var hs-var">dpProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/cardano-strict-containers-0.1.5.0-d2741b9ef9564f4a1a3151d17a0f69b9663f5795dd47dab0bbd6117738fcce96/share/doc/html/src/Data.Sequence.Strict.html#StrictSeq"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the proposals. This is the Signal for the RATIFY rule</span></span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpProposalDeposits"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposalDeposits"><span class="hs-identifier hs-var hs-var">dpProposalDeposits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Snapshot of the proposal-deposits per reward-account-staking-credential</span></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpGlobals"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpGlobals"><span class="hs-identifier hs-var hs-var">dpGlobals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Globals"><span class="hs-identifier hs-type">Globals</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpStakePools"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (KeyHash 'StakePool) StakePoolState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakePools"><span class="hs-identifier hs-var hs-var">dpStakePools</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.StakePool.html#StakePoolState"><span class="hs-identifier hs-type">StakePoolState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the parameters of stake pools -</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">--   this is needed to get the reward account for SPO vote calculation</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-289"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627897"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627898"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627899"><span class="hs-identifier hs-type">ans</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621679627944"><span id="local-6989586621679628896"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627944"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627944"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627944"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627944"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627944"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621679628908"><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628908"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679628909"><span class="annot"><span class="annottext">== :: DRepPulser era Identity (RatifyState era)
-&gt; DRepPulser era Identity (RatifyState era) -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679628910"><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628910"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628908"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628910"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679627961"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#Pulsable"><span class="hs-identifier hs-type">Pulsable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621679628921"><span class="annot"><span class="annottext">done :: forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; Bool
</span><a href="#local-6989586621679628921"><span class="hs-identifier hs-var hs-var hs-var hs-var">done</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679628929"><span class="annot"><span class="annottext">Accounts era
dpAccounts :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Accounts era
dpAccounts :: Accounts era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpAccounts"><span class="hs-identifier hs-var hs-var">dpAccounts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679628930"><span class="annot"><span class="annottext">Int
dpIndex :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
dpIndex :: Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpIndex"><span class="hs-identifier hs-var hs-var">dpIndex</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679628930"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (AccountState era) -&gt; Int
forall k a. Map k a -&gt; Int
</span><span class="hs-identifier hs-var">Map.size</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679628929"><span class="hs-identifier hs-var">dpAccounts</span></a></span><span> </span><span class="annot"><span class="annottext">Accounts era
-&gt; Getting
     (Map (Credential 'Staking) (AccountState era))
     (Accounts era)
     (Map (Credential 'Staking) (AccountState era))
-&gt; Map (Credential 'Staking) (AccountState era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'Staking) (AccountState era))
  (Accounts era)
  (Map (Credential 'Staking) (AccountState era))
forall era.
EraAccounts era =&gt;
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#accountsMapL"><span class="hs-identifier hs-var">accountsMapL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679628933"><span class="annot"><span class="annottext">current :: forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; ans
</span><a href="#local-6989586621679628933"><span class="hs-identifier hs-var hs-var hs-var hs-var">current</span></a></span></span><span> </span><span id="local-6989586621679628935"><span class="annot"><span class="annottext">x :: DRepPulser era m ans
</span><a href="#local-6989586621679628935"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, ans) -&gt; ans
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((PulsingSnapshot era, ans) -&gt; ans)
-&gt; (PulsingSnapshot era, ans) -&gt; ans
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628935"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>  </span><span id="local-6989586621679628947"><span class="annot"><span class="annottext">pulseM :: forall (m :: * -&gt; *) ans.
Monad m =&gt;
DRepPulser era m ans -&gt; m (DRepPulser era m ans)
</span><a href="#local-6989586621679628947"><span class="hs-identifier hs-var hs-var hs-var hs-var">pulseM</span></a></span></span><span> </span><span id="local-6989586621679628949"><span class="annot"><span class="annottext">pulser :: DRepPulser era m ans
</span><a href="#local-6989586621679628949"><span class="hs-identifier hs-var">pulser</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679628964"><span id="local-6989586621679628965"><span id="local-6989586621679628966"><span id="local-6989586621679628967"><span id="local-6989586621679628968"><span id="local-6989586621679628969"><span id="local-6989586621679628970"><span id="local-6989586621679628971"><span id="local-6989586621679628972"><span id="local-6989586621679628973"><span id="local-6989586621679628974"><span id="local-6989586621679628975"><span id="local-6989586621679628976"><span id="local-6989586621679628977"><span class="annot"><span class="annottext">Int
Map (KeyHash 'StakePool) StakePoolState
Map DRep (CompactForm Coin)
Map (Credential 'Staking) (CompactForm Coin)
Map (Credential 'DRepRole) DRepState
Accounts era
PoolDistr
CommitteeState era
InstantStake era
StrictSeq (GovActionState era)
EpochNo
Globals
EnactState era
dpPulseSize :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
dpAccounts :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Accounts era
dpIndex :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
dpInstantStake :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; InstantStake era
dpStakePoolDistr :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; PoolDistr
dpDRepDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map DRep (CompactForm Coin)
dpDRepState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (Credential 'DRepRole) DRepState
dpCurrentEpoch :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
dpCommitteeState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
dpEnactState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
dpProposals :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
dpProposalDeposits :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking) (CompactForm Coin)
dpGlobals :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
dpStakePools :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (KeyHash 'StakePool) StakePoolState
dpPulseSize :: Int
dpAccounts :: Accounts era
dpIndex :: Int
dpInstantStake :: InstantStake era
dpStakePoolDistr :: PoolDistr
dpDRepDistr :: Map DRep (CompactForm Coin)
dpDRepState :: Map (Credential 'DRepRole) DRepState
dpCurrentEpoch :: EpochNo
dpCommitteeState :: CommitteeState era
dpEnactState :: EnactState era
dpProposals :: StrictSeq (GovActionState era)
dpProposalDeposits :: Map (Credential 'Staking) (CompactForm Coin)
dpGlobals :: Globals
dpStakePools :: Map (KeyHash 'StakePool) StakePoolState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans -&gt; Bool
forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; Bool
forall (pulse :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) ans.
Pulsable pulse =&gt;
pulse m ans -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#done"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679628949"><span class="hs-identifier hs-var">pulser</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans -&gt; m (DRepPulser era m ans)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679628949"><span class="hs-identifier hs-var">pulser</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpIndex"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">}</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679628978"><span class="annot"><span class="annottext">chunk :: Map (Credential 'Staking) (AccountState era)
</span><a href="#local-6989586621679628978"><span class="hs-identifier hs-var hs-var">chunk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; Map (Credential 'Staking) (AccountState era)
forall k a. Int -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679628964"><span class="hs-identifier hs-var">dpPulseSize</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (Credential 'Staking) (AccountState era)
 -&gt; Map (Credential 'Staking) (AccountState era))
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; Map (Credential 'Staking) (AccountState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; Map (Credential 'Staking) (AccountState era)
forall k a. Int -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679628966"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679628965"><span class="hs-identifier hs-var">dpAccounts</span></a></span><span> </span><span class="annot"><span class="annottext">Accounts era
-&gt; Getting
     (Map (Credential 'Staking) (AccountState era))
     (Accounts era)
     (Map (Credential 'Staking) (AccountState era))
-&gt; Map (Credential 'Staking) (AccountState era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'Staking) (AccountState era))
  (Accounts era)
  (Map (Credential 'Staking) (AccountState era))
forall era.
EraAccounts era =&gt;
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#accountsMapL"><span class="hs-identifier hs-var">accountsMapL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679628981"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628981"><span class="hs-identifier hs-var">dRepDistr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679628982"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628982"><span class="hs-identifier hs-var">poolDistr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>              </span><span class="annot"><span class="annottext">InstantStake era
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; PoolDistr
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
InstantStake era
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; PoolDistr
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDRepDistr"><span class="hs-identifier hs-var">computeDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679628967"><span class="hs-identifier hs-var">dpInstantStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679628970"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679628975"><span class="hs-identifier hs-var">dpProposalDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679628968"><span class="hs-identifier hs-var">dpStakePoolDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679628969"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (AccountState era)
</span><a href="#local-6989586621679628978"><span class="hs-identifier hs-var">chunk</span></a></span><span>
</span><span id="line-308"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans -&gt; m (DRepPulser era m ans)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DRepPulser era m ans -&gt; m (DRepPulser era m ans))
-&gt; DRepPulser era m ans -&gt; m (DRepPulser era m ans)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-309"></span><span>              </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679628949"><span class="hs-identifier hs-var">pulser</span></a></span><span>
</span><span id="line-310"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpIndex"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628966"><span class="hs-identifier hs-type">dpIndex</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">+</span></span><span> </span><span class="annot"><a href="#local-6989586621679628964"><span class="hs-identifier hs-type">dpPulseSize</span></a></span><span>
</span><span id="line-311"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628981"><span class="hs-identifier hs-type">dRepDistr</span></a></span><span>
</span><span id="line-312"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakePoolDistr"><span class="hs-identifier hs-var">dpStakePoolDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679628982"><span class="hs-identifier hs-type">poolDistr</span></a></span><span>
</span><span id="line-313"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679628986"><span class="annot"><span class="annottext">completeM :: forall (m :: * -&gt; *) ans. Monad m =&gt; DRepPulser era m ans -&gt; m ans
</span><a href="#local-6989586621679628986"><span class="hs-identifier hs-var hs-var hs-var hs-var">completeM</span></a></span></span><span> </span><span id="local-6989586621679628988"><span class="annot"><span class="annottext">x :: DRepPulser era m ans
</span><a href="#local-6989586621679628988"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ans -&gt; m ans
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era) -&gt; RatifyState era
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((PulsingSnapshot era, RatifyState era) -&gt; RatifyState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; RatifyState era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679627961"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679628988"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span id="local-6989586621679627978"><span id="local-6989586621679627979"><span id="local-6989586621679627980"><span id="local-6989586621679629000"><span id="local-6989586621679629002"><span id="local-6989586621679629006"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679627979"><span class="hs-identifier hs-type">ans</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627978"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627980"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627979"><span class="hs-identifier hs-type">ans</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-322"></span><span>  </span><span id="local-6989586621679627982"><span id="local-6989586621679629013"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627982"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627982"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627982"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-323"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627982"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627982"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621679629018"><span class="annot"><span class="annottext">showTypeOf :: Proxy (DRepPulser era Identity (RatifyState era)) -&gt; String
</span><a href="#local-6989586621679629018"><span class="hs-identifier hs-var hs-var hs-var hs-var">showTypeOf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (DRepPulser era Identity (RatifyState era))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DRepPulser&quot;</span></span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621679629020"><span class="annot"><span class="annottext">wNoThunks :: Context
-&gt; DRepPulser era Identity (RatifyState era)
-&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679629020"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679629022"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679629023"><span class="annot"><span class="annottext">drp :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Accounts era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Globals
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#allNoThunks"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-328"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Int -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; Int
forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-identifier hs-var">dpPulseSize</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Accounts era -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; Accounts era
forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Accounts era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpAccounts"><span class="hs-identifier hs-var">dpAccounts</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Int -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; Int
forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpIndex"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; InstantStake era -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; InstantStake era
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; InstantStake era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpInstantStake"><span class="hs-identifier hs-var">dpInstantStake</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- dpStakePoolDistr is allowed to have thunks</span><span>
</span><span id="line-333"></span><span>        </span><span class="annot"><span class="annottext">Context -&gt; Map DRep (CompactForm Coin) -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; Map DRep (CompactForm Coin)
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context
-&gt; Map (Credential 'DRepRole) DRepState -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; Map (Credential 'DRepRole) DRepState
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (Credential 'DRepRole) DRepState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepState"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; EpochNo -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; EpochNo
forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCurrentEpoch"><span class="hs-identifier hs-var">dpCurrentEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; CommitteeState era -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; CommitteeState era
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCommitteeState"><span class="hs-identifier hs-var">dpCommitteeState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; EnactState era -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; EnactState era
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpEnactState"><span class="hs-identifier hs-var">dpEnactState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; StrictSeq (GovActionState era) -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; StrictSeq (GovActionState era)
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposals"><span class="hs-identifier hs-var">dpProposals</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; Map (Credential 'Staking) (CompactForm Coin)
forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposalDeposits"><span class="hs-identifier hs-var">dpProposalDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context -&gt; Globals -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; Globals
forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpGlobals"><span class="hs-identifier hs-var">dpGlobals</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Context
-&gt; Map (KeyHash 'StakePool) StakePoolState -&gt; IO (Maybe ThunkInfo)
forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#noThunks"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679629022"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; Map (KeyHash 'StakePool) StakePoolState
forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (KeyHash 'StakePool) StakePoolState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakePools"><span class="hs-identifier hs-var">dpStakePools</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629023"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621679627986"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627986"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627986"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627986"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-346"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627986"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627986"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-348"></span><span>  </span><span id="local-6989586621679629060"><span class="annot"><span class="annottext">rnf :: DRepPulser era Identity (RatifyState era) -&gt; ()
</span><a href="#local-6989586621679629060"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span id="local-6989586621679629094"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679629094"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679629095"><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679629095"><span class="hs-identifier hs-var">um</span></a></span></span><span> </span><span id="local-6989586621679629096"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679629096"><span class="hs-identifier hs-var">bal</span></a></span></span><span> </span><span id="local-6989586621679629097"><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679629097"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span id="local-6989586621679629098"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629098"><span class="hs-identifier hs-var">pool</span></a></span></span><span> </span><span id="local-6989586621679629099"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629099"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span id="local-6989586621679629100"><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679629100"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span id="local-6989586621679629101"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679629101"><span class="hs-identifier hs-var">ep</span></a></span></span><span> </span><span id="local-6989586621679629102"><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679629102"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679629103"><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679629103"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679629104"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629104"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621679629105"><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679629105"><span class="hs-identifier hs-var">pds</span></a></span></span><span> </span><span id="local-6989586621679629106"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679629106"><span class="hs-identifier hs-var">gs</span></a></span></span><span> </span><span id="local-6989586621679629107"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><a href="#local-6989586621679629107"><span class="hs-identifier hs-var">poolps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679629094"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-350"></span><span>      </span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679629095"><span class="hs-identifier hs-var">um</span></a></span><span> </span><span class="annot"><span class="annottext">Accounts era -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679629096"><span class="hs-identifier hs-var">bal</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-352"></span><span>          </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679629097"><span class="hs-identifier hs-var">stake</span></a></span><span> </span><span class="annot"><span class="annottext">InstantStake era -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-353"></span><span>            </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629098"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-354"></span><span>              </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629099"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin) -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-355"></span><span>                </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679629100"><span class="hs-identifier hs-var">dstate</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-356"></span><span>                  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679629101"><span class="hs-identifier hs-var">ep</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-357"></span><span>                    </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679629102"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">CommitteeState era -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-358"></span><span>                      </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679629103"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">EnactState era -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-359"></span><span>                        </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629104"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era) -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-360"></span><span>                          </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679629105"><span class="hs-identifier hs-var">pds</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin) -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-361"></span><span>                            </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679629106"><span class="hs-identifier hs-var">gs</span></a></span><span> </span><span class="annot"><span class="annottext">Globals -&gt; () -&gt; ()
forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`deepseq`</span></span><span>
</span><span id="line-362"></span><span>                              </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><span class="hs-identifier hs-var">rnf</span></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><a href="#local-6989586621679629107"><span class="hs-identifier hs-var">poolps</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-keyword">class</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#STS"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Signal"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#BaseM"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reader</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Globals"><span class="hs-identifier hs-type">Globals</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#Environment"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#PredicateFailure"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Void</span></span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-372"></span><span>  </span><span id="RunConwayRatify"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier hs-var">RunConwayRatify</span></a></span></span><span> </span><span id="local-6989586621679627991"><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-374"></span><span>  </span><span id="runConwayRatify"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-type">runConwayRatify</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.BaseTypes.html#Globals"><span class="hs-identifier hs-type">Globals</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621679629116"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-var hs-var">runConwayRatify</span></a></span><span> </span><span id="local-6989586621679629133"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679629133"><span class="hs-identifier hs-var">globals</span></a></span></span><span> </span><span id="local-6989586621679629134"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621679629134"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span> </span><span id="local-6989586621679629135"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629135"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span id="local-6989586621679629137"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629137"><span class="hs-identifier hs-var">ratifySig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679629138"><span class="annot"><span class="annottext">ratifyResult :: Either (NonEmpty Void) (RatifyState era)
</span><a href="#local-6989586621679629138"><span class="hs-identifier hs-var hs-var">ratifyResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-378"></span><span>          </span><span class="annot"><span class="annottext">Reader Globals (Either (NonEmpty Void) (RatifyState era))
-&gt; Globals -&gt; Either (NonEmpty Void) (RatifyState era)
forall r a. Reader r a -&gt; r -&gt; a
</span><span class="hs-identifier hs-var">runReader</span></span><span>
</span><span id="line-379"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) (rtype :: RuleType).
(STS s, RuleTypeRep rtype, m ~ BaseM s) =&gt;
RuleContext rtype s
-&gt; m (Either (NonEmpty (PredicateFailure s)) (State s))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#applySTS"><span class="hs-identifier hs-var">applySTS</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627991"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RuleContext 'Transition (ConwayRATIFY era)
 -&gt; ReaderT
      Globals
      Identity
      (Either
         (NonEmpty (PredicateFailure (ConwayRATIFY era)))
         (State (ConwayRATIFY era))))
-&gt; RuleContext 'Transition (ConwayRATIFY era)
-&gt; ReaderT
     Globals
     Identity
     (Either
        (NonEmpty (PredicateFailure (ConwayRATIFY era)))
        (State (ConwayRATIFY era)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-380"></span><span>                </span><span class="annot"><span class="annottext">(Environment (ConwayRATIFY era), State (ConwayRATIFY era),
 Signal (ConwayRATIFY era))
-&gt; TRC (ConwayRATIFY era)
forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/small-steps-1.1.2.0/doc/html/small-steps/src/Control.State.Transition.Extended.html#TRC"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment (ConwayRATIFY era)
RatifyEnv era
</span><a href="#local-6989586621679629134"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State (ConwayRATIFY era)
RatifyState era
</span><a href="#local-6989586621679629135"><span class="hs-identifier hs-var">ratifyState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era) -&gt; RatifySignal era
forall era. StrictSeq (GovActionState era) -&gt; RatifySignal era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-var">RatifySignal</span></a></span><span> </span><span class="annot"><span class="annottext">(StrictSeq (GovActionState era) -&gt; RatifySignal era)
-&gt; StrictSeq (GovActionState era) -&gt; RatifySignal era
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era) -&gt; StrictSeq (GovActionState era)
forall era.
StrictSeq (GovActionState era) -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reorderActions"><span class="hs-identifier hs-var">reorderActions</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629137"><span class="hs-identifier hs-var">ratifySig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>            </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679629133"><span class="hs-identifier hs-var">globals</span></a></span><span>
</span><span id="line-383"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (NonEmpty Void) (RatifyState era)
</span><a href="#local-6989586621679629138"><span class="hs-identifier hs-var">ratifyResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-384"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679629142"><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679629142"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; RatifyState era
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">Void
</span><a href="#local-6989586621679629142"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-385"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679629143"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629143"><span class="hs-identifier hs-var">ratifyState'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629143"><span class="hs-identifier hs-var">ratifyState'</span></a></span></span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span id="local-6989586621679627949"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-type">finishDRepPulser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627949"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627949"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-389"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627949"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627949"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627949"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-391"></span><span id="finishDRepPulser"><span class="annot"><span class="annottext">finishDRepPulser :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var hs-var">finishDRepPulser</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679629147"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629147"><span class="hs-identifier hs-var">snap</span></a></span></span><span> </span><span id="local-6989586621679629148"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629148"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629147"><span class="hs-identifier hs-var">snap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629148"><span class="hs-identifier hs-var">ratifyState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679629163"><span id="local-6989586621679629164"><span id="local-6989586621679629165"><span id="local-6989586621679629166"><span id="local-6989586621679629167"><span id="local-6989586621679629168"><span id="local-6989586621679629169"><span id="local-6989586621679629170"><span id="local-6989586621679629171"><span id="local-6989586621679629172"><span id="local-6989586621679629173"><span id="local-6989586621679629174"><span id="local-6989586621679629175"><span id="local-6989586621679629176"><span class="annot"><span class="annottext">Int
Map (KeyHash 'StakePool) StakePoolState
Map DRep (CompactForm Coin)
Map (Credential 'Staking) (CompactForm Coin)
Map (Credential 'DRepRole) DRepState
Accounts era
PoolDistr
CommitteeState era
InstantStake era
StrictSeq (GovActionState era)
EpochNo
Globals
EnactState era
dpPulseSize :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
dpAccounts :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Accounts era
dpIndex :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
dpInstantStake :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; InstantStake era
dpStakePoolDistr :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; PoolDistr
dpDRepDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map DRep (CompactForm Coin)
dpDRepState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (Credential 'DRepRole) DRepState
dpCurrentEpoch :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
dpCommitteeState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
dpEnactState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
dpProposals :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
dpProposalDeposits :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking) (CompactForm Coin)
dpGlobals :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
dpStakePools :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; Map (KeyHash 'StakePool) StakePoolState
dpPulseSize :: Int
dpAccounts :: Accounts era
dpIndex :: Int
dpInstantStake :: InstantStake era
dpStakePoolDistr :: PoolDistr
dpDRepDistr :: Map DRep (CompactForm Coin)
dpDRepState :: Map (Credential 'DRepRole) DRepState
dpCurrentEpoch :: EpochNo
dpCommitteeState :: CommitteeState era
dpEnactState :: EnactState era
dpProposals :: StrictSeq (GovActionState era)
dpProposalDeposits :: Map (Credential 'Staking) (CompactForm Coin)
dpGlobals :: Globals
dpStakePools :: Map (KeyHash 'StakePool) StakePoolState
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
forall era.
StrictSeq (GovActionState era)
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-394"></span><span>      </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629173"><span class="hs-identifier hs-var">dpProposals</span></a></span><span>
</span><span id="line-395"></span><span>      </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629177"><span class="hs-identifier hs-var">finalDRepDistr</span></a></span><span>
</span><span id="line-396"></span><span>      </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679629169"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IndividualPoolStake -&gt; CompactForm Coin)
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">IndividualPoolStake -&gt; CompactForm Coin
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#individualTotalPoolStake"><span class="hs-identifier hs-var">individualTotalPoolStake</span></a></span><span> </span><span class="annot"><span class="annottext">(Map (KeyHash 'StakePool) IndividualPoolStake
 -&gt; Map (KeyHash 'StakePool) (CompactForm Coin))
-&gt; Map (KeyHash 'StakePool) IndividualPoolStake
-&gt; Map (KeyHash 'StakePool) (CompactForm Coin)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr -&gt; Map (KeyHash 'StakePool) IndividualPoolStake
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.PoolDistr.html#unPoolDistr"><span class="hs-identifier hs-var">unPoolDistr</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629181"><span class="hs-identifier hs-var">finalStakePoolDistr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629182"><span class="hs-identifier hs-var">ratifyState'</span></a></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679629183"><span class="annot"><span class="annottext">leftOver :: Map (Credential 'Staking) (AccountState era)
</span><a href="#local-6989586621679629183"><span class="hs-identifier hs-var hs-var">leftOver</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; Map (Credential 'Staking) (AccountState era)
forall k a. Int -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679629165"><span class="hs-identifier hs-var">dpIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679629164"><span class="hs-identifier hs-var">dpAccounts</span></a></span><span> </span><span class="annot"><span class="annottext">Accounts era
-&gt; Getting
     (Map (Credential 'Staking) (AccountState era))
     (Accounts era)
     (Map (Credential 'Staking) (AccountState era))
-&gt; Map (Credential 'Staking) (AccountState era)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (Map (Credential 'Staking) (AccountState era))
  (Accounts era)
  (Map (Credential 'Staking) (AccountState era))
forall era.
EraAccounts era =&gt;
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
Lens' (Accounts era) (Map (Credential 'Staking) (AccountState era))
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#accountsMapL"><span class="hs-identifier hs-var">accountsMapL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679629177"><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629177"><span class="hs-identifier hs-var">finalDRepDistr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679629181"><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629181"><span class="hs-identifier hs-var">finalStakePoolDistr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-403"></span><span>      </span><span class="annot"><span class="annottext">InstantStake era
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; PoolDistr
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
InstantStake era
-&gt; Map (Credential 'DRepRole) DRepState
-&gt; Map (Credential 'Staking) (CompactForm Coin)
-&gt; PoolDistr
-&gt; Map DRep (CompactForm Coin)
-&gt; Map (Credential 'Staking) (AccountState era)
-&gt; (Map DRep (CompactForm Coin), PoolDistr)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDRepDistr"><span class="hs-identifier hs-var">computeDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679629166"><span class="hs-identifier hs-var">dpInstantStake</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679629169"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (CompactForm Coin)
</span><a href="#local-6989586621679629174"><span class="hs-identifier hs-var">dpProposalDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629167"><span class="hs-identifier hs-var">dpStakePoolDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629168"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking) (AccountState era)
</span><a href="#local-6989586621679629183"><span class="hs-identifier hs-var">leftOver</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679629184"><span class="annot"><span class="annottext">ratifyEnv :: RatifyEnv era
</span><a href="#local-6989586621679629184"><span class="hs-identifier hs-var hs-var">ratifyEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">reInstantStake :: InstantStake era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reInstantStake"><span class="hs-identifier hs-var">reInstantStake</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InstantStake era
</span><a href="#local-6989586621679629166"><span class="hs-identifier hs-var">dpInstantStake</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reStakePoolDistr :: PoolDistr
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reStakePoolDistr"><span class="hs-identifier hs-var">reStakePoolDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoolDistr
</span><a href="#local-6989586621679629181"><span class="hs-identifier hs-var">finalStakePoolDistr</span></a></span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepDistr :: Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reDRepDistr"><span class="hs-identifier hs-var">reDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629177"><span class="hs-identifier hs-var">finalDRepDistr</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepState :: Map (Credential 'DRepRole) DRepState
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reDRepState"><span class="hs-identifier hs-var">reDRepState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole) DRepState
</span><a href="#local-6989586621679629169"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span>
</span><span id="line-410"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCurrentEpoch :: EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reCurrentEpoch"><span class="hs-identifier hs-var">reCurrentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679629170"><span class="hs-identifier hs-var">dpCurrentEpoch</span></a></span><span>
</span><span id="line-411"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCommitteeState :: CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reCommitteeState"><span class="hs-identifier hs-var">reCommitteeState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679629171"><span class="hs-identifier hs-var">dpCommitteeState</span></a></span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reAccounts :: Accounts era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reAccounts"><span class="hs-identifier hs-var">reAccounts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Accounts era
</span><a href="#local-6989586621679629164"><span class="hs-identifier hs-var">dpAccounts</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reStakePools :: Map (KeyHash 'StakePool) StakePoolState
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reStakePools"><span class="hs-identifier hs-var">reStakePools</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool) StakePoolState
</span><a href="#local-6989586621679629176"><span class="hs-identifier hs-var">dpStakePools</span></a></span><span>
</span><span id="line-414"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679629194"><span class="annot"><span class="annottext">ratifySig :: RatifySignal era
</span><a href="#local-6989586621679629194"><span class="hs-identifier hs-var hs-var">ratifySig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era) -&gt; RatifySignal era
forall era. StrictSeq (GovActionState era) -&gt; RatifySignal era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-var">RatifySignal</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679629173"><span class="hs-identifier hs-var">dpProposals</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679629195"><span class="annot"><span class="annottext">ratifyState :: RatifyState era
</span><a href="#local-6989586621679629195"><span class="hs-identifier hs-var hs-var">ratifyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>      </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rsEnactState :: EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsEnactState"><span class="hs-identifier hs-var">rsEnactState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679629172"><span class="hs-identifier hs-var">dpEnactState</span></a></span><span>
</span><span id="line-419"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsEnacted :: Seq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsEnacted"><span class="hs-identifier hs-var">rsEnacted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (GovActionState era)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-420"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsExpired :: Set GovActionId
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsExpired"><span class="hs-identifier hs-var">rsExpired</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set GovActionId
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-421"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsDelayed :: Bool
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsDelayed"><span class="hs-identifier hs-var">rsDelayed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-422"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-423"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679629182"><span class="annot"><span class="annottext">ratifyState' :: RatifyState era
</span><a href="#local-6989586621679629182"><span class="hs-identifier hs-var hs-var">ratifyState'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Globals
-&gt; RatifyEnv era
-&gt; RatifyState era
-&gt; RatifySignal era
-&gt; RatifyState era
forall era.
RunConwayRatify era =&gt;
Globals
-&gt; RatifyEnv era
-&gt; RatifyState era
-&gt; RatifySignal era
-&gt; RatifyState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-var">runConwayRatify</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679629175"><span class="hs-identifier hs-var">dpGlobals</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621679629184"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629195"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">RatifySignal era
</span><a href="#local-6989586621679629194"><span class="hs-identifier hs-var">ratifySig</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- The State which is stored in ConwayGovState</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span class="hs-keyword">data</span><span> </span><span id="DRepPulsingState"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-var">DRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679627950"><span class="annot"><a href="#local-6989586621679627950"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DRPulsing"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627950"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DRComplete"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span></span><span>
</span><span id="line-432"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627950"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679627950"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679629202"><span id="local-6989586621679629204"><span class="annot"><span class="annottext">(forall x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x)
-&gt; (forall x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era)
-&gt; Generic (DRepPulsingState era)
forall x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
forall x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
forall era x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
$cfrom :: forall era x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
from :: forall x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
$cto :: forall era x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
to :: forall x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-437"></span><span>  </span><span id="local-6989586621679628033"><span id="local-6989586621679629210"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628033"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628033"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628033"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-438"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628033"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-441"></span><span>  </span><span id="local-6989586621679628044"><span id="local-6989586621679629235"><span id="local-6989586621679629239"><span id="local-6989586621679629245"><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628044"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#InstantStake"><span class="hs-identifier hs-type">InstantStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628044"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Account.html#Accounts"><span class="hs-identifier hs-type">Accounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628044"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/nothunks-0.2.1.1-0663c3283fb5dee9e67d41860072fab0227b6d69ef882303baddf309058f8618/share/doc/html/src/NoThunks.Class.html#NoThunks"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628044"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="hs-comment">-- | This is potentially an expensive getter. Make sure not to use it in the first 80% of</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- the epoch.</span><span>
</span><span id="line-446"></span><span id="local-6989586621679628045"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier hs-type">psDRepDistrG</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628045"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628045"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-448"></span><span>  </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.Type.html#SimpleGetter"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628045"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.DRep.html#DRep"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Compactible.html#CompactForm"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Coin.html#Coin"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-449"></span><span id="psDRepDistrG"><span class="annot"><span class="annottext">psDRepDistrG :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
SimpleGetter (DRepPulsingState era) (Map DRep (CompactForm Coin))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier hs-var hs-var">psDRepDistrG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DRepPulsingState era -&gt; Map DRep (CompactForm Coin))
-&gt; SimpleGetter
     (DRepPulsingState era) (Map DRep (CompactForm Coin))
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/microlens-0.4.13.1-71c999e1e9d35dc39dc696ab4bf56f0958d34c6f1e240362775e227e5e550787/share/doc/html/src/Lens.Micro.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; Map DRep (CompactForm Coin)
forall {era}.
(Assert
   (OrdCond
      (CmpNat (ProtVerLow era) (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerLow era)) 'True 'True 'False)
   (TypeError ...),
 Assert
   (OrdCond (CmpNat 0 (ProtVerHigh era)) 'True 'True 'False)
   (TypeError ...),
 EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629287"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621679629287"><span class="annot"><span class="annottext">get :: DRepPulsingState era -&gt; Map DRep (CompactForm Coin)
</span><a href="#local-6989586621679629287"><span class="hs-identifier hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679629426"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629426"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629426"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-452"></span><span>    </span><span class="annot"><a href="#local-6989586621679629287"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span id="local-6989586621679629427"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629427"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
forall era. PulsingSnapshot era -&gt; Map DRep (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; Map DRep (CompactForm Coin))
-&gt; ((PulsingSnapshot era, RatifyState era) -&gt; PulsingSnapshot era)
-&gt; (PulsingSnapshot era, RatifyState era)
-&gt; Map DRep (CompactForm Coin)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era) -&gt; PulsingSnapshot era
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((PulsingSnapshot era, RatifyState era)
 -&gt; Map DRep (CompactForm Coin))
-&gt; (PulsingSnapshot era, RatifyState era)
-&gt; Map DRep (CompactForm Coin)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629427"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679628058"><span id="local-6989586621679629435"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628058"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628058"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628058"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628058"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-455"></span><span>  </span><span id="local-6989586621679629445"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629445"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679629446"><span class="annot"><span class="annottext">== :: DRepPulsingState era -&gt; DRepPulsingState era -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679629447"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629447"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629445"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629447"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679628060"><span id="local-6989586621679629452"><span id="local-6989586621679629457"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628060"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628060"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628060"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628060"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-458"></span><span>  </span><span id="local-6989586621679629470"><span class="annot"><span class="annottext">show :: DRepPulsingState era -&gt; String
</span><a href="#local-6989586621679629470"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679629472"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629472"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679629473"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629473"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(DRComplete &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629472"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629473"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span id="local-6989586621679629474"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629474"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; DRepPulsingState era
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629474"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679628068"><span id="local-6989586621679629485"><span id="local-6989586621679629489"><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628068"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628068"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628068"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.EncCBOR.html#EncCBOR"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628068"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679629495"><span class="annot"><span class="annottext">encCBOR :: DRepPulsingState era -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.EncCBOR.html#encCBOR"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679629496"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629496"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679629497"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629497"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (DRepPulsingState era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode
     ('Closed 'Dense)
     (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era)
-&gt; Encode
     ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629496"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode ('Closed 'Dense) (RatifyState era)
-&gt; Encode ('Closed 'Dense) (DRepPulsingState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era -&gt; Encode ('Closed 'Dense) (RatifyState era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629497"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>  </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.EncCBOR.html#encCBOR"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span id="local-6989586621679629498"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679629498"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (DRepPulsingState era) -&gt; Encoding
forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#encode"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode
     ('Closed 'Dense)
     (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">Encode
  ('Closed 'Dense)
  (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era)
-&gt; Encode
     ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
-&gt; Encode ('Closed 'Dense) (PulsingSnapshot era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629506"><span class="hs-identifier hs-var">snap</span></a></span><span> </span><span class="annot"><span class="annottext">Encode ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
-&gt; Encode ('Closed 'Dense) (RatifyState era)
-&gt; Encode ('Closed 'Dense) (DRepPulsingState era)
forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#%21%3E"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era -&gt; Encode ('Closed 'Dense) (RatifyState era)
forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Encoding.Coders.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629507"><span class="hs-identifier hs-var">ratstate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679629506"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679629506"><span class="hs-identifier hs-var">snap</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679629507"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629507"><span class="hs-identifier hs-var">ratstate</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629498"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679628071"><span id="local-6989586621679629513"><span id="local-6989586621679629518"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628071"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#DecShareCBOR"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628071"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-469"></span><span>    </span><span id="Share"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Share"><span class="hs-identifier hs-var">Share</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628071"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-470"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#Staking"><span class="hs-identifier hs-type">Staking</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Hashes.html#KeyHash"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#StakePool"><span class="hs-identifier hs-type">StakePool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#DRepRole"><span class="hs-identifier hs-type">DRepRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#Interns"><span class="hs-identifier hs-type">Interns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Credential.html#Credential"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Keys.Internal.html#HotCommitteeRole"><span class="hs-identifier hs-type">HotCommitteeRole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>  </span><span id="local-6989586621679629532"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (DRepPulsingState era) -&gt; Decoder s (DRepPulsingState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></a></span></span><span> </span><span id="local-6989586621679629533"><span class="annot"><span class="annottext">Share (DRepPulsingState era)
</span><a href="#local-6989586621679629533"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (DRepPulsingState era)
-&gt; Decoder s (DRepPulsingState era)
forall t (w :: Wrapped) s. Typeable t =&gt; Decode w t -&gt; Decoder s t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">(Decode ('Closed 'Dense) (DRepPulsingState era)
 -&gt; Decoder s (DRepPulsingState era))
-&gt; Decode ('Closed 'Dense) (DRepPulsingState era)
-&gt; Decoder s (DRepPulsingState era)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-477"></span><span>      </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode
     ('Closed 'Dense)
     (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#RecD"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode ('Closed 'Dense) (PulsingSnapshot era)
-&gt; Decode
     ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (PulsingSnapshot era))
-&gt; Decode ('Closed 'Dense) (PulsingSnapshot era)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share (PulsingSnapshot era) -&gt; Decoder s (PulsingSnapshot era)
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s.
Share (PulsingSnapshot era) -&gt; Decoder s (PulsingSnapshot era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var">decShareCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Share (DRepPulsingState era)
Share (PulsingSnapshot era)
</span><a href="#local-6989586621679629533"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode ('Closed 'Dense) (RatifyState era)
-&gt; Decode ('Closed 'Dense) (DRepPulsingState era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s (RatifyState era))
-&gt; Decode ('Closed 'Dense) (RatifyState era)
forall t. (forall s. Decoder s t) -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#D"><span class="hs-identifier hs-var">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Share (RatifyState era) -&gt; Decoder s (RatifyState era)
forall a s. DecShareCBOR a =&gt; Share a -&gt; Decoder s a
forall s. Share (RatifyState era) -&gt; Decoder s (RatifyState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Sharing.html#decShareCBOR"><span class="hs-identifier hs-var">decShareCBOR</span></a></span><span> </span><span class="annot"><span class="annottext">Share (RatifyState era)
Share (DRepPulsingState era)
</span><a href="#local-6989586621679629533"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679628077"><span id="local-6989586621679629544"><span id="local-6989586621679629548"><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.Core.PParams.html#EraPParams"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628077"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#DecCBOR"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628077"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-482"></span><span>  </span><span id="local-6989586621679629560"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (DRepPulsingState era)
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.DecCBOR.html#decCBOR"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (DRepPulsingState era)
-&gt; Decoder s (DRepPulsingState era)
forall t (w :: Wrapped) s. Typeable t =&gt; Decode w t -&gt; Decoder s t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode
     ('Closed 'Dense)
     (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#RecD"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">Decode
  ('Closed 'Dense)
  (PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode ('Closed Any) (PulsingSnapshot era)
-&gt; Decode
     ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (PulsingSnapshot era)
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed 'Dense) (RatifyState era -&gt; DRepPulsingState era)
-&gt; Decode ('Closed Any) (RatifyState era)
-&gt; Decode ('Closed 'Dense) (DRepPulsingState era)
forall a (w1 :: Wrapped) t (w :: Density).
Typeable a =&gt;
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#%3C%21"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">Decode ('Closed Any) (RatifyState era)
forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-binary-1.7.0.1/doc/html/cardano-ledger-binary/src/Cardano.Ledger.Binary.Decoding.Coders.html#From"><span class="hs-identifier hs-var">From</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="hs-comment">-- =====================================</span><span>
</span><span id="line-485"></span><span class="hs-comment">-- High level operations of DRepDistr</span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span id="local-6989586621679628081"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-type">pulseDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628081"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-489"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628081"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-490"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628081"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-491"></span><span id="pulseDRepPulsingState"><span class="annot"><span class="annottext">pulseDRepPulsingState :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-var hs-var">pulseDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679629564"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679629564"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629564"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-492"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-var">pulseDRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span id="local-6989586621679629565"><span class="annot"><span class="annottext">x :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629565"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679629573"><span class="annot"><span class="annottext">x2 :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629573"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
-&gt; DRepPulser era Identity (RatifyState era)
forall (p :: (* -&gt; *) -&gt; * -&gt; *) ans.
Pulsable p =&gt;
p Identity ans -&gt; p Identity ans
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#pulse"><span class="hs-identifier hs-var">pulse</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629565"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-494"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; Bool
forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; Bool
forall (pulse :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) ans.
Pulsable pulse =&gt;
pulse m ans -&gt; Bool
</span><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-data-1.2.4.1/doc/html/cardano-data/src/Data.Pulse.html#done"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629573"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-495"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; DRepPulsingState era
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629573"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679629573"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span id="local-6989586621679629574"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-type">completeDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679629574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679629574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679629574"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-501"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679629574"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-502"></span><span id="completeDRepPulsingState"><span class="annot"><span class="annottext">completeDRepPulsingState :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-var hs-var">completeDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679629579"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679629579"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era)
-&gt; (PulsingSnapshot era, RatifyState era) -&gt; DRepPulsingState era
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629579"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-var">completeDRepPulsingState</span></a></span><span> </span><span id="local-6989586621679629580"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679629580"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629580"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span id="local-6989586621679628086"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-type">extractDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.6.7/cardano-ledger-core-1.19.0.0/doc/html/cardano-ledger-core/src/Cardano.Ledger.State.Stake.html#EraStake"><span class="hs-identifier hs-type">EraStake</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.State.Account.html#ConwayEraAccounts"><span class="hs-identifier hs-type">ConwayEraAccounts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628086"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-507"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628086"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679628086"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-509"></span><span id="extractDRepPulsingState"><span class="annot"><span class="annottext">extractDRepPulsingState :: forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; RatifyState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-var hs-var">extractDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679629585"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679629585"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PulsingSnapshot era, RatifyState era) -&gt; RatifyState era
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
forall era.
(EraStake era, ConwayEraAccounts era) =&gt;
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679629585"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-var">extractDRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679629586"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629586"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679629586"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-511"></span></pre></body></html>