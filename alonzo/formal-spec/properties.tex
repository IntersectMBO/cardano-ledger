\section{Formal Properties}
\label{sec:properties}

This appendix collects the main formal properties that the new ledger rules are expected to satisfy.

\begin{enumerate}[label=P{\arabic*}:\ ]
\item
  \emph{Consistency with Shelley.}
  All formal properties that were defined for Shelley in \ref{XX} remain valid.\todo{Confirm this, or list any exceptions.}
\item
  \emph{Consistency with Multi-Asset.}
  All formal properties that were defined for multi-asset tokens in \ref{XX} also remain valid.\todo{Confirm this, or list any exceptions.}
\item
  \emph{Ada Consistency.}
  Any token with the $\PolicyID$ of Ada is an Ada token, i.e. it
  also has the $\AssetID$ of Ada.
\item
  \emph{General Accounting.}
  The \emph{general accounting} property\todo{Reference or explain this} holds for any transaction,
  whether it is fully processed or just paying fees. In particular,
  this implies that the total amount of Ada in the system is constant.
\item
  \emph{Fee Movement.}
  If a transaction is accepted and marked as paying fees only
  (i.e. $\fun{txvaltag}\, tx = \False$), then the only change to the ledger
  when processing the transaction is that the inputs marked for paying
  fees are moved to the fee pot.
\item
  \emph{Transaction Validation.}
  If a Shelley transaction is accepted, it is fully processed.\todo{What does this mean? Is this: Transaction consistency - any transaction that is successfully validated can be executed successfully by the interpreter.}
\item
  \emph{Extended UTxO Validation.}
  If a transaction extends the UTxO, all its scripts validate, and
  if it has a script that does not validate, it cannot extend the
  UTxO.
\item
  \emph{Non-Token Minting.}
  A valid transaction that does not mint tokens satisfies the
  accounting property of the Shelley ledger where the type $\Coin$ is
  replaced by $\Value$.
\item
  \todo{\emph{Script consistency.} Scripts are only processed by valid version of the interpreter.}
\item
  \todo{\emph{Backwards compatibility.} All scripts that could be processed by any previous version of the interpreter
    remain valid indefinitely.}
\item
  \todo{\emph{Cost consistency.} - no transaction exceeds the specified resource bounds.}
\item
  \emph{Cost Increase.} if a transaction is valid, it will remain valid if you increase the execution units
\item
  \emph{Cost Lower Bound.} if a transaction contains at least one valid script, it must have at least one execution unit
\item
  \todo{\emph{Backwards Compatibility.} Any transaction that was accepted in a previous version of the ledger rules
    has exactly the same cost and effect, except that the transaction output is extended.}
\item \emph{UTxO-changing transitions.} Only the UTXOS transition affects the ledger UTxO in Alonzo.
For Shelley/ShelleyMA, only the UTXO transition does.
\item \emph{Run all scripts.} All scripts attached to a transaction are run
\item \emph{Scripts are run on correct inputs.}
  A script is run for everything witnessed with a non-native script, and the script will
get all the correct inputs, which must be present.
\item \emph{Determinism of script validation.} In an otherwise valid transaction which remains valid
  despite ledger state changes, the outcome
  of script validation is not affected by these ledger state changes.
\item \emph{Script inputs are fixed.} All data that a non-native script gets as input
is fixed either by being signed in a transaction, or fixed by its hash living on the ledger
\item
  ... \todo{Anything else?}
\end{enumerate}
