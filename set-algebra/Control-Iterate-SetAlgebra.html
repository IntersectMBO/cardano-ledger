<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Control.Iterate.SetAlgebra</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">set-algebra-1.1.0.4: Set Algebra</span><ul class="links" id="page-menu"><li><a href="src/Control.Iterate.SetAlgebra.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Control.Iterate.SetAlgebra</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Supports writing 'Set algebra' expressions, using overloaded set operations, that can
   be applied to a variety of Basic types (Set, List, Map, etc). Also supports
   a mechanism to evaluate them efficiently, choosing datatype specific algorithms.
   This mechanism uses run-time rewrite rules to get the best algorithm. If there are
   no rewrite rules for a specific expression, falls back to a less efficient generic algorithm.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:compile">compile</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; (<a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v, <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v)</li><li class="src short"><a href="#v:compileSubterm">compileSubterm</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> a &#8594; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; <a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v</li><li class="src short"><a href="#v:run">run</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; (<a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v, <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v) &#8594; f k v</li><li class="src short"><a href="#v:testing">testing</a> &#8759; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:runBoolExp">runBoolExp</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:runSetExp">runSetExp</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; f k v</li><li class="src short"><a href="#v:runSet">runSet</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; f k v</li><li class="src short"><a href="#v:runBool">runBool</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:sameDomain">sameDomain</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:compute">compute</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; t</li><li class="src short"><a href="#v:eval">eval</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Embed" title="Control.Iterate.BaseTypes">Embed</a> s t &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; s</li><li class="src short"><a href="#v:computeSlow">computeSlow</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; t</li><li class="src short"><a href="#v:lifo">lifo</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f &#8658; f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v)</li><li class="src short"><a href="#v:fifo">fifo</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f &#8658; f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v)</li><li class="src short"><a href="#v:addp">addp</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Basic" title="Control.Iterate.BaseTypes">Basic</a> f) &#8658; (v &#8594; v &#8594; v) &#8594; (k, v) &#8594; f k v &#8594; f k v</li><li class="src short"><a href="#v:fromList">fromList</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v &#8594; (v &#8594; v &#8594; v) &#8594; [(k, v)] &#8594; f k v</li><li class="src short"><a href="#v:materialize">materialize</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v) &#8594; f k v</li><li class="src short"><a href="#v:-10781-">(&#10781;)</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c)</li><li class="src short"><a href="#v:domEq">domEq</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c)</li><li class="src short"><a href="#v:domEqSlow">domEqSlow</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:compile" class="def">compile</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; (<a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v, <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v) <a href="src/Control.Iterate.SetAlgebra.html#compile" class="link">Source</a> <a href="#v:compile" class="selflink">#</a></p><div class="doc"><p>Compile the (Exp (f k v)) to a Query iterator, and a BaseRep that indicates
   how to materialize the iterator to the correct type. Recall the iterator
   can be used to constuct many things using runCollect, but here we want
   to materialize it to the same type as the (Exp (f k v)), i.e. (f k v).</p></div></div><div class="top"><p class="src"><a id="v:compileSubterm" class="def">compileSubterm</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> a &#8594; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; <a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v <a href="src/Control.Iterate.SetAlgebra.html#compileSubterm" class="link">Source</a> <a href="#v:compileSubterm" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:run" class="def">run</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; (<a href="Control-Iterate-Exp.html#t:Query" title="Control.Iterate.Exp">Query</a> k v, <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v) &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#run" class="link">Source</a> <a href="#v:run" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:testing" class="def">testing</a> &#8759; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Iterate.SetAlgebra.html#testing" class="link">Source</a> <a href="#v:testing" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runBoolExp" class="def">runBoolExp</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Iterate.SetAlgebra.html#runBoolExp" class="link">Source</a> <a href="#v:runBoolExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runSetExp" class="def">runSetExp</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#runSetExp" class="link">Source</a> <a href="#v:runSetExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runSet" class="def">runSet</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> (f k v) &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#runSet" class="link">Source</a> <a href="#v:runSet" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runBool" class="def">runBool</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Iterate.SetAlgebra.html#runBool" class="link">Source</a> <a href="#v:runBool" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sameDomain" class="def">sameDomain</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="../base/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Control.Iterate.SetAlgebra.html#sameDomain" class="link">Source</a> <a href="#v:sameDomain" class="selflink">#</a></p><div class="doc"><p>cost O(min (size m) (size n) * log(max (size m) (size n))), BUT the constants are high, too slow except for small maps.</p></div></div><div class="top"><p class="src"><a id="v:compute" class="def">compute</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; t <a href="src/Control.Iterate.SetAlgebra.html#compute" class="link">Source</a> <a href="#v:compute" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:eval" class="def">eval</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Embed" title="Control.Iterate.BaseTypes">Embed</a> s t &#8658; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; s <a href="src/Control.Iterate.SetAlgebra.html#eval" class="link">Source</a> <a href="#v:eval" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:computeSlow" class="def">computeSlow</a> &#8759; <a href="Control-Iterate-Exp.html#t:Exp" title="Control.Iterate.Exp">Exp</a> t &#8594; t <a href="src/Control.Iterate.SetAlgebra.html#computeSlow" class="link">Source</a> <a href="#v:computeSlow" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lifo" class="def">lifo</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f &#8658; f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v) <a href="src/Control.Iterate.SetAlgebra.html#lifo" class="link">Source</a> <a href="#v:lifo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fifo" class="def">fifo</a> &#8759; <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f &#8658; f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v) <a href="src/Control.Iterate.SetAlgebra.html#fifo" class="link">Source</a> <a href="#v:fifo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addp" class="def">addp</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Basic" title="Control.Iterate.BaseTypes">Basic</a> f) &#8658; (v &#8594; v &#8594; v) &#8594; (k, v) &#8594; f k v &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#addp" class="link">Source</a> <a href="#v:addp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v &#8594; (v &#8594; v &#8594; v) &#8594; [(k, v)] &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#fromList" class="link">Source</a> <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Turn a list of pairs into any <code><a href="Control-Iterate-BaseTypes.html#t:Basic" title="Control.Iterate.BaseTypes">Basic</a></code> type. The first argument is a <code><a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a></code> which
   chooses what Base type to construct.
 The combine function comb = (\ earlier later -&gt; later) will let values
 later in the list override ones earlier in the list, and comb =
 (\ earlier later -&gt; earlier) will keep the value that appears first in the list</p></div></div><div class="top"><p class="src"><a id="v:materialize" class="def">materialize</a> &#8759; <a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k &#8658; <a href="Control-Iterate-BaseTypes.html#t:BaseRep" title="Control.Iterate.BaseTypes">BaseRep</a> f k v &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, v) &#8594; f k v <a href="src/Control.Iterate.SetAlgebra.html#materialize" class="link">Source</a> <a href="#v:materialize" class="selflink">#</a></p><div class="doc"><p>A witness (BaseRep) can be used to materialize a (Collect k v) into the type witnessed by the BaseRep.
 Recall a (Collect k v) has no intrinsic type (it is just an ABSTRACT sequence of tuples), so
 the witness describes how to turn them into the chosen datatype. Note that materialize is meant
 to be applied to a collection built by iterating over a Query. This produces the keys in
 ascending order, with no duplicate keys. So we do not need to specify how to merge duplicate values.</p></div></div><div class="top"><p class="src"><a id="v:-10781-" class="def">(&#10781;)</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c) <a href="src/Control.Iterate.SetAlgebra.html#%2A1D" class="link">Source</a> <a href="#v:-10781-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:domEq" class="def">domEq</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c) <a href="src/Control.Iterate.SetAlgebra.html#domEq" class="link">Source</a> <a href="#v:domEq" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:domEqSlow" class="def">domEqSlow</a> &#8759; (<a href="../base/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> f, <a href="Control-Iterate-BaseTypes.html#t:Iter" title="Control.Iterate.BaseTypes">Iter</a> g) &#8658; f k b &#8594; g k c &#8594; <a href="Control-Iterate-Collect.html#t:Collect" title="Control.Iterate.Collect">Collect</a> (k, b, c) <a href="src/Control.Iterate.SetAlgebra.html#domEqSlow" class="link">Source</a> <a href="#v:domEqSlow" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>